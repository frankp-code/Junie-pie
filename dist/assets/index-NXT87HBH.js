var PC=Object.defineProperty;var CC=(e,t,n)=>t in e?PC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ht=(e,t,n)=>CC(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();var X1={exports:{}},Hh={},J1={exports:{}},st={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ul=Symbol.for("react.element"),RC=Symbol.for("react.portal"),DC=Symbol.for("react.fragment"),MC=Symbol.for("react.strict_mode"),VC=Symbol.for("react.profiler"),NC=Symbol.for("react.provider"),OC=Symbol.for("react.context"),LC=Symbol.for("react.forward_ref"),FC=Symbol.for("react.suspense"),jC=Symbol.for("react.memo"),BC=Symbol.for("react.lazy"),Uv=Symbol.iterator;function UC(e){return e===null||typeof e!="object"?null:(e=Uv&&e[Uv]||e["@@iterator"],typeof e=="function"?e:null)}var Z1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},tE=Object.assign,eE={};function ko(e,t,n){this.props=e,this.context=t,this.refs=eE,this.updater=n||Z1}ko.prototype.isReactComponent={};ko.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ko.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function nE(){}nE.prototype=ko.prototype;function cg(e,t,n){this.props=e,this.context=t,this.refs=eE,this.updater=n||Z1}var ug=cg.prototype=new nE;ug.constructor=cg;tE(ug,ko.prototype);ug.isPureReactComponent=!0;var zv=Array.isArray,iE=Object.prototype.hasOwnProperty,hg={current:null},sE={key:!0,ref:!0,__self:!0,__source:!0};function rE(e,t,n){var i,s={},r=null,o=null;if(t!=null)for(i in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(r=""+t.key),t)iE.call(t,i)&&!sE.hasOwnProperty(i)&&(s[i]=t[i]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(e&&e.defaultProps)for(i in a=e.defaultProps,a)s[i]===void 0&&(s[i]=a[i]);return{$$typeof:Ul,type:e,key:r,ref:o,props:s,_owner:hg.current}}function zC(e,t){return{$$typeof:Ul,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function dg(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ul}function $C(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var $v=/\/+/g;function ef(e,t){return typeof e=="object"&&e!==null&&e.key!=null?$C(""+e.key):t.toString(36)}function lu(e,t,n,i,s){var r=typeof e;(r==="undefined"||r==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(r){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Ul:case RC:o=!0}}if(o)return o=e,s=s(o),e=i===""?"."+ef(o,0):i,zv(s)?(n="",e!=null&&(n=e.replace($v,"$&/")+"/"),lu(s,t,n,"",function(c){return c})):s!=null&&(dg(s)&&(s=zC(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace($v,"$&/")+"/")+e)),t.push(s)),1;if(o=0,i=i===""?".":i+":",zv(e))for(var a=0;a<e.length;a++){r=e[a];var l=i+ef(r,a);o+=lu(r,t,n,l,s)}else if(l=UC(e),typeof l=="function")for(e=l.call(e),a=0;!(r=e.next()).done;)r=r.value,l=i+ef(r,a++),o+=lu(r,t,n,l,s);else if(r==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function wc(e,t,n){if(e==null)return e;var i=[],s=0;return lu(e,i,"","",function(r){return t.call(n,r,s++)}),i}function HC(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var De={current:null},cu={transition:null},WC={ReactCurrentDispatcher:De,ReactCurrentBatchConfig:cu,ReactCurrentOwner:hg};function oE(){throw Error("act(...) is not supported in production builds of React.")}st.Children={map:wc,forEach:function(e,t,n){wc(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return wc(e,function(){t++}),t},toArray:function(e){return wc(e,function(t){return t})||[]},only:function(e){if(!dg(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};st.Component=ko;st.Fragment=DC;st.Profiler=VC;st.PureComponent=cg;st.StrictMode=MC;st.Suspense=FC;st.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WC;st.act=oE;st.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=tE({},e.props),s=e.key,r=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(r=t.ref,o=hg.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)iE.call(t,l)&&!sE.hasOwnProperty(l)&&(i[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:Ul,type:e.type,key:s,ref:r,props:i,_owner:o}};st.createContext=function(e){return e={$$typeof:OC,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:NC,_context:e},e.Consumer=e};st.createElement=rE;st.createFactory=function(e){var t=rE.bind(null,e);return t.type=e,t};st.createRef=function(){return{current:null}};st.forwardRef=function(e){return{$$typeof:LC,render:e}};st.isValidElement=dg;st.lazy=function(e){return{$$typeof:BC,_payload:{_status:-1,_result:e},_init:HC}};st.memo=function(e,t){return{$$typeof:jC,type:e,compare:t===void 0?null:t}};st.startTransition=function(e){var t=cu.transition;cu.transition={};try{e()}finally{cu.transition=t}};st.unstable_act=oE;st.useCallback=function(e,t){return De.current.useCallback(e,t)};st.useContext=function(e){return De.current.useContext(e)};st.useDebugValue=function(){};st.useDeferredValue=function(e){return De.current.useDeferredValue(e)};st.useEffect=function(e,t){return De.current.useEffect(e,t)};st.useId=function(){return De.current.useId()};st.useImperativeHandle=function(e,t,n){return De.current.useImperativeHandle(e,t,n)};st.useInsertionEffect=function(e,t){return De.current.useInsertionEffect(e,t)};st.useLayoutEffect=function(e,t){return De.current.useLayoutEffect(e,t)};st.useMemo=function(e,t){return De.current.useMemo(e,t)};st.useReducer=function(e,t,n){return De.current.useReducer(e,t,n)};st.useRef=function(e){return De.current.useRef(e)};st.useState=function(e){return De.current.useState(e)};st.useSyncExternalStore=function(e,t,n){return De.current.useSyncExternalStore(e,t,n)};st.useTransition=function(){return De.current.useTransition()};st.version="18.3.1";J1.exports=st;var j=J1.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qC=j,KC=Symbol.for("react.element"),GC=Symbol.for("react.fragment"),QC=Object.prototype.hasOwnProperty,YC=qC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,XC={key:!0,ref:!0,__self:!0,__source:!0};function aE(e,t,n){var i,s={},r=null,o=null;n!==void 0&&(r=""+n),t.key!==void 0&&(r=""+t.key),t.ref!==void 0&&(o=t.ref);for(i in t)QC.call(t,i)&&!XC.hasOwnProperty(i)&&(s[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)s[i]===void 0&&(s[i]=t[i]);return{$$typeof:KC,type:e,key:r,ref:o,props:s,_owner:YC.current}}Hh.Fragment=GC;Hh.jsx=aE;Hh.jsxs=aE;X1.exports=Hh;var R=X1.exports,lE={exports:{}},Je={},cE={exports:{}},uE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(U,H){var K=U.length;U.push(H);t:for(;0<K;){var rt=K-1>>>1,vt=U[rt];if(0<s(vt,H))U[rt]=H,U[K]=vt,K=rt;else break t}}function n(U){return U.length===0?null:U[0]}function i(U){if(U.length===0)return null;var H=U[0],K=U.pop();if(K!==H){U[0]=K;t:for(var rt=0,vt=U.length,He=vt>>>1;rt<He;){var $t=2*(rt+1)-1,We=U[$t],Qt=$t+1,xi=U[Qt];if(0>s(We,K))Qt<vt&&0>s(xi,We)?(U[rt]=xi,U[Qt]=K,rt=Qt):(U[rt]=We,U[$t]=K,rt=$t);else if(Qt<vt&&0>s(xi,K))U[rt]=xi,U[Qt]=K,rt=Qt;else break t}}return H}function s(U,H){var K=U.sortIndex-H.sortIndex;return K!==0?K:U.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;e.unstable_now=function(){return r.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,d=null,f=3,m=!1,v=!1,x=!1,E=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(U){for(var H=n(c);H!==null;){if(H.callback===null)i(c);else if(H.startTime<=U)i(c),H.sortIndex=H.expirationTime,t(l,H);else break;H=n(c)}}function D(U){if(x=!1,S(U),!v)if(n(l)!==null)v=!0,ut(M);else{var H=n(c);H!==null&&et(D,H.startTime-U)}}function M(U,H){v=!1,x&&(x=!1,y(_),_=-1),m=!0;var K=f;try{for(S(H),d=n(l);d!==null&&(!(d.expirationTime>H)||U&&!P());){var rt=d.callback;if(typeof rt=="function"){d.callback=null,f=d.priorityLevel;var vt=rt(d.expirationTime<=H);H=e.unstable_now(),typeof vt=="function"?d.callback=vt:d===n(l)&&i(l),S(H)}else i(l);d=n(l)}if(d!==null)var He=!0;else{var $t=n(c);$t!==null&&et(D,$t.startTime-H),He=!1}return He}finally{d=null,f=K,m=!1}}var V=!1,T=null,_=-1,A=5,b=-1;function P(){return!(e.unstable_now()-b<A)}function C(){if(T!==null){var U=e.unstable_now();b=U;var H=!0;try{H=T(!0,U)}finally{H?k():(V=!1,T=null)}}else V=!1}var k;if(typeof w=="function")k=function(){w(C)};else if(typeof MessageChannel<"u"){var it=new MessageChannel,Y=it.port2;it.port1.onmessage=C,k=function(){Y.postMessage(null)}}else k=function(){E(C,0)};function ut(U){T=U,V||(V=!0,k())}function et(U,H){_=E(function(){U(e.unstable_now())},H)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(U){U.callback=null},e.unstable_continueExecution=function(){v||m||(v=!0,ut(M))},e.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<U?Math.floor(1e3/U):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(U){switch(f){case 1:case 2:case 3:var H=3;break;default:H=f}var K=f;f=H;try{return U()}finally{f=K}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(U,H){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var K=f;f=U;try{return H()}finally{f=K}},e.unstable_scheduleCallback=function(U,H,K){var rt=e.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?rt+K:rt):K=rt,U){case 1:var vt=-1;break;case 2:vt=250;break;case 5:vt=1073741823;break;case 4:vt=1e4;break;default:vt=5e3}return vt=K+vt,U={id:h++,callback:H,priorityLevel:U,startTime:K,expirationTime:vt,sortIndex:-1},K>rt?(U.sortIndex=K,t(c,U),n(l)===null&&U===n(c)&&(x?(y(_),_=-1):x=!0,et(D,K-rt))):(U.sortIndex=vt,t(l,U),v||m||(v=!0,ut(M))),U},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(U){var H=f;return function(){var K=f;f=H;try{return U.apply(this,arguments)}finally{f=K}}}})(uE);cE.exports=uE;var JC=cE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZC=j,Xe=JC;function B(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var hE=new Set,il={};function fr(e,t){lo(e,t),lo(e+"Capture",t)}function lo(e,t){for(il[e]=t,e=0;e<t.length;e++)hE.add(t[e])}var ci=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),gp=Object.prototype.hasOwnProperty,tR=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Hv={},Wv={};function eR(e){return gp.call(Wv,e)?!0:gp.call(Hv,e)?!1:tR.test(e)?Wv[e]=!0:(Hv[e]=!0,!1)}function nR(e,t,n,i){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function iR(e,t,n,i){if(t===null||typeof t>"u"||nR(e,t,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Me(e,t,n,i,s,r,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=r,this.removeEmptyString=o}var he={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){he[e]=new Me(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];he[t]=new Me(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){he[e]=new Me(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){he[e]=new Me(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){he[e]=new Me(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){he[e]=new Me(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){he[e]=new Me(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){he[e]=new Me(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){he[e]=new Me(e,5,!1,e.toLowerCase(),null,!1,!1)});var fg=/[\-:]([a-z])/g;function pg(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(fg,pg);he[t]=new Me(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(fg,pg);he[t]=new Me(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(fg,pg);he[t]=new Me(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){he[e]=new Me(e,1,!1,e.toLowerCase(),null,!1,!1)});he.xlinkHref=new Me("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){he[e]=new Me(e,1,!1,e.toLowerCase(),null,!0,!0)});function mg(e,t,n,i){var s=he.hasOwnProperty(t)?he[t]:null;(s!==null?s.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(iR(t,n,s,i)&&(n=null),i||s===null?eR(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,i=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}var wi=ZC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Tc=Symbol.for("react.element"),kr=Symbol.for("react.portal"),Pr=Symbol.for("react.fragment"),gg=Symbol.for("react.strict_mode"),yp=Symbol.for("react.profiler"),dE=Symbol.for("react.provider"),fE=Symbol.for("react.context"),yg=Symbol.for("react.forward_ref"),_p=Symbol.for("react.suspense"),vp=Symbol.for("react.suspense_list"),_g=Symbol.for("react.memo"),Mi=Symbol.for("react.lazy"),pE=Symbol.for("react.offscreen"),qv=Symbol.iterator;function aa(e){return e===null||typeof e!="object"?null:(e=qv&&e[qv]||e["@@iterator"],typeof e=="function"?e:null)}var Mt=Object.assign,nf;function Ta(e){if(nf===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);nf=t&&t[1]||""}return`
`+nf+e}var sf=!1;function rf(e,t){if(!e||sf)return"";sf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var i=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){i=c}e.call(t.prototype)}else{try{throw Error()}catch(c){i=c}e()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),r=i.stack.split(`
`),o=s.length-1,a=r.length-1;1<=o&&0<=a&&s[o]!==r[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==r[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==r[a]){var l=`
`+s[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=a);break}}}finally{sf=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Ta(e):""}function sR(e){switch(e.tag){case 5:return Ta(e.type);case 16:return Ta("Lazy");case 13:return Ta("Suspense");case 19:return Ta("SuspenseList");case 0:case 2:case 15:return e=rf(e.type,!1),e;case 11:return e=rf(e.type.render,!1),e;case 1:return e=rf(e.type,!0),e;default:return""}}function wp(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Pr:return"Fragment";case kr:return"Portal";case yp:return"Profiler";case gg:return"StrictMode";case _p:return"Suspense";case vp:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case fE:return(e.displayName||"Context")+".Consumer";case dE:return(e._context.displayName||"Context")+".Provider";case yg:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case _g:return t=e.displayName||null,t!==null?t:wp(e.type)||"Memo";case Mi:t=e._payload,e=e._init;try{return wp(e(t))}catch{}}return null}function rR(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return wp(t);case 8:return t===gg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function us(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function mE(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function oR(e){var t=mE(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,r=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){i=""+o,r.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function xc(e){e._valueTracker||(e._valueTracker=oR(e))}function gE(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=mE(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function ju(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Tp(e,t){var n=t.checked;return Mt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Kv(e,t){var n=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;n=us(t.value!=null?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function yE(e,t){t=t.checked,t!=null&&mg(e,"checked",t,!1)}function xp(e,t){yE(e,t);var n=us(t.value),i=t.type;if(n!=null)i==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ep(e,t.type,n):t.hasOwnProperty("defaultValue")&&Ep(e,t.type,us(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Gv(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Ep(e,t,n){(t!=="number"||ju(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var xa=Array.isArray;function Kr(e,t,n,i){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&i&&(e[n].defaultSelected=!0)}else{for(n=""+us(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,i&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Sp(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(B(91));return Mt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Qv(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(B(92));if(xa(n)){if(1<n.length)throw Error(B(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:us(n)}}function _E(e,t){var n=us(t.value),i=us(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),i!=null&&(e.defaultValue=""+i)}function Yv(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function vE(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ip(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?vE(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ec,wE=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,i,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,i,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ec=Ec||document.createElement("div"),Ec.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ec.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function sl(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Da={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},aR=["Webkit","ms","Moz","O"];Object.keys(Da).forEach(function(e){aR.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Da[t]=Da[e]})});function TE(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Da.hasOwnProperty(e)&&Da[e]?(""+t).trim():t+"px"}function xE(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var i=n.indexOf("--")===0,s=TE(n,t[n],i);n==="float"&&(n="cssFloat"),i?e.setProperty(n,s):e[n]=s}}var lR=Mt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ap(e,t){if(t){if(lR[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(B(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(B(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(B(61))}if(t.style!=null&&typeof t.style!="object")throw Error(B(62))}}function bp(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var kp=null;function vg(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Pp=null,Gr=null,Qr=null;function Xv(e){if(e=Hl(e)){if(typeof Pp!="function")throw Error(B(280));var t=e.stateNode;t&&(t=Qh(t),Pp(e.stateNode,e.type,t))}}function EE(e){Gr?Qr?Qr.push(e):Qr=[e]:Gr=e}function SE(){if(Gr){var e=Gr,t=Qr;if(Qr=Gr=null,Xv(e),t)for(e=0;e<t.length;e++)Xv(t[e])}}function IE(e,t){return e(t)}function AE(){}var of=!1;function bE(e,t,n){if(of)return e(t,n);of=!0;try{return IE(e,t,n)}finally{of=!1,(Gr!==null||Qr!==null)&&(AE(),SE())}}function rl(e,t){var n=e.stateNode;if(n===null)return null;var i=Qh(n);if(i===null)return null;n=i[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break t;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(B(231,t,typeof n));return n}var Cp=!1;if(ci)try{var la={};Object.defineProperty(la,"passive",{get:function(){Cp=!0}}),window.addEventListener("test",la,la),window.removeEventListener("test",la,la)}catch{Cp=!1}function cR(e,t,n,i,s,r,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(h){this.onError(h)}}var Ma=!1,Bu=null,Uu=!1,Rp=null,uR={onError:function(e){Ma=!0,Bu=e}};function hR(e,t,n,i,s,r,o,a,l){Ma=!1,Bu=null,cR.apply(uR,arguments)}function dR(e,t,n,i,s,r,o,a,l){if(hR.apply(this,arguments),Ma){if(Ma){var c=Bu;Ma=!1,Bu=null}else throw Error(B(198));Uu||(Uu=!0,Rp=c)}}function pr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function kE(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Jv(e){if(pr(e)!==e)throw Error(B(188))}function fR(e){var t=e.alternate;if(!t){if(t=pr(e),t===null)throw Error(B(188));return t!==e?null:e}for(var n=e,i=t;;){var s=n.return;if(s===null)break;var r=s.alternate;if(r===null){if(i=s.return,i!==null){n=i;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===n)return Jv(s),e;if(r===i)return Jv(s),t;r=r.sibling}throw Error(B(188))}if(n.return!==i.return)n=s,i=r;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o){for(a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o)throw Error(B(189))}}if(n.alternate!==i)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?e:t}function PE(e){return e=fR(e),e!==null?CE(e):null}function CE(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=CE(e);if(t!==null)return t;e=e.sibling}return null}var RE=Xe.unstable_scheduleCallback,Zv=Xe.unstable_cancelCallback,pR=Xe.unstable_shouldYield,mR=Xe.unstable_requestPaint,Bt=Xe.unstable_now,gR=Xe.unstable_getCurrentPriorityLevel,wg=Xe.unstable_ImmediatePriority,DE=Xe.unstable_UserBlockingPriority,zu=Xe.unstable_NormalPriority,yR=Xe.unstable_LowPriority,ME=Xe.unstable_IdlePriority,Wh=null,Bn=null;function _R(e){if(Bn&&typeof Bn.onCommitFiberRoot=="function")try{Bn.onCommitFiberRoot(Wh,e,void 0,(e.current.flags&128)===128)}catch{}}var In=Math.clz32?Math.clz32:TR,vR=Math.log,wR=Math.LN2;function TR(e){return e>>>=0,e===0?32:31-(vR(e)/wR|0)|0}var Sc=64,Ic=4194304;function Ea(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function $u(e,t){var n=e.pendingLanes;if(n===0)return 0;var i=0,s=e.suspendedLanes,r=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?i=Ea(a):(r&=o,r!==0&&(i=Ea(r)))}else o=n&~s,o!==0?i=Ea(o):r!==0&&(i=Ea(r));if(i===0)return 0;if(t!==0&&t!==i&&!(t&s)&&(s=i&-i,r=t&-t,s>=r||s===16&&(r&4194240)!==0))return t;if(i&4&&(i|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)n=31-In(t),s=1<<n,i|=e[n],t&=~s;return i}function xR(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ER(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,s=e.expirationTimes,r=e.pendingLanes;0<r;){var o=31-In(r),a=1<<o,l=s[o];l===-1?(!(a&n)||a&i)&&(s[o]=xR(a,t)):l<=t&&(e.expiredLanes|=a),r&=~a}}function Dp(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function VE(){var e=Sc;return Sc<<=1,!(Sc&4194240)&&(Sc=64),e}function af(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function zl(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-In(t),e[t]=n}function SR(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-In(n),r=1<<s;t[s]=0,i[s]=-1,e[s]=-1,n&=~r}}function Tg(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-In(n),s=1<<i;s&t|e[i]&t&&(e[i]|=t),n&=~s}}var _t=0;function NE(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var OE,xg,LE,FE,jE,Mp=!1,Ac=[],Ki=null,Gi=null,Qi=null,ol=new Map,al=new Map,Ni=[],IR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function t0(e,t){switch(e){case"focusin":case"focusout":Ki=null;break;case"dragenter":case"dragleave":Gi=null;break;case"mouseover":case"mouseout":Qi=null;break;case"pointerover":case"pointerout":ol.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":al.delete(t.pointerId)}}function ca(e,t,n,i,s,r){return e===null||e.nativeEvent!==r?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:r,targetContainers:[s]},t!==null&&(t=Hl(t),t!==null&&xg(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function AR(e,t,n,i,s){switch(t){case"focusin":return Ki=ca(Ki,e,t,n,i,s),!0;case"dragenter":return Gi=ca(Gi,e,t,n,i,s),!0;case"mouseover":return Qi=ca(Qi,e,t,n,i,s),!0;case"pointerover":var r=s.pointerId;return ol.set(r,ca(ol.get(r)||null,e,t,n,i,s)),!0;case"gotpointercapture":return r=s.pointerId,al.set(r,ca(al.get(r)||null,e,t,n,i,s)),!0}return!1}function BE(e){var t=$s(e.target);if(t!==null){var n=pr(t);if(n!==null){if(t=n.tag,t===13){if(t=kE(n),t!==null){e.blockedOn=t,jE(e.priority,function(){LE(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function uu(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Vp(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);kp=i,n.target.dispatchEvent(i),kp=null}else return t=Hl(n),t!==null&&xg(t),e.blockedOn=n,!1;t.shift()}return!0}function e0(e,t,n){uu(e)&&n.delete(t)}function bR(){Mp=!1,Ki!==null&&uu(Ki)&&(Ki=null),Gi!==null&&uu(Gi)&&(Gi=null),Qi!==null&&uu(Qi)&&(Qi=null),ol.forEach(e0),al.forEach(e0)}function ua(e,t){e.blockedOn===t&&(e.blockedOn=null,Mp||(Mp=!0,Xe.unstable_scheduleCallback(Xe.unstable_NormalPriority,bR)))}function ll(e){function t(s){return ua(s,e)}if(0<Ac.length){ua(Ac[0],e);for(var n=1;n<Ac.length;n++){var i=Ac[n];i.blockedOn===e&&(i.blockedOn=null)}}for(Ki!==null&&ua(Ki,e),Gi!==null&&ua(Gi,e),Qi!==null&&ua(Qi,e),ol.forEach(t),al.forEach(t),n=0;n<Ni.length;n++)i=Ni[n],i.blockedOn===e&&(i.blockedOn=null);for(;0<Ni.length&&(n=Ni[0],n.blockedOn===null);)BE(n),n.blockedOn===null&&Ni.shift()}var Yr=wi.ReactCurrentBatchConfig,Hu=!0;function kR(e,t,n,i){var s=_t,r=Yr.transition;Yr.transition=null;try{_t=1,Eg(e,t,n,i)}finally{_t=s,Yr.transition=r}}function PR(e,t,n,i){var s=_t,r=Yr.transition;Yr.transition=null;try{_t=4,Eg(e,t,n,i)}finally{_t=s,Yr.transition=r}}function Eg(e,t,n,i){if(Hu){var s=Vp(e,t,n,i);if(s===null)yf(e,t,i,Wu,n),t0(e,i);else if(AR(s,e,t,n,i))i.stopPropagation();else if(t0(e,i),t&4&&-1<IR.indexOf(e)){for(;s!==null;){var r=Hl(s);if(r!==null&&OE(r),r=Vp(e,t,n,i),r===null&&yf(e,t,i,Wu,n),r===s)break;s=r}s!==null&&i.stopPropagation()}else yf(e,t,i,null,n)}}var Wu=null;function Vp(e,t,n,i){if(Wu=null,e=vg(i),e=$s(e),e!==null)if(t=pr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=kE(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Wu=e,null}function UE(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(gR()){case wg:return 1;case DE:return 4;case zu:case yR:return 16;case ME:return 536870912;default:return 16}default:return 16}}var Ui=null,Sg=null,hu=null;function zE(){if(hu)return hu;var e,t=Sg,n=t.length,i,s="value"in Ui?Ui.value:Ui.textContent,r=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(i=1;i<=o&&t[n-i]===s[r-i];i++);return hu=s.slice(e,1<i?1-i:void 0)}function du(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function bc(){return!0}function n0(){return!1}function Ze(e){function t(n,i,s,r,o){this._reactName=n,this._targetInst=s,this.type=i,this.nativeEvent=r,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(r):r[a]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?bc:n0,this.isPropagationStopped=n0,this}return Mt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=bc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=bc)},persist:function(){},isPersistent:bc}),t}var Po={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ig=Ze(Po),$l=Mt({},Po,{view:0,detail:0}),CR=Ze($l),lf,cf,ha,qh=Mt({},$l,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ag,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ha&&(ha&&e.type==="mousemove"?(lf=e.screenX-ha.screenX,cf=e.screenY-ha.screenY):cf=lf=0,ha=e),lf)},movementY:function(e){return"movementY"in e?e.movementY:cf}}),i0=Ze(qh),RR=Mt({},qh,{dataTransfer:0}),DR=Ze(RR),MR=Mt({},$l,{relatedTarget:0}),uf=Ze(MR),VR=Mt({},Po,{animationName:0,elapsedTime:0,pseudoElement:0}),NR=Ze(VR),OR=Mt({},Po,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),LR=Ze(OR),FR=Mt({},Po,{data:0}),s0=Ze(FR),jR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},BR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},UR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zR(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=UR[e])?!!t[e]:!1}function Ag(){return zR}var $R=Mt({},$l,{key:function(e){if(e.key){var t=jR[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=du(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?BR[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ag,charCode:function(e){return e.type==="keypress"?du(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?du(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),HR=Ze($R),WR=Mt({},qh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),r0=Ze(WR),qR=Mt({},$l,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ag}),KR=Ze(qR),GR=Mt({},Po,{propertyName:0,elapsedTime:0,pseudoElement:0}),QR=Ze(GR),YR=Mt({},qh,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),XR=Ze(YR),JR=[9,13,27,32],bg=ci&&"CompositionEvent"in window,Va=null;ci&&"documentMode"in document&&(Va=document.documentMode);var ZR=ci&&"TextEvent"in window&&!Va,$E=ci&&(!bg||Va&&8<Va&&11>=Va),o0=" ",a0=!1;function HE(e,t){switch(e){case"keyup":return JR.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function WE(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Cr=!1;function t2(e,t){switch(e){case"compositionend":return WE(t);case"keypress":return t.which!==32?null:(a0=!0,o0);case"textInput":return e=t.data,e===o0&&a0?null:e;default:return null}}function e2(e,t){if(Cr)return e==="compositionend"||!bg&&HE(e,t)?(e=zE(),hu=Sg=Ui=null,Cr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return $E&&t.locale!=="ko"?null:t.data;default:return null}}var n2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function l0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!n2[e.type]:t==="textarea"}function qE(e,t,n,i){EE(i),t=qu(t,"onChange"),0<t.length&&(n=new Ig("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Na=null,cl=null;function i2(e){iS(e,0)}function Kh(e){var t=Mr(e);if(gE(t))return e}function s2(e,t){if(e==="change")return t}var KE=!1;if(ci){var hf;if(ci){var df="oninput"in document;if(!df){var c0=document.createElement("div");c0.setAttribute("oninput","return;"),df=typeof c0.oninput=="function"}hf=df}else hf=!1;KE=hf&&(!document.documentMode||9<document.documentMode)}function u0(){Na&&(Na.detachEvent("onpropertychange",GE),cl=Na=null)}function GE(e){if(e.propertyName==="value"&&Kh(cl)){var t=[];qE(t,cl,e,vg(e)),bE(i2,t)}}function r2(e,t,n){e==="focusin"?(u0(),Na=t,cl=n,Na.attachEvent("onpropertychange",GE)):e==="focusout"&&u0()}function o2(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Kh(cl)}function a2(e,t){if(e==="click")return Kh(t)}function l2(e,t){if(e==="input"||e==="change")return Kh(t)}function c2(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var bn=typeof Object.is=="function"?Object.is:c2;function ul(e,t){if(bn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!gp.call(t,s)||!bn(e[s],t[s]))return!1}return!0}function h0(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function d0(e,t){var n=h0(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}t:{for(;n;){if(n.nextSibling){n=n.nextSibling;break t}n=n.parentNode}n=void 0}n=h0(n)}}function QE(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?QE(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function YE(){for(var e=window,t=ju();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=ju(e.document)}return t}function kg(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function u2(e){var t=YE(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&QE(n.ownerDocument.documentElement,n)){if(i!==null&&kg(n)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,r=Math.min(i.start,s);i=i.end===void 0?r:Math.min(i.end,s),!e.extend&&r>i&&(s=i,i=r,r=s),s=d0(n,r);var o=d0(n,i);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),r>i?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var h2=ci&&"documentMode"in document&&11>=document.documentMode,Rr=null,Np=null,Oa=null,Op=!1;function f0(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Op||Rr==null||Rr!==ju(i)||(i=Rr,"selectionStart"in i&&kg(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Oa&&ul(Oa,i)||(Oa=i,i=qu(Np,"onSelect"),0<i.length&&(t=new Ig("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=Rr)))}function kc(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Dr={animationend:kc("Animation","AnimationEnd"),animationiteration:kc("Animation","AnimationIteration"),animationstart:kc("Animation","AnimationStart"),transitionend:kc("Transition","TransitionEnd")},ff={},XE={};ci&&(XE=document.createElement("div").style,"AnimationEvent"in window||(delete Dr.animationend.animation,delete Dr.animationiteration.animation,delete Dr.animationstart.animation),"TransitionEvent"in window||delete Dr.transitionend.transition);function Gh(e){if(ff[e])return ff[e];if(!Dr[e])return e;var t=Dr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in XE)return ff[e]=t[n];return e}var JE=Gh("animationend"),ZE=Gh("animationiteration"),tS=Gh("animationstart"),eS=Gh("transitionend"),nS=new Map,p0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ts(e,t){nS.set(e,t),fr(t,[e])}for(var pf=0;pf<p0.length;pf++){var mf=p0[pf],d2=mf.toLowerCase(),f2=mf[0].toUpperCase()+mf.slice(1);Ts(d2,"on"+f2)}Ts(JE,"onAnimationEnd");Ts(ZE,"onAnimationIteration");Ts(tS,"onAnimationStart");Ts("dblclick","onDoubleClick");Ts("focusin","onFocus");Ts("focusout","onBlur");Ts(eS,"onTransitionEnd");lo("onMouseEnter",["mouseout","mouseover"]);lo("onMouseLeave",["mouseout","mouseover"]);lo("onPointerEnter",["pointerout","pointerover"]);lo("onPointerLeave",["pointerout","pointerover"]);fr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fr("onBeforeInput",["compositionend","keypress","textInput","paste"]);fr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),p2=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sa));function m0(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,dR(i,t,void 0,e),e.currentTarget=null}function iS(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],s=i.event;i=i.listeners;t:{var r=void 0;if(t)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==r&&s.isPropagationStopped())break t;m0(s,a,c),r=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==r&&s.isPropagationStopped())break t;m0(s,a,c),r=l}}}if(Uu)throw e=Rp,Uu=!1,Rp=null,e}function It(e,t){var n=t[Up];n===void 0&&(n=t[Up]=new Set);var i=e+"__bubble";n.has(i)||(sS(t,e,2,!1),n.add(i))}function gf(e,t,n){var i=0;t&&(i|=4),sS(n,e,i,t)}var Pc="_reactListening"+Math.random().toString(36).slice(2);function hl(e){if(!e[Pc]){e[Pc]=!0,hE.forEach(function(n){n!=="selectionchange"&&(p2.has(n)||gf(n,!1,e),gf(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Pc]||(t[Pc]=!0,gf("selectionchange",!1,t))}}function sS(e,t,n,i){switch(UE(t)){case 1:var s=kR;break;case 4:s=PR;break;default:s=Eg}n=s.bind(null,t,n,e),s=void 0,!Cp||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),i?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function yf(e,t,n,i,s){var r=i;if(!(t&1)&&!(t&2)&&i!==null)t:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=$s(a),o===null)return;if(l=o.tag,l===5||l===6){i=r=o;continue t}a=a.parentNode}}i=i.return}bE(function(){var c=r,h=vg(n),d=[];t:{var f=nS.get(e);if(f!==void 0){var m=Ig,v=e;switch(e){case"keypress":if(du(n)===0)break t;case"keydown":case"keyup":m=HR;break;case"focusin":v="focus",m=uf;break;case"focusout":v="blur",m=uf;break;case"beforeblur":case"afterblur":m=uf;break;case"click":if(n.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=i0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=DR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=KR;break;case JE:case ZE:case tS:m=NR;break;case eS:m=QR;break;case"scroll":m=CR;break;case"wheel":m=XR;break;case"copy":case"cut":case"paste":m=LR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=r0}var x=(t&4)!==0,E=!x&&e==="scroll",y=x?f!==null?f+"Capture":null:f;x=[];for(var w=c,S;w!==null;){S=w;var D=S.stateNode;if(S.tag===5&&D!==null&&(S=D,y!==null&&(D=rl(w,y),D!=null&&x.push(dl(w,D,S)))),E)break;w=w.return}0<x.length&&(f=new m(f,v,null,n,h),d.push({event:f,listeners:x}))}}if(!(t&7)){t:{if(f=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",f&&n!==kp&&(v=n.relatedTarget||n.fromElement)&&($s(v)||v[ui]))break t;if((m||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,m?(v=n.relatedTarget||n.toElement,m=c,v=v?$s(v):null,v!==null&&(E=pr(v),v!==E||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=c),m!==v)){if(x=i0,D="onMouseLeave",y="onMouseEnter",w="mouse",(e==="pointerout"||e==="pointerover")&&(x=r0,D="onPointerLeave",y="onPointerEnter",w="pointer"),E=m==null?f:Mr(m),S=v==null?f:Mr(v),f=new x(D,w+"leave",m,n,h),f.target=E,f.relatedTarget=S,D=null,$s(h)===c&&(x=new x(y,w+"enter",v,n,h),x.target=S,x.relatedTarget=E,D=x),E=D,m&&v)e:{for(x=m,y=v,w=0,S=x;S;S=Tr(S))w++;for(S=0,D=y;D;D=Tr(D))S++;for(;0<w-S;)x=Tr(x),w--;for(;0<S-w;)y=Tr(y),S--;for(;w--;){if(x===y||y!==null&&x===y.alternate)break e;x=Tr(x),y=Tr(y)}x=null}else x=null;m!==null&&g0(d,f,m,x,!1),v!==null&&E!==null&&g0(d,E,v,x,!0)}}t:{if(f=c?Mr(c):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var M=s2;else if(l0(f))if(KE)M=l2;else{M=o2;var V=r2}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(M=a2);if(M&&(M=M(e,c))){qE(d,M,n,h);break t}V&&V(e,f,c),e==="focusout"&&(V=f._wrapperState)&&V.controlled&&f.type==="number"&&Ep(f,"number",f.value)}switch(V=c?Mr(c):window,e){case"focusin":(l0(V)||V.contentEditable==="true")&&(Rr=V,Np=c,Oa=null);break;case"focusout":Oa=Np=Rr=null;break;case"mousedown":Op=!0;break;case"contextmenu":case"mouseup":case"dragend":Op=!1,f0(d,n,h);break;case"selectionchange":if(h2)break;case"keydown":case"keyup":f0(d,n,h)}var T;if(bg)t:{switch(e){case"compositionstart":var _="onCompositionStart";break t;case"compositionend":_="onCompositionEnd";break t;case"compositionupdate":_="onCompositionUpdate";break t}_=void 0}else Cr?HE(e,n)&&(_="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&($E&&n.locale!=="ko"&&(Cr||_!=="onCompositionStart"?_==="onCompositionEnd"&&Cr&&(T=zE()):(Ui=h,Sg="value"in Ui?Ui.value:Ui.textContent,Cr=!0)),V=qu(c,_),0<V.length&&(_=new s0(_,e,null,n,h),d.push({event:_,listeners:V}),T?_.data=T:(T=WE(n),T!==null&&(_.data=T)))),(T=ZR?t2(e,n):e2(e,n))&&(c=qu(c,"onBeforeInput"),0<c.length&&(h=new s0("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:c}),h.data=T))}iS(d,t)})}function dl(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qu(e,t){for(var n=t+"Capture",i=[];e!==null;){var s=e,r=s.stateNode;s.tag===5&&r!==null&&(s=r,r=rl(e,n),r!=null&&i.unshift(dl(e,r,s)),r=rl(e,t),r!=null&&i.push(dl(e,r,s))),e=e.return}return i}function Tr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function g0(e,t,n,i,s){for(var r=t._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,s?(l=rl(n,r),l!=null&&o.unshift(dl(n,l,a))):s||(l=rl(n,r),l!=null&&o.push(dl(n,l,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var m2=/\r\n?/g,g2=/\u0000|\uFFFD/g;function y0(e){return(typeof e=="string"?e:""+e).replace(m2,`
`).replace(g2,"")}function Cc(e,t,n){if(t=y0(t),y0(e)!==t&&n)throw Error(B(425))}function Ku(){}var Lp=null,Fp=null;function jp(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Bp=typeof setTimeout=="function"?setTimeout:void 0,y2=typeof clearTimeout=="function"?clearTimeout:void 0,_0=typeof Promise=="function"?Promise:void 0,_2=typeof queueMicrotask=="function"?queueMicrotask:typeof _0<"u"?function(e){return _0.resolve(null).then(e).catch(v2)}:Bp;function v2(e){setTimeout(function(){throw e})}function _f(e,t){var n=t,i=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(i===0){e.removeChild(s),ll(t);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=s}while(n);ll(t)}function Yi(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function v0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Co=Math.random().toString(36).slice(2),Fn="__reactFiber$"+Co,fl="__reactProps$"+Co,ui="__reactContainer$"+Co,Up="__reactEvents$"+Co,w2="__reactListeners$"+Co,T2="__reactHandles$"+Co;function $s(e){var t=e[Fn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ui]||n[Fn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=v0(e);e!==null;){if(n=e[Fn])return n;e=v0(e)}return t}e=n,n=e.parentNode}return null}function Hl(e){return e=e[Fn]||e[ui],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Mr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(B(33))}function Qh(e){return e[fl]||null}var zp=[],Vr=-1;function xs(e){return{current:e}}function bt(e){0>Vr||(e.current=zp[Vr],zp[Vr]=null,Vr--)}function Et(e,t){Vr++,zp[Vr]=e.current,e.current=t}var hs={},Se=xs(hs),Ue=xs(!1),nr=hs;function co(e,t){var n=e.type.contextTypes;if(!n)return hs;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var s={},r;for(r in n)s[r]=t[r];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function ze(e){return e=e.childContextTypes,e!=null}function Gu(){bt(Ue),bt(Se)}function w0(e,t,n){if(Se.current!==hs)throw Error(B(168));Et(Se,t),Et(Ue,n)}function rS(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var s in i)if(!(s in t))throw Error(B(108,rR(e)||"Unknown",s));return Mt({},n,i)}function Qu(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hs,nr=Se.current,Et(Se,e),Et(Ue,Ue.current),!0}function T0(e,t,n){var i=e.stateNode;if(!i)throw Error(B(169));n?(e=rS(e,t,nr),i.__reactInternalMemoizedMergedChildContext=e,bt(Ue),bt(Se),Et(Se,e)):bt(Ue),Et(Ue,n)}var ei=null,Yh=!1,vf=!1;function oS(e){ei===null?ei=[e]:ei.push(e)}function x2(e){Yh=!0,oS(e)}function Es(){if(!vf&&ei!==null){vf=!0;var e=0,t=_t;try{var n=ei;for(_t=1;e<n.length;e++){var i=n[e];do i=i(!0);while(i!==null)}ei=null,Yh=!1}catch(s){throw ei!==null&&(ei=ei.slice(e+1)),RE(wg,Es),s}finally{_t=t,vf=!1}}return null}var Nr=[],Or=0,Yu=null,Xu=0,sn=[],rn=0,ir=null,ii=1,si="";function Fs(e,t){Nr[Or++]=Xu,Nr[Or++]=Yu,Yu=e,Xu=t}function aS(e,t,n){sn[rn++]=ii,sn[rn++]=si,sn[rn++]=ir,ir=e;var i=ii;e=si;var s=32-In(i)-1;i&=~(1<<s),n+=1;var r=32-In(t)+s;if(30<r){var o=s-s%5;r=(i&(1<<o)-1).toString(32),i>>=o,s-=o,ii=1<<32-In(t)+s|n<<s|i,si=r+e}else ii=1<<r|n<<s|i,si=e}function Pg(e){e.return!==null&&(Fs(e,1),aS(e,1,0))}function Cg(e){for(;e===Yu;)Yu=Nr[--Or],Nr[Or]=null,Xu=Nr[--Or],Nr[Or]=null;for(;e===ir;)ir=sn[--rn],sn[rn]=null,si=sn[--rn],sn[rn]=null,ii=sn[--rn],sn[rn]=null}var Ye=null,Ge=null,kt=!1,Tn=null;function lS(e,t){var n=an(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function x0(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ye=e,Ge=Yi(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ye=e,Ge=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=ir!==null?{id:ii,overflow:si}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=an(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ye=e,Ge=null,!0):!1;default:return!1}}function $p(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Hp(e){if(kt){var t=Ge;if(t){var n=t;if(!x0(e,t)){if($p(e))throw Error(B(418));t=Yi(n.nextSibling);var i=Ye;t&&x0(e,t)?lS(i,n):(e.flags=e.flags&-4097|2,kt=!1,Ye=e)}}else{if($p(e))throw Error(B(418));e.flags=e.flags&-4097|2,kt=!1,Ye=e}}}function E0(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ye=e}function Rc(e){if(e!==Ye)return!1;if(!kt)return E0(e),kt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!jp(e.type,e.memoizedProps)),t&&(t=Ge)){if($p(e))throw cS(),Error(B(418));for(;t;)lS(e,t),t=Yi(t.nextSibling)}if(E0(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(B(317));t:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Ge=Yi(e.nextSibling);break t}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Ge=null}}else Ge=Ye?Yi(e.stateNode.nextSibling):null;return!0}function cS(){for(var e=Ge;e;)e=Yi(e.nextSibling)}function uo(){Ge=Ye=null,kt=!1}function Rg(e){Tn===null?Tn=[e]:Tn.push(e)}var E2=wi.ReactCurrentBatchConfig;function da(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(B(309));var i=n.stateNode}if(!i)throw Error(B(147,e));var s=i,r=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===r?t.ref:(t=function(o){var a=s.refs;o===null?delete a[r]:a[r]=o},t._stringRef=r,t)}if(typeof e!="string")throw Error(B(284));if(!n._owner)throw Error(B(290,e))}return e}function Dc(e,t){throw e=Object.prototype.toString.call(t),Error(B(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function S0(e){var t=e._init;return t(e._payload)}function uS(e){function t(y,w){if(e){var S=y.deletions;S===null?(y.deletions=[w],y.flags|=16):S.push(w)}}function n(y,w){if(!e)return null;for(;w!==null;)t(y,w),w=w.sibling;return null}function i(y,w){for(y=new Map;w!==null;)w.key!==null?y.set(w.key,w):y.set(w.index,w),w=w.sibling;return y}function s(y,w){return y=ts(y,w),y.index=0,y.sibling=null,y}function r(y,w,S){return y.index=S,e?(S=y.alternate,S!==null?(S=S.index,S<w?(y.flags|=2,w):S):(y.flags|=2,w)):(y.flags|=1048576,w)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function a(y,w,S,D){return w===null||w.tag!==6?(w=Af(S,y.mode,D),w.return=y,w):(w=s(w,S),w.return=y,w)}function l(y,w,S,D){var M=S.type;return M===Pr?h(y,w,S.props.children,D,S.key):w!==null&&(w.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Mi&&S0(M)===w.type)?(D=s(w,S.props),D.ref=da(y,w,S),D.return=y,D):(D=vu(S.type,S.key,S.props,null,y.mode,D),D.ref=da(y,w,S),D.return=y,D)}function c(y,w,S,D){return w===null||w.tag!==4||w.stateNode.containerInfo!==S.containerInfo||w.stateNode.implementation!==S.implementation?(w=bf(S,y.mode,D),w.return=y,w):(w=s(w,S.children||[]),w.return=y,w)}function h(y,w,S,D,M){return w===null||w.tag!==7?(w=Xs(S,y.mode,D,M),w.return=y,w):(w=s(w,S),w.return=y,w)}function d(y,w,S){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Af(""+w,y.mode,S),w.return=y,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Tc:return S=vu(w.type,w.key,w.props,null,y.mode,S),S.ref=da(y,null,w),S.return=y,S;case kr:return w=bf(w,y.mode,S),w.return=y,w;case Mi:var D=w._init;return d(y,D(w._payload),S)}if(xa(w)||aa(w))return w=Xs(w,y.mode,S,null),w.return=y,w;Dc(y,w)}return null}function f(y,w,S,D){var M=w!==null?w.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return M!==null?null:a(y,w,""+S,D);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Tc:return S.key===M?l(y,w,S,D):null;case kr:return S.key===M?c(y,w,S,D):null;case Mi:return M=S._init,f(y,w,M(S._payload),D)}if(xa(S)||aa(S))return M!==null?null:h(y,w,S,D,null);Dc(y,S)}return null}function m(y,w,S,D,M){if(typeof D=="string"&&D!==""||typeof D=="number")return y=y.get(S)||null,a(w,y,""+D,M);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Tc:return y=y.get(D.key===null?S:D.key)||null,l(w,y,D,M);case kr:return y=y.get(D.key===null?S:D.key)||null,c(w,y,D,M);case Mi:var V=D._init;return m(y,w,S,V(D._payload),M)}if(xa(D)||aa(D))return y=y.get(S)||null,h(w,y,D,M,null);Dc(w,D)}return null}function v(y,w,S,D){for(var M=null,V=null,T=w,_=w=0,A=null;T!==null&&_<S.length;_++){T.index>_?(A=T,T=null):A=T.sibling;var b=f(y,T,S[_],D);if(b===null){T===null&&(T=A);break}e&&T&&b.alternate===null&&t(y,T),w=r(b,w,_),V===null?M=b:V.sibling=b,V=b,T=A}if(_===S.length)return n(y,T),kt&&Fs(y,_),M;if(T===null){for(;_<S.length;_++)T=d(y,S[_],D),T!==null&&(w=r(T,w,_),V===null?M=T:V.sibling=T,V=T);return kt&&Fs(y,_),M}for(T=i(y,T);_<S.length;_++)A=m(T,y,_,S[_],D),A!==null&&(e&&A.alternate!==null&&T.delete(A.key===null?_:A.key),w=r(A,w,_),V===null?M=A:V.sibling=A,V=A);return e&&T.forEach(function(P){return t(y,P)}),kt&&Fs(y,_),M}function x(y,w,S,D){var M=aa(S);if(typeof M!="function")throw Error(B(150));if(S=M.call(S),S==null)throw Error(B(151));for(var V=M=null,T=w,_=w=0,A=null,b=S.next();T!==null&&!b.done;_++,b=S.next()){T.index>_?(A=T,T=null):A=T.sibling;var P=f(y,T,b.value,D);if(P===null){T===null&&(T=A);break}e&&T&&P.alternate===null&&t(y,T),w=r(P,w,_),V===null?M=P:V.sibling=P,V=P,T=A}if(b.done)return n(y,T),kt&&Fs(y,_),M;if(T===null){for(;!b.done;_++,b=S.next())b=d(y,b.value,D),b!==null&&(w=r(b,w,_),V===null?M=b:V.sibling=b,V=b);return kt&&Fs(y,_),M}for(T=i(y,T);!b.done;_++,b=S.next())b=m(T,y,_,b.value,D),b!==null&&(e&&b.alternate!==null&&T.delete(b.key===null?_:b.key),w=r(b,w,_),V===null?M=b:V.sibling=b,V=b);return e&&T.forEach(function(C){return t(y,C)}),kt&&Fs(y,_),M}function E(y,w,S,D){if(typeof S=="object"&&S!==null&&S.type===Pr&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Tc:t:{for(var M=S.key,V=w;V!==null;){if(V.key===M){if(M=S.type,M===Pr){if(V.tag===7){n(y,V.sibling),w=s(V,S.props.children),w.return=y,y=w;break t}}else if(V.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Mi&&S0(M)===V.type){n(y,V.sibling),w=s(V,S.props),w.ref=da(y,V,S),w.return=y,y=w;break t}n(y,V);break}else t(y,V);V=V.sibling}S.type===Pr?(w=Xs(S.props.children,y.mode,D,S.key),w.return=y,y=w):(D=vu(S.type,S.key,S.props,null,y.mode,D),D.ref=da(y,w,S),D.return=y,y=D)}return o(y);case kr:t:{for(V=S.key;w!==null;){if(w.key===V)if(w.tag===4&&w.stateNode.containerInfo===S.containerInfo&&w.stateNode.implementation===S.implementation){n(y,w.sibling),w=s(w,S.children||[]),w.return=y,y=w;break t}else{n(y,w);break}else t(y,w);w=w.sibling}w=bf(S,y.mode,D),w.return=y,y=w}return o(y);case Mi:return V=S._init,E(y,w,V(S._payload),D)}if(xa(S))return v(y,w,S,D);if(aa(S))return x(y,w,S,D);Dc(y,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,w!==null&&w.tag===6?(n(y,w.sibling),w=s(w,S),w.return=y,y=w):(n(y,w),w=Af(S,y.mode,D),w.return=y,y=w),o(y)):n(y,w)}return E}var ho=uS(!0),hS=uS(!1),Ju=xs(null),Zu=null,Lr=null,Dg=null;function Mg(){Dg=Lr=Zu=null}function Vg(e){var t=Ju.current;bt(Ju),e._currentValue=t}function Wp(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Xr(e,t){Zu=e,Dg=Lr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(je=!0),e.firstContext=null)}function fn(e){var t=e._currentValue;if(Dg!==e)if(e={context:e,memoizedValue:t,next:null},Lr===null){if(Zu===null)throw Error(B(308));Lr=e,Zu.dependencies={lanes:0,firstContext:e}}else Lr=Lr.next=e;return t}var Hs=null;function Ng(e){Hs===null?Hs=[e]:Hs.push(e)}function dS(e,t,n,i){var s=t.interleaved;return s===null?(n.next=n,Ng(t)):(n.next=s.next,s.next=n),t.interleaved=n,hi(e,i)}function hi(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Vi=!1;function Og(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function fS(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function li(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Xi(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,dt&2){var s=i.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),i.pending=t,hi(e,n)}return s=i.interleaved,s===null?(t.next=t,Ng(i)):(t.next=s.next,s.next=t),i.interleaved=t,hi(e,n)}function fu(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,Tg(e,n)}}function I0(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var s=null,r=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};r===null?s=r=o:r=r.next=o,n=n.next}while(n!==null);r===null?s=r=t:r=r.next=t}else s=r=t;n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:i.shared,effects:i.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function th(e,t,n,i){var s=e.updateQueue;Vi=!1;var r=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?r=c:o.next=c,o=l;var h=e.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(r!==null){var d=s.baseState;o=0,h=c=l=null,a=r;do{var f=a.lane,m=a.eventTime;if((i&f)===f){h!==null&&(h=h.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});t:{var v=e,x=a;switch(f=t,m=n,x.tag){case 1:if(v=x.payload,typeof v=="function"){d=v.call(m,d,f);break t}d=v;break t;case 3:v.flags=v.flags&-65537|128;case 0:if(v=x.payload,f=typeof v=="function"?v.call(m,d,f):v,f==null)break t;d=Mt({},d,f);break t;case 2:Vi=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else m={eventTime:m,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=m,l=d):h=h.next=m,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(h===null&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=h,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else r===null&&(s.shared.lanes=0);rr|=o,e.lanes=o,e.memoizedState=d}}function A0(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],s=i.callback;if(s!==null){if(i.callback=null,i=n,typeof s!="function")throw Error(B(191,s));s.call(i)}}}var Wl={},Un=xs(Wl),pl=xs(Wl),ml=xs(Wl);function Ws(e){if(e===Wl)throw Error(B(174));return e}function Lg(e,t){switch(Et(ml,t),Et(pl,e),Et(Un,Wl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ip(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ip(t,e)}bt(Un),Et(Un,t)}function fo(){bt(Un),bt(pl),bt(ml)}function pS(e){Ws(ml.current);var t=Ws(Un.current),n=Ip(t,e.type);t!==n&&(Et(pl,e),Et(Un,n))}function Fg(e){pl.current===e&&(bt(Un),bt(pl))}var Ct=xs(0);function eh(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var wf=[];function jg(){for(var e=0;e<wf.length;e++)wf[e]._workInProgressVersionPrimary=null;wf.length=0}var pu=wi.ReactCurrentDispatcher,Tf=wi.ReactCurrentBatchConfig,sr=0,Dt=null,Xt=null,ie=null,nh=!1,La=!1,gl=0,S2=0;function pe(){throw Error(B(321))}function Bg(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!bn(e[n],t[n]))return!1;return!0}function Ug(e,t,n,i,s,r){if(sr=r,Dt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,pu.current=e===null||e.memoizedState===null?k2:P2,e=n(i,s),La){r=0;do{if(La=!1,gl=0,25<=r)throw Error(B(301));r+=1,ie=Xt=null,t.updateQueue=null,pu.current=C2,e=n(i,s)}while(La)}if(pu.current=ih,t=Xt!==null&&Xt.next!==null,sr=0,ie=Xt=Dt=null,nh=!1,t)throw Error(B(300));return e}function zg(){var e=gl!==0;return gl=0,e}function Vn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ie===null?Dt.memoizedState=ie=e:ie=ie.next=e,ie}function pn(){if(Xt===null){var e=Dt.alternate;e=e!==null?e.memoizedState:null}else e=Xt.next;var t=ie===null?Dt.memoizedState:ie.next;if(t!==null)ie=t,Xt=e;else{if(e===null)throw Error(B(310));Xt=e,e={memoizedState:Xt.memoizedState,baseState:Xt.baseState,baseQueue:Xt.baseQueue,queue:Xt.queue,next:null},ie===null?Dt.memoizedState=ie=e:ie=ie.next=e}return ie}function yl(e,t){return typeof t=="function"?t(e):t}function xf(e){var t=pn(),n=t.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=e;var i=Xt,s=i.baseQueue,r=n.pending;if(r!==null){if(s!==null){var o=s.next;s.next=r.next,r.next=o}i.baseQueue=s=r,n.pending=null}if(s!==null){r=s.next,i=i.baseState;var a=o=null,l=null,c=r;do{var h=c.lane;if((sr&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:e(i,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=i):l=l.next=d,Dt.lanes|=h,rr|=h}c=c.next}while(c!==null&&c!==r);l===null?o=i:l.next=a,bn(i,t.memoizedState)||(je=!0),t.memoizedState=i,t.baseState=o,t.baseQueue=l,n.lastRenderedState=i}if(e=n.interleaved,e!==null){s=e;do r=s.lane,Dt.lanes|=r,rr|=r,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ef(e){var t=pn(),n=t.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=e;var i=n.dispatch,s=n.pending,r=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do r=e(r,o.action),o=o.next;while(o!==s);bn(r,t.memoizedState)||(je=!0),t.memoizedState=r,t.baseQueue===null&&(t.baseState=r),n.lastRenderedState=r}return[r,i]}function mS(){}function gS(e,t){var n=Dt,i=pn(),s=t(),r=!bn(i.memoizedState,s);if(r&&(i.memoizedState=s,je=!0),i=i.queue,$g(vS.bind(null,n,i,e),[e]),i.getSnapshot!==t||r||ie!==null&&ie.memoizedState.tag&1){if(n.flags|=2048,_l(9,_S.bind(null,n,i,s,t),void 0,null),re===null)throw Error(B(349));sr&30||yS(n,t,s)}return s}function yS(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Dt.updateQueue,t===null?(t={lastEffect:null,stores:null},Dt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function _S(e,t,n,i){t.value=n,t.getSnapshot=i,wS(t)&&TS(e)}function vS(e,t,n){return n(function(){wS(t)&&TS(e)})}function wS(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!bn(e,n)}catch{return!0}}function TS(e){var t=hi(e,1);t!==null&&An(t,e,1,-1)}function b0(e){var t=Vn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yl,lastRenderedState:e},t.queue=e,e=e.dispatch=b2.bind(null,Dt,e),[t.memoizedState,e]}function _l(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},t=Dt.updateQueue,t===null?(t={lastEffect:null,stores:null},Dt.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e)),e}function xS(){return pn().memoizedState}function mu(e,t,n,i){var s=Vn();Dt.flags|=e,s.memoizedState=_l(1|t,n,void 0,i===void 0?null:i)}function Xh(e,t,n,i){var s=pn();i=i===void 0?null:i;var r=void 0;if(Xt!==null){var o=Xt.memoizedState;if(r=o.destroy,i!==null&&Bg(i,o.deps)){s.memoizedState=_l(t,n,r,i);return}}Dt.flags|=e,s.memoizedState=_l(1|t,n,r,i)}function k0(e,t){return mu(8390656,8,e,t)}function $g(e,t){return Xh(2048,8,e,t)}function ES(e,t){return Xh(4,2,e,t)}function SS(e,t){return Xh(4,4,e,t)}function IS(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function AS(e,t,n){return n=n!=null?n.concat([e]):null,Xh(4,4,IS.bind(null,t,e),n)}function Hg(){}function bS(e,t){var n=pn();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&Bg(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function kS(e,t){var n=pn();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&Bg(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function PS(e,t,n){return sr&21?(bn(n,t)||(n=VE(),Dt.lanes|=n,rr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,je=!0),e.memoizedState=n)}function I2(e,t){var n=_t;_t=n!==0&&4>n?n:4,e(!0);var i=Tf.transition;Tf.transition={};try{e(!1),t()}finally{_t=n,Tf.transition=i}}function CS(){return pn().memoizedState}function A2(e,t,n){var i=Zi(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},RS(e))DS(t,n);else if(n=dS(e,t,n,i),n!==null){var s=Re();An(n,e,i,s),MS(n,t,i)}}function b2(e,t,n){var i=Zi(e),s={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(RS(e))DS(t,s);else{var r=e.alternate;if(e.lanes===0&&(r===null||r.lanes===0)&&(r=t.lastRenderedReducer,r!==null))try{var o=t.lastRenderedState,a=r(o,n);if(s.hasEagerState=!0,s.eagerState=a,bn(a,o)){var l=t.interleaved;l===null?(s.next=s,Ng(t)):(s.next=l.next,l.next=s),t.interleaved=s;return}}catch{}finally{}n=dS(e,t,s,i),n!==null&&(s=Re(),An(n,e,i,s),MS(n,t,i))}}function RS(e){var t=e.alternate;return e===Dt||t!==null&&t===Dt}function DS(e,t){La=nh=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function MS(e,t,n){if(n&4194240){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,Tg(e,n)}}var ih={readContext:fn,useCallback:pe,useContext:pe,useEffect:pe,useImperativeHandle:pe,useInsertionEffect:pe,useLayoutEffect:pe,useMemo:pe,useReducer:pe,useRef:pe,useState:pe,useDebugValue:pe,useDeferredValue:pe,useTransition:pe,useMutableSource:pe,useSyncExternalStore:pe,useId:pe,unstable_isNewReconciler:!1},k2={readContext:fn,useCallback:function(e,t){return Vn().memoizedState=[e,t===void 0?null:t],e},useContext:fn,useEffect:k0,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,mu(4194308,4,IS.bind(null,t,e),n)},useLayoutEffect:function(e,t){return mu(4194308,4,e,t)},useInsertionEffect:function(e,t){return mu(4,2,e,t)},useMemo:function(e,t){var n=Vn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=Vn();return t=n!==void 0?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=A2.bind(null,Dt,e),[i.memoizedState,e]},useRef:function(e){var t=Vn();return e={current:e},t.memoizedState=e},useState:b0,useDebugValue:Hg,useDeferredValue:function(e){return Vn().memoizedState=e},useTransition:function(){var e=b0(!1),t=e[0];return e=I2.bind(null,e[1]),Vn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=Dt,s=Vn();if(kt){if(n===void 0)throw Error(B(407));n=n()}else{if(n=t(),re===null)throw Error(B(349));sr&30||yS(i,t,n)}s.memoizedState=n;var r={value:n,getSnapshot:t};return s.queue=r,k0(vS.bind(null,i,r,e),[e]),i.flags|=2048,_l(9,_S.bind(null,i,r,n,t),void 0,null),n},useId:function(){var e=Vn(),t=re.identifierPrefix;if(kt){var n=si,i=ii;n=(i&~(1<<32-In(i)-1)).toString(32)+n,t=":"+t+"R"+n,n=gl++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=S2++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},P2={readContext:fn,useCallback:bS,useContext:fn,useEffect:$g,useImperativeHandle:AS,useInsertionEffect:ES,useLayoutEffect:SS,useMemo:kS,useReducer:xf,useRef:xS,useState:function(){return xf(yl)},useDebugValue:Hg,useDeferredValue:function(e){var t=pn();return PS(t,Xt.memoizedState,e)},useTransition:function(){var e=xf(yl)[0],t=pn().memoizedState;return[e,t]},useMutableSource:mS,useSyncExternalStore:gS,useId:CS,unstable_isNewReconciler:!1},C2={readContext:fn,useCallback:bS,useContext:fn,useEffect:$g,useImperativeHandle:AS,useInsertionEffect:ES,useLayoutEffect:SS,useMemo:kS,useReducer:Ef,useRef:xS,useState:function(){return Ef(yl)},useDebugValue:Hg,useDeferredValue:function(e){var t=pn();return Xt===null?t.memoizedState=e:PS(t,Xt.memoizedState,e)},useTransition:function(){var e=Ef(yl)[0],t=pn().memoizedState;return[e,t]},useMutableSource:mS,useSyncExternalStore:gS,useId:CS,unstable_isNewReconciler:!1};function vn(e,t){if(e&&e.defaultProps){t=Mt({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function qp(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:Mt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Jh={isMounted:function(e){return(e=e._reactInternals)?pr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=Re(),s=Zi(e),r=li(i,s);r.payload=t,n!=null&&(r.callback=n),t=Xi(e,r,s),t!==null&&(An(t,e,s,i),fu(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=Re(),s=Zi(e),r=li(i,s);r.tag=1,r.payload=t,n!=null&&(r.callback=n),t=Xi(e,r,s),t!==null&&(An(t,e,s,i),fu(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Re(),i=Zi(e),s=li(n,i);s.tag=2,t!=null&&(s.callback=t),t=Xi(e,s,i),t!==null&&(An(t,e,i,n),fu(t,e,i))}};function P0(e,t,n,i,s,r,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,r,o):t.prototype&&t.prototype.isPureReactComponent?!ul(n,i)||!ul(s,r):!0}function VS(e,t,n){var i=!1,s=hs,r=t.contextType;return typeof r=="object"&&r!==null?r=fn(r):(s=ze(t)?nr:Se.current,i=t.contextTypes,r=(i=i!=null)?co(e,s):hs),t=new t(n,r),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Jh,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=r),t}function C0(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&Jh.enqueueReplaceState(t,t.state,null)}function Kp(e,t,n,i){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Og(e);var r=t.contextType;typeof r=="object"&&r!==null?s.context=fn(r):(r=ze(t)?nr:Se.current,s.context=co(e,r)),s.state=e.memoizedState,r=t.getDerivedStateFromProps,typeof r=="function"&&(qp(e,t,r,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Jh.enqueueReplaceState(s,s.state,null),th(e,n,s,i),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function po(e,t){try{var n="",i=t;do n+=sR(i),i=i.return;while(i);var s=n}catch(r){s=`
Error generating stack: `+r.message+`
`+r.stack}return{value:e,source:t,stack:s,digest:null}}function Sf(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Gp(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var R2=typeof WeakMap=="function"?WeakMap:Map;function NS(e,t,n){n=li(-1,n),n.tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){rh||(rh=!0,sm=i),Gp(e,t)},n}function OS(e,t,n){n=li(-1,n),n.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var s=t.value;n.payload=function(){return i(s)},n.callback=function(){Gp(e,t)}}var r=e.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(n.callback=function(){Gp(e,t),typeof i!="function"&&(Ji===null?Ji=new Set([this]):Ji.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function R0(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new R2;var s=new Set;i.set(t,s)}else s=i.get(t),s===void 0&&(s=new Set,i.set(t,s));s.has(n)||(s.add(n),e=W2.bind(null,e,t,n),t.then(e,e))}function D0(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function M0(e,t,n,i,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=li(-1,1),t.tag=2,Xi(n,t,1))),n.lanes|=1),e)}var D2=wi.ReactCurrentOwner,je=!1;function Pe(e,t,n,i){t.child=e===null?hS(t,null,n,i):ho(t,e.child,n,i)}function V0(e,t,n,i,s){n=n.render;var r=t.ref;return Xr(t,s),i=Ug(e,t,n,i,r,s),n=zg(),e!==null&&!je?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,di(e,t,s)):(kt&&n&&Pg(t),t.flags|=1,Pe(e,t,i,s),t.child)}function N0(e,t,n,i,s){if(e===null){var r=n.type;return typeof r=="function"&&!Jg(r)&&r.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=r,LS(e,t,r,i,s)):(e=vu(n.type,null,i,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(r=e.child,!(e.lanes&s)){var o=r.memoizedProps;if(n=n.compare,n=n!==null?n:ul,n(o,i)&&e.ref===t.ref)return di(e,t,s)}return t.flags|=1,e=ts(r,i),e.ref=t.ref,e.return=t,t.child=e}function LS(e,t,n,i,s){if(e!==null){var r=e.memoizedProps;if(ul(r,i)&&e.ref===t.ref)if(je=!1,t.pendingProps=i=r,(e.lanes&s)!==0)e.flags&131072&&(je=!0);else return t.lanes=e.lanes,di(e,t,s)}return Qp(e,t,n,i,s)}function FS(e,t,n){var i=t.pendingProps,s=i.children,r=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Et(jr,Ke),Ke|=n;else{if(!(n&1073741824))return e=r!==null?r.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Et(jr,Ke),Ke|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=r!==null?r.baseLanes:n,Et(jr,Ke),Ke|=i}else r!==null?(i=r.baseLanes|n,t.memoizedState=null):i=n,Et(jr,Ke),Ke|=i;return Pe(e,t,s,n),t.child}function jS(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Qp(e,t,n,i,s){var r=ze(n)?nr:Se.current;return r=co(t,r),Xr(t,s),n=Ug(e,t,n,i,r,s),i=zg(),e!==null&&!je?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,di(e,t,s)):(kt&&i&&Pg(t),t.flags|=1,Pe(e,t,n,s),t.child)}function O0(e,t,n,i,s){if(ze(n)){var r=!0;Qu(t)}else r=!1;if(Xr(t,s),t.stateNode===null)gu(e,t),VS(t,n,i),Kp(t,n,i,s),i=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=fn(c):(c=ze(n)?nr:Se.current,c=co(t,c));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&C0(t,o,i,c),Vi=!1;var f=t.memoizedState;o.state=f,th(t,i,o,s),l=t.memoizedState,a!==i||f!==l||Ue.current||Vi?(typeof h=="function"&&(qp(t,n,h,i),l=t.memoizedState),(a=Vi||P0(t,n,a,i,f,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{o=t.stateNode,fS(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:vn(t.type,a),o.props=c,d=t.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=fn(l):(l=ze(n)?nr:Se.current,l=co(t,l));var m=n.getDerivedStateFromProps;(h=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&C0(t,o,i,l),Vi=!1,f=t.memoizedState,o.state=f,th(t,i,o,s);var v=t.memoizedState;a!==d||f!==v||Ue.current||Vi?(typeof m=="function"&&(qp(t,n,m,i),v=t.memoizedState),(c=Vi||P0(t,n,c,i,f,v,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,v,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=v),o.props=i,o.state=v,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),i=!1)}return Yp(e,t,n,i,r,s)}function Yp(e,t,n,i,s,r){jS(e,t);var o=(t.flags&128)!==0;if(!i&&!o)return s&&T0(t,n,!1),di(e,t,r);i=t.stateNode,D2.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&o?(t.child=ho(t,e.child,null,r),t.child=ho(t,null,a,r)):Pe(e,t,a,r),t.memoizedState=i.state,s&&T0(t,n,!0),t.child}function BS(e){var t=e.stateNode;t.pendingContext?w0(e,t.pendingContext,t.pendingContext!==t.context):t.context&&w0(e,t.context,!1),Lg(e,t.containerInfo)}function L0(e,t,n,i,s){return uo(),Rg(s),t.flags|=256,Pe(e,t,n,i),t.child}var Xp={dehydrated:null,treeContext:null,retryLane:0};function Jp(e){return{baseLanes:e,cachePool:null,transitions:null}}function US(e,t,n){var i=t.pendingProps,s=Ct.current,r=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(s&2)!==0),a?(r=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Et(Ct,s&1),e===null)return Hp(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=i.children,e=i.fallback,r?(i=t.mode,r=t.child,o={mode:"hidden",children:o},!(i&1)&&r!==null?(r.childLanes=0,r.pendingProps=o):r=ed(o,i,0,null),e=Xs(e,i,n,null),r.return=t,e.return=t,r.sibling=e,t.child=r,t.child.memoizedState=Jp(n),t.memoizedState=Xp,e):Wg(t,o));if(s=e.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return M2(e,t,o,i,a,s,n);if(r){r=i.fallback,o=t.mode,s=e.child,a=s.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&t.child!==s?(i=t.child,i.childLanes=0,i.pendingProps=l,t.deletions=null):(i=ts(s,l),i.subtreeFlags=s.subtreeFlags&14680064),a!==null?r=ts(a,r):(r=Xs(r,o,n,null),r.flags|=2),r.return=t,i.return=t,i.sibling=r,t.child=i,i=r,r=t.child,o=e.child.memoizedState,o=o===null?Jp(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},r.memoizedState=o,r.childLanes=e.childLanes&~n,t.memoizedState=Xp,i}return r=e.child,e=r.sibling,i=ts(r,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=n),i.return=t,i.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Wg(e,t){return t=ed({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Mc(e,t,n,i){return i!==null&&Rg(i),ho(t,e.child,null,n),e=Wg(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function M2(e,t,n,i,s,r,o){if(n)return t.flags&256?(t.flags&=-257,i=Sf(Error(B(422))),Mc(e,t,o,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(r=i.fallback,s=t.mode,i=ed({mode:"visible",children:i.children},s,0,null),r=Xs(r,s,o,null),r.flags|=2,i.return=t,r.return=t,i.sibling=r,t.child=i,t.mode&1&&ho(t,e.child,null,o),t.child.memoizedState=Jp(o),t.memoizedState=Xp,r);if(!(t.mode&1))return Mc(e,t,o,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var a=i.dgst;return i=a,r=Error(B(419)),i=Sf(r,i,void 0),Mc(e,t,o,i)}if(a=(o&e.childLanes)!==0,je||a){if(i=re,i!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|o)?0:s,s!==0&&s!==r.retryLane&&(r.retryLane=s,hi(e,s),An(i,e,s,-1))}return Xg(),i=Sf(Error(B(421))),Mc(e,t,o,i)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=q2.bind(null,e),s._reactRetry=t,null):(e=r.treeContext,Ge=Yi(s.nextSibling),Ye=t,kt=!0,Tn=null,e!==null&&(sn[rn++]=ii,sn[rn++]=si,sn[rn++]=ir,ii=e.id,si=e.overflow,ir=t),t=Wg(t,i.children),t.flags|=4096,t)}function F0(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),Wp(e.return,t,n)}function If(e,t,n,i,s){var r=e.memoizedState;r===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=n,r.tailMode=s)}function zS(e,t,n){var i=t.pendingProps,s=i.revealOrder,r=i.tail;if(Pe(e,t,i.children,n),i=Ct.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)t:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&F0(e,n,t);else if(e.tag===19)F0(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Et(Ct,i),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&eh(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),If(t,!1,s,n,r);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&eh(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}If(t,!0,n,null,r);break;case"together":If(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function gu(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function di(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),rr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(B(153));if(t.child!==null){for(e=t.child,n=ts(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ts(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function V2(e,t,n){switch(t.tag){case 3:BS(t),uo();break;case 5:pS(t);break;case 1:ze(t.type)&&Qu(t);break;case 4:Lg(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,s=t.memoizedProps.value;Et(Ju,i._currentValue),i._currentValue=s;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(Et(Ct,Ct.current&1),t.flags|=128,null):n&t.child.childLanes?US(e,t,n):(Et(Ct,Ct.current&1),e=di(e,t,n),e!==null?e.sibling:null);Et(Ct,Ct.current&1);break;case 19:if(i=(n&t.childLanes)!==0,e.flags&128){if(i)return zS(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Et(Ct,Ct.current),i)break;return null;case 22:case 23:return t.lanes=0,FS(e,t,n)}return di(e,t,n)}var $S,Zp,HS,WS;$S=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Zp=function(){};HS=function(e,t,n,i){var s=e.memoizedProps;if(s!==i){e=t.stateNode,Ws(Un.current);var r=null;switch(n){case"input":s=Tp(e,s),i=Tp(e,i),r=[];break;case"select":s=Mt({},s,{value:void 0}),i=Mt({},i,{value:void 0}),r=[];break;case"textarea":s=Sp(e,s),i=Sp(e,i),r=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=Ku)}Ap(n,i);var o;n=null;for(c in s)if(!i.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(il.hasOwnProperty(c)?r||(r=[]):(r=r||[]).push(c,null));for(c in i){var l=i[c];if(a=s!=null?s[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(r||(r=[]),r.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(r=r||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(r=r||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(il.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&It("scroll",e),r||a===l||(r=[])):(r=r||[]).push(c,l))}n&&(r=r||[]).push("style",n);var c=r;(t.updateQueue=c)&&(t.flags|=4)}};WS=function(e,t,n,i){n!==i&&(t.flags|=4)};function fa(e,t){if(!kt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function me(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function N2(e,t,n){var i=t.pendingProps;switch(Cg(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return me(t),null;case 1:return ze(t.type)&&Gu(),me(t),null;case 3:return i=t.stateNode,fo(),bt(Ue),bt(Se),jg(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(Rc(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Tn!==null&&(am(Tn),Tn=null))),Zp(e,t),me(t),null;case 5:Fg(t);var s=Ws(ml.current);if(n=t.type,e!==null&&t.stateNode!=null)HS(e,t,n,i,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(B(166));return me(t),null}if(e=Ws(Un.current),Rc(t)){i=t.stateNode,n=t.type;var r=t.memoizedProps;switch(i[Fn]=t,i[fl]=r,e=(t.mode&1)!==0,n){case"dialog":It("cancel",i),It("close",i);break;case"iframe":case"object":case"embed":It("load",i);break;case"video":case"audio":for(s=0;s<Sa.length;s++)It(Sa[s],i);break;case"source":It("error",i);break;case"img":case"image":case"link":It("error",i),It("load",i);break;case"details":It("toggle",i);break;case"input":Kv(i,r),It("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!r.multiple},It("invalid",i);break;case"textarea":Qv(i,r),It("invalid",i)}Ap(n,r),s=null;for(var o in r)if(r.hasOwnProperty(o)){var a=r[o];o==="children"?typeof a=="string"?i.textContent!==a&&(r.suppressHydrationWarning!==!0&&Cc(i.textContent,a,e),s=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(r.suppressHydrationWarning!==!0&&Cc(i.textContent,a,e),s=["children",""+a]):il.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&It("scroll",i)}switch(n){case"input":xc(i),Gv(i,r,!0);break;case"textarea":xc(i),Yv(i);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(i.onclick=Ku)}i=s,t.updateQueue=i,i!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=vE(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=o.createElement(n,{is:i.is}):(e=o.createElement(n),n==="select"&&(o=e,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):e=o.createElementNS(e,n),e[Fn]=t,e[fl]=i,$S(e,t,!1,!1),t.stateNode=e;t:{switch(o=bp(n,i),n){case"dialog":It("cancel",e),It("close",e),s=i;break;case"iframe":case"object":case"embed":It("load",e),s=i;break;case"video":case"audio":for(s=0;s<Sa.length;s++)It(Sa[s],e);s=i;break;case"source":It("error",e),s=i;break;case"img":case"image":case"link":It("error",e),It("load",e),s=i;break;case"details":It("toggle",e),s=i;break;case"input":Kv(e,i),s=Tp(e,i),It("invalid",e);break;case"option":s=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},s=Mt({},i,{value:void 0}),It("invalid",e);break;case"textarea":Qv(e,i),s=Sp(e,i),It("invalid",e);break;default:s=i}Ap(n,s),a=s;for(r in a)if(a.hasOwnProperty(r)){var l=a[r];r==="style"?xE(e,l):r==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&wE(e,l)):r==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&sl(e,l):typeof l=="number"&&sl(e,""+l):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(il.hasOwnProperty(r)?l!=null&&r==="onScroll"&&It("scroll",e):l!=null&&mg(e,r,l,o))}switch(n){case"input":xc(e),Gv(e,i,!1);break;case"textarea":xc(e),Yv(e);break;case"option":i.value!=null&&e.setAttribute("value",""+us(i.value));break;case"select":e.multiple=!!i.multiple,r=i.value,r!=null?Kr(e,!!i.multiple,r,!1):i.defaultValue!=null&&Kr(e,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Ku)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break t;case"img":i=!0;break t;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return me(t),null;case 6:if(e&&t.stateNode!=null)WS(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(B(166));if(n=Ws(ml.current),Ws(Un.current),Rc(t)){if(i=t.stateNode,n=t.memoizedProps,i[Fn]=t,(r=i.nodeValue!==n)&&(e=Ye,e!==null))switch(e.tag){case 3:Cc(i.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Cc(i.nodeValue,n,(e.mode&1)!==0)}r&&(t.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Fn]=t,t.stateNode=i}return me(t),null;case 13:if(bt(Ct),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(kt&&Ge!==null&&t.mode&1&&!(t.flags&128))cS(),uo(),t.flags|=98560,r=!1;else if(r=Rc(t),i!==null&&i.dehydrated!==null){if(e===null){if(!r)throw Error(B(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(B(317));r[Fn]=t}else uo(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;me(t),r=!1}else Tn!==null&&(am(Tn),Tn=null),r=!0;if(!r)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(e===null||Ct.current&1?Zt===0&&(Zt=3):Xg())),t.updateQueue!==null&&(t.flags|=4),me(t),null);case 4:return fo(),Zp(e,t),e===null&&hl(t.stateNode.containerInfo),me(t),null;case 10:return Vg(t.type._context),me(t),null;case 17:return ze(t.type)&&Gu(),me(t),null;case 19:if(bt(Ct),r=t.memoizedState,r===null)return me(t),null;if(i=(t.flags&128)!==0,o=r.rendering,o===null)if(i)fa(r,!1);else{if(Zt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=eh(e),o!==null){for(t.flags|=128,fa(r,!1),i=o.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;n!==null;)r=n,e=i,r.flags&=14680066,o=r.alternate,o===null?(r.childLanes=0,r.lanes=e,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,e=o.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Et(Ct,Ct.current&1|2),t.child}e=e.sibling}r.tail!==null&&Bt()>mo&&(t.flags|=128,i=!0,fa(r,!1),t.lanes=4194304)}else{if(!i)if(e=eh(o),e!==null){if(t.flags|=128,i=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),fa(r,!0),r.tail===null&&r.tailMode==="hidden"&&!o.alternate&&!kt)return me(t),null}else 2*Bt()-r.renderingStartTime>mo&&n!==1073741824&&(t.flags|=128,i=!0,fa(r,!1),t.lanes=4194304);r.isBackwards?(o.sibling=t.child,t.child=o):(n=r.last,n!==null?n.sibling=o:t.child=o,r.last=o)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=Bt(),t.sibling=null,n=Ct.current,Et(Ct,i?n&1|2:n&1),t):(me(t),null);case 22:case 23:return Yg(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?Ke&1073741824&&(me(t),t.subtreeFlags&6&&(t.flags|=8192)):me(t),null;case 24:return null;case 25:return null}throw Error(B(156,t.tag))}function O2(e,t){switch(Cg(t),t.tag){case 1:return ze(t.type)&&Gu(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return fo(),bt(Ue),bt(Se),jg(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Fg(t),null;case 13:if(bt(Ct),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(B(340));uo()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return bt(Ct),null;case 4:return fo(),null;case 10:return Vg(t.type._context),null;case 22:case 23:return Yg(),null;case 24:return null;default:return null}}var Vc=!1,ve=!1,L2=typeof WeakSet=="function"?WeakSet:Set,q=null;function Fr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Lt(e,t,i)}else n.current=null}function tm(e,t,n){try{n()}catch(i){Lt(e,t,i)}}var j0=!1;function F2(e,t){if(Lp=Hu,e=YE(),kg(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else t:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var s=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{n.nodeType,r.nodeType}catch{n=null;break t}var o=0,a=-1,l=-1,c=0,h=0,d=e,f=null;e:for(;;){for(var m;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==r||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)f=d,d=m;for(;;){if(d===e)break e;if(f===n&&++c===s&&(a=o),f===r&&++h===i&&(l=o),(m=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Fp={focusedElem:e,selectionRange:n},Hu=!1,q=t;q!==null;)if(t=q,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,q=e;else for(;q!==null;){t=q;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var x=v.memoizedProps,E=v.memoizedState,y=t.stateNode,w=y.getSnapshotBeforeUpdate(t.elementType===t.type?x:vn(t.type,x),E);y.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var S=t.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(D){Lt(t,t.return,D)}if(e=t.sibling,e!==null){e.return=t.return,q=e;break}q=t.return}return v=j0,j0=!1,v}function Fa(e,t,n){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&e)===e){var r=s.destroy;s.destroy=void 0,r!==void 0&&tm(t,n,r)}s=s.next}while(s!==i)}}function Zh(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function em(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function qS(e){var t=e.alternate;t!==null&&(e.alternate=null,qS(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Fn],delete t[fl],delete t[Up],delete t[w2],delete t[T2])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function KS(e){return e.tag===5||e.tag===3||e.tag===4}function B0(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||KS(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function nm(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ku));else if(i!==4&&(e=e.child,e!==null))for(nm(e,t,n),e=e.sibling;e!==null;)nm(e,t,n),e=e.sibling}function im(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(im(e,t,n),e=e.sibling;e!==null;)im(e,t,n),e=e.sibling}var oe=null,wn=!1;function Pi(e,t,n){for(n=n.child;n!==null;)GS(e,t,n),n=n.sibling}function GS(e,t,n){if(Bn&&typeof Bn.onCommitFiberUnmount=="function")try{Bn.onCommitFiberUnmount(Wh,n)}catch{}switch(n.tag){case 5:ve||Fr(n,t);case 6:var i=oe,s=wn;oe=null,Pi(e,t,n),oe=i,wn=s,oe!==null&&(wn?(e=oe,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):oe.removeChild(n.stateNode));break;case 18:oe!==null&&(wn?(e=oe,n=n.stateNode,e.nodeType===8?_f(e.parentNode,n):e.nodeType===1&&_f(e,n),ll(e)):_f(oe,n.stateNode));break;case 4:i=oe,s=wn,oe=n.stateNode.containerInfo,wn=!0,Pi(e,t,n),oe=i,wn=s;break;case 0:case 11:case 14:case 15:if(!ve&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var r=s,o=r.destroy;r=r.tag,o!==void 0&&(r&2||r&4)&&tm(n,t,o),s=s.next}while(s!==i)}Pi(e,t,n);break;case 1:if(!ve&&(Fr(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){Lt(n,t,a)}Pi(e,t,n);break;case 21:Pi(e,t,n);break;case 22:n.mode&1?(ve=(i=ve)||n.memoizedState!==null,Pi(e,t,n),ve=i):Pi(e,t,n);break;default:Pi(e,t,n)}}function U0(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new L2),t.forEach(function(i){var s=K2.bind(null,e,i);n.has(i)||(n.add(i),i.then(s,s))})}}function yn(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i];try{var r=e,o=t,a=o;t:for(;a!==null;){switch(a.tag){case 5:oe=a.stateNode,wn=!1;break t;case 3:oe=a.stateNode.containerInfo,wn=!0;break t;case 4:oe=a.stateNode.containerInfo,wn=!0;break t}a=a.return}if(oe===null)throw Error(B(160));GS(r,o,s),oe=null,wn=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){Lt(s,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)QS(t,e),t=t.sibling}function QS(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(yn(t,e),Rn(e),i&4){try{Fa(3,e,e.return),Zh(3,e)}catch(x){Lt(e,e.return,x)}try{Fa(5,e,e.return)}catch(x){Lt(e,e.return,x)}}break;case 1:yn(t,e),Rn(e),i&512&&n!==null&&Fr(n,n.return);break;case 5:if(yn(t,e),Rn(e),i&512&&n!==null&&Fr(n,n.return),e.flags&32){var s=e.stateNode;try{sl(s,"")}catch(x){Lt(e,e.return,x)}}if(i&4&&(s=e.stateNode,s!=null)){var r=e.memoizedProps,o=n!==null?n.memoizedProps:r,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&r.type==="radio"&&r.name!=null&&yE(s,r),bp(a,o);var c=bp(a,r);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?xE(s,d):h==="dangerouslySetInnerHTML"?wE(s,d):h==="children"?sl(s,d):mg(s,h,d,c)}switch(a){case"input":xp(s,r);break;case"textarea":_E(s,r);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!r.multiple;var m=r.value;m!=null?Kr(s,!!r.multiple,m,!1):f!==!!r.multiple&&(r.defaultValue!=null?Kr(s,!!r.multiple,r.defaultValue,!0):Kr(s,!!r.multiple,r.multiple?[]:"",!1))}s[fl]=r}catch(x){Lt(e,e.return,x)}}break;case 6:if(yn(t,e),Rn(e),i&4){if(e.stateNode===null)throw Error(B(162));s=e.stateNode,r=e.memoizedProps;try{s.nodeValue=r}catch(x){Lt(e,e.return,x)}}break;case 3:if(yn(t,e),Rn(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{ll(t.containerInfo)}catch(x){Lt(e,e.return,x)}break;case 4:yn(t,e),Rn(e);break;case 13:yn(t,e),Rn(e),s=e.child,s.flags&8192&&(r=s.memoizedState!==null,s.stateNode.isHidden=r,!r||s.alternate!==null&&s.alternate.memoizedState!==null||(Gg=Bt())),i&4&&U0(e);break;case 22:if(h=n!==null&&n.memoizedState!==null,e.mode&1?(ve=(c=ve)||h,yn(t,e),ve=c):yn(t,e),Rn(e),i&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!h&&e.mode&1)for(q=e,h=e.child;h!==null;){for(d=q=h;q!==null;){switch(f=q,m=f.child,f.tag){case 0:case 11:case 14:case 15:Fa(4,f,f.return);break;case 1:Fr(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){i=f,n=f.return;try{t=i,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(x){Lt(i,n,x)}}break;case 5:Fr(f,f.return);break;case 22:if(f.memoizedState!==null){$0(d);continue}}m!==null?(m.return=f,q=m):$0(d)}h=h.sibling}t:for(h=null,d=e;;){if(d.tag===5){if(h===null){h=d;try{s=d.stateNode,c?(r=s.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=TE("display",o))}catch(x){Lt(e,e.return,x)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(x){Lt(e,e.return,x)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break t;for(;d.sibling===null;){if(d.return===null||d.return===e)break t;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:yn(t,e),Rn(e),i&4&&U0(e);break;case 21:break;default:yn(t,e),Rn(e)}}function Rn(e){var t=e.flags;if(t&2){try{t:{for(var n=e.return;n!==null;){if(KS(n)){var i=n;break t}n=n.return}throw Error(B(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(sl(s,""),i.flags&=-33);var r=B0(e);im(e,r,s);break;case 3:case 4:var o=i.stateNode.containerInfo,a=B0(e);nm(e,a,o);break;default:throw Error(B(161))}}catch(l){Lt(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function j2(e,t,n){q=e,YS(e)}function YS(e,t,n){for(var i=(e.mode&1)!==0;q!==null;){var s=q,r=s.child;if(s.tag===22&&i){var o=s.memoizedState!==null||Vc;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||ve;a=Vc;var c=ve;if(Vc=o,(ve=l)&&!c)for(q=s;q!==null;)o=q,l=o.child,o.tag===22&&o.memoizedState!==null?H0(s):l!==null?(l.return=o,q=l):H0(s);for(;r!==null;)q=r,YS(r),r=r.sibling;q=s,Vc=a,ve=c}z0(e)}else s.subtreeFlags&8772&&r!==null?(r.return=s,q=r):z0(e)}}function z0(e){for(;q!==null;){var t=q;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ve||Zh(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!ve)if(n===null)i.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:vn(t.type,n.memoizedProps);i.componentDidUpdate(s,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var r=t.updateQueue;r!==null&&A0(t,r,i);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}A0(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&ll(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}ve||t.flags&512&&em(t)}catch(f){Lt(t,t.return,f)}}if(t===e){q=null;break}if(n=t.sibling,n!==null){n.return=t.return,q=n;break}q=t.return}}function $0(e){for(;q!==null;){var t=q;if(t===e){q=null;break}var n=t.sibling;if(n!==null){n.return=t.return,q=n;break}q=t.return}}function H0(e){for(;q!==null;){var t=q;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Zh(4,t)}catch(l){Lt(t,n,l)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var s=t.return;try{i.componentDidMount()}catch(l){Lt(t,s,l)}}var r=t.return;try{em(t)}catch(l){Lt(t,r,l)}break;case 5:var o=t.return;try{em(t)}catch(l){Lt(t,o,l)}}}catch(l){Lt(t,t.return,l)}if(t===e){q=null;break}var a=t.sibling;if(a!==null){a.return=t.return,q=a;break}q=t.return}}var B2=Math.ceil,sh=wi.ReactCurrentDispatcher,qg=wi.ReactCurrentOwner,un=wi.ReactCurrentBatchConfig,dt=0,re=null,qt=null,ue=0,Ke=0,jr=xs(0),Zt=0,vl=null,rr=0,td=0,Kg=0,ja=null,Oe=null,Gg=0,mo=1/0,ti=null,rh=!1,sm=null,Ji=null,Nc=!1,zi=null,oh=0,Ba=0,rm=null,yu=-1,_u=0;function Re(){return dt&6?Bt():yu!==-1?yu:yu=Bt()}function Zi(e){return e.mode&1?dt&2&&ue!==0?ue&-ue:E2.transition!==null?(_u===0&&(_u=VE()),_u):(e=_t,e!==0||(e=window.event,e=e===void 0?16:UE(e.type)),e):1}function An(e,t,n,i){if(50<Ba)throw Ba=0,rm=null,Error(B(185));zl(e,n,i),(!(dt&2)||e!==re)&&(e===re&&(!(dt&2)&&(td|=n),Zt===4&&Oi(e,ue)),$e(e,i),n===1&&dt===0&&!(t.mode&1)&&(mo=Bt()+500,Yh&&Es()))}function $e(e,t){var n=e.callbackNode;ER(e,t);var i=$u(e,e===re?ue:0);if(i===0)n!==null&&Zv(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(n!=null&&Zv(n),t===1)e.tag===0?x2(W0.bind(null,e)):oS(W0.bind(null,e)),_2(function(){!(dt&6)&&Es()}),n=null;else{switch(NE(i)){case 1:n=wg;break;case 4:n=DE;break;case 16:n=zu;break;case 536870912:n=ME;break;default:n=zu}n=sI(n,XS.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function XS(e,t){if(yu=-1,_u=0,dt&6)throw Error(B(327));var n=e.callbackNode;if(Jr()&&e.callbackNode!==n)return null;var i=$u(e,e===re?ue:0);if(i===0)return null;if(i&30||i&e.expiredLanes||t)t=ah(e,i);else{t=i;var s=dt;dt|=2;var r=ZS();(re!==e||ue!==t)&&(ti=null,mo=Bt()+500,Ys(e,t));do try{$2();break}catch(a){JS(e,a)}while(!0);Mg(),sh.current=r,dt=s,qt!==null?t=0:(re=null,ue=0,t=Zt)}if(t!==0){if(t===2&&(s=Dp(e),s!==0&&(i=s,t=om(e,s))),t===1)throw n=vl,Ys(e,0),Oi(e,i),$e(e,Bt()),n;if(t===6)Oi(e,i);else{if(s=e.current.alternate,!(i&30)&&!U2(s)&&(t=ah(e,i),t===2&&(r=Dp(e),r!==0&&(i=r,t=om(e,r))),t===1))throw n=vl,Ys(e,0),Oi(e,i),$e(e,Bt()),n;switch(e.finishedWork=s,e.finishedLanes=i,t){case 0:case 1:throw Error(B(345));case 2:js(e,Oe,ti);break;case 3:if(Oi(e,i),(i&130023424)===i&&(t=Gg+500-Bt(),10<t)){if($u(e,0)!==0)break;if(s=e.suspendedLanes,(s&i)!==i){Re(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Bp(js.bind(null,e,Oe,ti),t);break}js(e,Oe,ti);break;case 4:if(Oi(e,i),(i&4194240)===i)break;for(t=e.eventTimes,s=-1;0<i;){var o=31-In(i);r=1<<o,o=t[o],o>s&&(s=o),i&=~r}if(i=s,i=Bt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*B2(i/1960))-i,10<i){e.timeoutHandle=Bp(js.bind(null,e,Oe,ti),i);break}js(e,Oe,ti);break;case 5:js(e,Oe,ti);break;default:throw Error(B(329))}}}return $e(e,Bt()),e.callbackNode===n?XS.bind(null,e):null}function om(e,t){var n=ja;return e.current.memoizedState.isDehydrated&&(Ys(e,t).flags|=256),e=ah(e,t),e!==2&&(t=Oe,Oe=n,t!==null&&am(t)),e}function am(e){Oe===null?Oe=e:Oe.push.apply(Oe,e)}function U2(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var s=n[i],r=s.getSnapshot;s=s.value;try{if(!bn(r(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Oi(e,t){for(t&=~Kg,t&=~td,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-In(t),i=1<<n;e[n]=-1,t&=~i}}function W0(e){if(dt&6)throw Error(B(327));Jr();var t=$u(e,0);if(!(t&1))return $e(e,Bt()),null;var n=ah(e,t);if(e.tag!==0&&n===2){var i=Dp(e);i!==0&&(t=i,n=om(e,i))}if(n===1)throw n=vl,Ys(e,0),Oi(e,t),$e(e,Bt()),n;if(n===6)throw Error(B(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,js(e,Oe,ti),$e(e,Bt()),null}function Qg(e,t){var n=dt;dt|=1;try{return e(t)}finally{dt=n,dt===0&&(mo=Bt()+500,Yh&&Es())}}function or(e){zi!==null&&zi.tag===0&&!(dt&6)&&Jr();var t=dt;dt|=1;var n=un.transition,i=_t;try{if(un.transition=null,_t=1,e)return e()}finally{_t=i,un.transition=n,dt=t,!(dt&6)&&Es()}}function Yg(){Ke=jr.current,bt(jr)}function Ys(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,y2(n)),qt!==null)for(n=qt.return;n!==null;){var i=n;switch(Cg(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Gu();break;case 3:fo(),bt(Ue),bt(Se),jg();break;case 5:Fg(i);break;case 4:fo();break;case 13:bt(Ct);break;case 19:bt(Ct);break;case 10:Vg(i.type._context);break;case 22:case 23:Yg()}n=n.return}if(re=e,qt=e=ts(e.current,null),ue=Ke=t,Zt=0,vl=null,Kg=td=rr=0,Oe=ja=null,Hs!==null){for(t=0;t<Hs.length;t++)if(n=Hs[t],i=n.interleaved,i!==null){n.interleaved=null;var s=i.next,r=n.pending;if(r!==null){var o=r.next;r.next=s,i.next=o}n.pending=i}Hs=null}return e}function JS(e,t){do{var n=qt;try{if(Mg(),pu.current=ih,nh){for(var i=Dt.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}nh=!1}if(sr=0,ie=Xt=Dt=null,La=!1,gl=0,qg.current=null,n===null||n.return===null){Zt=1,vl=t,qt=null;break}t:{var r=e,o=n.return,a=n,l=t;if(t=ue,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=D0(o);if(m!==null){m.flags&=-257,M0(m,o,a,r,t),m.mode&1&&R0(r,c,t),t=m,l=c;var v=t.updateQueue;if(v===null){var x=new Set;x.add(l),t.updateQueue=x}else v.add(l);break t}else{if(!(t&1)){R0(r,c,t),Xg();break t}l=Error(B(426))}}else if(kt&&a.mode&1){var E=D0(o);if(E!==null){!(E.flags&65536)&&(E.flags|=256),M0(E,o,a,r,t),Rg(po(l,a));break t}}r=l=po(l,a),Zt!==4&&(Zt=2),ja===null?ja=[r]:ja.push(r),r=o;do{switch(r.tag){case 3:r.flags|=65536,t&=-t,r.lanes|=t;var y=NS(r,l,t);I0(r,y);break t;case 1:a=l;var w=r.type,S=r.stateNode;if(!(r.flags&128)&&(typeof w.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Ji===null||!Ji.has(S)))){r.flags|=65536,t&=-t,r.lanes|=t;var D=OS(r,a,t);I0(r,D);break t}}r=r.return}while(r!==null)}eI(n)}catch(M){t=M,qt===n&&n!==null&&(qt=n=n.return);continue}break}while(!0)}function ZS(){var e=sh.current;return sh.current=ih,e===null?ih:e}function Xg(){(Zt===0||Zt===3||Zt===2)&&(Zt=4),re===null||!(rr&268435455)&&!(td&268435455)||Oi(re,ue)}function ah(e,t){var n=dt;dt|=2;var i=ZS();(re!==e||ue!==t)&&(ti=null,Ys(e,t));do try{z2();break}catch(s){JS(e,s)}while(!0);if(Mg(),dt=n,sh.current=i,qt!==null)throw Error(B(261));return re=null,ue=0,Zt}function z2(){for(;qt!==null;)tI(qt)}function $2(){for(;qt!==null&&!pR();)tI(qt)}function tI(e){var t=iI(e.alternate,e,Ke);e.memoizedProps=e.pendingProps,t===null?eI(e):qt=t,qg.current=null}function eI(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=O2(n,t),n!==null){n.flags&=32767,qt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Zt=6,qt=null;return}}else if(n=N2(n,t,Ke),n!==null){qt=n;return}if(t=t.sibling,t!==null){qt=t;return}qt=t=e}while(t!==null);Zt===0&&(Zt=5)}function js(e,t,n){var i=_t,s=un.transition;try{un.transition=null,_t=1,H2(e,t,n,i)}finally{un.transition=s,_t=i}return null}function H2(e,t,n,i){do Jr();while(zi!==null);if(dt&6)throw Error(B(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(B(177));e.callbackNode=null,e.callbackPriority=0;var r=n.lanes|n.childLanes;if(SR(e,r),e===re&&(qt=re=null,ue=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Nc||(Nc=!0,sI(zu,function(){return Jr(),null})),r=(n.flags&15990)!==0,n.subtreeFlags&15990||r){r=un.transition,un.transition=null;var o=_t;_t=1;var a=dt;dt|=4,qg.current=null,F2(e,n),QS(n,e),u2(Fp),Hu=!!Lp,Fp=Lp=null,e.current=n,j2(n),mR(),dt=a,_t=o,un.transition=r}else e.current=n;if(Nc&&(Nc=!1,zi=e,oh=s),r=e.pendingLanes,r===0&&(Ji=null),_R(n.stateNode),$e(e,Bt()),t!==null)for(i=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],i(s.value,{componentStack:s.stack,digest:s.digest});if(rh)throw rh=!1,e=sm,sm=null,e;return oh&1&&e.tag!==0&&Jr(),r=e.pendingLanes,r&1?e===rm?Ba++:(Ba=0,rm=e):Ba=0,Es(),null}function Jr(){if(zi!==null){var e=NE(oh),t=un.transition,n=_t;try{if(un.transition=null,_t=16>e?16:e,zi===null)var i=!1;else{if(e=zi,zi=null,oh=0,dt&6)throw Error(B(331));var s=dt;for(dt|=4,q=e.current;q!==null;){var r=q,o=r.child;if(q.flags&16){var a=r.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(q=c;q!==null;){var h=q;switch(h.tag){case 0:case 11:case 15:Fa(8,h,r)}var d=h.child;if(d!==null)d.return=h,q=d;else for(;q!==null;){h=q;var f=h.sibling,m=h.return;if(qS(h),h===c){q=null;break}if(f!==null){f.return=m,q=f;break}q=m}}}var v=r.alternate;if(v!==null){var x=v.child;if(x!==null){v.child=null;do{var E=x.sibling;x.sibling=null,x=E}while(x!==null)}}q=r}}if(r.subtreeFlags&2064&&o!==null)o.return=r,q=o;else t:for(;q!==null;){if(r=q,r.flags&2048)switch(r.tag){case 0:case 11:case 15:Fa(9,r,r.return)}var y=r.sibling;if(y!==null){y.return=r.return,q=y;break t}q=r.return}}var w=e.current;for(q=w;q!==null;){o=q;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,q=S;else t:for(o=w;q!==null;){if(a=q,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Zh(9,a)}}catch(M){Lt(a,a.return,M)}if(a===o){q=null;break t}var D=a.sibling;if(D!==null){D.return=a.return,q=D;break t}q=a.return}}if(dt=s,Es(),Bn&&typeof Bn.onPostCommitFiberRoot=="function")try{Bn.onPostCommitFiberRoot(Wh,e)}catch{}i=!0}return i}finally{_t=n,un.transition=t}}return!1}function q0(e,t,n){t=po(n,t),t=NS(e,t,1),e=Xi(e,t,1),t=Re(),e!==null&&(zl(e,1,t),$e(e,t))}function Lt(e,t,n){if(e.tag===3)q0(e,e,n);else for(;t!==null;){if(t.tag===3){q0(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Ji===null||!Ji.has(i))){e=po(n,e),e=OS(t,e,1),t=Xi(t,e,1),e=Re(),t!==null&&(zl(t,1,e),$e(t,e));break}}t=t.return}}function W2(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),t=Re(),e.pingedLanes|=e.suspendedLanes&n,re===e&&(ue&n)===n&&(Zt===4||Zt===3&&(ue&130023424)===ue&&500>Bt()-Gg?Ys(e,0):Kg|=n),$e(e,t)}function nI(e,t){t===0&&(e.mode&1?(t=Ic,Ic<<=1,!(Ic&130023424)&&(Ic=4194304)):t=1);var n=Re();e=hi(e,t),e!==null&&(zl(e,t,n),$e(e,n))}function q2(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),nI(e,n)}function K2(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(B(314))}i!==null&&i.delete(t),nI(e,n)}var iI;iI=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ue.current)je=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return je=!1,V2(e,t,n);je=!!(e.flags&131072)}else je=!1,kt&&t.flags&1048576&&aS(t,Xu,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;gu(e,t),e=t.pendingProps;var s=co(t,Se.current);Xr(t,n),s=Ug(null,t,i,e,s,n);var r=zg();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ze(i)?(r=!0,Qu(t)):r=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Og(t),s.updater=Jh,t.stateNode=s,s._reactInternals=t,Kp(t,i,e,n),t=Yp(null,t,i,!0,r,n)):(t.tag=0,kt&&r&&Pg(t),Pe(null,t,s,n),t=t.child),t;case 16:i=t.elementType;t:{switch(gu(e,t),e=t.pendingProps,s=i._init,i=s(i._payload),t.type=i,s=t.tag=Q2(i),e=vn(i,e),s){case 0:t=Qp(null,t,i,e,n);break t;case 1:t=O0(null,t,i,e,n);break t;case 11:t=V0(null,t,i,e,n);break t;case 14:t=N0(null,t,i,vn(i.type,e),n);break t}throw Error(B(306,i,""))}return t;case 0:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:vn(i,s),Qp(e,t,i,s,n);case 1:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:vn(i,s),O0(e,t,i,s,n);case 3:t:{if(BS(t),e===null)throw Error(B(387));i=t.pendingProps,r=t.memoizedState,s=r.element,fS(e,t),th(t,i,null,n);var o=t.memoizedState;if(i=o.element,r.isDehydrated)if(r={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=r,t.memoizedState=r,t.flags&256){s=po(Error(B(423)),t),t=L0(e,t,i,n,s);break t}else if(i!==s){s=po(Error(B(424)),t),t=L0(e,t,i,n,s);break t}else for(Ge=Yi(t.stateNode.containerInfo.firstChild),Ye=t,kt=!0,Tn=null,n=hS(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(uo(),i===s){t=di(e,t,n);break t}Pe(e,t,i,n)}t=t.child}return t;case 5:return pS(t),e===null&&Hp(t),i=t.type,s=t.pendingProps,r=e!==null?e.memoizedProps:null,o=s.children,jp(i,s)?o=null:r!==null&&jp(i,r)&&(t.flags|=32),jS(e,t),Pe(e,t,o,n),t.child;case 6:return e===null&&Hp(t),null;case 13:return US(e,t,n);case 4:return Lg(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=ho(t,null,i,n):Pe(e,t,i,n),t.child;case 11:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:vn(i,s),V0(e,t,i,s,n);case 7:return Pe(e,t,t.pendingProps,n),t.child;case 8:return Pe(e,t,t.pendingProps.children,n),t.child;case 12:return Pe(e,t,t.pendingProps.children,n),t.child;case 10:t:{if(i=t.type._context,s=t.pendingProps,r=t.memoizedProps,o=s.value,Et(Ju,i._currentValue),i._currentValue=o,r!==null)if(bn(r.value,o)){if(r.children===s.children&&!Ue.current){t=di(e,t,n);break t}}else for(r=t.child,r!==null&&(r.return=t);r!==null;){var a=r.dependencies;if(a!==null){o=r.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(r.tag===1){l=li(-1,n&-n),l.tag=2;var c=r.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}r.lanes|=n,l=r.alternate,l!==null&&(l.lanes|=n),Wp(r.return,n,t),a.lanes|=n;break}l=l.next}}else if(r.tag===10)o=r.type===t.type?null:r.child;else if(r.tag===18){if(o=r.return,o===null)throw Error(B(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Wp(o,n,t),o=r.sibling}else o=r.child;if(o!==null)o.return=r;else for(o=r;o!==null;){if(o===t){o=null;break}if(r=o.sibling,r!==null){r.return=o.return,o=r;break}o=o.return}r=o}Pe(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,i=t.pendingProps.children,Xr(t,n),s=fn(s),i=i(s),t.flags|=1,Pe(e,t,i,n),t.child;case 14:return i=t.type,s=vn(i,t.pendingProps),s=vn(i.type,s),N0(e,t,i,s,n);case 15:return LS(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:vn(i,s),gu(e,t),t.tag=1,ze(i)?(e=!0,Qu(t)):e=!1,Xr(t,n),VS(t,i,s),Kp(t,i,s,n),Yp(null,t,i,!0,e,n);case 19:return zS(e,t,n);case 22:return FS(e,t,n)}throw Error(B(156,t.tag))};function sI(e,t){return RE(e,t)}function G2(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function an(e,t,n,i){return new G2(e,t,n,i)}function Jg(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Q2(e){if(typeof e=="function")return Jg(e)?1:0;if(e!=null){if(e=e.$$typeof,e===yg)return 11;if(e===_g)return 14}return 2}function ts(e,t){var n=e.alternate;return n===null?(n=an(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function vu(e,t,n,i,s,r){var o=2;if(i=e,typeof e=="function")Jg(e)&&(o=1);else if(typeof e=="string")o=5;else t:switch(e){case Pr:return Xs(n.children,s,r,t);case gg:o=8,s|=8;break;case yp:return e=an(12,n,t,s|2),e.elementType=yp,e.lanes=r,e;case _p:return e=an(13,n,t,s),e.elementType=_p,e.lanes=r,e;case vp:return e=an(19,n,t,s),e.elementType=vp,e.lanes=r,e;case pE:return ed(n,s,r,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case dE:o=10;break t;case fE:o=9;break t;case yg:o=11;break t;case _g:o=14;break t;case Mi:o=16,i=null;break t}throw Error(B(130,e==null?e:typeof e,""))}return t=an(o,n,t,s),t.elementType=e,t.type=i,t.lanes=r,t}function Xs(e,t,n,i){return e=an(7,e,i,t),e.lanes=n,e}function ed(e,t,n,i){return e=an(22,e,i,t),e.elementType=pE,e.lanes=n,e.stateNode={isHidden:!1},e}function Af(e,t,n){return e=an(6,e,null,t),e.lanes=n,e}function bf(e,t,n){return t=an(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Y2(e,t,n,i,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=af(0),this.expirationTimes=af(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=af(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Zg(e,t,n,i,s,r,o,a,l){return e=new Y2(e,t,n,a,l),t===1?(t=1,r===!0&&(t|=8)):t=0,r=an(3,null,null,t),e.current=r,r.stateNode=e,r.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Og(r),e}function X2(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:kr,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}function rI(e){if(!e)return hs;e=e._reactInternals;t:{if(pr(e)!==e||e.tag!==1)throw Error(B(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break t;case 1:if(ze(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break t}}t=t.return}while(t!==null);throw Error(B(171))}if(e.tag===1){var n=e.type;if(ze(n))return rS(e,n,t)}return t}function oI(e,t,n,i,s,r,o,a,l){return e=Zg(n,i,!0,e,s,r,o,a,l),e.context=rI(null),n=e.current,i=Re(),s=Zi(n),r=li(i,s),r.callback=t??null,Xi(n,r,s),e.current.lanes=s,zl(e,s,i),$e(e,i),e}function nd(e,t,n,i){var s=t.current,r=Re(),o=Zi(s);return n=rI(n),t.context===null?t.context=n:t.pendingContext=n,t=li(r,o),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=Xi(s,t,o),e!==null&&(An(e,s,o,r),fu(e,s,o)),o}function lh(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function K0(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function ty(e,t){K0(e,t),(e=e.alternate)&&K0(e,t)}function J2(){return null}var aI=typeof reportError=="function"?reportError:function(e){console.error(e)};function ey(e){this._internalRoot=e}id.prototype.render=ey.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(B(409));nd(e,t,null,null)};id.prototype.unmount=ey.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;or(function(){nd(null,e,null,null)}),t[ui]=null}};function id(e){this._internalRoot=e}id.prototype.unstable_scheduleHydration=function(e){if(e){var t=FE();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ni.length&&t!==0&&t<Ni[n].priority;n++);Ni.splice(n,0,e),n===0&&BE(e)}};function ny(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function sd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function G0(){}function Z2(e,t,n,i,s){if(s){if(typeof i=="function"){var r=i;i=function(){var c=lh(o);r.call(c)}}var o=oI(t,i,e,0,null,!1,!1,"",G0);return e._reactRootContainer=o,e[ui]=o.current,hl(e.nodeType===8?e.parentNode:e),or(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof i=="function"){var a=i;i=function(){var c=lh(l);a.call(c)}}var l=Zg(e,0,!1,null,null,!1,!1,"",G0);return e._reactRootContainer=l,e[ui]=l.current,hl(e.nodeType===8?e.parentNode:e),or(function(){nd(t,l,n,i)}),l}function rd(e,t,n,i,s){var r=n._reactRootContainer;if(r){var o=r;if(typeof s=="function"){var a=s;s=function(){var l=lh(o);a.call(l)}}nd(t,o,e,s)}else o=Z2(n,t,e,s,i);return lh(o)}OE=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Ea(t.pendingLanes);n!==0&&(Tg(t,n|1),$e(t,Bt()),!(dt&6)&&(mo=Bt()+500,Es()))}break;case 13:or(function(){var i=hi(e,1);if(i!==null){var s=Re();An(i,e,1,s)}}),ty(e,1)}};xg=function(e){if(e.tag===13){var t=hi(e,134217728);if(t!==null){var n=Re();An(t,e,134217728,n)}ty(e,134217728)}};LE=function(e){if(e.tag===13){var t=Zi(e),n=hi(e,t);if(n!==null){var i=Re();An(n,e,t,i)}ty(e,t)}};FE=function(){return _t};jE=function(e,t){var n=_t;try{return _t=e,t()}finally{_t=n}};Pp=function(e,t,n){switch(t){case"input":if(xp(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var s=Qh(i);if(!s)throw Error(B(90));gE(i),xp(i,s)}}}break;case"textarea":_E(e,n);break;case"select":t=n.value,t!=null&&Kr(e,!!n.multiple,t,!1)}};IE=Qg;AE=or;var tD={usingClientEntryPoint:!1,Events:[Hl,Mr,Qh,EE,SE,Qg]},pa={findFiberByHostInstance:$s,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},eD={bundleType:pa.bundleType,version:pa.version,rendererPackageName:pa.rendererPackageName,rendererConfig:pa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:wi.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=PE(e),e===null?null:e.stateNode},findFiberByHostInstance:pa.findFiberByHostInstance||J2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Oc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Oc.isDisabled&&Oc.supportsFiber)try{Wh=Oc.inject(eD),Bn=Oc}catch{}}Je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tD;Je.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ny(t))throw Error(B(200));return X2(e,t,null,n)};Je.createRoot=function(e,t){if(!ny(e))throw Error(B(299));var n=!1,i="",s=aI;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Zg(e,1,!1,null,null,n,!1,i,s),e[ui]=t.current,hl(e.nodeType===8?e.parentNode:e),new ey(t)};Je.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(B(188)):(e=Object.keys(e).join(","),Error(B(268,e)));return e=PE(t),e=e===null?null:e.stateNode,e};Je.flushSync=function(e){return or(e)};Je.hydrate=function(e,t,n){if(!sd(t))throw Error(B(200));return rd(null,e,t,!0,n)};Je.hydrateRoot=function(e,t,n){if(!ny(e))throw Error(B(405));var i=n!=null&&n.hydratedSources||null,s=!1,r="",o=aI;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=oI(t,null,e,1,n??null,s,!1,r,o),e[ui]=t.current,hl(e),i)for(e=0;e<i.length;e++)n=i[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new id(t)};Je.render=function(e,t,n){if(!sd(t))throw Error(B(200));return rd(null,e,t,!1,n)};Je.unmountComponentAtNode=function(e){if(!sd(e))throw Error(B(40));return e._reactRootContainer?(or(function(){rd(null,null,e,!1,function(){e._reactRootContainer=null,e[ui]=null})}),!0):!1};Je.unstable_batchedUpdates=Qg;Je.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!sd(n))throw Error(B(200));if(e==null||e._reactInternals===void 0)throw Error(B(38));return rd(e,t,n,!1,i)};Je.version="18.3.1-next-f1338f8080-20240426";function lI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(lI)}catch(e){console.error(e)}}lI(),lE.exports=Je;var nD=lE.exports,cI,Q0=nD;cI=Q0.createRoot,Q0.hydrateRoot;const iD=()=>{};var Y0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uI=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let s=e.charCodeAt(i);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=s&63|128):(s&64512)===55296&&i+1<e.length&&(e.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(e.charCodeAt(++i)&1023),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=s&63|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=s&63|128)}return t},sD=function(e){const t=[];let n=0,i=0;for(;n<e.length;){const s=e[n++];if(s<128)t[i++]=String.fromCharCode(s);else if(s>191&&s<224){const r=e[n++];t[i++]=String.fromCharCode((s&31)<<6|r&63)}else if(s>239&&s<365){const r=e[n++],o=e[n++],a=e[n++],l=((s&7)<<18|(r&63)<<12|(o&63)<<6|a&63)-65536;t[i++]=String.fromCharCode(55296+(l>>10)),t[i++]=String.fromCharCode(56320+(l&1023))}else{const r=e[n++],o=e[n++];t[i++]=String.fromCharCode((s&15)<<12|(r&63)<<6|o&63)}}return t.join("")},hI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<e.length;s+=3){const r=e[s],o=s+1<e.length,a=o?e[s+1]:0,l=s+2<e.length,c=l?e[s+2]:0,h=r>>2,d=(r&3)<<4|a>>4;let f=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(f=64)),i.push(n[h],n[d],n[f],n[m])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(uI(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):sD(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<e.length;){const r=n[e.charAt(s++)],a=s<e.length?n[e.charAt(s)]:0;++s;const c=s<e.length?n[e.charAt(s)]:64;++s;const d=s<e.length?n[e.charAt(s)]:64;if(++s,r==null||a==null||c==null||d==null)throw new rD;const f=r<<2|a>>4;if(i.push(f),c!==64){const m=a<<4&240|c>>2;if(i.push(m),d!==64){const v=c<<6&192|d;i.push(v)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class rD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const oD=function(e){const t=uI(e);return hI.encodeByteArray(t,!0)},ch=function(e){return oD(e).replace(/\./g,"")},dI=function(e){try{return hI.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lD=()=>aD().__FIREBASE_DEFAULTS__,cD=()=>{if(typeof process>"u"||typeof Y0>"u")return;const e=Y0.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},uD=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&dI(e[1]);return t&&JSON.parse(t)},od=()=>{try{return iD()||lD()||cD()||uD()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},fI=e=>{var t,n;return(n=(t=od())==null?void 0:t.emulatorHosts)==null?void 0:n[e]},hD=e=>{const t=fI(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),i]:[t.substring(0,n),i]},pI=()=>{var e;return(e=od())==null?void 0:e.config},mI=e=>{var t;return(t=od())==null?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ro(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function gI(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fD(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=t||"demo-project",s=e.iat||0,r=e.sub||e.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}},...e};return[ch(JSON.stringify(n)),ch(JSON.stringify(o)),""].join(".")}const Ua={};function pD(){const e={prod:[],emulator:[]};for(const t of Object.keys(Ua))Ua[t]?e.emulator.push(t):e.prod.push(t);return e}function mD(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let X0=!1;function yI(e,t){if(typeof window>"u"||typeof document>"u"||!Ro(window.location.host)||Ua[e]===t||Ua[e]||X0)return;Ua[e]=t;function n(f){return`__firebase__banner__${f}`}const i="__firebase__banner",r=pD().prod.length>0;function o(){const f=document.getElementById(i);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,m){f.setAttribute("width","24"),f.setAttribute("id",m),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function c(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{X0=!0,o()},f}function h(f,m){f.setAttribute("id",m),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function d(){const f=mD(i),m=n("text"),v=document.getElementById(m)||document.createElement("span"),x=n("learnmore"),E=document.getElementById(x)||document.createElement("a"),y=n("preprendIcon"),w=document.getElementById(y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const S=f.element;a(S),h(E,x);const D=c();l(w,y),S.append(w,v,E,D),document.body.appendChild(S)}r?(v.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,v.innerText="Preview backend running in this workspace."),v.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function gD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ie())}function yD(){var t;const e=(t=od())==null?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function _D(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function vD(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function wD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function TD(){const e=Ie();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function xD(){return!yD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ED(){try{return typeof indexedDB=="object"}catch{return!1}}function SD(){return new Promise((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var r;t(((r=s.error)==null?void 0:r.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ID="FirebaseError";class Ti extends Error{constructor(t,n,i){super(n),this.code=t,this.customData=i,this.name=ID,Object.setPrototypeOf(this,Ti.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ql.prototype.create)}}class ql{constructor(t,n,i){this.service=t,this.serviceName=n,this.errors=i}create(t,...n){const i=n[0]||{},s=`${this.service}/${t}`,r=this.errors[t],o=r?AD(r,i):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Ti(s,a,i)}}function AD(e,t){return e.replace(bD,(n,i)=>{const s=t[i];return s!=null?String(s):`<${i}?>`})}const bD=/\{\$([^}]+)}/g;function kD(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function ar(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const s of n){if(!i.includes(s))return!1;const r=e[s],o=t[s];if(J0(r)&&J0(o)){if(!ar(r,o))return!1}else if(r!==o)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function J0(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kl(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach(s=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function PD(e,t){const n=new CD(e,t);return n.subscribe.bind(n)}class CD{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,i){let s;if(t===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");RD(t,["next","error","complete"])?s=t:s={next:t,error:n,complete:i},s.next===void 0&&(s.next=kf),s.error===void 0&&(s.error=kf),s.complete===void 0&&(s.complete=kf);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),r}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function RD(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function kf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(e){return e&&e._delegate?e._delegate:e}class lr{constructor(t,n,i){this.name=t,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const i=new dD;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(t==null?void 0:t.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(VD(t))try{this.getOrInitializeService({instanceIdentifier:Bs})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const r=this.getOrInitializeService({instanceIdentifier:s});i.resolve(r)}catch{}}}}clearInstance(t=Bs){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Bs){return this.instances.has(t)}getOptions(t=Bs){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[r,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);i===a&&o.resolve(s)}return s}onInit(t,n){const i=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(i)??new Set;s.add(t),this.onInitCallbacks.set(i,s);const r=this.instances.get(i);return r&&t(r,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:MD(t),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=Bs){return this.component?this.component.multipleInstances?t:Bs:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function MD(e){return e===Bs?void 0:e}function VD(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new DD(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ot;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(ot||(ot={}));const OD={debug:ot.DEBUG,verbose:ot.VERBOSE,info:ot.INFO,warn:ot.WARN,error:ot.ERROR,silent:ot.SILENT},LD=ot.INFO,FD={[ot.DEBUG]:"log",[ot.VERBOSE]:"log",[ot.INFO]:"info",[ot.WARN]:"warn",[ot.ERROR]:"error"},jD=(e,t,...n)=>{if(t<e.logLevel)return;const i=new Date().toISOString(),s=FD[t];if(s)console[s](`[${i}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class iy{constructor(t){this.name=t,this._logLevel=LD,this._logHandler=jD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ot))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?OD[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ot.DEBUG,...t),this._logHandler(this,ot.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ot.VERBOSE,...t),this._logHandler(this,ot.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ot.INFO,...t),this._logHandler(this,ot.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ot.WARN,...t),this._logHandler(this,ot.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ot.ERROR,...t),this._logHandler(this,ot.ERROR,...t)}}const BD=(e,t)=>t.some(n=>e instanceof n);let Z0,tw;function UD(){return Z0||(Z0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function zD(){return tw||(tw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const _I=new WeakMap,lm=new WeakMap,vI=new WeakMap,Pf=new WeakMap,sy=new WeakMap;function $D(e){const t=new Promise((n,i)=>{const s=()=>{e.removeEventListener("success",r),e.removeEventListener("error",o)},r=()=>{n(es(e.result)),s()},o=()=>{i(e.error),s()};e.addEventListener("success",r),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&_I.set(n,e)}).catch(()=>{}),sy.set(t,e),t}function HD(e){if(lm.has(e))return;const t=new Promise((n,i)=>{const s=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",o),e.removeEventListener("abort",o)},r=()=>{n(),s()},o=()=>{i(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",r),e.addEventListener("error",o),e.addEventListener("abort",o)});lm.set(e,t)}let cm={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return lm.get(e);if(t==="objectStoreNames")return e.objectStoreNames||vI.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return es(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function WD(e){cm=e(cm)}function qD(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const i=e.call(Cf(this),t,...n);return vI.set(i,t.sort?t.sort():[t]),es(i)}:zD().includes(e)?function(...t){return e.apply(Cf(this),t),es(_I.get(this))}:function(...t){return es(e.apply(Cf(this),t))}}function KD(e){return typeof e=="function"?qD(e):(e instanceof IDBTransaction&&HD(e),BD(e,UD())?new Proxy(e,cm):e)}function es(e){if(e instanceof IDBRequest)return $D(e);if(Pf.has(e))return Pf.get(e);const t=KD(e);return t!==e&&(Pf.set(e,t),sy.set(t,e)),t}const Cf=e=>sy.get(e);function GD(e,t,{blocked:n,upgrade:i,blocking:s,terminated:r}={}){const o=indexedDB.open(e,t),a=es(o);return i&&o.addEventListener("upgradeneeded",l=>{i(es(o.result),l.oldVersion,l.newVersion,es(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{r&&l.addEventListener("close",()=>r()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const QD=["get","getKey","getAll","getAllKeys","count"],YD=["put","add","delete","clear"],Rf=new Map;function ew(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Rf.get(t))return Rf.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,s=YD.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||QD.includes(n)))return;const r=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return i&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return Rf.set(t,r),r}WD(e=>({...e,get:(t,n,i)=>ew(t,n)||e.get(t,n,i),has:(t,n)=>!!ew(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(JD(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function JD(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const um="@firebase/app",nw="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fi=new iy("@firebase/app"),ZD="@firebase/app-compat",tM="@firebase/analytics-compat",eM="@firebase/analytics",nM="@firebase/app-check-compat",iM="@firebase/app-check",sM="@firebase/auth",rM="@firebase/auth-compat",oM="@firebase/database",aM="@firebase/data-connect",lM="@firebase/database-compat",cM="@firebase/functions",uM="@firebase/functions-compat",hM="@firebase/installations",dM="@firebase/installations-compat",fM="@firebase/messaging",pM="@firebase/messaging-compat",mM="@firebase/performance",gM="@firebase/performance-compat",yM="@firebase/remote-config",_M="@firebase/remote-config-compat",vM="@firebase/storage",wM="@firebase/storage-compat",TM="@firebase/firestore",xM="@firebase/ai",EM="@firebase/firestore-compat",SM="firebase",IM="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hm="[DEFAULT]",AM={[um]:"fire-core",[ZD]:"fire-core-compat",[eM]:"fire-analytics",[tM]:"fire-analytics-compat",[iM]:"fire-app-check",[nM]:"fire-app-check-compat",[sM]:"fire-auth",[rM]:"fire-auth-compat",[oM]:"fire-rtdb",[aM]:"fire-data-connect",[lM]:"fire-rtdb-compat",[cM]:"fire-fn",[uM]:"fire-fn-compat",[hM]:"fire-iid",[dM]:"fire-iid-compat",[fM]:"fire-fcm",[pM]:"fire-fcm-compat",[mM]:"fire-perf",[gM]:"fire-perf-compat",[yM]:"fire-rc",[_M]:"fire-rc-compat",[vM]:"fire-gcs",[wM]:"fire-gcs-compat",[TM]:"fire-fst",[EM]:"fire-fst-compat",[xM]:"fire-vertex","fire-js":"fire-js",[SM]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uh=new Map,bM=new Map,dm=new Map;function iw(e,t){try{e.container.addComponent(t)}catch(n){fi.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function go(e){const t=e.name;if(dm.has(t))return fi.debug(`There were multiple attempts to register component ${t}.`),!1;dm.set(t,e);for(const n of uh.values())iw(n,e);for(const n of bM.values())iw(n,e);return!0}function ry(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function jn(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ns=new ql("app","Firebase",kM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM{constructor(t,n,i){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new lr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw ns.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Do=IM;function wI(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const i={name:hm,automaticDataCollectionEnabled:!0,...t},s=i.name;if(typeof s!="string"||!s)throw ns.create("bad-app-name",{appName:String(s)});if(n||(n=pI()),!n)throw ns.create("no-options");const r=uh.get(s);if(r){if(ar(n,r.options)&&ar(i,r.config))return r;throw ns.create("duplicate-app",{appName:s})}const o=new ND(s);for(const l of dm.values())o.addComponent(l);const a=new PM(n,i,o);return uh.set(s,a),a}function TI(e=hm){const t=uh.get(e);if(!t&&e===hm&&pI())return wI();if(!t)throw ns.create("no-app",{appName:e});return t}function is(e,t,n){let i=AM[e]??e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),r=t.match(/\s|\//);if(s||r){const o=[`Unable to register library "${i}" with version "${t}":`];s&&o.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&r&&o.push("and"),r&&o.push(`version name "${t}" contains illegal characters (whitespace or "/")`),fi.warn(o.join(" "));return}go(new lr(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CM="firebase-heartbeat-database",RM=1,wl="firebase-heartbeat-store";let Df=null;function xI(){return Df||(Df=GD(CM,RM,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(wl)}catch(n){console.warn(n)}}}}).catch(e=>{throw ns.create("idb-open",{originalErrorMessage:e.message})})),Df}async function DM(e){try{const n=(await xI()).transaction(wl),i=await n.objectStore(wl).get(EI(e));return await n.done,i}catch(t){if(t instanceof Ti)fi.warn(t.message);else{const n=ns.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});fi.warn(n.message)}}}async function sw(e,t){try{const i=(await xI()).transaction(wl,"readwrite");await i.objectStore(wl).put(t,EI(e)),await i.done}catch(n){if(n instanceof Ti)fi.warn(n.message);else{const i=ns.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});fi.warn(i.message)}}}function EI(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MM=1024,VM=30;class NM{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new LM(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=rw();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:s}),this._heartbeatsCache.heartbeats.length>VM){const o=FM(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){fi.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=rw(),{heartbeatsToSend:i,unsentEntries:s}=OM(this._heartbeatsCache.heartbeats),r=ch(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(n){return fi.warn(n),""}}}function rw(){return new Date().toISOString().substring(0,10)}function OM(e,t=MM){const n=[];let i=e.slice();for(const s of e){const r=n.find(o=>o.agent===s.agent);if(r){if(r.dates.push(s.date),ow(n)>t){r.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),ow(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class LM{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ED()?SD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await DM(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return sw(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return sw(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function ow(e){return ch(JSON.stringify({version:2,heartbeats:e})).length}function FM(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let i=1;i<e.length;i++)e[i].date<n&&(n=e[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jM(e){go(new lr("platform-logger",t=>new XD(t),"PRIVATE")),go(new lr("heartbeat",t=>new NM(t),"PRIVATE")),is(um,nw,e),is(um,nw,"esm2020"),is("fire-js","")}jM("");var BM="firebase",UM="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */is(BM,UM,"app");var aw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ss,SI;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(T,_){function A(){}A.prototype=_.prototype,T.F=_.prototype,T.prototype=new A,T.prototype.constructor=T,T.D=function(b,P,C){for(var k=Array(arguments.length-2),it=2;it<arguments.length;it++)k[it-2]=arguments[it];return _.prototype[P].apply(b,k)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,_,A){A||(A=0);const b=Array(16);if(typeof _=="string")for(var P=0;P<16;++P)b[P]=_.charCodeAt(A++)|_.charCodeAt(A++)<<8|_.charCodeAt(A++)<<16|_.charCodeAt(A++)<<24;else for(P=0;P<16;++P)b[P]=_[A++]|_[A++]<<8|_[A++]<<16|_[A++]<<24;_=T.g[0],A=T.g[1],P=T.g[2];let C=T.g[3],k;k=_+(C^A&(P^C))+b[0]+3614090360&4294967295,_=A+(k<<7&4294967295|k>>>25),k=C+(P^_&(A^P))+b[1]+3905402710&4294967295,C=_+(k<<12&4294967295|k>>>20),k=P+(A^C&(_^A))+b[2]+606105819&4294967295,P=C+(k<<17&4294967295|k>>>15),k=A+(_^P&(C^_))+b[3]+3250441966&4294967295,A=P+(k<<22&4294967295|k>>>10),k=_+(C^A&(P^C))+b[4]+4118548399&4294967295,_=A+(k<<7&4294967295|k>>>25),k=C+(P^_&(A^P))+b[5]+1200080426&4294967295,C=_+(k<<12&4294967295|k>>>20),k=P+(A^C&(_^A))+b[6]+2821735955&4294967295,P=C+(k<<17&4294967295|k>>>15),k=A+(_^P&(C^_))+b[7]+4249261313&4294967295,A=P+(k<<22&4294967295|k>>>10),k=_+(C^A&(P^C))+b[8]+1770035416&4294967295,_=A+(k<<7&4294967295|k>>>25),k=C+(P^_&(A^P))+b[9]+2336552879&4294967295,C=_+(k<<12&4294967295|k>>>20),k=P+(A^C&(_^A))+b[10]+4294925233&4294967295,P=C+(k<<17&4294967295|k>>>15),k=A+(_^P&(C^_))+b[11]+2304563134&4294967295,A=P+(k<<22&4294967295|k>>>10),k=_+(C^A&(P^C))+b[12]+1804603682&4294967295,_=A+(k<<7&4294967295|k>>>25),k=C+(P^_&(A^P))+b[13]+4254626195&4294967295,C=_+(k<<12&4294967295|k>>>20),k=P+(A^C&(_^A))+b[14]+2792965006&4294967295,P=C+(k<<17&4294967295|k>>>15),k=A+(_^P&(C^_))+b[15]+1236535329&4294967295,A=P+(k<<22&4294967295|k>>>10),k=_+(P^C&(A^P))+b[1]+4129170786&4294967295,_=A+(k<<5&4294967295|k>>>27),k=C+(A^P&(_^A))+b[6]+3225465664&4294967295,C=_+(k<<9&4294967295|k>>>23),k=P+(_^A&(C^_))+b[11]+643717713&4294967295,P=C+(k<<14&4294967295|k>>>18),k=A+(C^_&(P^C))+b[0]+3921069994&4294967295,A=P+(k<<20&4294967295|k>>>12),k=_+(P^C&(A^P))+b[5]+3593408605&4294967295,_=A+(k<<5&4294967295|k>>>27),k=C+(A^P&(_^A))+b[10]+38016083&4294967295,C=_+(k<<9&4294967295|k>>>23),k=P+(_^A&(C^_))+b[15]+3634488961&4294967295,P=C+(k<<14&4294967295|k>>>18),k=A+(C^_&(P^C))+b[4]+3889429448&4294967295,A=P+(k<<20&4294967295|k>>>12),k=_+(P^C&(A^P))+b[9]+568446438&4294967295,_=A+(k<<5&4294967295|k>>>27),k=C+(A^P&(_^A))+b[14]+3275163606&4294967295,C=_+(k<<9&4294967295|k>>>23),k=P+(_^A&(C^_))+b[3]+4107603335&4294967295,P=C+(k<<14&4294967295|k>>>18),k=A+(C^_&(P^C))+b[8]+1163531501&4294967295,A=P+(k<<20&4294967295|k>>>12),k=_+(P^C&(A^P))+b[13]+2850285829&4294967295,_=A+(k<<5&4294967295|k>>>27),k=C+(A^P&(_^A))+b[2]+4243563512&4294967295,C=_+(k<<9&4294967295|k>>>23),k=P+(_^A&(C^_))+b[7]+1735328473&4294967295,P=C+(k<<14&4294967295|k>>>18),k=A+(C^_&(P^C))+b[12]+2368359562&4294967295,A=P+(k<<20&4294967295|k>>>12),k=_+(A^P^C)+b[5]+4294588738&4294967295,_=A+(k<<4&4294967295|k>>>28),k=C+(_^A^P)+b[8]+2272392833&4294967295,C=_+(k<<11&4294967295|k>>>21),k=P+(C^_^A)+b[11]+1839030562&4294967295,P=C+(k<<16&4294967295|k>>>16),k=A+(P^C^_)+b[14]+4259657740&4294967295,A=P+(k<<23&4294967295|k>>>9),k=_+(A^P^C)+b[1]+2763975236&4294967295,_=A+(k<<4&4294967295|k>>>28),k=C+(_^A^P)+b[4]+1272893353&4294967295,C=_+(k<<11&4294967295|k>>>21),k=P+(C^_^A)+b[7]+4139469664&4294967295,P=C+(k<<16&4294967295|k>>>16),k=A+(P^C^_)+b[10]+3200236656&4294967295,A=P+(k<<23&4294967295|k>>>9),k=_+(A^P^C)+b[13]+681279174&4294967295,_=A+(k<<4&4294967295|k>>>28),k=C+(_^A^P)+b[0]+3936430074&4294967295,C=_+(k<<11&4294967295|k>>>21),k=P+(C^_^A)+b[3]+3572445317&4294967295,P=C+(k<<16&4294967295|k>>>16),k=A+(P^C^_)+b[6]+76029189&4294967295,A=P+(k<<23&4294967295|k>>>9),k=_+(A^P^C)+b[9]+3654602809&4294967295,_=A+(k<<4&4294967295|k>>>28),k=C+(_^A^P)+b[12]+3873151461&4294967295,C=_+(k<<11&4294967295|k>>>21),k=P+(C^_^A)+b[15]+530742520&4294967295,P=C+(k<<16&4294967295|k>>>16),k=A+(P^C^_)+b[2]+3299628645&4294967295,A=P+(k<<23&4294967295|k>>>9),k=_+(P^(A|~C))+b[0]+4096336452&4294967295,_=A+(k<<6&4294967295|k>>>26),k=C+(A^(_|~P))+b[7]+1126891415&4294967295,C=_+(k<<10&4294967295|k>>>22),k=P+(_^(C|~A))+b[14]+2878612391&4294967295,P=C+(k<<15&4294967295|k>>>17),k=A+(C^(P|~_))+b[5]+4237533241&4294967295,A=P+(k<<21&4294967295|k>>>11),k=_+(P^(A|~C))+b[12]+1700485571&4294967295,_=A+(k<<6&4294967295|k>>>26),k=C+(A^(_|~P))+b[3]+2399980690&4294967295,C=_+(k<<10&4294967295|k>>>22),k=P+(_^(C|~A))+b[10]+4293915773&4294967295,P=C+(k<<15&4294967295|k>>>17),k=A+(C^(P|~_))+b[1]+2240044497&4294967295,A=P+(k<<21&4294967295|k>>>11),k=_+(P^(A|~C))+b[8]+1873313359&4294967295,_=A+(k<<6&4294967295|k>>>26),k=C+(A^(_|~P))+b[15]+4264355552&4294967295,C=_+(k<<10&4294967295|k>>>22),k=P+(_^(C|~A))+b[6]+2734768916&4294967295,P=C+(k<<15&4294967295|k>>>17),k=A+(C^(P|~_))+b[13]+1309151649&4294967295,A=P+(k<<21&4294967295|k>>>11),k=_+(P^(A|~C))+b[4]+4149444226&4294967295,_=A+(k<<6&4294967295|k>>>26),k=C+(A^(_|~P))+b[11]+3174756917&4294967295,C=_+(k<<10&4294967295|k>>>22),k=P+(_^(C|~A))+b[2]+718787259&4294967295,P=C+(k<<15&4294967295|k>>>17),k=A+(C^(P|~_))+b[9]+3951481745&4294967295,T.g[0]=T.g[0]+_&4294967295,T.g[1]=T.g[1]+(P+(k<<21&4294967295|k>>>11))&4294967295,T.g[2]=T.g[2]+P&4294967295,T.g[3]=T.g[3]+C&4294967295}i.prototype.v=function(T,_){_===void 0&&(_=T.length);const A=_-this.blockSize,b=this.C;let P=this.h,C=0;for(;C<_;){if(P==0)for(;C<=A;)s(this,T,C),C+=this.blockSize;if(typeof T=="string"){for(;C<_;)if(b[P++]=T.charCodeAt(C++),P==this.blockSize){s(this,b),P=0;break}}else for(;C<_;)if(b[P++]=T[C++],P==this.blockSize){s(this,b),P=0;break}}this.h=P,this.o+=_},i.prototype.A=function(){var T=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);T[0]=128;for(var _=1;_<T.length-8;++_)T[_]=0;_=this.o*8;for(var A=T.length-8;A<T.length;++A)T[A]=_&255,_/=256;for(this.v(T),T=Array(16),_=0,A=0;A<4;++A)for(let b=0;b<32;b+=8)T[_++]=this.g[A]>>>b&255;return T};function r(T,_){var A=a;return Object.prototype.hasOwnProperty.call(A,T)?A[T]:A[T]=_(T)}function o(T,_){this.h=_;const A=[];let b=!0;for(let P=T.length-1;P>=0;P--){const C=T[P]|0;b&&C==_||(A[P]=C,b=!1)}this.g=A}var a={};function l(T){return-128<=T&&T<128?r(T,function(_){return new o([_|0],_<0?-1:0)}):new o([T|0],T<0?-1:0)}function c(T){if(isNaN(T)||!isFinite(T))return d;if(T<0)return E(c(-T));const _=[];let A=1;for(let b=0;T>=A;b++)_[b]=T/A|0,A*=4294967296;return new o(_,0)}function h(T,_){if(T.length==0)throw Error("number format error: empty string");if(_=_||10,_<2||36<_)throw Error("radix out of range: "+_);if(T.charAt(0)=="-")return E(h(T.substring(1),_));if(T.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=c(Math.pow(_,8));let b=d;for(let C=0;C<T.length;C+=8){var P=Math.min(8,T.length-C);const k=parseInt(T.substring(C,C+P),_);P<8?(P=c(Math.pow(_,P)),b=b.j(P).add(c(k))):(b=b.j(A),b=b.add(c(k)))}return b}var d=l(0),f=l(1),m=l(16777216);e=o.prototype,e.m=function(){if(x(this))return-E(this).m();let T=0,_=1;for(let A=0;A<this.g.length;A++){const b=this.i(A);T+=(b>=0?b:4294967296+b)*_,_*=4294967296}return T},e.toString=function(T){if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(v(this))return"0";if(x(this))return"-"+E(this).toString(T);const _=c(Math.pow(T,6));var A=this;let b="";for(;;){const P=D(A,_).g;A=y(A,P.j(_));let C=((A.g.length>0?A.g[0]:A.h)>>>0).toString(T);if(A=P,v(A))return C+b;for(;C.length<6;)C="0"+C;b=C+b}},e.i=function(T){return T<0?0:T<this.g.length?this.g[T]:this.h};function v(T){if(T.h!=0)return!1;for(let _=0;_<T.g.length;_++)if(T.g[_]!=0)return!1;return!0}function x(T){return T.h==-1}e.l=function(T){return T=y(this,T),x(T)?-1:v(T)?0:1};function E(T){const _=T.g.length,A=[];for(let b=0;b<_;b++)A[b]=~T.g[b];return new o(A,~T.h).add(f)}e.abs=function(){return x(this)?E(this):this},e.add=function(T){const _=Math.max(this.g.length,T.g.length),A=[];let b=0;for(let P=0;P<=_;P++){let C=b+(this.i(P)&65535)+(T.i(P)&65535),k=(C>>>16)+(this.i(P)>>>16)+(T.i(P)>>>16);b=k>>>16,C&=65535,k&=65535,A[P]=k<<16|C}return new o(A,A[A.length-1]&-2147483648?-1:0)};function y(T,_){return T.add(E(_))}e.j=function(T){if(v(this)||v(T))return d;if(x(this))return x(T)?E(this).j(E(T)):E(E(this).j(T));if(x(T))return E(this.j(E(T)));if(this.l(m)<0&&T.l(m)<0)return c(this.m()*T.m());const _=this.g.length+T.g.length,A=[];for(var b=0;b<2*_;b++)A[b]=0;for(b=0;b<this.g.length;b++)for(let P=0;P<T.g.length;P++){const C=this.i(b)>>>16,k=this.i(b)&65535,it=T.i(P)>>>16,Y=T.i(P)&65535;A[2*b+2*P]+=k*Y,w(A,2*b+2*P),A[2*b+2*P+1]+=C*Y,w(A,2*b+2*P+1),A[2*b+2*P+1]+=k*it,w(A,2*b+2*P+1),A[2*b+2*P+2]+=C*it,w(A,2*b+2*P+2)}for(T=0;T<_;T++)A[T]=A[2*T+1]<<16|A[2*T];for(T=_;T<2*_;T++)A[T]=0;return new o(A,0)};function w(T,_){for(;(T[_]&65535)!=T[_];)T[_+1]+=T[_]>>>16,T[_]&=65535,_++}function S(T,_){this.g=T,this.h=_}function D(T,_){if(v(_))throw Error("division by zero");if(v(T))return new S(d,d);if(x(T))return _=D(E(T),_),new S(E(_.g),E(_.h));if(x(_))return _=D(T,E(_)),new S(E(_.g),_.h);if(T.g.length>30){if(x(T)||x(_))throw Error("slowDivide_ only works with positive integers.");for(var A=f,b=_;b.l(T)<=0;)A=M(A),b=M(b);var P=V(A,1),C=V(b,1);for(b=V(b,2),A=V(A,2);!v(b);){var k=C.add(b);k.l(T)<=0&&(P=P.add(A),C=k),b=V(b,1),A=V(A,1)}return _=y(T,P.j(_)),new S(P,_)}for(P=d;T.l(_)>=0;){for(A=Math.max(1,Math.floor(T.m()/_.m())),b=Math.ceil(Math.log(A)/Math.LN2),b=b<=48?1:Math.pow(2,b-48),C=c(A),k=C.j(_);x(k)||k.l(T)>0;)A-=b,C=c(A),k=C.j(_);v(C)&&(C=f),P=P.add(C),T=y(T,k)}return new S(P,T)}e.B=function(T){return D(this,T).h},e.and=function(T){const _=Math.max(this.g.length,T.g.length),A=[];for(let b=0;b<_;b++)A[b]=this.i(b)&T.i(b);return new o(A,this.h&T.h)},e.or=function(T){const _=Math.max(this.g.length,T.g.length),A=[];for(let b=0;b<_;b++)A[b]=this.i(b)|T.i(b);return new o(A,this.h|T.h)},e.xor=function(T){const _=Math.max(this.g.length,T.g.length),A=[];for(let b=0;b<_;b++)A[b]=this.i(b)^T.i(b);return new o(A,this.h^T.h)};function M(T){const _=T.g.length+1,A=[];for(let b=0;b<_;b++)A[b]=T.i(b)<<1|T.i(b-1)>>>31;return new o(A,T.h)}function V(T,_){const A=_>>5;_%=32;const b=T.g.length-A,P=[];for(let C=0;C<b;C++)P[C]=_>0?T.i(C+A)>>>_|T.i(C+A+1)<<32-_:T.i(C+A);return new o(P,T.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,SI=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,ss=o}).apply(typeof aw<"u"?aw:typeof self<"u"?self:typeof window<"u"?window:{});var Lc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var II,Ia,AI,wu,fm,bI,kI,PI;(function(){var e,t=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Lc=="object"&&Lc];for(var p=0;p<u.length;++p){var g=u[p];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var i=n(this);function s(u,p){if(p)t:{var g=i;u=u.split(".");for(var I=0;I<u.length-1;I++){var N=u[I];if(!(N in g))break t;g=g[N]}u=u[u.length-1],I=g[u],p=p(I),p!=I&&p!=null&&t(g,u,{configurable:!0,writable:!0,value:p})}}s("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(u){return u||function(p){var g=[],I;for(I in p)Object.prototype.hasOwnProperty.call(p,I)&&g.push([I,p[I]]);return g}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var r=r||{},o=this||self;function a(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function l(u,p,g){return u.call.apply(u.bind,arguments)}function c(u,p,g){return c=l,c.apply(null,arguments)}function h(u,p){var g=Array.prototype.slice.call(arguments,1);return function(){var I=g.slice();return I.push.apply(I,arguments),u.apply(this,I)}}function d(u,p){function g(){}g.prototype=p.prototype,u.Z=p.prototype,u.prototype=new g,u.prototype.constructor=u,u.Ob=function(I,N,O){for(var z=Array(arguments.length-2),nt=2;nt<arguments.length;nt++)z[nt-2]=arguments[nt];return p.prototype[N].apply(I,z)}}var f=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function m(u){const p=u.length;if(p>0){const g=Array(p);for(let I=0;I<p;I++)g[I]=u[I];return g}return[]}function v(u,p){for(let I=1;I<arguments.length;I++){const N=arguments[I];var g=typeof N;if(g=g!="object"?g:N?Array.isArray(N)?"array":g:"null",g=="array"||g=="object"&&typeof N.length=="number"){g=u.length||0;const O=N.length||0;u.length=g+O;for(let z=0;z<O;z++)u[g+z]=N[z]}else u.push(N)}}class x{constructor(p,g){this.i=p,this.j=g,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function E(u){o.setTimeout(()=>{throw u},0)}function y(){var u=T;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class w{constructor(){this.h=this.g=null}add(p,g){const I=S.get();I.set(p,g),this.h?this.h.next=I:this.g=I,this.h=I}}var S=new x(()=>new D,u=>u.reset());class D{constructor(){this.next=this.g=this.h=null}set(p,g){this.h=p,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let M,V=!1,T=new w,_=()=>{const u=Promise.resolve(void 0);M=()=>{u.then(A)}};function A(){for(var u;u=y();){try{u.h.call(u.g)}catch(g){E(g)}var p=S;p.j(u),p.h<100&&(p.h++,u.next=p.g,p.g=u)}V=!1}function b(){this.u=this.u,this.C=this.C}b.prototype.u=!1,b.prototype.dispose=function(){this.u||(this.u=!0,this.N())},b.prototype[Symbol.dispose]=function(){this.dispose()},b.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var C=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const g=()=>{};o.addEventListener("test",g,p),o.removeEventListener("test",g,p)}catch{}return u}();function k(u){return/^[\s\xa0]*$/.test(u)}function it(u,p){P.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,p)}d(it,P),it.prototype.init=function(u,p){const g=this.type=u.type,I=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget,p||(g=="mouseover"?p=u.fromElement:g=="mouseout"&&(p=u.toElement)),this.relatedTarget=p,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&it.Z.h.call(this)},it.prototype.h=function(){it.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Y="closure_listenable_"+(Math.random()*1e6|0),ut=0;function et(u,p,g,I,N){this.listener=u,this.proxy=null,this.src=p,this.type=g,this.capture=!!I,this.ha=N,this.key=++ut,this.da=this.fa=!1}function U(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function H(u,p,g){for(const I in u)p.call(g,u[I],I,u)}function K(u,p){for(const g in u)p.call(void 0,u[g],g,u)}function rt(u){const p={};for(const g in u)p[g]=u[g];return p}const vt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function He(u,p){let g,I;for(let N=1;N<arguments.length;N++){I=arguments[N];for(g in I)u[g]=I[g];for(let O=0;O<vt.length;O++)g=vt[O],Object.prototype.hasOwnProperty.call(I,g)&&(u[g]=I[g])}}function $t(u){this.src=u,this.g={},this.h=0}$t.prototype.add=function(u,p,g,I,N){const O=u.toString();u=this.g[O],u||(u=this.g[O]=[],this.h++);const z=Qt(u,p,I,N);return z>-1?(p=u[z],g||(p.fa=!1)):(p=new et(p,this.src,O,!!I,N),p.fa=g,u.push(p)),p};function We(u,p){const g=p.type;if(g in u.g){var I=u.g[g],N=Array.prototype.indexOf.call(I,p,void 0),O;(O=N>=0)&&Array.prototype.splice.call(I,N,1),O&&(U(p),u.g[g].length==0&&(delete u.g[g],u.h--))}}function Qt(u,p,g,I){for(let N=0;N<u.length;++N){const O=u[N];if(!O.da&&O.listener==p&&O.capture==!!g&&O.ha==I)return N}return-1}var xi="closure_lm_"+(Math.random()*1e6|0),Vd={};function $_(u,p,g,I,N){if(Array.isArray(p)){for(let O=0;O<p.length;O++)$_(u,p[O],g,I,N);return null}return g=q_(g),u&&u[Y]?u.J(p,g,a(I)?!!I.capture:!1,N):tC(u,p,g,!1,I,N)}function tC(u,p,g,I,N,O){if(!p)throw Error("Invalid event type");const z=a(N)?!!N.capture:!!N;let nt=Od(u);if(nt||(u[xi]=nt=new $t(u)),g=nt.add(p,g,I,z,O),g.proxy)return g;if(I=eC(),g.proxy=I,I.src=u,I.listener=g,u.addEventListener)C||(N=z),N===void 0&&(N=!1),u.addEventListener(p.toString(),I,N);else if(u.attachEvent)u.attachEvent(W_(p.toString()),I);else if(u.addListener&&u.removeListener)u.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return g}function eC(){function u(g){return p.call(u.src,u.listener,g)}const p=nC;return u}function H_(u,p,g,I,N){if(Array.isArray(p))for(var O=0;O<p.length;O++)H_(u,p[O],g,I,N);else I=a(I)?!!I.capture:!!I,g=q_(g),u&&u[Y]?(u=u.i,O=String(p).toString(),O in u.g&&(p=u.g[O],g=Qt(p,g,I,N),g>-1&&(U(p[g]),Array.prototype.splice.call(p,g,1),p.length==0&&(delete u.g[O],u.h--)))):u&&(u=Od(u))&&(p=u.g[p.toString()],u=-1,p&&(u=Qt(p,g,I,N)),(g=u>-1?p[u]:null)&&Nd(g))}function Nd(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[Y])We(p.i,u);else{var g=u.type,I=u.proxy;p.removeEventListener?p.removeEventListener(g,I,u.capture):p.detachEvent?p.detachEvent(W_(g),I):p.addListener&&p.removeListener&&p.removeListener(I),(g=Od(p))?(We(g,u),g.h==0&&(g.src=null,p[xi]=null)):U(u)}}}function W_(u){return u in Vd?Vd[u]:Vd[u]="on"+u}function nC(u,p){if(u.da)u=!0;else{p=new it(p,this);const g=u.listener,I=u.ha||u.src;u.fa&&Nd(u),u=g.call(I,p)}return u}function Od(u){return u=u[xi],u instanceof $t?u:null}var Ld="__closure_events_fn_"+(Math.random()*1e9>>>0);function q_(u){return typeof u=="function"?u:(u[Ld]||(u[Ld]=function(p){return u.handleEvent(p)}),u[Ld])}function fe(){b.call(this),this.i=new $t(this),this.M=this,this.G=null}d(fe,b),fe.prototype[Y]=!0,fe.prototype.removeEventListener=function(u,p,g,I){H_(this,u,p,g,I)};function be(u,p){var g,I=u.G;if(I)for(g=[];I;I=I.G)g.push(I);if(u=u.M,I=p.type||p,typeof p=="string")p=new P(p,u);else if(p instanceof P)p.target=p.target||u;else{var N=p;p=new P(I,u),He(p,N)}N=!0;let O,z;if(g)for(z=g.length-1;z>=0;z--)O=p.g=g[z],N=lc(O,I,!0,p)&&N;if(O=p.g=u,N=lc(O,I,!0,p)&&N,N=lc(O,I,!1,p)&&N,g)for(z=0;z<g.length;z++)O=p.g=g[z],N=lc(O,I,!1,p)&&N}fe.prototype.N=function(){if(fe.Z.N.call(this),this.i){var u=this.i;for(const p in u.g){const g=u.g[p];for(let I=0;I<g.length;I++)U(g[I]);delete u.g[p],u.h--}}this.G=null},fe.prototype.J=function(u,p,g,I){return this.i.add(String(u),p,!1,g,I)},fe.prototype.K=function(u,p,g,I){return this.i.add(String(u),p,!0,g,I)};function lc(u,p,g,I){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();let N=!0;for(let O=0;O<p.length;++O){const z=p[O];if(z&&!z.da&&z.capture==g){const nt=z.listener,Yt=z.ha||z.src;z.fa&&We(u.i,z),N=nt.call(Yt,I)!==!1&&N}}return N&&!I.defaultPrevented}function iC(u,p){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=c(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:o.setTimeout(u,p||0)}function K_(u){u.g=iC(()=>{u.g=null,u.i&&(u.i=!1,K_(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class sC extends b{constructor(p,g){super(),this.m=p,this.l=g,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:K_(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Wo(u){b.call(this),this.h=u,this.g={}}d(Wo,b);var G_=[];function Q_(u){H(u.g,function(p,g){this.g.hasOwnProperty(g)&&Nd(p)},u),u.g={}}Wo.prototype.N=function(){Wo.Z.N.call(this),Q_(this)},Wo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Fd=o.JSON.stringify,rC=o.JSON.parse,oC=class{stringify(u){return o.JSON.stringify(u,void 0)}parse(u){return o.JSON.parse(u,void 0)}};function Y_(){}function X_(){}var qo={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function jd(){P.call(this,"d")}d(jd,P);function Bd(){P.call(this,"c")}d(Bd,P);var bs={},J_=null;function cc(){return J_=J_||new fe}bs.Ia="serverreachability";function Z_(u){P.call(this,bs.Ia,u)}d(Z_,P);function Ko(u){const p=cc();be(p,new Z_(p))}bs.STAT_EVENT="statevent";function tv(u,p){P.call(this,bs.STAT_EVENT,u),this.stat=p}d(tv,P);function ke(u){const p=cc();be(p,new tv(p,u))}bs.Ja="timingevent";function ev(u,p){P.call(this,bs.Ja,u),this.size=p}d(ev,P);function Go(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){u()},p)}function Qo(){this.g=!0}Qo.prototype.ua=function(){this.g=!1};function aC(u,p,g,I,N,O){u.info(function(){if(u.g)if(O){var z="",nt=O.split("&");for(let wt=0;wt<nt.length;wt++){var Yt=nt[wt].split("=");if(Yt.length>1){const ee=Yt[0];Yt=Yt[1];const Cn=ee.split("_");z=Cn.length>=2&&Cn[1]=="type"?z+(ee+"="+Yt+"&"):z+(ee+"=redacted&")}}}else z=null;else z=O;return"XMLHTTP REQ ("+I+") [attempt "+N+"]: "+p+`
`+g+`
`+z})}function lC(u,p,g,I,N,O,z){u.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+N+"]: "+p+`
`+g+`
`+O+" "+z})}function _r(u,p,g,I){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+uC(u,g)+(I?" "+I:"")})}function cC(u,p){u.info(function(){return"TIMEOUT: "+p})}Qo.prototype.info=function(){};function uC(u,p){if(!u.g)return p;if(!p)return null;try{const O=JSON.parse(p);if(O){for(u=0;u<O.length;u++)if(Array.isArray(O[u])){var g=O[u];if(!(g.length<2)){var I=g[1];if(Array.isArray(I)&&!(I.length<1)){var N=I[0];if(N!="noop"&&N!="stop"&&N!="close")for(let z=1;z<I.length;z++)I[z]=""}}}}return Fd(O)}catch{return p}}var uc={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},nv={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},iv;function Ud(){}d(Ud,Y_),Ud.prototype.g=function(){return new XMLHttpRequest},iv=new Ud;function Yo(u){return encodeURIComponent(String(u))}function hC(u){var p=1;u=u.split(":");const g=[];for(;p>0&&u.length;)g.push(u.shift()),p--;return u.length&&g.push(u.join(":")),g}function Ei(u,p,g,I){this.j=u,this.i=p,this.l=g,this.S=I||1,this.V=new Wo(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new sv}function sv(){this.i=null,this.g="",this.h=!1}var rv={},zd={};function $d(u,p,g){u.M=1,u.A=dc(Pn(p)),u.u=g,u.R=!0,ov(u,null)}function ov(u,p){u.F=Date.now(),hc(u),u.B=Pn(u.A);var g=u.B,I=u.S;Array.isArray(I)||(I=[String(I)]),vv(g.i,"t",I),u.C=0,g=u.j.L,u.h=new sv,u.g=Lv(u.j,g?p:null,!u.u),u.P>0&&(u.O=new sC(c(u.Y,u,u.g),u.P)),p=u.V,g=u.g,I=u.ba;var N="readystatechange";Array.isArray(N)||(N&&(G_[0]=N.toString()),N=G_);for(let O=0;O<N.length;O++){const z=$_(g,N[O],I||p.handleEvent,!1,p.h||p);if(!z)break;p.g[z.key]=z}p=u.J?rt(u.J):{},u.u?(u.v||(u.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,p)):(u.v="GET",u.g.ea(u.B,u.v,null,p)),Ko(),aC(u.i,u.v,u.B,u.l,u.S,u.u)}Ei.prototype.ba=function(u){u=u.target;const p=this.O;p&&Ai(u)==3?p.j():this.Y(u)},Ei.prototype.Y=function(u){try{if(u==this.g)t:{const nt=Ai(this.g),Yt=this.g.ya(),wt=this.g.ca();if(!(nt<3)&&(nt!=3||this.g&&(this.h.h||this.g.la()||Av(this.g)))){this.K||nt!=4||Yt==7||(Yt==8||wt<=0?Ko(3):Ko(2)),Hd(this);var p=this.g.ca();this.X=p;var g=dC(this);if(this.o=p==200,lC(this.i,this.v,this.B,this.l,this.S,nt,p),this.o){if(this.U&&!this.L){e:{if(this.g){var I,N=this.g;if((I=N.g?N.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(I)){var O=I;break e}}O=null}if(u=O)_r(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Wd(this,u);else{this.o=!1,this.m=3,ke(12),ks(this),Xo(this);break t}}if(this.R){u=!0;let ee;for(;!this.K&&this.C<g.length;)if(ee=fC(this,g),ee==zd){nt==4&&(this.m=4,ke(14),u=!1),_r(this.i,this.l,null,"[Incomplete Response]");break}else if(ee==rv){this.m=4,ke(15),_r(this.i,this.l,g,"[Invalid Chunk]"),u=!1;break}else _r(this.i,this.l,ee,null),Wd(this,ee);if(av(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),nt!=4||g.length!=0||this.h.h||(this.m=1,ke(16),u=!1),this.o=this.o&&u,!u)_r(this.i,this.l,g,"[Invalid Chunked Response]"),ks(this),Xo(this);else if(g.length>0&&!this.W){this.W=!0;var z=this.j;z.g==this&&z.aa&&!z.P&&(z.j.info("Great, no buffering proxy detected. Bytes received: "+g.length),Zd(z),z.P=!0,ke(11))}}else _r(this.i,this.l,g,null),Wd(this,g);nt==4&&ks(this),this.o&&!this.K&&(nt==4?Mv(this.j,this):(this.o=!1,hc(this)))}else bC(this.g),p==400&&g.indexOf("Unknown SID")>0?(this.m=3,ke(12)):(this.m=0,ke(13)),ks(this),Xo(this)}}}catch{}finally{}};function dC(u){if(!av(u))return u.g.la();const p=Av(u.g);if(p==="")return"";let g="";const I=p.length,N=Ai(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return ks(u),Xo(u),"";u.h.i=new o.TextDecoder}for(let O=0;O<I;O++)u.h.h=!0,g+=u.h.i.decode(p[O],{stream:!(N&&O==I-1)});return p.length=0,u.h.g+=g,u.C=0,u.h.g}function av(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function fC(u,p){var g=u.C,I=p.indexOf(`
`,g);return I==-1?zd:(g=Number(p.substring(g,I)),isNaN(g)?rv:(I+=1,I+g>p.length?zd:(p=p.slice(I,I+g),u.C=I+g,p)))}Ei.prototype.cancel=function(){this.K=!0,ks(this)};function hc(u){u.T=Date.now()+u.H,lv(u,u.H)}function lv(u,p){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Go(c(u.aa,u),p)}function Hd(u){u.D&&(o.clearTimeout(u.D),u.D=null)}Ei.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(cC(this.i,this.B),this.M!=2&&(Ko(),ke(17)),ks(this),this.m=2,Xo(this)):lv(this,this.T-u)};function Xo(u){u.j.I==0||u.K||Mv(u.j,u)}function ks(u){Hd(u);var p=u.O;p&&typeof p.dispose=="function"&&p.dispose(),u.O=null,Q_(u.V),u.g&&(p=u.g,u.g=null,p.abort(),p.dispose())}function Wd(u,p){try{var g=u.j;if(g.I!=0&&(g.g==u||qd(g.h,u))){if(!u.L&&qd(g.h,u)&&g.I==3){try{var I=g.Ba.g.parse(p)}catch{I=null}if(Array.isArray(I)&&I.length==3){var N=I;if(N[0]==0){t:if(!g.v){if(g.g)if(g.g.F+3e3<u.F)yc(g),mc(g);else break t;Jd(g),ke(18)}}else g.xa=N[1],0<g.xa-g.K&&N[2]<37500&&g.F&&g.A==0&&!g.C&&(g.C=Go(c(g.Va,g),6e3));hv(g.h)<=1&&g.ta&&(g.ta=void 0)}else Cs(g,11)}else if((u.L||g.g==u)&&yc(g),!k(p))for(N=g.Ba.g.parse(p),p=0;p<N.length;p++){let wt=N[p];const ee=wt[0];if(!(ee<=g.K))if(g.K=ee,wt=wt[1],g.I==2)if(wt[0]=="c"){g.M=wt[1],g.ba=wt[2];const Cn=wt[3];Cn!=null&&(g.ka=Cn,g.j.info("VER="+g.ka));const Rs=wt[4];Rs!=null&&(g.za=Rs,g.j.info("SVER="+g.za));const bi=wt[5];bi!=null&&typeof bi=="number"&&bi>0&&(I=1.5*bi,g.O=I,g.j.info("backChannelRequestTimeoutMs_="+I)),I=g;const ki=u.g;if(ki){const vc=ki.g?ki.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(vc){var O=I.h;O.g||vc.indexOf("spdy")==-1&&vc.indexOf("quic")==-1&&vc.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(Kd(O,O.h),O.h=null))}if(I.G){const tf=ki.g?ki.g.getResponseHeader("X-HTTP-Session-Id"):null;tf&&(I.wa=tf,St(I.J,I.G,tf))}}g.I=3,g.l&&g.l.ra(),g.aa&&(g.T=Date.now()-u.F,g.j.info("Handshake RTT: "+g.T+"ms")),I=g;var z=u;if(I.na=Ov(I,I.L?I.ba:null,I.W),z.L){dv(I.h,z);var nt=z,Yt=I.O;Yt&&(nt.H=Yt),nt.D&&(Hd(nt),hc(nt)),I.g=z}else Rv(I);g.i.length>0&&gc(g)}else wt[0]!="stop"&&wt[0]!="close"||Cs(g,7);else g.I==3&&(wt[0]=="stop"||wt[0]=="close"?wt[0]=="stop"?Cs(g,7):Xd(g):wt[0]!="noop"&&g.l&&g.l.qa(wt),g.A=0)}}Ko(4)}catch{}}var pC=class{constructor(u,p){this.g=u,this.map=p}};function cv(u){this.l=u||10,o.PerformanceNavigationTiming?(u=o.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function uv(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function hv(u){return u.h?1:u.g?u.g.size:0}function qd(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function Kd(u,p){u.g?u.g.add(p):u.h=p}function dv(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}cv.prototype.cancel=function(){if(this.i=fv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function fv(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const g of u.g.values())p=p.concat(g.G);return p}return m(u.i)}var pv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mC(u,p){if(u){u=u.split("&");for(let g=0;g<u.length;g++){const I=u[g].indexOf("=");let N,O=null;I>=0?(N=u[g].substring(0,I),O=u[g].substring(I+1)):N=u[g],p(N,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function Si(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;u instanceof Si?(this.l=u.l,Jo(this,u.j),this.o=u.o,this.g=u.g,Zo(this,u.u),this.h=u.h,Gd(this,wv(u.i)),this.m=u.m):u&&(p=String(u).match(pv))?(this.l=!1,Jo(this,p[1]||"",!0),this.o=ta(p[2]||""),this.g=ta(p[3]||"",!0),Zo(this,p[4]),this.h=ta(p[5]||"",!0),Gd(this,p[6]||"",!0),this.m=ta(p[7]||"")):(this.l=!1,this.i=new na(null,this.l))}Si.prototype.toString=function(){const u=[];var p=this.j;p&&u.push(ea(p,mv,!0),":");var g=this.g;return(g||p=="file")&&(u.push("//"),(p=this.o)&&u.push(ea(p,mv,!0),"@"),u.push(Yo(g).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.u,g!=null&&u.push(":",String(g))),(g=this.h)&&(this.g&&g.charAt(0)!="/"&&u.push("/"),u.push(ea(g,g.charAt(0)=="/"?_C:yC,!0))),(g=this.i.toString())&&u.push("?",g),(g=this.m)&&u.push("#",ea(g,wC)),u.join("")},Si.prototype.resolve=function(u){const p=Pn(this);let g=!!u.j;g?Jo(p,u.j):g=!!u.o,g?p.o=u.o:g=!!u.g,g?p.g=u.g:g=u.u!=null;var I=u.h;if(g)Zo(p,u.u);else if(g=!!u.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var N=p.h.lastIndexOf("/");N!=-1&&(I=p.h.slice(0,N+1)+I)}if(N=I,N==".."||N==".")I="";else if(N.indexOf("./")!=-1||N.indexOf("/.")!=-1){I=N.lastIndexOf("/",0)==0,N=N.split("/");const O=[];for(let z=0;z<N.length;){const nt=N[z++];nt=="."?I&&z==N.length&&O.push(""):nt==".."?((O.length>1||O.length==1&&O[0]!="")&&O.pop(),I&&z==N.length&&O.push("")):(O.push(nt),I=!0)}I=O.join("/")}else I=N}return g?p.h=I:g=u.i.toString()!=="",g?Gd(p,wv(u.i)):g=!!u.m,g&&(p.m=u.m),p};function Pn(u){return new Si(u)}function Jo(u,p,g){u.j=g?ta(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function Zo(u,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);u.u=p}else u.u=null}function Gd(u,p,g){p instanceof na?(u.i=p,TC(u.i,u.l)):(g||(p=ea(p,vC)),u.i=new na(p,u.l))}function St(u,p,g){u.i.set(p,g)}function dc(u){return St(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function ta(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ea(u,p,g){return typeof u=="string"?(u=encodeURI(u).replace(p,gC),g&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function gC(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var mv=/[#\/\?@]/g,yC=/[#\?:]/g,_C=/[#\?]/g,vC=/[#\?@]/g,wC=/#/g;function na(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function Ps(u){u.g||(u.g=new Map,u.h=0,u.i&&mC(u.i,function(p,g){u.add(decodeURIComponent(p.replace(/\+/g," ")),g)}))}e=na.prototype,e.add=function(u,p){Ps(this),this.i=null,u=vr(this,u);let g=this.g.get(u);return g||this.g.set(u,g=[]),g.push(p),this.h+=1,this};function gv(u,p){Ps(u),p=vr(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function yv(u,p){return Ps(u),p=vr(u,p),u.g.has(p)}e.forEach=function(u,p){Ps(this),this.g.forEach(function(g,I){g.forEach(function(N){u.call(p,N,I,this)},this)},this)};function _v(u,p){Ps(u);let g=[];if(typeof p=="string")yv(u,p)&&(g=g.concat(u.g.get(vr(u,p))));else for(u=Array.from(u.g.values()),p=0;p<u.length;p++)g=g.concat(u[p]);return g}e.set=function(u,p){return Ps(this),this.i=null,u=vr(this,u),yv(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},e.get=function(u,p){return u?(u=_v(this,u),u.length>0?String(u[0]):p):p};function vv(u,p,g){gv(u,p),g.length>0&&(u.i=null,u.g.set(vr(u,p),m(g)),u.h+=g.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(let I=0;I<p.length;I++){var g=p[I];const N=Yo(g);g=_v(this,g);for(let O=0;O<g.length;O++){let z=N;g[O]!==""&&(z+="="+Yo(g[O])),u.push(z)}}return this.i=u.join("&")};function wv(u){const p=new na;return p.i=u.i,u.g&&(p.g=new Map(u.g),p.h=u.h),p}function vr(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function TC(u,p){p&&!u.j&&(Ps(u),u.i=null,u.g.forEach(function(g,I){const N=I.toLowerCase();I!=N&&(gv(this,I),vv(this,N,g))},u)),u.j=p}function xC(u,p){const g=new Qo;if(o.Image){const I=new Image;I.onload=h(Ii,g,"TestLoadImage: loaded",!0,p,I),I.onerror=h(Ii,g,"TestLoadImage: error",!1,p,I),I.onabort=h(Ii,g,"TestLoadImage: abort",!1,p,I),I.ontimeout=h(Ii,g,"TestLoadImage: timeout",!1,p,I),o.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=u}else p(!1)}function EC(u,p){const g=new Qo,I=new AbortController,N=setTimeout(()=>{I.abort(),Ii(g,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:I.signal}).then(O=>{clearTimeout(N),O.ok?Ii(g,"TestPingServer: ok",!0,p):Ii(g,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(N),Ii(g,"TestPingServer: error",!1,p)})}function Ii(u,p,g,I,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),I(g)}catch{}}function SC(){this.g=new oC}function Qd(u){this.i=u.Sb||null,this.h=u.ab||!1}d(Qd,Y_),Qd.prototype.g=function(){return new fc(this.i,this.h)};function fc(u,p){fe.call(this),this.H=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(fc,fe),e=fc.prototype,e.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=p,this.readyState=1,sa(this)},e.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(p.body=u),(this.H||o).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ia(this)),this.readyState=0},e.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,sa(this)),this.g&&(this.readyState=3,sa(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Tv(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Tv(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}e.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?ia(this):sa(this),this.readyState==3&&Tv(this)}},e.Oa=function(u){this.g&&(this.response=this.responseText=u,ia(this))},e.Na=function(u){this.g&&(this.response=u,ia(this))},e.ga=function(){this.g&&ia(this)};function ia(u){u.readyState=4,u.l=null,u.j=null,u.B=null,sa(u)}e.setRequestHeader=function(u,p){this.A.append(u,p)},e.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var g=p.next();!g.done;)g=g.value,u.push(g[0]+": "+g[1]),g=p.next();return u.join(`\r
`)};function sa(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(fc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function xv(u){let p="";return H(u,function(g,I){p+=I,p+=":",p+=g,p+=`\r
`}),p}function Yd(u,p,g){t:{for(I in g){var I=!1;break t}I=!0}I||(g=xv(g),typeof u=="string"?g!=null&&Yo(g):St(u,p,g))}function Nt(u){fe.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}d(Nt,fe);var IC=/^https?$/i,AC=["POST","PUT"];e=Nt.prototype,e.Fa=function(u){this.H=u},e.ea=function(u,p,g,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():iv.g(),this.g.onreadystatechange=f(c(this.Ca,this));try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(O){Ev(this,O);return}if(u=g||"",g=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var N in I)g.set(N,I[N]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const O of I.keys())g.set(O,I.get(O));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(g.keys()).find(O=>O.toLowerCase()=="content-type"),N=o.FormData&&u instanceof o.FormData,!(Array.prototype.indexOf.call(AC,p,void 0)>=0)||I||N||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,z]of g)this.g.setRequestHeader(O,z);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(O){Ev(this,O)}};function Ev(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.o=5,Sv(u),pc(u)}function Sv(u){u.A||(u.A=!0,be(u,"complete"),be(u,"error"))}e.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,be(this,"complete"),be(this,"abort"),pc(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),pc(this,!0)),Nt.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?Iv(this):this.Xa())},e.Xa=function(){Iv(this)};function Iv(u){if(u.h&&typeof r<"u"){if(u.v&&Ai(u)==4)setTimeout(u.Ca.bind(u),0);else if(be(u,"readystatechange"),Ai(u)==4){u.h=!1;try{const O=u.ca();t:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break t;default:p=!1}var g;if(!(g=p)){var I;if(I=O===0){let z=String(u.D).match(pv)[1]||null;!z&&o.self&&o.self.location&&(z=o.self.location.protocol.slice(0,-1)),I=!IC.test(z?z.toLowerCase():"")}g=I}if(g)be(u,"complete"),be(u,"success");else{u.o=6;try{var N=Ai(u)>2?u.g.statusText:""}catch{N=""}u.l=N+" ["+u.ca()+"]",Sv(u)}}finally{pc(u)}}}}function pc(u,p){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const g=u.g;u.g=null,p||be(u,"ready");try{g.onreadystatechange=null}catch{}}}e.isActive=function(){return!!this.g};function Ai(u){return u.g?u.g.readyState:0}e.ca=function(){try{return Ai(this)>2?this.g.status:-1}catch{return-1}},e.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.La=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),rC(p)}};function Av(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function bC(u){const p={};u=(u.g&&Ai(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<u.length;I++){if(k(u[I]))continue;var g=hC(u[I]);const N=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const O=p[N]||[];p[N]=O,O.push(g)}K(p,function(I){return I.join(", ")})}e.ya=function(){return this.o},e.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ra(u,p,g){return g&&g.internalChannelParams&&g.internalChannelParams[u]||p}function bv(u){this.za=0,this.i=[],this.j=new Qo,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ra("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ra("baseRetryDelayMs",5e3,u),this.Za=ra("retryDelaySeedMs",1e4,u),this.Ta=ra("forwardChannelMaxRetries",2,u),this.va=ra("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new cv(u&&u.concurrentRequestLimit),this.Ba=new SC,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}e=bv.prototype,e.ka=8,e.I=1,e.connect=function(u,p,g,I){ke(0),this.W=u,this.H=p||{},g&&I!==void 0&&(this.H.OSID=g,this.H.OAID=I),this.F=this.X,this.J=Ov(this,null,this.W),gc(this)};function Xd(u){if(kv(u),u.I==3){var p=u.V++,g=Pn(u.J);if(St(g,"SID",u.M),St(g,"RID",p),St(g,"TYPE","terminate"),oa(u,g),p=new Ei(u,u.j,p),p.M=2,p.A=dc(Pn(g)),g=!1,o.navigator&&o.navigator.sendBeacon)try{g=o.navigator.sendBeacon(p.A.toString(),"")}catch{}!g&&o.Image&&(new Image().src=p.A,g=!0),g||(p.g=Lv(p.j,null),p.g.ea(p.A)),p.F=Date.now(),hc(p)}Nv(u)}function mc(u){u.g&&(Zd(u),u.g.cancel(),u.g=null)}function kv(u){mc(u),u.v&&(o.clearTimeout(u.v),u.v=null),yc(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&o.clearTimeout(u.m),u.m=null)}function gc(u){if(!uv(u.h)&&!u.m){u.m=!0;var p=u.Ea;M||_(),V||(M(),V=!0),T.add(p,u),u.D=0}}function kC(u,p){return hv(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=p.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Go(c(u.Ea,u,p),Vv(u,u.D)),u.D++,!0)}e.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const N=new Ei(this,this.j,u);let O=this.o;if(this.U&&(O?(O=rt(O),He(O,this.U)):O=this.U),this.u!==null||this.R||(N.J=O,O=null),this.S)t:{for(var p=0,g=0;g<this.i.length;g++){e:{var I=this.i[g];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break e}I=void 0}if(I===void 0)break;if(p+=I,p>4096){p=g;break t}if(p===4096||g===this.i.length-1){p=g+1;break t}}p=1e3}else p=1e3;p=Cv(this,N,p),g=Pn(this.J),St(g,"RID",u),St(g,"CVER",22),this.G&&St(g,"X-HTTP-Session-Id",this.G),oa(this,g),O&&(this.R?p="headers="+Yo(xv(O))+"&"+p:this.u&&Yd(g,this.u,O)),Kd(this.h,N),this.Ra&&St(g,"TYPE","init"),this.S?(St(g,"$req",p),St(g,"SID","null"),N.U=!0,$d(N,g,null)):$d(N,g,p),this.I=2}}else this.I==3&&(u?Pv(this,u):this.i.length==0||uv(this.h)||Pv(this))};function Pv(u,p){var g;p?g=p.l:g=u.V++;const I=Pn(u.J);St(I,"SID",u.M),St(I,"RID",g),St(I,"AID",u.K),oa(u,I),u.u&&u.o&&Yd(I,u.u,u.o),g=new Ei(u,u.j,g,u.D+1),u.u===null&&(g.J=u.o),p&&(u.i=p.G.concat(u.i)),p=Cv(u,g,1e3),g.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Kd(u.h,g),$d(g,I,p)}function oa(u,p){u.H&&H(u.H,function(g,I){St(p,I,g)}),u.l&&H({},function(g,I){St(p,I,g)})}function Cv(u,p,g){g=Math.min(u.i.length,g);const I=u.l?c(u.l.Ka,u.l,u):null;t:{var N=u.i;let nt=-1;for(;;){const Yt=["count="+g];nt==-1?g>0?(nt=N[0].g,Yt.push("ofs="+nt)):nt=0:Yt.push("ofs="+nt);let wt=!0;for(let ee=0;ee<g;ee++){var O=N[ee].g;const Cn=N[ee].map;if(O-=nt,O<0)nt=Math.max(0,N[ee].g-100),wt=!1;else try{O="req"+O+"_"||"";try{var z=Cn instanceof Map?Cn:Object.entries(Cn);for(const[Rs,bi]of z){let ki=bi;a(bi)&&(ki=Fd(bi)),Yt.push(O+Rs+"="+encodeURIComponent(ki))}}catch(Rs){throw Yt.push(O+"type="+encodeURIComponent("_badmap")),Rs}}catch{I&&I(Cn)}}if(wt){z=Yt.join("&");break t}}z=void 0}return u=u.i.splice(0,g),p.G=u,z}function Rv(u){if(!u.g&&!u.v){u.Y=1;var p=u.Da;M||_(),V||(M(),V=!0),T.add(p,u),u.A=0}}function Jd(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Go(c(u.Da,u),Vv(u,u.A)),u.A++,!0)}e.Da=function(){if(this.v=null,Dv(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Go(c(this.Wa,this),u)}},e.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ke(10),mc(this),Dv(this))};function Zd(u){u.B!=null&&(o.clearTimeout(u.B),u.B=null)}function Dv(u){u.g=new Ei(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var p=Pn(u.na);St(p,"RID","rpc"),St(p,"SID",u.M),St(p,"AID",u.K),St(p,"CI",u.F?"0":"1"),!u.F&&u.ia&&St(p,"TO",u.ia),St(p,"TYPE","xmlhttp"),oa(u,p),u.u&&u.o&&Yd(p,u.u,u.o),u.O&&(u.g.H=u.O);var g=u.g;u=u.ba,g.M=1,g.A=dc(Pn(p)),g.u=null,g.R=!0,ov(g,u)}e.Va=function(){this.C!=null&&(this.C=null,mc(this),Jd(this),ke(19))};function yc(u){u.C!=null&&(o.clearTimeout(u.C),u.C=null)}function Mv(u,p){var g=null;if(u.g==p){yc(u),Zd(u),u.g=null;var I=2}else if(qd(u.h,p))g=p.G,dv(u.h,p),I=1;else return;if(u.I!=0){if(p.o)if(I==1){g=p.u?p.u.length:0,p=Date.now()-p.F;var N=u.D;I=cc(),be(I,new ev(I,g)),gc(u)}else Rv(u);else if(N=p.m,N==3||N==0&&p.X>0||!(I==1&&kC(u,p)||I==2&&Jd(u)))switch(g&&g.length>0&&(p=u.h,p.i=p.i.concat(g)),N){case 1:Cs(u,5);break;case 4:Cs(u,10);break;case 3:Cs(u,6);break;default:Cs(u,2)}}}function Vv(u,p){let g=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(g*=2),g*p}function Cs(u,p){if(u.j.info("Error code "+p),p==2){var g=c(u.bb,u),I=u.Ua;const N=!I;I=new Si(I||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Jo(I,"https"),dc(I),N?xC(I.toString(),g):EC(I.toString(),g)}else ke(2);u.I=0,u.l&&u.l.pa(p),Nv(u),kv(u)}e.bb=function(u){u?(this.j.info("Successfully pinged google.com"),ke(2)):(this.j.info("Failed to ping google.com"),ke(1))};function Nv(u){if(u.I=0,u.ja=[],u.l){const p=fv(u.h);(p.length!=0||u.i.length!=0)&&(v(u.ja,p),v(u.ja,u.i),u.h.i.length=0,m(u.i),u.i.length=0),u.l.oa()}}function Ov(u,p,g){var I=g instanceof Si?Pn(g):new Si(g);if(I.g!="")p&&(I.g=p+"."+I.g),Zo(I,I.u);else{var N=o.location;I=N.protocol,p=p?p+"."+N.hostname:N.hostname,N=+N.port;const O=new Si(null);I&&Jo(O,I),p&&(O.g=p),N&&Zo(O,N),g&&(O.h=g),I=O}return g=u.G,p=u.wa,g&&p&&St(I,g,p),St(I,"VER",u.ka),oa(u,I),I}function Lv(u,p,g){if(p&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Aa&&!u.ma?new Nt(new Qd({ab:g})):new Nt(u.ma),p.Fa(u.L),p}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Fv(){}e=Fv.prototype,e.ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){};function _c(){}_c.prototype.g=function(u,p){return new qe(u,p)};function qe(u,p){fe.call(this),this.g=new bv(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(u?u["X-WebChannel-Client-Profile"]=p.sa:u={"X-WebChannel-Client-Profile":p.sa}),this.g.U=u,(u=p&&p.Qb)&&!k(u)&&(this.g.u=u),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!k(p)&&(this.g.G=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new wr(this)}d(qe,fe),qe.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},qe.prototype.close=function(){Xd(this.g)},qe.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var g={};g.__data__=u,u=g}else this.v&&(g={},g.__data__=Fd(u),u=g);p.i.push(new pC(p.Ya++,u)),p.I==3&&gc(p)},qe.prototype.N=function(){this.g.l=null,delete this.j,Xd(this.g),delete this.g,qe.Z.N.call(this)};function jv(u){jd.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){t:{for(const g in p){u=g;break t}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}d(jv,jd);function Bv(){Bd.call(this),this.status=1}d(Bv,Bd);function wr(u){this.g=u}d(wr,Fv),wr.prototype.ra=function(){be(this.g,"a")},wr.prototype.qa=function(u){be(this.g,new jv(u))},wr.prototype.pa=function(u){be(this.g,new Bv)},wr.prototype.oa=function(){be(this.g,"b")},_c.prototype.createWebChannel=_c.prototype.g,qe.prototype.send=qe.prototype.o,qe.prototype.open=qe.prototype.m,qe.prototype.close=qe.prototype.close,PI=function(){return new _c},kI=function(){return cc()},bI=bs,fm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},uc.NO_ERROR=0,uc.TIMEOUT=8,uc.HTTP_ERROR=6,wu=uc,nv.COMPLETE="complete",AI=nv,X_.EventType=qo,qo.OPEN="a",qo.CLOSE="b",qo.ERROR="c",qo.MESSAGE="d",fe.prototype.listen=fe.prototype.J,Ia=X_,Nt.prototype.listenOnce=Nt.prototype.K,Nt.prototype.getLastError=Nt.prototype.Ha,Nt.prototype.getLastErrorCode=Nt.prototype.ya,Nt.prototype.getStatus=Nt.prototype.ca,Nt.prototype.getResponseJson=Nt.prototype.La,Nt.prototype.getResponseText=Nt.prototype.la,Nt.prototype.send=Nt.prototype.ea,Nt.prototype.setWithCredentials=Nt.prototype.Fa,II=Nt}).apply(typeof Lc<"u"?Lc:typeof self<"u"?self:typeof window<"u"?window:{});const lw="@firebase/firestore",cw="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}_e.UNAUTHENTICATED=new _e(null),_e.GOOGLE_CREDENTIALS=new _e("google-credentials-uid"),_e.FIRST_PARTY=new _e("first-party-uid"),_e.MOCK_USER=new _e("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mo="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cr=new iy("@firebase/firestore");function Sr(){return cr.logLevel}function W(e,...t){if(cr.logLevel<=ot.DEBUG){const n=t.map(oy);cr.debug(`Firestore (${Mo}): ${e}`,...n)}}function pi(e,...t){if(cr.logLevel<=ot.ERROR){const n=t.map(oy);cr.error(`Firestore (${Mo}): ${e}`,...n)}}function yo(e,...t){if(cr.logLevel<=ot.WARN){const n=t.map(oy);cr.warn(`Firestore (${Mo}): ${e}`,...n)}}function oy(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q(e,t,n){let i="Unexpected state";typeof t=="string"?i=t:n=t,CI(e,i,n)}function CI(e,t,n){let i=`FIRESTORE (${Mo}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw pi(i),new Error(i)}function gt(e,t,n,i){let s="Unexpected state";typeof n=="string"?s=n:i=n,e||CI(t,s,i)}function tt(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $ extends Ti{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class zM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(_e.UNAUTHENTICATED))}shutdown(){}}class $M{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class HM{constructor(t){this.t=t,this.currentUser=_e.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){gt(this.o===void 0,42304);let i=this.i;const s=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve();let r=new rs;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new rs,t.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=r;t.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new rs)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==t?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(gt(typeof i.accessToken=="string",31837,{l:i}),new RI(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return gt(t===null||typeof t=="string",2055,{h:t}),new _e(t)}}class WM{constructor(t,n,i){this.P=t,this.T=n,this.I=i,this.type="FirstParty",this.user=_e.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class qM{constructor(t,n,i){this.P=t,this.T=n,this.I=i}getToken(){return Promise.resolve(new WM(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(_e.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class uw{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class KM{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,jn(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){gt(this.o===void 0,3512);const i=r=>{r.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const o=r.token!==this.m;return this.m=r.token,W("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(r.token):Promise.resolve()};this.o=r=>{t.enqueueRetryable(()=>i(r))};const s=r=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(r=>s(r)),setTimeout(()=>{if(!this.appCheck){const r=this.V.getImmediate({optional:!0});r?s(r):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new uw(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(gt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new uw(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GM(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=GM(40);for(let r=0;r<s.length;++r)i.length<20&&s[r]<n&&(i+=t.charAt(s[r]%62))}return i}}function at(e,t){return e<t?-1:e>t?1:0}function pm(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const s=e.charAt(i),r=t.charAt(i);if(s!==r)return Mf(s)===Mf(r)?at(s,r):Mf(s)?1:-1}return at(e.length,t.length)}const QM=55296,YM=57343;function Mf(e){const t=e.charCodeAt(0);return t>=QM&&t<=YM}function _o(e,t,n){return e.length===t.length&&e.every((i,s)=>n(i,t[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw="__name__";class On{constructor(t,n,i){n===void 0?n=0:n>t.length&&Q(637,{offset:n,range:t.length}),i===void 0?i=t.length-n:i>t.length-n&&Q(1746,{length:i,range:t.length-n}),this.segments=t,this.offset=n,this.len=i}get length(){return this.len}isEqual(t){return On.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof On?t.forEach(i=>{n.push(i)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,i=this.limit();n<i;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const i=Math.min(t.length,n.length);for(let s=0;s<i;s++){const r=On.compareSegments(t.get(s),n.get(s));if(r!==0)return r}return at(t.length,n.length)}static compareSegments(t,n){const i=On.isNumericId(t),s=On.isNumericId(n);return i&&!s?-1:!i&&s?1:i&&s?On.extractNumericId(t).compare(On.extractNumericId(n)):pm(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return ss.fromString(t.substring(4,t.length-2))}}class xt extends On{construct(t,n,i){return new xt(t,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const i of t){if(i.indexOf("//")>=0)throw new $(L.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(s=>s.length>0))}return new xt(n)}static emptyPath(){return new xt([])}}const XM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ce extends On{construct(t,n,i){return new ce(t,n,i)}static isValidIdentifier(t){return XM.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ce.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===hw}static keyField(){return new ce([hw])}static fromServerFormat(t){const n=[];let i="",s=0;const r=()=>{if(i.length===0)throw new $(L.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let o=!1;for(;s<t.length;){const a=t[s];if(a==="\\"){if(s+1===t.length)throw new $(L.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new $(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(i+=a,s++):(r(),s++)}if(r(),o)throw new $(L.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ce(n)}static emptyPath(){return new ce([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(t){this.path=t}static fromPath(t){return new G(xt.fromString(t))}static fromName(t){return new G(xt.fromString(t).popFirst(5))}static empty(){return new G(xt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&xt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return xt.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new G(new xt(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DI(e,t,n){if(!n)throw new $(L.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function JM(e,t,n,i){if(t===!0&&i===!0)throw new $(L.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function dw(e){if(!G.isDocumentKey(e))throw new $(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function fw(e){if(G.isDocumentKey(e))throw new $(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function MI(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function ad(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Q(12329,{type:typeof e})}function Tl(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new $(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ad(e);throw new $(L.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(e,t){const n={typeString:e};return t&&(n.value=t),n}function Gl(e,t){if(!MI(e))throw new $(L.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in t)if(t[i]){const s=t[i].typeString,r="value"in t[i]?{value:t[i].value}:void 0;if(!(i in e)){n=`JSON missing required field: '${i}'`;break}const o=e[i];if(s&&typeof o!==s){n=`JSON field '${i}' must be a ${s}.`;break}if(r!==void 0&&o!==r.value){n=`Expected '${i}' field to equal '${r.value}'`;break}}if(n)throw new $(L.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pw=-62135596800,mw=1e6;class mt{static now(){return mt.fromMillis(Date.now())}static fromDate(t){return mt.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),i=Math.floor((t-1e3*n)*mw);return new mt(n,i)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new $(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new $(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<pw)throw new $(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new $(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/mw}_compareTo(t){return this.seconds===t.seconds?at(this.nanoseconds,t.nanoseconds):at(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:mt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Gl(t,mt._jsonSchema))return new mt(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-pw;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}mt._jsonSchemaVersion="firestore/timestamp/1.0",mt._jsonSchema={type:Gt("string",mt._jsonSchemaVersion),seconds:Gt("number"),nanoseconds:Gt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{static fromTimestamp(t){return new Z(t)}static min(){return new Z(new mt(0,0))}static max(){return new Z(new mt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xl=-1;function ZM(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,s=Z.fromTimestamp(i===1e9?new mt(n+1,0):new mt(n,i));return new ds(s,G.empty(),t)}function tV(e){return new ds(e.readTime,e.key,xl)}class ds{constructor(t,n,i){this.readTime=t,this.documentKey=n,this.largestBatchId=i}static min(){return new ds(Z.min(),G.empty(),xl)}static max(){return new ds(Z.max(),G.empty(),xl)}}function eV(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=G.comparator(e.documentKey,t.documentKey),n!==0?n:at(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class iV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vo(e){if(e.code!==L.FAILED_PRECONDITION||e.message!==nV)throw e;W("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Q(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new F((i,s)=>{this.nextCallback=r=>{this.wrapSuccess(t,r).next(i,s)},this.catchCallback=r=>{this.wrapFailure(n,r).next(i,s)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):F.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):F.reject(n)}static resolve(t){return new F((n,i)=>{n(t)})}static reject(t){return new F((n,i)=>{i(t)})}static waitFor(t){return new F((n,i)=>{let s=0,r=0,o=!1;t.forEach(a=>{++s,a.next(()=>{++r,o&&r===s&&n()},l=>i(l))}),o=!0,r===s&&n()})}static or(t){let n=F.resolve(!1);for(const i of t)n=n.next(s=>s?F.resolve(s):i());return n}static forEach(t,n){const i=[];return t.forEach((s,r)=>{i.push(n.call(this,s,r))}),this.waitFor(i)}static mapArray(t,n){return new F((i,s)=>{const r=t.length,o=new Array(r);let a=0;for(let l=0;l<r;l++){const c=l;n(t[c]).next(h=>{o[c]=h,++a,a===r&&i(o)},h=>s(h))}})}static doWhile(t,n){return new F((i,s)=>{const r=()=>{t()===!0?n().next(()=>{r()},s):i()};r()})}}function sV(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function No(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}ld.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ly=-1;function cd(e){return e==null}function hh(e){return e===0&&1/e==-1/0}function rV(e){return typeof e=="number"&&Number.isInteger(e)&&!hh(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VI="";function oV(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=gw(t)),t=aV(e.get(n),t);return gw(t)}function aV(e,t){let n=t;const i=e.length;for(let s=0;s<i;s++){const r=e.charAt(s);switch(r){case"\0":n+="";break;case VI:n+="";break;default:n+=r}}return n}function gw(e){return e+VI+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yw(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ss(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function NI(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(t,n){this.comparator=t,this.root=n||le.EMPTY}insert(t,n){return new Vt(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,le.BLACK,null,null))}remove(t){return new Vt(this.comparator,this.root.remove(t,this.comparator).copy(null,null,le.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(t){let n=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(t,i.key);if(s===0)return n+i.left.size;s<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,i)=>(t(n,i),!1))}toString(){const t=[];return this.inorderTraversal((n,i)=>(t.push(`${n}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Fc(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Fc(this.root,t,this.comparator,!1)}getReverseIterator(){return new Fc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Fc(this.root,t,this.comparator,!0)}}class Fc{constructor(t,n,i,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=n?i(t.key,n):1,n&&s&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(r===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class le{constructor(t,n,i,s,r){this.key=t,this.value=n,this.color=i??le.RED,this.left=s??le.EMPTY,this.right=r??le.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,i,s,r){return new le(t??this.key,n??this.value,i??this.color,s??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,i){let s=this;const r=i(t,s.key);return s=r<0?s.copy(null,null,null,s.left.insert(t,n,i),null):r===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(t,n,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return le.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let i,s=this;if(n(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(t,s.key)===0){if(s.right.isEmpty())return le.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,le.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,le.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Q(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Q(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Q(27949);return t+(this.isRed()?0:1)}}le.EMPTY=null,le.RED=!0,le.BLACK=!1;le.EMPTY=new class{constructor(){this.size=0}get key(){throw Q(57766)}get value(){throw Q(16141)}get color(){throw Q(16727)}get left(){throw Q(29726)}get right(){throw Q(36894)}copy(t,n,i,s,r){return this}insert(t,n,i){return new le(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(t){this.comparator=t,this.data=new Vt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,i)=>(t(n),!1))}forEachInRange(t,n){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,t[1])>=0)return;n(s.key)}}forEachWhile(t,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new _w(this.data.getIterator())}getIteratorFrom(t){return new _w(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(i=>{n=n.add(i)}),n}isEqual(t){if(!(t instanceof te)||this.size!==t.size)return!1;const n=this.data.getIterator(),i=t.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,r=i.getNext().key;if(this.comparator(s,r)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new te(this.comparator);return n.data=t,n}}class _w{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(t){this.fields=t,t.sort(ce.comparator)}static empty(){return new Qe([])}unionWith(t){let n=new te(ce.comparator);for(const i of this.fields)n=n.add(i);for(const i of t)n=n.add(i);return new Qe(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return _o(this.fields,t.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(s){try{return atob(s)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new OI("Invalid base64 string: "+r):r}}(t);return new de(n)}static fromUint8Array(t){const n=function(s){let r="";for(let o=0;o<s.length;++o)r+=String.fromCharCode(s[o]);return r}(t);return new de(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return at(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}de.EMPTY_BYTE_STRING=new de("");const lV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fs(e){if(gt(!!e,39018),typeof e=="string"){let t=0;const n=lV.exec(e);if(gt(!!n,46558,{timestamp:e}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),t=Number(s)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:jt(e.seconds),nanos:jt(e.nanos)}}function jt(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function ps(e){return typeof e=="string"?de.fromBase64String(e):de.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LI="server_timestamp",FI="__type__",jI="__previous_value__",BI="__local_write_time__";function cy(e){var n,i;return((i=(((n=e==null?void 0:e.mapValue)==null?void 0:n.fields)||{})[FI])==null?void 0:i.stringValue)===LI}function ud(e){const t=e.mapValue.fields[jI];return cy(t)?ud(t):t}function El(e){const t=fs(e.mapValue.fields[BI].timestampValue);return new mt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cV{constructor(t,n,i,s,r,o,a,l,c,h){this.databaseId=t,this.appId=n,this.persistenceKey=i,this.host=s,this.ssl=r,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=h}}const dh="(default)";class Sl{constructor(t,n){this.projectId=t,this.database=n||dh}static empty(){return new Sl("","")}get isDefaultDatabase(){return this.database===dh}isEqual(t){return t instanceof Sl&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI="__type__",uV="__max__",jc={mapValue:{}},zI="__vector__",fh="value";function ms(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?cy(e)?4:dV(e)?9007199254740991:hV(e)?10:11:Q(28295,{value:e})}function Yn(e,t){if(e===t)return!0;const n=ms(e);if(n!==ms(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return El(e).isEqual(El(t));case 3:return function(s,r){if(typeof s.timestampValue=="string"&&typeof r.timestampValue=="string"&&s.timestampValue.length===r.timestampValue.length)return s.timestampValue===r.timestampValue;const o=fs(s.timestampValue),a=fs(r.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(s,r){return ps(s.bytesValue).isEqual(ps(r.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(s,r){return jt(s.geoPointValue.latitude)===jt(r.geoPointValue.latitude)&&jt(s.geoPointValue.longitude)===jt(r.geoPointValue.longitude)}(e,t);case 2:return function(s,r){if("integerValue"in s&&"integerValue"in r)return jt(s.integerValue)===jt(r.integerValue);if("doubleValue"in s&&"doubleValue"in r){const o=jt(s.doubleValue),a=jt(r.doubleValue);return o===a?hh(o)===hh(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return _o(e.arrayValue.values||[],t.arrayValue.values||[],Yn);case 10:case 11:return function(s,r){const o=s.mapValue.fields||{},a=r.mapValue.fields||{};if(yw(o)!==yw(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Yn(o[l],a[l])))return!1;return!0}(e,t);default:return Q(52216,{left:e})}}function Il(e,t){return(e.values||[]).find(n=>Yn(n,t))!==void 0}function vo(e,t){if(e===t)return 0;const n=ms(e),i=ms(t);if(n!==i)return at(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return at(e.booleanValue,t.booleanValue);case 2:return function(r,o){const a=jt(r.integerValue||r.doubleValue),l=jt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(e,t);case 3:return vw(e.timestampValue,t.timestampValue);case 4:return vw(El(e),El(t));case 5:return pm(e.stringValue,t.stringValue);case 6:return function(r,o){const a=ps(r),l=ps(o);return a.compareTo(l)}(e.bytesValue,t.bytesValue);case 7:return function(r,o){const a=r.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=at(a[c],l[c]);if(h!==0)return h}return at(a.length,l.length)}(e.referenceValue,t.referenceValue);case 8:return function(r,o){const a=at(jt(r.latitude),jt(o.latitude));return a!==0?a:at(jt(r.longitude),jt(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return ww(e.arrayValue,t.arrayValue);case 10:return function(r,o){var f,m,v,x;const a=r.fields||{},l=o.fields||{},c=(f=a[fh])==null?void 0:f.arrayValue,h=(m=l[fh])==null?void 0:m.arrayValue,d=at(((v=c==null?void 0:c.values)==null?void 0:v.length)||0,((x=h==null?void 0:h.values)==null?void 0:x.length)||0);return d!==0?d:ww(c,h)}(e.mapValue,t.mapValue);case 11:return function(r,o){if(r===jc.mapValue&&o===jc.mapValue)return 0;if(r===jc.mapValue)return 1;if(o===jc.mapValue)return-1;const a=r.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const f=pm(l[d],h[d]);if(f!==0)return f;const m=vo(a[l[d]],c[h[d]]);if(m!==0)return m}return at(l.length,h.length)}(e.mapValue,t.mapValue);default:throw Q(23264,{he:n})}}function vw(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return at(e,t);const n=fs(e),i=fs(t),s=at(n.seconds,i.seconds);return s!==0?s:at(n.nanos,i.nanos)}function ww(e,t){const n=e.values||[],i=t.values||[];for(let s=0;s<n.length&&s<i.length;++s){const r=vo(n[s],i[s]);if(r)return r}return at(n.length,i.length)}function wo(e){return mm(e)}function mm(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const i=fs(n);return`time(${i.seconds},${i.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return ps(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return G.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let i="[",s=!0;for(const r of n.values||[])s?s=!1:i+=",",i+=mm(r);return i+"]"}(e.arrayValue):"mapValue"in e?function(n){const i=Object.keys(n.fields||{}).sort();let s="{",r=!0;for(const o of i)r?r=!1:s+=",",s+=`${o}:${mm(n.fields[o])}`;return s+"}"}(e.mapValue):Q(61005,{value:e})}function Tu(e){switch(ms(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=ud(e);return t?16+Tu(t):16;case 5:return 2*e.stringValue.length;case 6:return ps(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((s,r)=>s+Tu(r),0)}(e.arrayValue);case 10:case 11:return function(i){let s=0;return Ss(i.fields,(r,o)=>{s+=r.length+Tu(o)}),s}(e.mapValue);default:throw Q(13486,{value:e})}}function Tw(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function gm(e){return!!e&&"integerValue"in e}function uy(e){return!!e&&"arrayValue"in e}function xw(e){return!!e&&"nullValue"in e}function Ew(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function xu(e){return!!e&&"mapValue"in e}function hV(e){var n,i;return((i=(((n=e==null?void 0:e.mapValue)==null?void 0:n.fields)||{})[UI])==null?void 0:i.stringValue)===zI}function za(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return Ss(e.mapValue.fields,(n,i)=>t.mapValue.fields[n]=za(i)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=za(e.arrayValue.values[n]);return t}return{...e}}function dV(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===uV}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(t){this.value=t}static empty(){return new Le({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let i=0;i<t.length-1;++i)if(n=(n.mapValue.fields||{})[t.get(i)],!xu(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=za(n)}setAll(t){let n=ce.emptyPath(),i={},s=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,i,s),i={},s=[],n=a.popLast()}o?i[a.lastSegment()]=za(o):s.push(a.lastSegment())});const r=this.getFieldsMap(n);this.applyChanges(r,i,s)}delete(t){const n=this.field(t.popLast());xu(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Yn(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<t.length;++i){let s=n.mapValue.fields[t.get(i)];xu(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[t.get(i)]=s),n=s}return n.mapValue.fields}applyChanges(t,n,i){Ss(n,(s,r)=>t[s]=r);for(const s of i)delete t[s]}clone(){return new Le(za(this.value))}}function $I(e){const t=[];return Ss(e.fields,(n,i)=>{const s=new ce([n]);if(xu(i)){const r=$I(i.mapValue).fields;if(r.length===0)t.push(s);else for(const o of r)t.push(s.child(o))}else t.push(s)}),new Qe(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(t,n,i,s,r,o,a){this.key=t,this.documentType=n,this.version=i,this.readTime=s,this.createTime=r,this.data=o,this.documentState=a}static newInvalidDocument(t){return new we(t,0,Z.min(),Z.min(),Z.min(),Le.empty(),0)}static newFoundDocument(t,n,i,s){return new we(t,1,n,Z.min(),i,s,0)}static newNoDocument(t,n){return new we(t,2,n,Z.min(),Z.min(),Le.empty(),0)}static newUnknownDocument(t,n){return new we(t,3,n,Z.min(),Z.min(),Le.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(Z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Le.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Le.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Z.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof we&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new we(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(t,n){this.position=t,this.inclusive=n}}function Sw(e,t,n){let i=0;for(let s=0;s<e.position.length;s++){const r=t[s],o=e.position[s];if(r.field.isKeyField()?i=G.comparator(G.fromName(o.referenceValue),n.key):i=vo(o,n.data.field(r.field)),r.dir==="desc"&&(i*=-1),i!==0)break}return i}function Iw(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Yn(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(t,n="asc"){this.field=t,this.dir=n}}function fV(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{}class Kt extends HI{constructor(t,n,i){super(),this.field=t,this.op=n,this.value=i}static create(t,n,i){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,i):new mV(t,n,i):n==="array-contains"?new _V(t,i):n==="in"?new vV(t,i):n==="not-in"?new wV(t,i):n==="array-contains-any"?new TV(t,i):new Kt(t,n,i)}static createKeyFieldInFilter(t,n,i){return n==="in"?new gV(t,i):new yV(t,i)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(vo(n,this.value)):n!==null&&ms(this.value)===ms(n)&&this.matchesComparison(vo(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Q(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class kn extends HI{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new kn(t,n)}matches(t){return WI(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function WI(e){return e.op==="and"}function qI(e){return pV(e)&&WI(e)}function pV(e){for(const t of e.filters)if(t instanceof kn)return!1;return!0}function ym(e){if(e instanceof Kt)return e.field.canonicalString()+e.op.toString()+wo(e.value);if(qI(e))return e.filters.map(t=>ym(t)).join(",");{const t=e.filters.map(n=>ym(n)).join(",");return`${e.op}(${t})`}}function KI(e,t){return e instanceof Kt?function(i,s){return s instanceof Kt&&i.op===s.op&&i.field.isEqual(s.field)&&Yn(i.value,s.value)}(e,t):e instanceof kn?function(i,s){return s instanceof kn&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((r,o,a)=>r&&KI(o,s.filters[a]),!0):!1}(e,t):void Q(19439)}function GI(e){return e instanceof Kt?function(n){return`${n.field.canonicalString()} ${n.op} ${wo(n.value)}`}(e):e instanceof kn?function(n){return n.op.toString()+" {"+n.getFilters().map(GI).join(" ,")+"}"}(e):"Filter"}class mV extends Kt{constructor(t,n,i){super(t,n,i),this.key=G.fromName(i.referenceValue)}matches(t){const n=G.comparator(t.key,this.key);return this.matchesComparison(n)}}class gV extends Kt{constructor(t,n){super(t,"in",n),this.keys=QI("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class yV extends Kt{constructor(t,n){super(t,"not-in",n),this.keys=QI("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function QI(e,t){var n;return(((n=t.arrayValue)==null?void 0:n.values)||[]).map(i=>G.fromName(i.referenceValue))}class _V extends Kt{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return uy(n)&&Il(n.arrayValue,this.value)}}class vV extends Kt{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Il(this.value.arrayValue,n)}}class wV extends Kt{constructor(t,n){super(t,"not-in",n)}matches(t){if(Il(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Il(this.value.arrayValue,n)}}class TV extends Kt{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!uy(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Il(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xV{constructor(t,n=null,i=[],s=[],r=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=i,this.filters=s,this.limit=r,this.startAt=o,this.endAt=a,this.Te=null}}function Aw(e,t=null,n=[],i=[],s=null,r=null,o=null){return new xV(e,t,n,i,s,r,o)}function hy(e){const t=tt(e);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(i=>ym(i)).join(","),n+="|ob:",n+=t.orderBy.map(i=>function(r){return r.field.canonicalString()+r.dir}(i)).join(","),cd(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(i=>wo(i)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(i=>wo(i)).join(",")),t.Te=n}return t.Te}function dy(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!fV(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!KI(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Iw(e.startAt,t.startAt)&&Iw(e.endAt,t.endAt)}function _m(e){return G.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(t,n=null,i=[],s=[],r=null,o="F",a=null,l=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=s,this.limit=r,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function EV(e,t,n,i,s,r,o,a){return new Oo(e,t,n,i,s,r,o,a)}function YI(e){return new Oo(e)}function bw(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function XI(e){return e.collectionGroup!==null}function $a(e){const t=tt(e);if(t.Ie===null){t.Ie=[];const n=new Set;for(const r of t.explicitOrderBy)t.Ie.push(r),n.add(r.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new te(ce.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(t).forEach(r=>{n.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new Al(r,i))}),n.has(ce.keyField().canonicalString())||t.Ie.push(new Al(ce.keyField(),i))}return t.Ie}function zn(e){const t=tt(e);return t.Ee||(t.Ee=SV(t,$a(e))),t.Ee}function SV(e,t){if(e.limitType==="F")return Aw(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(s=>{const r=s.dir==="desc"?"asc":"desc";return new Al(s.field,r)});const n=e.endAt?new ph(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new ph(e.startAt.position,e.startAt.inclusive):null;return Aw(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}function vm(e,t){const n=e.filters.concat([t]);return new Oo(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function wm(e,t,n){return new Oo(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function hd(e,t){return dy(zn(e),zn(t))&&e.limitType===t.limitType}function JI(e){return`${hy(zn(e))}|lt:${e.limitType}`}function Ir(e){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(s=>GI(s)).join(", ")}]`),cd(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(s=>wo(s)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(s=>wo(s)).join(",")),`Target(${i})`}(zn(e))}; limitType=${e.limitType})`}function dd(e,t){return t.isFoundDocument()&&function(i,s){const r=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(r):G.isDocumentKey(i.path)?i.path.isEqual(r):i.path.isImmediateParentOf(r)}(e,t)&&function(i,s){for(const r of $a(i))if(!r.field.isKeyField()&&s.data.field(r.field)===null)return!1;return!0}(e,t)&&function(i,s){for(const r of i.filters)if(!r.matches(s))return!1;return!0}(e,t)&&function(i,s){return!(i.startAt&&!function(o,a,l){const c=Sw(o,a,l);return o.inclusive?c<=0:c<0}(i.startAt,$a(i),s)||i.endAt&&!function(o,a,l){const c=Sw(o,a,l);return o.inclusive?c>=0:c>0}(i.endAt,$a(i),s))}(e,t)}function IV(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function ZI(e){return(t,n)=>{let i=!1;for(const s of $a(e)){const r=AV(s,t,n);if(r!==0)return r;i=i||s.field.isKeyField()}return 0}}function AV(e,t,n){const i=e.field.isKeyField()?G.comparator(t.key,n.key):function(r,o,a){const l=o.data.field(r),c=a.data.field(r);return l!==null&&c!==null?vo(l,c):Q(42886)}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return Q(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i!==void 0){for(const[s,r]of i)if(this.equalsFn(s,t))return r}}has(t){return this.get(t)!==void 0}set(t,n){const i=this.mapKeyFn(t),s=this.inner[i];if(s===void 0)return this.inner[i]=[[t,n]],void this.innerSize++;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],t))return void(s[r]=[t,n]);s.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return i.length===1?delete this.inner[n]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(t){Ss(this.inner,(n,i)=>{for(const[s,r]of i)t(s,r)})}isEmpty(){return NI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bV=new Vt(G.comparator);function mi(){return bV}const tA=new Vt(G.comparator);function Aa(...e){let t=tA;for(const n of e)t=t.insert(n.key,n);return t}function eA(e){let t=tA;return e.forEach((n,i)=>t=t.insert(n,i.overlayedDocument)),t}function qs(){return Ha()}function nA(){return Ha()}function Ha(){return new mr(e=>e.toString(),(e,t)=>e.isEqual(t))}const kV=new Vt(G.comparator),PV=new te(G.comparator);function lt(...e){let t=PV;for(const n of e)t=t.add(n);return t}const CV=new te(at);function RV(){return CV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fy(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hh(t)?"-0":t}}function iA(e){return{integerValue:""+e}}function DV(e,t){return rV(t)?iA(t):fy(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(){this._=void 0}}function MV(e,t,n){return e instanceof mh?function(s,r){const o={fields:{[FI]:{stringValue:LI},[BI]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return r&&cy(r)&&(r=ud(r)),r&&(o.fields[jI]=r),{mapValue:o}}(n,t):e instanceof bl?rA(e,t):e instanceof kl?oA(e,t):function(s,r){const o=sA(s,r),a=kw(o)+kw(s.Ae);return gm(o)&&gm(s.Ae)?iA(a):fy(s.serializer,a)}(e,t)}function VV(e,t,n){return e instanceof bl?rA(e,t):e instanceof kl?oA(e,t):n}function sA(e,t){return e instanceof gh?function(i){return gm(i)||function(r){return!!r&&"doubleValue"in r}(i)}(t)?t:{integerValue:0}:null}class mh extends fd{}class bl extends fd{constructor(t){super(),this.elements=t}}function rA(e,t){const n=aA(t);for(const i of e.elements)n.some(s=>Yn(s,i))||n.push(i);return{arrayValue:{values:n}}}class kl extends fd{constructor(t){super(),this.elements=t}}function oA(e,t){let n=aA(t);for(const i of e.elements)n=n.filter(s=>!Yn(s,i));return{arrayValue:{values:n}}}class gh extends fd{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function kw(e){return jt(e.integerValue||e.doubleValue)}function aA(e){return uy(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function NV(e,t){return e.field.isEqual(t.field)&&function(i,s){return i instanceof bl&&s instanceof bl||i instanceof kl&&s instanceof kl?_o(i.elements,s.elements,Yn):i instanceof gh&&s instanceof gh?Yn(i.Ae,s.Ae):i instanceof mh&&s instanceof mh}(e.transform,t.transform)}class OV{constructor(t,n){this.version=t,this.transformResults=n}}class hn{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new hn}static exists(t){return new hn(void 0,t)}static updateTime(t){return new hn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Eu(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class pd{}function lA(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new md(e.key,hn.none()):new Ql(e.key,e.data,hn.none());{const n=e.data,i=Le.empty();let s=new te(ce.comparator);for(let r of t.fields)if(!s.has(r)){let o=n.field(r);o===null&&r.length>1&&(r=r.popLast(),o=n.field(r)),o===null?i.delete(r):i.set(r,o),s=s.add(r)}return new Is(e.key,i,new Qe(s.toArray()),hn.none())}}function LV(e,t,n){e instanceof Ql?function(s,r,o){const a=s.value.clone(),l=Cw(s.fieldTransforms,r,o.transformResults);a.setAll(l),r.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof Is?function(s,r,o){if(!Eu(s.precondition,r))return void r.convertToUnknownDocument(o.version);const a=Cw(s.fieldTransforms,r,o.transformResults),l=r.data;l.setAll(cA(s)),l.setAll(a),r.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(e,t,n):function(s,r,o){r.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function Wa(e,t,n,i){return e instanceof Ql?function(r,o,a,l){if(!Eu(r.precondition,o))return a;const c=r.value.clone(),h=Rw(r.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(e,t,n,i):e instanceof Is?function(r,o,a,l){if(!Eu(r.precondition,o))return a;const c=Rw(r.fieldTransforms,l,o),h=o.data;return h.setAll(cA(r)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(d=>d.field))}(e,t,n,i):function(r,o,a){return Eu(r.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function FV(e,t){let n=null;for(const i of e.fieldTransforms){const s=t.data.field(i.field),r=sA(i.transform,s||null);r!=null&&(n===null&&(n=Le.empty()),n.set(i.field,r))}return n||null}function Pw(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&_o(i,s,(r,o)=>NV(r,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Ql extends pd{constructor(t,n,i,s=[]){super(),this.key=t,this.value=n,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Is extends pd{constructor(t,n,i,s,r=[]){super(),this.key=t,this.data=n,this.fieldMask=i,this.precondition=s,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function cA(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}}),t}function Cw(e,t,n){const i=new Map;gt(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let s=0;s<n.length;s++){const r=e[s],o=r.transform,a=t.data.field(r.field);i.set(r.field,VV(o,a,n[s]))}return i}function Rw(e,t,n){const i=new Map;for(const s of e){const r=s.transform,o=n.data.field(s.field);i.set(s.field,MV(r,o,t))}return i}class md extends pd{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class jV extends pd{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BV{constructor(t,n,i,s){this.batchId=t,this.localWriteTime=n,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(t,n){const i=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const r=this.mutations[s];r.key.isEqual(t.key)&&LV(r,t,i[s])}}applyToLocalView(t,n){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(n=Wa(i,t,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(n=Wa(i,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const i=nA();return this.mutations.forEach(s=>{const r=t.get(s.key),o=r.overlayedDocument;let a=this.applyToLocalView(o,r.mutatedFields);a=n.has(s.key)?null:a;const l=lA(o,a);l!==null&&i.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(Z.min())}),i}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),lt())}isEqual(t){return this.batchId===t.batchId&&_o(this.mutations,t.mutations,(n,i)=>Pw(n,i))&&_o(this.baseMutations,t.baseMutations,(n,i)=>Pw(n,i))}}class py{constructor(t,n,i,s){this.batch=t,this.commitVersion=n,this.mutationResults=i,this.docVersions=s}static from(t,n,i){gt(t.mutations.length===i.length,58842,{me:t.mutations.length,fe:i.length});let s=function(){return kV}();const r=t.mutations;for(let o=0;o<r.length;o++)s=s.insert(r[o].key,i[o].version);return new py(t,n,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UV{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zV{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ht,ct;function $V(e){switch(e){case L.OK:return Q(64938);case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0;default:return Q(15467,{code:e})}}function uA(e){if(e===void 0)return pi("GRPC error has no .code"),L.UNKNOWN;switch(e){case Ht.OK:return L.OK;case Ht.CANCELLED:return L.CANCELLED;case Ht.UNKNOWN:return L.UNKNOWN;case Ht.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case Ht.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case Ht.INTERNAL:return L.INTERNAL;case Ht.UNAVAILABLE:return L.UNAVAILABLE;case Ht.UNAUTHENTICATED:return L.UNAUTHENTICATED;case Ht.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case Ht.NOT_FOUND:return L.NOT_FOUND;case Ht.ALREADY_EXISTS:return L.ALREADY_EXISTS;case Ht.PERMISSION_DENIED:return L.PERMISSION_DENIED;case Ht.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case Ht.ABORTED:return L.ABORTED;case Ht.OUT_OF_RANGE:return L.OUT_OF_RANGE;case Ht.UNIMPLEMENTED:return L.UNIMPLEMENTED;case Ht.DATA_LOSS:return L.DATA_LOSS;default:return Q(39323,{code:e})}}(ct=Ht||(Ht={}))[ct.OK=0]="OK",ct[ct.CANCELLED=1]="CANCELLED",ct[ct.UNKNOWN=2]="UNKNOWN",ct[ct.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ct[ct.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ct[ct.NOT_FOUND=5]="NOT_FOUND",ct[ct.ALREADY_EXISTS=6]="ALREADY_EXISTS",ct[ct.PERMISSION_DENIED=7]="PERMISSION_DENIED",ct[ct.UNAUTHENTICATED=16]="UNAUTHENTICATED",ct[ct.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ct[ct.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ct[ct.ABORTED=10]="ABORTED",ct[ct.OUT_OF_RANGE=11]="OUT_OF_RANGE",ct[ct.UNIMPLEMENTED=12]="UNIMPLEMENTED",ct[ct.INTERNAL=13]="INTERNAL",ct[ct.UNAVAILABLE=14]="UNAVAILABLE",ct[ct.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HV(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WV=new ss([4294967295,4294967295],0);function Dw(e){const t=HV().encode(e),n=new SI;return n.update(t),new Uint8Array(n.digest())}function Mw(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),s=t.getUint32(8,!0),r=t.getUint32(12,!0);return[new ss([n,i],0),new ss([s,r],0)]}class my{constructor(t,n,i){if(this.bitmap=t,this.padding=n,this.hashCount=i,n<0||n>=8)throw new ba(`Invalid padding: ${n}`);if(i<0)throw new ba(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new ba(`Invalid hash count: ${i}`);if(t.length===0&&n!==0)throw new ba(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=ss.fromNumber(this.ge)}ye(t,n,i){let s=t.add(n.multiply(ss.fromNumber(i)));return s.compare(WV)===1&&(s=new ss([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=Dw(t),[i,s]=Mw(n);for(let r=0;r<this.hashCount;r++){const o=this.ye(i,s,r);if(!this.we(o))return!1}return!0}static create(t,n,i){const s=t%8==0?0:8-t%8,r=new Uint8Array(Math.ceil(t/8)),o=new my(r,s,n);return i.forEach(a=>o.insert(a)),o}insert(t){if(this.ge===0)return;const n=Dw(t),[i,s]=Mw(n);for(let r=0;r<this.hashCount;r++){const o=this.ye(i,s,r);this.Se(o)}}Se(t){const n=Math.floor(t/8),i=t%8;this.bitmap[n]|=1<<i}}class ba extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(t,n,i,s,r){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(t,n,i){const s=new Map;return s.set(t,Yl.createSynthesizedTargetChangeForCurrentChange(t,n,i)),new gd(Z.min(),s,new Vt(at),mi(),lt())}}class Yl{constructor(t,n,i,s,r){this.resumeToken=t,this.current=n,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(t,n,i){return new Yl(i,n,lt(),lt(),lt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(t,n,i,s){this.be=t,this.removedTargetIds=n,this.key=i,this.De=s}}class hA{constructor(t,n){this.targetId=t,this.Ce=n}}class dA{constructor(t,n,i=de.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=n,this.resumeToken=i,this.cause=s}}class Vw{constructor(){this.ve=0,this.Fe=Nw(),this.Me=de.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=lt(),n=lt(),i=lt();return this.Fe.forEach((s,r)=>{switch(r){case 0:t=t.add(s);break;case 2:n=n.add(s);break;case 1:i=i.add(s);break;default:Q(38017,{changeType:r})}}),new Yl(this.Me,this.xe,t,n,i)}qe(){this.Oe=!1,this.Fe=Nw()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,gt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class qV{constructor(t){this.Ge=t,this.ze=new Map,this.je=mi(),this.Je=Bc(),this.He=Bc(),this.Ye=new Vt(at)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,n=>{const i=this.nt(n);switch(t.state){case 0:this.rt(n)&&i.Le(t.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(t.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(t.resumeToken));break;default:Q(56790,{state:t.state})}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach((i,s)=>{this.rt(s)&&n(s)})}st(t){const n=t.targetId,i=t.Ce.count,s=this.ot(n);if(s){const r=s.target;if(_m(r))if(i===0){const o=new G(r.path);this.et(n,o,we.newNoDocument(o,Z.min()))}else gt(i===1,20013,{expectedCount:i});else{const o=this._t(n);if(o!==i){const a=this.ut(t),l=a?this.ct(a,t,o):1;if(l!==0){this.it(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,c)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:r=0}=n;let o,a;try{o=ps(i).toUint8Array()}catch(l){if(l instanceof OI)return yo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new my(o,s,r)}catch(l){return yo(l instanceof ba?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(t,n,i){return n.Ce.count===i-this.Pt(t,n.targetId)?0:2}Pt(t,n){const i=this.Ge.getRemoteKeysForTarget(n);let s=0;return i.forEach(r=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${r.path.canonicalString()}`;t.mightContain(a)||(this.et(n,r,null),s++)}),s}Tt(t){const n=new Map;this.ze.forEach((r,o)=>{const a=this.ot(o);if(a){if(r.current&&_m(a.target)){const l=new G(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,we.newNoDocument(l,t))}r.Be&&(n.set(o,r.ke()),r.qe())}});let i=lt();this.He.forEach((r,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.ot(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(r))}),this.je.forEach((r,o)=>o.setReadTime(t));const s=new gd(t,n,this.Ye,this.je,i);return this.je=mi(),this.Je=Bc(),this.He=Bc(),this.Ye=new Vt(at),s}Xe(t,n){if(!this.rt(t))return;const i=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,i){if(!this.rt(t))return;const s=this.nt(t);this.Et(t,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),i&&(this.je=this.je.insert(n,i))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new Vw,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new te(at),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new te(at),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||W("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new Vw),this.Ge.getRemoteKeysForTarget(t).forEach(n=>{this.et(t,n,null)})}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function Bc(){return new Vt(G.comparator)}function Nw(){return new Vt(G.comparator)}const KV={asc:"ASCENDING",desc:"DESCENDING"},GV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},QV={and:"AND",or:"OR"};class YV{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function Tm(e,t){return e.useProto3Json||cd(t)?t:{value:t}}function yh(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function fA(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function XV(e,t){return yh(e,t.toTimestamp())}function $n(e){return gt(!!e,49232),Z.fromTimestamp(function(n){const i=fs(n);return new mt(i.seconds,i.nanos)}(e))}function gy(e,t){return xm(e,t).canonicalString()}function xm(e,t){const n=function(s){return new xt(["projects",s.projectId,"databases",s.database])}(e).child("documents");return t===void 0?n:n.child(t)}function pA(e){const t=xt.fromString(e);return gt(vA(t),10190,{key:t.toString()}),t}function Em(e,t){return gy(e.databaseId,t.path)}function Vf(e,t){const n=pA(t);if(n.get(1)!==e.databaseId.projectId)throw new $(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new $(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new G(gA(n))}function mA(e,t){return gy(e.databaseId,t)}function JV(e){const t=pA(e);return t.length===4?xt.emptyPath():gA(t)}function Sm(e){return new xt(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function gA(e){return gt(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function Ow(e,t,n){return{name:Em(e,t),fields:n.value.mapValue.fields}}function ZV(e,t){let n;if("targetChange"in t){t.targetChange;const i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Q(39313,{state:c})}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],r=function(c,h){return c.useProto3Json?(gt(h===void 0||typeof h=="string",58123),de.fromBase64String(h||"")):(gt(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),de.fromUint8Array(h||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(c){const h=c.code===void 0?L.UNKNOWN:uA(c.code);return new $(h,c.message||"")}(o);n=new dA(i,s,r,a||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const s=Vf(e,i.document.name),r=$n(i.document.updateTime),o=i.document.createTime?$n(i.document.createTime):Z.min(),a=new Le({mapValue:{fields:i.document.fields}}),l=we.newFoundDocument(s,r,o,a),c=i.targetIds||[],h=i.removedTargetIds||[];n=new Su(c,h,l.key,l)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const s=Vf(e,i.document),r=i.readTime?$n(i.readTime):Z.min(),o=we.newNoDocument(s,r),a=i.removedTargetIds||[];n=new Su([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const s=Vf(e,i.document),r=i.removedTargetIds||[];n=new Su([],r,s,null)}else{if(!("filter"in t))return Q(11601,{Rt:t});{t.filter;const i=t.filter;i.targetId;const{count:s=0,unchangedNames:r}=i,o=new zV(s,r),a=i.targetId;n=new hA(a,o)}}return n}function tN(e,t){let n;if(t instanceof Ql)n={update:Ow(e,t.key,t.value)};else if(t instanceof md)n={delete:Em(e,t.key)};else if(t instanceof Is)n={update:Ow(e,t.key,t.data),updateMask:cN(t.fieldMask)};else{if(!(t instanceof jV))return Q(16599,{Vt:t.type});n={verify:Em(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(i=>function(r,o){const a=o.transform;if(a instanceof mh)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof bl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof kl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof gh)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw Q(20930,{transform:o.transform})}(0,i))),t.precondition.isNone||(n.currentDocument=function(s,r){return r.updateTime!==void 0?{updateTime:XV(s,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:Q(27497)}(e,t.precondition)),n}function eN(e,t){return e&&e.length>0?(gt(t!==void 0,14353),e.map(n=>function(s,r){let o=s.updateTime?$n(s.updateTime):$n(r);return o.isEqual(Z.min())&&(o=$n(r)),new OV(o,s.transformResults||[])}(n,t))):[]}function nN(e,t){return{documents:[mA(e,t.path)]}}function iN(e,t){const n={structuredQuery:{}},i=t.path;let s;t.collectionGroup!==null?(s=i,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=mA(e,s);const r=function(c){if(c.length!==0)return _A(kn.create(c,"and"))}(t.filters);r&&(n.structuredQuery.where=r);const o=function(c){if(c.length!==0)return c.map(h=>function(f){return{field:Ar(f.field),direction:oN(f.dir)}}(h))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Tm(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(t.endAt)),{ft:n,parent:s}}function sN(e){let t=JV(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){gt(i===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:t=t.child(h.collectionId)}let r=[];n.where&&(r=function(d){const f=yA(d);return f instanceof kn&&qI(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(f=>function(v){return new Al(br(v.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,cd(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,m=d.values||[];return new ph(m,f)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const f=!d.before,m=d.values||[];return new ph(m,f)}(n.endAt)),EV(t,s,o,r,a,"F",l,c)}function rN(e,t){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Q(28987,{purpose:s})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function yA(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=br(n.unaryFilter.field);return Kt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=br(n.unaryFilter.field);return Kt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=br(n.unaryFilter.field);return Kt.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=br(n.unaryFilter.field);return Kt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Q(61313);default:return Q(60726)}}(e):e.fieldFilter!==void 0?function(n){return Kt.create(br(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Q(58110);default:return Q(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return kn.create(n.compositeFilter.filters.map(i=>yA(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Q(1026)}}(n.compositeFilter.op))}(e):Q(30097,{filter:e})}function oN(e){return KV[e]}function aN(e){return GV[e]}function lN(e){return QV[e]}function Ar(e){return{fieldPath:e.canonicalString()}}function br(e){return ce.fromServerFormat(e.fieldPath)}function _A(e){return e instanceof Kt?function(n){if(n.op==="=="){if(Ew(n.value))return{unaryFilter:{field:Ar(n.field),op:"IS_NAN"}};if(xw(n.value))return{unaryFilter:{field:Ar(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Ew(n.value))return{unaryFilter:{field:Ar(n.field),op:"IS_NOT_NAN"}};if(xw(n.value))return{unaryFilter:{field:Ar(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ar(n.field),op:aN(n.op),value:n.value}}}(e):e instanceof kn?function(n){const i=n.getFilters().map(s=>_A(s));return i.length===1?i[0]:{compositeFilter:{op:lN(n.op),filters:i}}}(e):Q(54877,{filter:e})}function cN(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function vA(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(t,n,i,s,r=Z.min(),o=Z.min(),a=de.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=n,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(t){return new $i(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new $i(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new $i(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new $i(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(t){this.yt=t}}function hN(e){const t=sN({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?wm(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(){this.Cn=new fN}addToCollectionParentIndex(t,n){return this.Cn.add(n),F.resolve()}getCollectionParents(t,n){return F.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return F.resolve()}deleteFieldIndex(t,n){return F.resolve()}deleteAllFieldIndexes(t){return F.resolve()}createTargetIndexes(t,n){return F.resolve()}getDocumentsMatchingTarget(t,n){return F.resolve(null)}getIndexType(t,n){return F.resolve(0)}getFieldIndexes(t,n){return F.resolve([])}getNextCollectionGroupToUpdate(t){return F.resolve(null)}getMinOffset(t,n){return F.resolve(ds.min())}getMinOffsetFromCollectionGroup(t,n){return F.resolve(ds.min())}updateCollectionGroup(t,n,i){return F.resolve()}updateIndexEntries(t,n){return F.resolve()}}class fN{constructor(){this.index={}}add(t){const n=t.lastSegment(),i=t.popLast(),s=this.index[n]||new te(xt.comparator),r=!s.has(i);return this.index[n]=s.add(i),r}has(t){const n=t.lastSegment(),i=t.popLast(),s=this.index[n];return s&&s.has(i)}getEntries(t){return(this.index[t]||new te(xt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},wA=41943040;class Ne{static withCacheSize(t){return new Ne(t,Ne.DEFAULT_COLLECTION_PERCENTILE,Ne.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ne.DEFAULT_COLLECTION_PERCENTILE=10,Ne.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ne.DEFAULT=new Ne(wA,Ne.DEFAULT_COLLECTION_PERCENTILE,Ne.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ne.DISABLED=new Ne(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new To(0)}static cr(){return new To(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fw="LruGarbageCollector",pN=1048576;function jw([e,t],[n,i]){const s=at(e,n);return s===0?at(t,i):s}class mN{constructor(t){this.Ir=t,this.buffer=new te(jw),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();jw(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class gN{constructor(t,n,i){this.garbageCollector=t,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){W(Fw,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){No(n)?W(Fw,"Ignoring IndexedDB error during garbage collection: ",n):await Vo(n)}await this.Vr(3e5)})}}class yN{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next(i=>Math.floor(n/100*i))}nthSequenceNumber(t,n){if(n===0)return F.resolve(ld.ce);const i=new mN(n);return this.mr.forEachTarget(t,s=>i.Ar(s.sequenceNumber)).next(()=>this.mr.pr(t,s=>i.Ar(s))).next(()=>i.maxValue)}removeTargets(t,n,i){return this.mr.removeTargets(t,n,i)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(W("LruGarbageCollector","Garbage collection skipped; disabled"),F.resolve(Lw)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(W("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Lw):this.yr(t,n))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let i,s,r,o,a,l,c;const h=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(W("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),s=this.params.maximumSequenceNumbersToCollect):s=d,o=Date.now(),this.nthSequenceNumber(t,s))).next(d=>(i=d,a=Date.now(),this.removeTargets(t,i,n))).next(d=>(r=d,l=Date.now(),this.removeOrphanedDocuments(t,i))).next(d=>(c=Date.now(),Sr()<=ot.DEBUG&&W("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${r} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(c-l)+`ms
Total Duration: ${c-h}ms`),F.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:r,documentsRemoved:d})))}}function _N(e,t){return new yN(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(){this.changes=new mr(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,we.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?F.resolve(i):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(t,n,i,s){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=s}getDocument(t,n){let i=null;return this.documentOverlayCache.getOverlay(t,n).next(s=>(i=s,this.remoteDocumentCache.getEntry(t,n))).next(s=>(i!==null&&Wa(i.mutation,s,Qe.empty(),mt.now()),s))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.getLocalViewOfDocuments(t,i,lt()).next(()=>i))}getLocalViewOfDocuments(t,n,i=lt()){const s=qs();return this.populateOverlays(t,s,n).next(()=>this.computeViews(t,n,s,i).next(r=>{let o=Aa();return r.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const i=qs();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,lt()))}populateOverlays(t,n,i){const s=[];return i.forEach(r=>{n.has(r)||s.push(r)}),this.documentOverlayCache.getOverlays(t,s).next(r=>{r.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,i,s){let r=mi();const o=Ha(),a=function(){return Ha()}();return n.forEach((l,c)=>{const h=i.get(c.key);s.has(c.key)&&(h===void 0||h.mutation instanceof Is)?r=r.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),Wa(h.mutation,c,h.mutation.getFieldMask(),mt.now())):o.set(c.key,Qe.empty())}),this.recalculateAndSaveOverlays(t,r).next(l=>(l.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>a.set(c,new wN(h,o.get(c)??null))),a))}recalculateAndSaveOverlays(t,n){const i=Ha();let s=new Vt((o,a)=>o-a),r=lt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=i.get(l)||Qe.empty();h=a.applyToLocalView(c,h),i.set(l,h);const d=(s.get(a.batchId)||lt()).add(l);s=s.insert(a.batchId,d)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,d=nA();h.forEach(f=>{if(!r.has(f)){const m=lA(n.get(f),i.get(f));m!==null&&d.set(f,m),r=r.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(t,c,d))}return F.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,n,i,s){return function(o){return G.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):XI(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,i,s):this.getDocumentsMatchingCollectionQuery(t,n,i,s)}getNextDocuments(t,n,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,i,s).next(r=>{const o=s-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,i.largestBatchId,s-r.size):F.resolve(qs());let a=xl,l=r;return o.next(c=>F.forEach(c,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),r.get(h)?F.resolve():this.remoteDocumentCache.getEntry(t,h).next(f=>{l=l.insert(h,f)}))).next(()=>this.populateOverlays(t,c,r)).next(()=>this.computeViews(t,l,c,lt())).next(h=>({batchId:a,changes:eA(h)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new G(n)).next(i=>{let s=Aa();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(t,n,i,s){const r=n.collectionGroup;let o=Aa();return this.indexManager.getCollectionParents(t,r).next(a=>F.forEach(a,l=>{const c=function(d,f){return new Oo(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(r));return this.getDocumentsMatchingCollectionQuery(t,c,i,s).next(h=>{h.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,i,s){let r;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,i.largestBatchId).next(o=>(r=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,i,r,s))).next(o=>{r.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,we.newInvalidDocument(h)))});let a=Aa();return o.forEach((l,c)=>{const h=r.get(l);h!==void 0&&Wa(h.mutation,c,Qe.empty(),mt.now()),dd(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return F.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:$n(s.createTime)}}(n)),F.resolve()}getNamedQuery(t,n){return F.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,function(s){return{name:s.name,query:hN(s.bundledQuery),readTime:$n(s.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(){this.overlays=new Vt(G.comparator),this.qr=new Map}getOverlay(t,n){return F.resolve(this.overlays.get(n))}getOverlays(t,n){const i=qs();return F.forEach(n,s=>this.getOverlay(t,s).next(r=>{r!==null&&i.set(s,r)})).next(()=>i)}saveOverlays(t,n,i){return i.forEach((s,r)=>{this.St(t,n,r)}),F.resolve()}removeOverlaysForBatchId(t,n,i){const s=this.qr.get(i);return s!==void 0&&(s.forEach(r=>this.overlays=this.overlays.remove(r)),this.qr.delete(i)),F.resolve()}getOverlaysForCollection(t,n,i){const s=qs(),r=n.length+1,o=new G(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===r&&l.largestBatchId>i&&s.set(l.getKey(),l)}return F.resolve(s)}getOverlaysForCollectionGroup(t,n,i,s){let r=new Vt((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>i){let h=r.get(c.largestBatchId);h===null&&(h=qs(),r=r.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=qs(),l=r.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=s)););return F.resolve(a)}St(t,n,i){const s=this.overlays.get(i.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(i.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new UV(n,i));let r=this.qr.get(n);r===void 0&&(r=lt(),this.qr.set(n,r)),this.qr.set(n,r.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(){this.sessionToken=de.EMPTY_BYTE_STRING}getSessionToken(t){return F.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy{constructor(){this.Qr=new te(ne.$r),this.Ur=new te(ne.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const i=new ne(t,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(t,n){t.forEach(i=>this.addReference(i,n))}removeReference(t,n){this.Gr(new ne(t,n))}zr(t,n){t.forEach(i=>this.removeReference(i,n))}jr(t){const n=new G(new xt([])),i=new ne(n,t),s=new ne(n,t+1),r=[];return this.Ur.forEachInRange([i,s],o=>{this.Gr(o),r.push(o.key)}),r}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new G(new xt([])),i=new ne(n,t),s=new ne(n,t+1);let r=lt();return this.Ur.forEachInRange([i,s],o=>{r=r.add(o.key)}),r}containsKey(t){const n=new ne(t,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&t.isEqual(i.key)}}class ne{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return G.comparator(t.key,n.key)||at(t.Yr,n.Yr)}static Kr(t,n){return at(t.Yr,n.Yr)||G.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new te(ne.$r)}checkEmpty(t){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,i,s){const r=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new BV(r,n,i,s);this.mutationQueue.push(o);for(const a of s)this.Zr=this.Zr.add(new ne(a.key,r)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return F.resolve(o)}lookupMutationBatch(t,n){return F.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const i=n+1,s=this.ei(i),r=s<0?0:s;return F.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?ly:this.tr-1)}getAllMutationBatches(t){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const i=new ne(n,0),s=new ne(n,Number.POSITIVE_INFINITY),r=[];return this.Zr.forEachInRange([i,s],o=>{const a=this.Xr(o.Yr);r.push(a)}),F.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,n){let i=new te(at);return n.forEach(s=>{const r=new ne(s,0),o=new ne(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([r,o],a=>{i=i.add(a.Yr)})}),F.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(t,n){const i=n.path,s=i.length+1;let r=i;G.isDocumentKey(r)||(r=r.child(""));const o=new ne(new G(r),0);let a=new te(at);return this.Zr.forEachWhile(l=>{const c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.Yr)),!0)},o),F.resolve(this.ti(a))}ti(t){const n=[];return t.forEach(i=>{const s=this.Xr(i);s!==null&&n.push(s)}),n}removeMutationBatch(t,n){gt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return F.forEach(n.mutations,s=>{const r=new ne(s.key,n.batchId);return i=i.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)}).next(()=>{this.Zr=i})}ir(t){}containsKey(t,n){const i=new ne(n,0),s=this.Zr.firstAfterOrEqual(i);return F.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,F.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(t){this.ri=t,this.docs=function(){return new Vt(G.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const i=n.key,s=this.docs.get(i),r=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:o}),this.size+=o-r,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const i=this.docs.get(n);return F.resolve(i?i.document.mutableCopy():we.newInvalidDocument(n))}getEntries(t,n){let i=mi();return n.forEach(s=>{const r=this.docs.get(s);i=i.insert(s,r?r.document.mutableCopy():we.newInvalidDocument(s))}),F.resolve(i)}getDocumentsMatchingQuery(t,n,i,s){let r=mi();const o=n.path,a=new G(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||eV(tV(h),i)<=0||(s.has(h.key)||dd(n,h))&&(r=r.insert(h.key,h.mutableCopy()))}return F.resolve(r)}getAllFromCollectionGroup(t,n,i,s){Q(9500)}ii(t,n){return F.forEach(this.docs,i=>n(i))}newChangeBuffer(t){return new bN(this)}getSize(t){return F.resolve(this.size)}}class bN extends vN{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(t,s)):this.Nr.removeEntry(i)}),F.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(t){this.persistence=t,this.si=new mr(n=>hy(n),dy),this.lastRemoteSnapshotVersion=Z.min(),this.highestTargetId=0,this.oi=0,this._i=new yy,this.targetCount=0,this.ai=To.ur()}forEachTarget(t,n){return this.si.forEach((i,s)=>n(s)),F.resolve()}getLastRemoteSnapshotVersion(t){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return F.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(t,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),F.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new To(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,F.resolve()}updateTargetData(t,n){return this.Pr(n),F.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(t,n,i){let s=0;const r=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.si.delete(o),r.push(this.removeMatchingKeysForTargetId(t,a.targetId)),s++)}),F.waitFor(r).next(()=>s)}getTargetCount(t){return F.resolve(this.targetCount)}getTargetData(t,n){const i=this.si.get(n)||null;return F.resolve(i)}addMatchingKeys(t,n,i){return this._i.Wr(n,i),F.resolve()}removeMatchingKeys(t,n,i){this._i.zr(n,i);const s=this.persistence.referenceDelegate,r=[];return s&&n.forEach(o=>{r.push(s.markPotentiallyOrphaned(t,o))}),F.waitFor(r)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),F.resolve()}getMatchingKeysForTargetId(t,n){const i=this._i.Hr(n);return F.resolve(i)}containsKey(t,n){return F.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(t,n){this.ui={},this.overlays={},this.ci=new ld(0),this.li=!1,this.li=!0,this.hi=new SN,this.referenceDelegate=t(this),this.Pi=new kN(this),this.indexManager=new dN,this.remoteDocumentCache=function(s){return new AN(s)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new uN(n),this.Ii=new xN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new EN,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let i=this.ui[t.toKey()];return i||(i=new IN(n,this.referenceDelegate),this.ui[t.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,i){W("MemoryPersistence","Starting transaction:",t);const s=new PN(this.ci.next());return this.referenceDelegate.Ei(),i(s).next(r=>this.referenceDelegate.di(s).next(()=>r)).toPromise().then(r=>(s.raiseOnCommittedEvent(),r))}Ai(t,n){return F.or(Object.values(this.ui).map(i=>()=>i.containsKey(t,n)))}}class PN extends iV{constructor(t){super(),this.currentSequenceNumber=t}}class _y{constructor(t){this.persistence=t,this.Ri=new yy,this.Vi=null}static mi(t){return new _y(t)}get fi(){if(this.Vi)return this.Vi;throw Q(60996)}addReference(t,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),F.resolve()}removeReference(t,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),F.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),F.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,n.targetId).next(s=>{s.forEach(r=>this.fi.add(r.toString()))}).next(()=>i.removeTargetData(t,n))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.fi,i=>{const s=G.fromPath(i);return this.gi(t,s).next(r=>{r||n.removeEntry(s,Z.min())})}).next(()=>(this.Vi=null,n.apply(t)))}updateLimboDocument(t,n){return this.gi(t,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(t){return 0}gi(t,n){return F.or([()=>F.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class _h{constructor(t,n){this.persistence=t,this.pi=new mr(i=>oV(i.path),(i,s)=>i.isEqual(s)),this.garbageCollector=_N(this,n)}static mi(t,n){return new _h(t,n)}Ei(){}di(t){return F.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(i=>n.next(s=>i+s))}wr(t){let n=0;return this.pr(t,i=>{n++}).next(()=>n)}pr(t,n){return F.forEach(this.pi,(i,s)=>this.br(t,i,s).next(r=>r?F.resolve():n(s)))}removeTargets(t,n,i){return this.persistence.getTargetCache().removeTargets(t,n,i)}removeOrphanedDocuments(t,n){let i=0;const s=this.persistence.getRemoteDocumentCache(),r=s.newChangeBuffer();return s.ii(t,o=>this.br(t,o,n).next(a=>{a||(i++,r.removeEntry(o,Z.min()))})).next(()=>r.apply(t)).next(()=>i)}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),F.resolve()}removeTarget(t,n){const i=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,n,i){return this.pi.set(i,t.currentSequenceNumber),F.resolve()}removeReference(t,n,i){return this.pi.set(i,t.currentSequenceNumber),F.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),F.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=Tu(t.data.value)),n}br(t,n,i){return F.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const s=this.pi.get(n);return F.resolve(s!==void 0&&s>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(t,n,i,s){this.targetId=t,this.fromCache=n,this.Es=i,this.ds=s}static As(t,n){let i=lt(),s=lt();for(const r of n.docChanges)switch(r.type){case 0:i=i.add(r.doc.key);break;case 1:s=s.add(r.doc.key)}return new vy(t,n.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return xD()?8:sV(Ie())>0?6:4}()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,i,s){const r={result:null};return this.ys(t,n).next(o=>{r.result=o}).next(()=>{if(!r.result)return this.ws(t,n,s,i).next(o=>{r.result=o})}).next(()=>{if(r.result)return;const o=new CN;return this.Ss(t,n,o).next(a=>{if(r.result=a,this.Vs)return this.bs(t,n,o,a.size)})}).next(()=>r.result)}bs(t,n,i,s){return i.documentReadCount<this.fs?(Sr()<=ot.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",Ir(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),F.resolve()):(Sr()<=ot.DEBUG&&W("QueryEngine","Query:",Ir(n),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.gs*s?(Sr()<=ot.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",Ir(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,zn(n))):F.resolve())}ys(t,n){if(bw(n))return F.resolve(null);let i=zn(n);return this.indexManager.getIndexType(t,i).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=wm(n,null,"F"),i=zn(n)),this.indexManager.getDocumentsMatchingTarget(t,i).next(r=>{const o=lt(...r);return this.ps.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,i).next(l=>{const c=this.Ds(n,a);return this.Cs(n,c,o,l.readTime)?this.ys(t,wm(n,null,"F")):this.vs(t,c,n,l)}))})))}ws(t,n,i,s){return bw(n)||s.isEqual(Z.min())?F.resolve(null):this.ps.getDocuments(t,i).next(r=>{const o=this.Ds(n,r);return this.Cs(n,o,i,s)?F.resolve(null):(Sr()<=ot.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ir(n)),this.vs(t,o,n,ZM(s,xl)).next(a=>a))})}Ds(t,n){let i=new te(ZI(t));return n.forEach((s,r)=>{dd(t,r)&&(i=i.add(r))}),i}Cs(t,n,i,s){if(t.limit===null)return!1;if(i.size!==n.size)return!0;const r=t.limitType==="F"?n.last():n.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(s)>0)}Ss(t,n,i){return Sr()<=ot.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",Ir(n)),this.ps.getDocumentsMatchingQuery(t,n,ds.min(),i)}vs(t,n,i,s){return this.ps.getDocumentsMatchingQuery(t,i,s).next(r=>(n.forEach(o=>{r=r.insert(o.key,o)}),r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wy="LocalStore",DN=3e8;class MN{constructor(t,n,i,s){this.persistence=t,this.Fs=n,this.serializer=s,this.Ms=new Vt(at),this.xs=new mr(r=>hy(r),dy),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(i)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new TN(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.Ms))}}function VN(e,t,n,i){return new MN(e,t,n,i)}async function xA(e,t){const n=tt(e);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let s;return n.mutationQueue.getAllMutationBatches(i).next(r=>(s=r,n.Bs(t),n.mutationQueue.getAllMutationBatches(i))).next(r=>{const o=[],a=[];let l=lt();for(const c of s){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of r){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(i,l).next(c=>({Ls:c,removedBatchIds:o,addedBatchIds:a}))})})}function NN(e,t){const n=tt(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=t.batch.keys(),r=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const d=c.batch,f=d.keys();let m=F.resolve();return f.forEach(v=>{m=m.next(()=>h.getEntry(l,v)).next(x=>{const E=c.docVersions.get(v);gt(E!==null,48541),x.version.compareTo(E)<0&&(d.applyToRemoteDocument(x,c),x.isValidDocument()&&(x.setReadTime(c.commitVersion),h.addEntry(x)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,i,t,r).next(()=>r.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,s,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let l=lt();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(t))).next(()=>n.localDocuments.getDocuments(i,s))})}function EA(e){const t=tt(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Pi.getLastRemoteSnapshotVersion(n))}function ON(e,t){const n=tt(e),i=t.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const a=[];t.targetChanges.forEach((h,d)=>{const f=s.get(d);if(!f)return;a.push(n.Pi.removeMatchingKeys(r,h.removedDocuments,d).next(()=>n.Pi.addMatchingKeys(r,h.addedDocuments,d)));let m=f.withSequenceNumber(r.currentSequenceNumber);t.targetMismatches.get(d)!==null?m=m.withResumeToken(de.EMPTY_BYTE_STRING,Z.min()).withLastLimboFreeSnapshotVersion(Z.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,i)),s=s.insert(d,m),function(x,E,y){return x.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=DN?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(f,m,h)&&a.push(n.Pi.updateTargetData(r,m))});let l=mi(),c=lt();if(t.documentUpdates.forEach(h=>{t.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(r,h))}),a.push(LN(r,o,t.documentUpdates).next(h=>{l=h.ks,c=h.qs})),!i.isEqual(Z.min())){const h=n.Pi.getLastRemoteSnapshotVersion(r).next(d=>n.Pi.setTargetsMetadata(r,r.currentSequenceNumber,i));a.push(h)}return F.waitFor(a).next(()=>o.apply(r)).next(()=>n.localDocuments.getLocalViewOfDocuments(r,l,c)).next(()=>l)}).then(r=>(n.Ms=s,r))}function LN(e,t,n){let i=lt(),s=lt();return n.forEach(r=>i=i.add(r)),t.getEntries(e,i).next(r=>{let o=mi();return n.forEach((a,l)=>{const c=r.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(Z.min())?(t.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(t.addEntry(l),o=o.insert(a,l)):W(wy,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{ks:o,qs:s}})}function FN(e,t){const n=tt(e);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=ly),n.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function jN(e,t){const n=tt(e);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return n.Pi.getTargetData(i,t).next(r=>r?(s=r,F.resolve(s)):n.Pi.allocateTargetId(i).next(o=>(s=new $i(t,o,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=n.Ms.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(t,i.targetId)),i})}async function Im(e,t,n){const i=tt(e),s=i.Ms.get(t),r=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",r,o=>i.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!No(o))throw o;W(wy,`Failed to update sequence numbers for target ${t}: ${o}`)}i.Ms=i.Ms.remove(t),i.xs.delete(s.target)}function Bw(e,t,n){const i=tt(e);let s=Z.min(),r=lt();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const d=tt(l),f=d.xs.get(h);return f!==void 0?F.resolve(d.Ms.get(f)):d.Pi.getTargetData(c,h)}(i,o,zn(t)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{r=l})}).next(()=>i.Fs.getDocumentsMatchingQuery(o,t,n?s:Z.min(),n?r:lt())).next(a=>(BN(i,IV(t),a),{documents:a,Qs:r})))}function BN(e,t,n){let i=e.Os.get(t)||Z.min();n.forEach((s,r)=>{r.readTime.compareTo(i)>0&&(i=r.readTime)}),e.Os.set(t,i)}class Uw{constructor(){this.activeTargetIds=RV()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class UN{constructor(){this.Mo=new Uw,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,i){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,i){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new Uw,Promise.resolve()}handleUserChange(t,n,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zw="ConnectivityMonitor";class $w{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){W(zw,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){W(zw,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uc=null;function Am(){return Uc===null?Uc=function(){return 268435456+Math.round(2147483648*Math.random())}():Uc++,"0x"+Uc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nf="RestConnection",$N={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class HN{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${i}/databases/${s}`,this.Wo=this.databaseId.database===dh?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Go(t,n,i,s,r){const o=Am(),a=this.zo(t,n.toUriEncodedString());W(Nf,`Sending RPC '${t}' ${o}:`,a,i);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,s,r);const{host:c}=new URL(a),h=Ro(c);return this.Jo(t,a,l,i,h).then(d=>(W(Nf,`Received RPC '${t}' ${o}: `,d),d),d=>{throw yo(Nf,`RPC '${t}' ${o} failed with error: `,d,"url: ",a,"request:",i),d})}Ho(t,n,i,s,r,o){return this.Go(t,n,i,s,r)}jo(t,n,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Mo}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,r)=>t[r]=s),i&&i.headers.forEach((s,r)=>t[r]=s)}zo(t,n){const i=$N[t];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ge="WebChannelConnection";class qN extends HN{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,i,s,r){const o=Am();return new Promise((a,l)=>{const c=new II;c.setWithCredentials(!0),c.listenOnce(AI.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case wu.NO_ERROR:const d=c.getResponseJson();W(ge,`XHR for RPC '${t}' ${o} received:`,JSON.stringify(d)),a(d);break;case wu.TIMEOUT:W(ge,`RPC '${t}' ${o} timed out`),l(new $(L.DEADLINE_EXCEEDED,"Request time out"));break;case wu.HTTP_ERROR:const f=c.getStatus();if(W(ge,`RPC '${t}' ${o} failed with status:`,f,"response text:",c.getResponseText()),f>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);const v=m==null?void 0:m.error;if(v&&v.status&&v.message){const x=function(y){const w=y.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(w)>=0?w:L.UNKNOWN}(v.status);l(new $(x,v.message))}else l(new $(L.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new $(L.UNAVAILABLE,"Connection failed."));break;default:Q(9055,{l_:t,streamId:o,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{W(ge,`RPC '${t}' ${o} completed.`)}});const h=JSON.stringify(s);W(ge,`RPC '${t}' ${o} sending request:`,s),c.send(n,"POST",h,i,15)})}T_(t,n,i){const s=Am(),r=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=PI(),a=kI(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,i),l.encodeInitMessageHeaders=!0;const h=r.join("");W(ge,`Creating RPC '${t}' stream ${s}: ${h}`,l);const d=o.createWebChannel(h,l);this.I_(d);let f=!1,m=!1;const v=new WN({Yo:E=>{m?W(ge,`Not sending because RPC '${t}' stream ${s} is closed:`,E):(f||(W(ge,`Opening RPC '${t}' stream ${s} transport.`),d.open(),f=!0),W(ge,`RPC '${t}' stream ${s} sending:`,E),d.send(E))},Zo:()=>d.close()}),x=(E,y,w)=>{E.listen(y,S=>{try{w(S)}catch(D){setTimeout(()=>{throw D},0)}})};return x(d,Ia.EventType.OPEN,()=>{m||(W(ge,`RPC '${t}' stream ${s} transport opened.`),v.o_())}),x(d,Ia.EventType.CLOSE,()=>{m||(m=!0,W(ge,`RPC '${t}' stream ${s} transport closed`),v.a_(),this.E_(d))}),x(d,Ia.EventType.ERROR,E=>{m||(m=!0,yo(ge,`RPC '${t}' stream ${s} transport errored. Name:`,E.name,"Message:",E.message),v.a_(new $(L.UNAVAILABLE,"The operation could not be completed")))}),x(d,Ia.EventType.MESSAGE,E=>{var y;if(!m){const w=E.data[0];gt(!!w,16349);const S=w,D=(S==null?void 0:S.error)||((y=S[0])==null?void 0:y.error);if(D){W(ge,`RPC '${t}' stream ${s} received error:`,D);const M=D.status;let V=function(A){const b=Ht[A];if(b!==void 0)return uA(b)}(M),T=D.message;V===void 0&&(V=L.INTERNAL,T="Unknown error status: "+M+" with message "+D.message),m=!0,v.a_(new $(V,T)),d.close()}else W(ge,`RPC '${t}' stream ${s} received:`,w),v.u_(w)}}),x(a,bI.STAT_EVENT,E=>{E.stat===fm.PROXY?W(ge,`RPC '${t}' stream ${s} detected buffering proxy`):E.stat===fm.NOPROXY&&W(ge,`RPC '${t}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{v.__()},0),v}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(n=>n===t)}}function Of(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yd(e){return new YV(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(t,n,i=1e3,s=1.5,r=6e4){this.Mi=t,this.timerId=n,this.d_=i,this.A_=s,this.R_=r,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-i);s>0&&W("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hw="PersistentStream";class IA{constructor(t,n,i,s,r,o,a,l){this.Mi=t,this.S_=i,this.b_=s,this.connection=r,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new SA(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===L.RESOURCE_EXHAUSTED?(pi(n.toString()),pi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.D_===n&&this.G_(i,s)},i=>{t(()=>{const s=new $(L.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(s)})})}G_(t,n){const i=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{i(()=>this.z_(s))}),this.stream.onMessage(s=>{i(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return W(Hw,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget(()=>this.D_===t?n():(W(Hw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class KN extends IA{constructor(t,n,i,s,r,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s,o),this.serializer=r}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=ZV(this.serializer,t),i=function(r){if(!("targetChange"in r))return Z.min();const o=r.targetChange;return o.targetIds&&o.targetIds.length?Z.min():o.readTime?$n(o.readTime):Z.min()}(t);return this.listener.H_(n,i)}Y_(t){const n={};n.database=Sm(this.serializer),n.addTarget=function(r,o){let a;const l=o.target;if(a=_m(l)?{documents:nN(r,l)}:{query:iN(r,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=fA(r,o.resumeToken);const c=Tm(r,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Z.min())>0){a.readTime=yh(r,o.snapshotVersion.toTimestamp());const c=Tm(r,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,t);const i=rN(this.serializer,t);i&&(n.labels=i),this.q_(n)}Z_(t){const n={};n.database=Sm(this.serializer),n.removeTarget=t,this.q_(n)}}class GN extends IA{constructor(t,n,i,s,r,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,s,o),this.serializer=r}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return gt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,gt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){gt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=eN(t.writeResults,t.commitTime),i=$n(t.commitTime);return this.listener.na(i,n)}ra(){const t={};t.database=Sm(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map(i=>tN(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{}class YN extends QN{constructor(t,n,i,s){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=i,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new $(L.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,o])=>this.connection.Go(t,xm(n,i),s,r,o)).catch(r=>{throw r.name==="FirebaseError"?(r.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new $(L.UNKNOWN,r.toString())})}Ho(t,n,i,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(t,xm(n,i),s,o,a,r)).catch(o=>{throw o.name==="FirebaseError"?(o.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new $(L.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class XN{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(pi(n),this.aa=!1):W("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ur="RemoteStore";class JN{constructor(t,n,i,s,r){this.localStore=t,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=r,this.Aa.Oo(o=>{i.enqueueAndForget(async()=>{gr(this)&&(W(ur,"Restarting streams for network reachability change."),await async function(l){const c=tt(l);c.Ea.add(4),await Xl(c),c.Ra.set("Unknown"),c.Ea.delete(4),await _d(c)}(this))})}),this.Ra=new XN(i,s)}}async function _d(e){if(gr(e))for(const t of e.da)await t(!0)}async function Xl(e){for(const t of e.da)await t(!1)}function AA(e,t){const n=tt(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),Sy(n)?Ey(n):Lo(n).O_()&&xy(n,t))}function Ty(e,t){const n=tt(e),i=Lo(n);n.Ia.delete(t),i.O_()&&bA(n,t),n.Ia.size===0&&(i.O_()?i.L_():gr(n)&&n.Ra.set("Unknown"))}function xy(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Z.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Lo(e).Y_(t)}function bA(e,t){e.Va.Ue(t),Lo(e).Z_(t)}function Ey(e){e.Va=new qV({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),Lo(e).start(),e.Ra.ua()}function Sy(e){return gr(e)&&!Lo(e).x_()&&e.Ia.size>0}function gr(e){return tt(e).Ea.size===0}function kA(e){e.Va=void 0}async function ZN(e){e.Ra.set("Online")}async function tO(e){e.Ia.forEach((t,n)=>{xy(e,t)})}async function eO(e,t){kA(e),Sy(e)?(e.Ra.ha(t),Ey(e)):e.Ra.set("Unknown")}async function nO(e,t,n){if(e.Ra.set("Online"),t instanceof dA&&t.state===2&&t.cause)try{await async function(s,r){const o=r.cause;for(const a of r.targetIds)s.Ia.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Ia.delete(a),s.Va.removeTarget(a))}(e,t)}catch(i){W(ur,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await vh(e,i)}else if(t instanceof Su?e.Va.Ze(t):t instanceof hA?e.Va.st(t):e.Va.tt(t),!n.isEqual(Z.min()))try{const i=await EA(e.localStore);n.compareTo(i)>=0&&await function(r,o){const a=r.Va.Tt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=r.Ia.get(c);h&&r.Ia.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=r.Ia.get(l);if(!h)return;r.Ia.set(l,h.withResumeToken(de.EMPTY_BYTE_STRING,h.snapshotVersion)),bA(r,l);const d=new $i(h.target,l,c,h.sequenceNumber);xy(r,d)}),r.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(i){W(ur,"Failed to raise snapshot:",i),await vh(e,i)}}async function vh(e,t,n){if(!No(t))throw t;e.Ea.add(1),await Xl(e),e.Ra.set("Offline"),n||(n=()=>EA(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{W(ur,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await _d(e)})}function PA(e,t){return t().catch(n=>vh(e,n,t))}async function vd(e){const t=tt(e),n=gs(t);let i=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:ly;for(;iO(t);)try{const s=await FN(t.localStore,i);if(s===null){t.Ta.length===0&&n.L_();break}i=s.batchId,sO(t,s)}catch(s){await vh(t,s)}CA(t)&&RA(t)}function iO(e){return gr(e)&&e.Ta.length<10}function sO(e,t){e.Ta.push(t);const n=gs(e);n.O_()&&n.X_&&n.ea(t.mutations)}function CA(e){return gr(e)&&!gs(e).x_()&&e.Ta.length>0}function RA(e){gs(e).start()}async function rO(e){gs(e).ra()}async function oO(e){const t=gs(e);for(const n of e.Ta)t.ea(n.mutations)}async function aO(e,t,n){const i=e.Ta.shift(),s=py.from(i,t,n);await PA(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await vd(e)}async function lO(e,t){t&&gs(e).X_&&await async function(i,s){if(function(o){return $V(o)&&o!==L.ABORTED}(s.code)){const r=i.Ta.shift();gs(i).B_(),await PA(i,()=>i.remoteSyncer.rejectFailedWrite(r.batchId,s)),await vd(i)}}(e,t),CA(e)&&RA(e)}async function Ww(e,t){const n=tt(e);n.asyncQueue.verifyOperationInProgress(),W(ur,"RemoteStore received new credentials");const i=gr(n);n.Ea.add(3),await Xl(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await _d(n)}async function cO(e,t){const n=tt(e);t?(n.Ea.delete(2),await _d(n)):t||(n.Ea.add(2),await Xl(n),n.Ra.set("Unknown"))}function Lo(e){return e.ma||(e.ma=function(n,i,s){const r=tt(n);return r.sa(),new KN(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(e.datastore,e.asyncQueue,{Xo:ZN.bind(null,e),t_:tO.bind(null,e),r_:eO.bind(null,e),H_:nO.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),Sy(e)?Ey(e):e.Ra.set("Unknown")):(await e.ma.stop(),kA(e))})),e.ma}function gs(e){return e.fa||(e.fa=function(n,i,s){const r=tt(n);return r.sa(),new GN(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:rO.bind(null,e),r_:lO.bind(null,e),ta:oO.bind(null,e),na:aO.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await vd(e)):(await e.fa.stop(),e.Ta.length>0&&(W(ur,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(t,n,i,s,r){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=r,this.deferred=new rs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,i,s,r){const o=Date.now()+i,a=new Iy(t,n,o,s,r);return a.start(i),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $(L.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ay(e,t){if(pi("AsyncQueue",`${t}: ${e}`),No(e))return new $(L.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{static emptySet(t){return new Zr(t.comparator)}constructor(t){this.comparator=t?(n,i)=>t(n,i)||G.comparator(n.key,i.key):(n,i)=>G.comparator(n.key,i.key),this.keyedMap=Aa(),this.sortedSet=new Vt(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,i)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Zr)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,r=i.getNext().key;if(!s.isEqual(r))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const i=new Zr;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(){this.ga=new Vt(G.comparator)}track(t){const n=t.doc.key,i=this.ga.get(n);i?t.type!==0&&i.type===3?this.ga=this.ga.insert(n,t):t.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.ga=this.ga.remove(n):t.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):Q(63341,{Rt:t,pa:i}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal((n,i)=>{t.push(i)}),t}}class xo{constructor(t,n,i,s,r,o,a,l,c){this.query=t,this.docs=n,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=r,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(t,n,i,s,r){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new xo(t,n,Zr.emptySet(n),o,i,s,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&hd(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,i=t.docChanges;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==i[s].type||!n[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class hO{constructor(){this.queries=Kw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const s=tt(n),r=s.queries;s.queries=Kw(),r.forEach((o,a)=>{for(const l of a.Sa)l.onError(i)})})(this,new $(L.ABORTED,"Firestore shutting down"))}}function Kw(){return new mr(e=>JI(e),hd)}async function dO(e,t){const n=tt(e);let i=3;const s=t.query;let r=n.queries.get(s);r?!r.ba()&&t.Da()&&(i=2):(r=new uO,i=t.Da()?0:1);try{switch(i){case 0:r.wa=await n.onListen(s,!0);break;case 1:r.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=Ay(o,`Initialization of query '${Ir(t.query)}' failed`);return void t.onError(a)}n.queries.set(s,r),r.Sa.push(t),t.va(n.onlineState),r.wa&&t.Fa(r.wa)&&by(n)}async function fO(e,t){const n=tt(e),i=t.query;let s=3;const r=n.queries.get(i);if(r){const o=r.Sa.indexOf(t);o>=0&&(r.Sa.splice(o,1),r.Sa.length===0?s=t.Da()?0:1:!r.ba()&&t.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function pO(e,t){const n=tt(e);let i=!1;for(const s of t){const r=s.query,o=n.queries.get(r);if(o){for(const a of o.Sa)a.Fa(s)&&(i=!0);o.wa=s}}i&&by(n)}function mO(e,t,n){const i=tt(e),s=i.queries.get(t);if(s)for(const r of s.Sa)r.onError(n);i.queries.delete(t)}function by(e){e.Ca.forEach(t=>{t.next()})}var bm,Gw;(Gw=bm||(bm={})).Ma="default",Gw.Cache="cache";class gO{constructor(t,n,i){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(t){if(!this.options.includeMetadataChanges){const i=[];for(const s of t.docChanges)s.type!==3&&i.push(s);t=new xo(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=xo.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==bm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(t){this.key=t}}class MA{constructor(t){this.key=t}}class yO{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=lt(),this.mutatedKeys=lt(),this.eu=ZI(t),this.tu=new Zr(this.eu)}get nu(){return this.Ya}ru(t,n){const i=n?n.iu:new qw,s=n?n.tu:this.tu;let r=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal((h,d)=>{const f=s.get(h),m=dd(this.query,d)?d:null,v=!!f&&this.mutatedKeys.has(f.key),x=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let E=!1;f&&m?f.data.isEqual(m.data)?v!==x&&(i.track({type:3,doc:m}),E=!0):this.su(f,m)||(i.track({type:2,doc:m}),E=!0,(l&&this.eu(m,l)>0||c&&this.eu(m,c)<0)&&(a=!0)):!f&&m?(i.track({type:0,doc:m}),E=!0):f&&!m&&(i.track({type:1,doc:f}),E=!0,(l||c)&&(a=!0)),E&&(m?(o=o.add(m),r=x?r.add(h):r.delete(h)):(o=o.delete(h),r=r.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),r=r.delete(h.key),i.track({type:1,doc:h})}return{tu:o,iu:i,Cs:a,mutatedKeys:r}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,i,s){const r=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const o=t.iu.ya();o.sort((h,d)=>function(m,v){const x=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Q(20277,{Rt:E})}};return x(m)-x(v)}(h.type,d.type)||this.eu(h.doc,d.doc)),this.ou(i),s=s??!1;const a=n&&!s?this._u():[],l=this.Xa.size===0&&this.current&&!s?1:0,c=l!==this.Za;return this.Za=l,o.length!==0||c?{snapshot:new xo(this.query,t.tu,r,o,t.mutatedKeys,l===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new qw,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=lt(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return t.forEach(i=>{this.Xa.has(i)||n.push(new MA(i))}),this.Xa.forEach(i=>{t.has(i)||n.push(new DA(i))}),n}cu(t){this.Ya=t.Qs,this.Xa=lt();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return xo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ky="SyncEngine";class _O{constructor(t,n,i){this.query=t,this.targetId=n,this.view=i}}class vO{constructor(t){this.key=t,this.hu=!1}}class wO{constructor(t,n,i,s,r,o){this.localStore=t,this.remoteStore=n,this.eventManager=i,this.sharedClientState=s,this.currentUser=r,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new mr(a=>JI(a),hd),this.Iu=new Map,this.Eu=new Set,this.du=new Vt(G.comparator),this.Au=new Map,this.Ru=new yy,this.Vu={},this.mu=new Map,this.fu=To.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function TO(e,t,n=!0){const i=jA(e);let s;const r=i.Tu.get(t);return r?(i.sharedClientState.addLocalQueryTarget(r.targetId),s=r.view.lu()):s=await VA(i,t,n,!0),s}async function xO(e,t){const n=jA(e);await VA(n,t,!0,!1)}async function VA(e,t,n,i){const s=await jN(e.localStore,zn(t)),r=s.targetId,o=e.sharedClientState.addLocalQueryTarget(r,n);let a;return i&&(a=await EO(e,t,r,o==="current",s.resumeToken)),e.isPrimaryClient&&n&&AA(e.remoteStore,s),a}async function EO(e,t,n,i,s){e.pu=(d,f,m)=>async function(x,E,y,w){let S=E.view.ru(y);S.Cs&&(S=await Bw(x.localStore,E.query,!1).then(({documents:T})=>E.view.ru(T,S)));const D=w&&w.targetChanges.get(E.targetId),M=w&&w.targetMismatches.get(E.targetId)!=null,V=E.view.applyChanges(S,x.isPrimaryClient,D,M);return Yw(x,E.targetId,V.au),V.snapshot}(e,d,f,m);const r=await Bw(e.localStore,t,!0),o=new yO(t,r.Qs),a=o.ru(r.documents),l=Yl.createSynthesizedTargetChangeForCurrentChange(n,i&&e.onlineState!=="Offline",s),c=o.applyChanges(a,e.isPrimaryClient,l);Yw(e,n,c.au);const h=new _O(t,n,o);return e.Tu.set(t,h),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),c.snapshot}async function SO(e,t,n){const i=tt(e),s=i.Tu.get(t),r=i.Iu.get(s.targetId);if(r.length>1)return i.Iu.set(s.targetId,r.filter(o=>!hd(o,t))),void i.Tu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await Im(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),n&&Ty(i.remoteStore,s.targetId),km(i,s.targetId)}).catch(Vo)):(km(i,s.targetId),await Im(i.localStore,s.targetId,!0))}async function IO(e,t){const n=tt(e),i=n.Tu.get(t),s=n.Iu.get(i.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Ty(n.remoteStore,i.targetId))}async function AO(e,t,n){const i=MO(e);try{const s=await function(o,a){const l=tt(o),c=mt.now(),h=a.reduce((m,v)=>m.add(v.key),lt());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let v=mi(),x=lt();return l.Ns.getEntries(m,h).next(E=>{v=E,v.forEach((y,w)=>{w.isValidDocument()||(x=x.add(y))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,v)).next(E=>{d=E;const y=[];for(const w of a){const S=FV(w,d.get(w.key).overlayedDocument);S!=null&&y.push(new Is(w.key,S,$I(S.value.mapValue),hn.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,y,a)}).next(E=>{f=E;const y=E.applyToLocalDocumentSet(d,x);return l.documentOverlayCache.saveOverlays(m,E.batchId,y)})}).then(()=>({batchId:f.batchId,changes:eA(d)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Vu[o.currentUser.toKey()];c||(c=new Vt(at)),c=c.insert(a,l),o.Vu[o.currentUser.toKey()]=c}(i,s.batchId,n),await Jl(i,s.changes),await vd(i.remoteStore)}catch(s){const r=Ay(s,"Failed to persist write");n.reject(r)}}async function NA(e,t){const n=tt(e);try{const i=await ON(n.localStore,t);t.targetChanges.forEach((s,r)=>{const o=n.Au.get(r);o&&(gt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?gt(o.hu,14607):s.removedDocuments.size>0&&(gt(o.hu,42227),o.hu=!1))}),await Jl(n,i,t)}catch(i){await Vo(i)}}function Qw(e,t,n){const i=tt(e);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const s=[];i.Tu.forEach((r,o)=>{const a=o.view.va(t);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=tt(o);l.onlineState=a;let c=!1;l.queries.forEach((h,d)=>{for(const f of d.Sa)f.va(a)&&(c=!0)}),c&&by(l)}(i.eventManager,t),s.length&&i.Pu.H_(s),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function bO(e,t,n){const i=tt(e);i.sharedClientState.updateQueryState(t,"rejected",n);const s=i.Au.get(t),r=s&&s.key;if(r){let o=new Vt(G.comparator);o=o.insert(r,we.newNoDocument(r,Z.min()));const a=lt().add(r),l=new gd(Z.min(),new Map,new Vt(at),o,a);await NA(i,l),i.du=i.du.remove(r),i.Au.delete(t),Py(i)}else await Im(i.localStore,t,!1).then(()=>km(i,t,n)).catch(Vo)}async function kO(e,t){const n=tt(e),i=t.batch.batchId;try{const s=await NN(n.localStore,t);LA(n,i,null),OA(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Jl(n,s)}catch(s){await Vo(s)}}async function PO(e,t,n){const i=tt(e);try{const s=await function(o,a){const l=tt(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(gt(d!==null,37113),h=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(i.localStore,t);LA(i,t,n),OA(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),await Jl(i,s)}catch(s){await Vo(s)}}function OA(e,t){(e.mu.get(t)||[]).forEach(n=>{n.resolve()}),e.mu.delete(t)}function LA(e,t,n){const i=tt(e);let s=i.Vu[i.currentUser.toKey()];if(s){const r=s.get(t);r&&(n?r.reject(n):r.resolve(),s=s.remove(t)),i.Vu[i.currentUser.toKey()]=s}}function km(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const i of e.Iu.get(t))e.Tu.delete(i),n&&e.Pu.yu(i,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(i=>{e.Ru.containsKey(i)||FA(e,i)})}function FA(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);n!==null&&(Ty(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),Py(e))}function Yw(e,t,n){for(const i of n)i instanceof DA?(e.Ru.addReference(i.key,t),CO(e,i)):i instanceof MA?(W(ky,"Document no longer in limbo: "+i.key),e.Ru.removeReference(i.key,t),e.Ru.containsKey(i.key)||FA(e,i.key)):Q(19791,{wu:i})}function CO(e,t){const n=t.key,i=n.path.canonicalString();e.du.get(n)||e.Eu.has(i)||(W(ky,"New document in limbo: "+n),e.Eu.add(i),Py(e))}function Py(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new G(xt.fromString(t)),i=e.fu.next();e.Au.set(i,new vO(n)),e.du=e.du.insert(n,i),AA(e.remoteStore,new $i(zn(YI(n.path)),i,"TargetPurposeLimboResolution",ld.ce))}}async function Jl(e,t,n){const i=tt(e),s=[],r=[],o=[];i.Tu.isEmpty()||(i.Tu.forEach((a,l)=>{o.push(i.pu(l,t,n).then(c=>{var h;if((c||n)&&i.isPrimaryClient){const d=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:h.current;i.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){s.push(c);const d=vy.As(l.targetId,c);r.push(d)}}))}),await Promise.all(o),i.Pu.H_(s),await async function(l,c){const h=tt(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>F.forEach(c,f=>F.forEach(f.Es,m=>h.persistence.referenceDelegate.addReference(d,f.targetId,m)).next(()=>F.forEach(f.ds,m=>h.persistence.referenceDelegate.removeReference(d,f.targetId,m)))))}catch(d){if(!No(d))throw d;W(wy,"Failed to update sequence numbers: "+d)}for(const d of c){const f=d.targetId;if(!d.fromCache){const m=h.Ms.get(f),v=m.snapshotVersion,x=m.withLastLimboFreeSnapshotVersion(v);h.Ms=h.Ms.insert(f,x)}}}(i.localStore,r))}async function RO(e,t){const n=tt(e);if(!n.currentUser.isEqual(t)){W(ky,"User change. New user:",t.toKey());const i=await xA(n.localStore,t);n.currentUser=t,function(r,o){r.mu.forEach(a=>{a.forEach(l=>{l.reject(new $(L.CANCELLED,o))})}),r.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await Jl(n,i.Ls)}}function DO(e,t){const n=tt(e),i=n.Au.get(t);if(i&&i.hu)return lt().add(i.key);{let s=lt();const r=n.Iu.get(t);if(!r)return s;for(const o of r){const a=n.Tu.get(o);s=s.unionWith(a.view.nu)}return s}}function jA(e){const t=tt(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=NA.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=DO.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=bO.bind(null,t),t.Pu.H_=pO.bind(null,t.eventManager),t.Pu.yu=mO.bind(null,t.eventManager),t}function MO(e){const t=tt(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=kO.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=PO.bind(null,t),t}class wh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=yd(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return VN(this.persistence,new RN,t.initialUser,this.serializer)}Cu(t){return new TA(_y.mi,this.serializer)}Du(t){return new UN}async terminate(){var t,n;(t=this.gcScheduler)==null||t.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}wh.provider={build:()=>new wh};class VO extends wh{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){gt(this.persistence.referenceDelegate instanceof _h,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new gN(i,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?Ne.withCacheSize(this.cacheSizeBytes):Ne.DEFAULT;return new TA(i=>_h.mi(i,n),this.serializer)}}class Pm{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Qw(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=RO.bind(null,this.syncEngine),await cO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new hO}()}createDatastore(t){const n=yd(t.databaseInfo.databaseId),i=function(r){return new qN(r)}(t.databaseInfo);return function(r,o,a,l){return new YN(r,o,a,l)}(t.authCredentials,t.appCheckCredentials,i,n)}createRemoteStore(t){return function(i,s,r,o,a){return new JN(i,s,r,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>Qw(this.syncEngine,n,0),function(){return $w.v()?new $w:new zN}())}createSyncEngine(t,n){return function(s,r,o,a,l,c,h){const d=new wO(s,r,o,a,l,c);return h&&(d.gu=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(s){const r=tt(s);W(ur,"RemoteStore shutting down."),r.Ea.add(5),await Xl(r),r.Aa.shutdown(),r.Ra.set("Unknown")}(this.remoteStore),(t=this.datastore)==null||t.terminate(),(n=this.eventManager)==null||n.terminate()}}Pm.provider={build:()=>new Pm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NO{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):pi("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys="FirestoreClient";class OO{constructor(t,n,i,s,r){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=s,this.user=_e.UNAUTHENTICATED,this.clientId=ay.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(i,async o=>{W(ys,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(i,o=>(W(ys,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new rs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const i=Ay(n,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function Lf(e,t){e.asyncQueue.verifyOperationInProgress(),W(ys,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener(async s=>{i.isEqual(s)||(await xA(t.localStore,s),i=s)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Xw(e,t){e.asyncQueue.verifyOperationInProgress();const n=await LO(e);W(ys,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(i=>Ww(t.remoteStore,i)),e.setAppCheckTokenChangeListener((i,s)=>Ww(t.remoteStore,s)),e._onlineComponents=t}async function LO(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){W(ys,"Using user provided OfflineComponentProvider");try{await Lf(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(s){return s.name==="FirebaseError"?s.code===L.FAILED_PRECONDITION||s.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;yo("Error using user provided cache. Falling back to memory cache: "+n),await Lf(e,new wh)}}else W(ys,"Using default OfflineComponentProvider"),await Lf(e,new VO(void 0));return e._offlineComponents}async function BA(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(W(ys,"Using user provided OnlineComponentProvider"),await Xw(e,e._uninitializedComponentsProvider._online)):(W(ys,"Using default OnlineComponentProvider"),await Xw(e,new Pm))),e._onlineComponents}function FO(e){return BA(e).then(t=>t.syncEngine)}async function jO(e){const t=await BA(e),n=t.eventManager;return n.onListen=TO.bind(null,t.syncEngine),n.onUnlisten=SO.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=xO.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=IO.bind(null,t.syncEngine),n}function BO(e,t,n={}){const i=new rs;return e.asyncQueue.enqueueAndForget(async()=>function(r,o,a,l,c){const h=new NO({next:f=>{h.Nu(),o.enqueueAndForget(()=>fO(r,d)),f.fromCache&&l.source==="server"?c.reject(new $(L.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new gO(a,h,{includeMetadataChanges:!0,qa:!0});return dO(r,d)}(await jO(e),e.asyncQueue,t,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UA(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jw=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA="firestore.googleapis.com",Zw=!0;class tT{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new $(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=zA,this.ssl=Zw}else this.host=t.host,this.ssl=t.ssl??Zw;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=wA;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<pN)throw new $(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}JM("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=UA(t.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new $(L.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new $(L.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new $(L.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class wd{constructor(t,n,i,s){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new tT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new $(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new $(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new tT(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new zM;switch(i.type){case"firstParty":return new qM(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new $(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=Jw.get(n);i&&(W("ComponentProvider","Removing Datastore"),Jw.delete(n),i.terminate())}(this),Promise.resolve()}}function UO(e,t,n,i={}){var c;e=Tl(e,wd);const s=Ro(t),r=e._getSettings(),o={...r,emulatorOptions:e._getEmulatorOptions()},a=`${t}:${n}`;s&&(gI(`https://${a}`),yI("Firestore",!0)),r.host!==zA&&r.host!==a&&yo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...r,host:a,ssl:s,emulatorOptions:i};if(!ar(l,o)&&(e._setSettings(l),i.mockUserToken)){let h,d;if(typeof i.mockUserToken=="string")h=i.mockUserToken,d=_e.MOCK_USER;else{h=fD(i.mockUserToken,(c=e._app)==null?void 0:c.options.projectId);const f=i.mockUserToken.sub||i.mockUserToken.user_id;if(!f)throw new $(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new _e(f)}e._authCredentials=new $M(new RI(h,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(t,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new yr(this.firestore,t,this._query)}}class se{constructor(t,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new os(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new se(this.firestore,t,this._key)}toJSON(){return{type:se._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,i){if(Gl(n,se._jsonSchema))return new se(t,i||null,new G(xt.fromString(n.referencePath)))}}se._jsonSchemaVersion="firestore/documentReference/1.0",se._jsonSchema={type:Gt("string",se._jsonSchemaVersion),referencePath:Gt("string")};class os extends yr{constructor(t,n,i){super(t,n,YI(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new se(this.firestore,null,new G(t))}withConverter(t){return new os(this.firestore,t,this._path)}}function Ff(e,t,...n){if(e=Ae(e),DI("collection","path",t),e instanceof wd){const i=xt.fromString(t,...n);return fw(i),new os(e,null,i)}{if(!(e instanceof se||e instanceof os))throw new $(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(xt.fromString(t,...n));return fw(i),new os(e.firestore,null,i)}}function zc(e,t,...n){if(e=Ae(e),arguments.length===1&&(t=ay.newId()),DI("doc","path",t),e instanceof wd){const i=xt.fromString(t,...n);return dw(i),new se(e,null,new G(i))}{if(!(e instanceof se||e instanceof os))throw new $(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(xt.fromString(t,...n));return dw(i),new se(e.firestore,e instanceof os?e.converter:null,new G(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eT="AsyncQueue";class nT{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new SA(this,"async_queue_retry"),this._c=()=>{const i=Of();i&&W(eT,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=t;const n=Of();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=Of();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const n=new rs;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!No(t))throw t;W(eT,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const n=this.ac.then(()=>(this.rc=!0,t().catch(i=>{throw this.nc=i,this.rc=!1,pi("INTERNAL UNHANDLED ERROR: ",iT(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(t,n,i){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const s=Iy.createAndSchedule(this,t,n,i,r=>this.hc(r));return this.tc.push(s),s}uc(){this.nc&&Q(47125,{Pc:iT(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function iT(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}class Td extends wd{constructor(t,n,i,s){super(t,n,i,s),this.type="firestore",this._queue=new nT,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new nT(t),this._firestoreClient=void 0,await t}}}function zO(e,t){const n=typeof e=="object"?e:TI(),i=typeof e=="string"?e:dh,s=ry(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const r=hD("firestore");r&&UO(s,...r)}return s}function Cy(e){if(e._terminated)throw new $(L.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||$O(e),e._firestoreClient}function $O(e){var i,s,r;const t=e._freezeSettings(),n=function(a,l,c,h){return new cV(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,UA(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(e._databaseId,((i=e._app)==null?void 0:i.options.appId)||"",e._persistenceKey,t);e._componentsProvider||(s=t.localCache)!=null&&s._offlineComponentProvider&&((r=t.localCache)!=null&&r._onlineComponentProvider)&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new OO(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(t){this._byteString=t}static fromBase64String(t){try{return new on(de.fromBase64String(t))}catch(n){throw new $(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new on(de.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:on._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Gl(t,on._jsonSchema))return on.fromBase64String(t.bytes)}}on._jsonSchemaVersion="firestore/bytes/1.0",on._jsonSchema={type:Gt("string",on._jsonSchemaVersion),bytes:Gt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new $(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ce(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new $(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new $(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return at(this._lat,t._lat)||at(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Hn._jsonSchemaVersion}}static fromJSON(t){if(Gl(t,Hn._jsonSchema))return new Hn(t.latitude,t.longitude)}}Hn._jsonSchemaVersion="firestore/geoPoint/1.0",Hn._jsonSchema={type:Gt("string",Hn._jsonSchemaVersion),latitude:Gt("number"),longitude:Gt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,s){if(i.length!==s.length)return!1;for(let r=0;r<i.length;++r)if(i[r]!==s[r])return!1;return!0}(this._values,t._values)}toJSON(){return{type:Wn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Gl(t,Wn._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(n=>typeof n=="number"))return new Wn(t.vectorValues);throw new $(L.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Wn._jsonSchemaVersion="firestore/vectorValue/1.0",Wn._jsonSchema={type:Gt("string",Wn._jsonSchemaVersion),vectorValues:Gt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HO=/^__.*__$/;class WO{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return this.fieldMask!==null?new Is(t,this.data,this.fieldMask,n,this.fieldTransforms):new Ql(t,this.data,n,this.fieldTransforms)}}class $A{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return new Is(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function HA(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Q(40011,{Ac:e})}}class Dy{constructor(t,n,i,s,r,o){this.settings=t,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=s,r===void 0&&this.Rc(),this.fieldTransforms=r||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new Dy({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var s;const n=(s=this.path)==null?void 0:s.child(t),i=this.Vc({path:n,fc:!1});return i.gc(t),i}yc(t){var s;const n=(s=this.path)==null?void 0:s.child(t),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return Th(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(HA(this.Ac)&&HO.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class qO{constructor(t,n,i){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=i||yd(t)}Cc(t,n,i,s=!1){return new Dy({Ac:t,methodName:n,Dc:i,path:ce.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function WA(e){const t=e._freezeSettings(),n=yd(e._databaseId);return new qO(e._databaseId,!!t.ignoreUndefinedProperties,n)}function KO(e,t,n,i,s,r={}){const o=e.Cc(r.merge||r.mergeFields?2:0,t,n,s);My("Data must be an object, but it was:",o,i);const a=qA(i,o);let l,c;if(r.merge)l=new Qe(o.fieldMask),c=o.fieldTransforms;else if(r.mergeFields){const h=[];for(const d of r.mergeFields){const f=Cm(t,d,n);if(!o.contains(f))throw new $(L.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);GA(h,f)||h.push(f)}l=new Qe(h),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new WO(new Le(a),l,c)}class Ed extends Ry{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Ed}}function GO(e,t,n,i){const s=e.Cc(1,t,n);My("Data must be an object, but it was:",s,i);const r=[],o=Le.empty();Ss(i,(l,c)=>{const h=Vy(t,l,n);c=Ae(c);const d=s.yc(h);if(c instanceof Ed)r.push(h);else{const f=Zl(c,d);f!=null&&(r.push(h),o.set(h,f))}});const a=new Qe(r);return new $A(o,a,s.fieldTransforms)}function QO(e,t,n,i,s,r){const o=e.Cc(1,t,n),a=[Cm(t,i,n)],l=[s];if(r.length%2!=0)throw new $(L.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<r.length;f+=2)a.push(Cm(t,r[f])),l.push(r[f+1]);const c=[],h=Le.empty();for(let f=a.length-1;f>=0;--f)if(!GA(c,a[f])){const m=a[f];let v=l[f];v=Ae(v);const x=o.yc(m);if(v instanceof Ed)c.push(m);else{const E=Zl(v,x);E!=null&&(c.push(m),h.set(m,E))}}const d=new Qe(c);return new $A(h,d,o.fieldTransforms)}function YO(e,t,n,i=!1){return Zl(n,e.Cc(i?4:3,t))}function Zl(e,t){if(KA(e=Ae(e)))return My("Unsupported field value:",t,e),qA(e,t);if(e instanceof Ry)return function(i,s){if(!HA(s.Ac))throw s.Sc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${i._methodName}() is not currently supported inside arrays`);const r=i._toFieldTransform(s);r&&s.fieldTransforms.push(r)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(i,s){const r=[];let o=0;for(const a of i){let l=Zl(a,s.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),r.push(l),o++}return{arrayValue:{values:r}}}(e,t)}return function(i,s){if((i=Ae(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return DV(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const r=mt.fromDate(i);return{timestampValue:yh(s.serializer,r)}}if(i instanceof mt){const r=new mt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:yh(s.serializer,r)}}if(i instanceof Hn)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof on)return{bytesValue:fA(s.serializer,i._byteString)};if(i instanceof se){const r=s.databaseId,o=i.firestore._databaseId;if(!o.isEqual(r))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:gy(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof Wn)return function(o,a){return{mapValue:{fields:{[UI]:{stringValue:zI},[fh]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Sc("VectorValues must only contain numeric values.");return fy(a.serializer,c)})}}}}}}(i,s);throw s.Sc(`Unsupported field value: ${ad(i)}`)}(e,t)}function qA(e,t){const n={};return NI(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ss(e,(i,s)=>{const r=Zl(s,t.mc(i));r!=null&&(n[i]=r)}),{mapValue:{fields:n}}}function KA(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof mt||e instanceof Hn||e instanceof on||e instanceof se||e instanceof Ry||e instanceof Wn)}function My(e,t,n){if(!KA(n)||!MI(n)){const i=ad(n);throw i==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+i)}}function Cm(e,t,n){if((t=Ae(t))instanceof xd)return t._internalPath;if(typeof t=="string")return Vy(e,t);throw Th("Field path arguments must be of type string or ",e,!1,void 0,n)}const XO=new RegExp("[~\\*/\\[\\]]");function Vy(e,t,n){if(t.search(XO)>=0)throw Th(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new xd(...t.split("."))._internalPath}catch{throw Th(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Th(e,t,n,i,s){const r=i&&!i.isEmpty(),o=s!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(r||o)&&(l+=" (found",r&&(l+=` in field ${i}`),o&&(l+=` in document ${s}`),l+=")"),new $(L.INVALID_ARGUMENT,a+e+l)}function GA(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(t,n,i,s,r){this._firestore=t,this._userDataWriter=n,this._key=i,this._document=s,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new se(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new JO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(Ny("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class JO extends QA{data(){return super.data()}}function Ny(e,t){return typeof t=="string"?Vy(e,t):t instanceof xd?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZO(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new $(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Oy{}class YA extends Oy{}function tL(e,t,...n){let i=[];t instanceof Oy&&i.push(t),i=i.concat(n),function(r){const o=r.filter(l=>l instanceof Fy).length,a=r.filter(l=>l instanceof Ly).length;if(o>1||o>0&&a>0)throw new $(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const s of i)e=s._apply(e);return e}class Ly extends YA{constructor(t,n,i){super(),this._field=t,this._op=n,this._value=i,this.type="where"}static _create(t,n,i){return new Ly(t,n,i)}_apply(t){const n=this._parse(t);return XA(t._query,n),new yr(t.firestore,t.converter,vm(t._query,n))}_parse(t){const n=WA(t.firestore);return function(r,o,a,l,c,h,d){let f;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new $(L.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){rT(d,h);const v=[];for(const x of d)v.push(sT(l,r,x));f={arrayValue:{values:v}}}else f=sT(l,r,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||rT(d,h),f=YO(a,o,d,h==="in"||h==="not-in");return Kt.create(c,h,f)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}class Fy extends Oy{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new Fy(t,n)}_parse(t){const n=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:kn.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(s,r){let o=s;const a=r.getFlattenedFilters();for(const l of a)XA(o,l),o=vm(o,l)}(t._query,n),new yr(t.firestore,t.converter,vm(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class jy extends YA{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new jy(t,n)}_apply(t){const n=function(s,r,o){if(s.startAt!==null)throw new $(L.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new $(L.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Al(r,o)}(t._query,this._field,this._direction);return new yr(t.firestore,t.converter,function(s,r){const o=s.explicitOrderBy.concat([r]);return new Oo(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(t._query,n))}}function eL(e,t="asc"){const n=t,i=Ny("orderBy",e);return jy._create(i,n)}function sT(e,t,n){if(typeof(n=Ae(n))=="string"){if(n==="")throw new $(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!XI(t)&&n.indexOf("/")!==-1)throw new $(L.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=t.path.child(xt.fromString(n));if(!G.isDocumentKey(i))throw new $(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Tw(e,new G(i))}if(n instanceof se)return Tw(e,n._key);throw new $(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ad(n)}.`)}function rT(e,t){if(!Array.isArray(e)||e.length===0)throw new $(L.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function XA(e,t){const n=function(s,r){for(const o of s)for(const a of o.getFlattenedFilters())if(r.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new $(L.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new $(L.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class nL{convertValue(t,n="none"){switch(ms(t)){case 0:return null;case 1:return t.booleanValue;case 2:return jt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(ps(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw Q(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const i={};return Ss(t,(s,r)=>{i[s]=this.convertValue(r,n)}),i}convertVectorValue(t){var i,s,r;const n=(r=(s=(i=t.fields)==null?void 0:i[fh].arrayValue)==null?void 0:s.values)==null?void 0:r.map(o=>jt(o.doubleValue));return new Wn(n)}convertGeoPoint(t){return new Hn(jt(t.latitude),jt(t.longitude))}convertArray(t,n){return(t.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(t,n){switch(n){case"previous":const i=ud(t);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(El(t));default:return null}}convertTimestamp(t){const n=fs(t);return new mt(n.seconds,n.nanos)}convertDocumentKey(t,n){const i=xt.fromString(t);gt(vA(i),9688,{name:t});const s=new Sl(i.get(1),i.get(3)),r=new G(i.popFirst(5));return s.isEqual(n)||pi(`Document ${r} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iL(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}class $c{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class to extends QA{constructor(t,n,i,s,r,o){super(t,n,i,s,o),this._firestore=t,this._firestoreImpl=t,this.metadata=r}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new Iu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const i=this._document.data.field(Ny("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new $(L.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=to._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}to._jsonSchemaVersion="firestore/documentSnapshot/1.0",to._jsonSchema={type:Gt("string",to._jsonSchemaVersion),bundleSource:Gt("string","DocumentSnapshot"),bundleName:Gt("string"),bundle:Gt("string")};class Iu extends to{data(t={}){return super.data(t)}}class eo{constructor(t,n,i,s){this._firestore=t,this._userDataWriter=n,this._snapshot=s,this.metadata=new $c(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(i=>{t.call(n,new Iu(this._firestore,this._userDataWriter,i.key,i,new $c(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new $(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,r){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new Iu(s._firestore,s._userDataWriter,a.doc.key,a.doc,new $c(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>r||a.type!==3).map(a=>{const l=new Iu(s._firestore,s._userDataWriter,a.doc.key,a.doc,new $c(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:sL(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new $(L.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=eo._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=ay.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],s=[];return this.docs.forEach(r=>{r._document!==null&&(n.push(r._document),i.push(this._userDataWriter.convertObjectMap(r._document.data.value.mapValue.fields,"previous")),s.push(r.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function sL(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Q(61501,{type:e})}}eo._jsonSchemaVersion="firestore/querySnapshot/1.0",eo._jsonSchema={type:Gt("string",eo._jsonSchemaVersion),bundleSource:Gt("string","QuerySnapshot"),bundleName:Gt("string"),bundle:Gt("string")};class rL extends nL{constructor(t){super(),this.firestore=t}convertBytes(t){return new on(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new se(this.firestore,null,n)}}function oL(e){e=Tl(e,yr);const t=Tl(e.firestore,Td),n=Cy(t),i=new rL(t);return ZO(e._query),BO(n,e._query).then(s=>new eo(t,i,e,s))}function aL(e){return JA(Tl(e.firestore,Td),[new md(e._key,hn.none())])}function JA(e,t){return function(i,s){const r=new rs;return i.asyncQueue.enqueueAndForget(async()=>AO(await FO(i),s,r)),r.promise}(Cy(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lL{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=WA(t)}set(t,n,i){this._verifyNotCommitted();const s=jf(t,this._firestore),r=iL(s.converter,n,i),o=KO(this._dataReader,"WriteBatch.set",s._key,r,s.converter!==null,i);return this._mutations.push(o.toMutation(s._key,hn.none())),this}update(t,n,i,...s){this._verifyNotCommitted();const r=jf(t,this._firestore);let o;return o=typeof(n=Ae(n))=="string"||n instanceof xd?QO(this._dataReader,"WriteBatch.update",r._key,n,i,s):GO(this._dataReader,"WriteBatch.update",r._key,n),this._mutations.push(o.toMutation(r._key,hn.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=jf(t,this._firestore);return this._mutations=this._mutations.concat(new md(n._key,hn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new $(L.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function jf(e,t){if((e=Ae(e)).firestore!==t)throw new $(L.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oT(e){return Cy(e=Tl(e,Td)),new lL(e,t=>JA(e,t))}(function(t,n=!0){(function(s){Mo=s})(Do),go(new lr("firestore",(i,{instanceIdentifier:s,options:r})=>{const o=i.getProvider("app").getImmediate(),a=new Td(new HM(i.getProvider("auth-internal")),new KM(o,i.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new $(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Sl(c.options.projectId,h)}(o,s),o);return r={useFetchStreams:n,...r},a._setSettings(r),a},"PUBLIC").setMultipleInstances(!0)),is(lw,cw,t),is(lw,cw,"esm2020")})();function ZA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const cL=ZA,tb=new ql("auth","Firebase",ZA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xh=new iy("@firebase/auth");function uL(e,...t){xh.logLevel<=ot.WARN&&xh.warn(`Auth (${Do}): ${e}`,...t)}function Au(e,...t){xh.logLevel<=ot.ERROR&&xh.error(`Auth (${Do}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gi(e,...t){throw By(e,...t)}function qn(e,...t){return By(e,...t)}function eb(e,t,n){const i={...cL(),[t]:n};return new ql("auth","Firebase",i).create(t,{appName:e.name})}function Js(e){return eb(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function By(e,...t){if(typeof e!="string"){const n=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(n,...i)}return tb.create(e,...t)}function J(e,t,...n){if(!e)throw By(t,...n)}function ri(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Au(t),new Error(t)}function yi(e,t){e||ri(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rm(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.href)||""}function hL(){return aT()==="http:"||aT()==="https:"}function aT(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(hL()||vD()||"connection"in navigator)?navigator.onLine:!0}function fL(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(t,n){this.shortDelay=t,this.longDelay=n,yi(n>t,"Short delay should be less than long delay!"),this.isMobile=gD()||wD()}get(){return dL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uy(e,t){yi(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{static initialize(t,n,i){this.fetchImpl=t,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ri("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ri("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ri("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mL=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],gL=new tc(3e4,6e4);function zy(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function Fo(e,t,n,i,s={}){return ib(e,s,async()=>{let r={},o={};i&&(t==="GET"?o=i:r={body:JSON.stringify(i)});const a=Kl({key:e.config.apiKey,...o}).slice(1),l=await e._getAdditionalHeaders();l["Content-Type"]="application/json",e.languageCode&&(l["X-Firebase-Locale"]=e.languageCode);const c={method:t,headers:l,...r};return _D()||(c.referrerPolicy="no-referrer"),e.emulatorConfig&&Ro(e.emulatorConfig.host)&&(c.credentials="include"),nb.fetch()(await sb(e,e.config.apiHost,n,a),c)})}async function ib(e,t,n){e._canInitEmulator=!1;const i={...pL,...t};try{const s=new _L(e),r=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await r.json();if("needConfirmation"in o)throw Hc(e,"account-exists-with-different-credential",o);if(r.ok&&!("errorMessage"in o))return o;{const a=r.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Hc(e,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Hc(e,"email-already-in-use",o);if(l==="USER_DISABLED")throw Hc(e,"user-disabled",o);const h=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw eb(e,h,c);gi(e,h)}}catch(s){if(s instanceof Ti)throw s;gi(e,"network-request-failed",{message:String(s)})}}async function yL(e,t,n,i,s={}){const r=await Fo(e,t,n,i,s);return"mfaPendingCredential"in r&&gi(e,"multi-factor-auth-required",{_serverResponse:r}),r}async function sb(e,t,n,i){const s=`${t}${n}?${i}`,r=e,o=r.config.emulator?Uy(e.config,s):`${e.config.apiScheme}://${s}`;return mL.includes(n)&&(await r._persistenceManagerAvailable,r._getPersistenceType()==="COOKIE")?r._getPersistence()._getFinalTarget(o).toString():o}class _L{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(qn(this.auth,"network-request-failed")),gL.get())})}}function Hc(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=qn(e,t,i);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vL(e,t){return Fo(e,"POST","/v1/accounts:delete",t)}async function Eh(e,t){return Fo(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qa(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function wL(e,t=!1){const n=Ae(e),i=await n.getIdToken(t),s=$y(i);J(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const r=typeof s.firebase=="object"?s.firebase:void 0,o=r==null?void 0:r.sign_in_provider;return{claims:s,token:i,authTime:qa(Bf(s.auth_time)),issuedAtTime:qa(Bf(s.iat)),expirationTime:qa(Bf(s.exp)),signInProvider:o||null,signInSecondFactor:(r==null?void 0:r.sign_in_second_factor)||null}}function Bf(e){return Number(e)*1e3}function $y(e){const[t,n,i]=e.split(".");if(t===void 0||n===void 0||i===void 0)return Au("JWT malformed, contained fewer than 3 sections"),null;try{const s=dI(n);return s?JSON.parse(s):(Au("Failed to decode base64 JWT payload"),null)}catch(s){return Au("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function lT(e){const t=$y(e);return J(t,"internal-error"),J(typeof t.exp<"u","internal-error"),J(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pl(e,t,n=!1){if(n)return t;try{return await t}catch(i){throw i instanceof Ti&&TL(i)&&e.auth.currentUser===e&&await e.auth.signOut(),i}}function TL({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xL{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=qa(this.lastLoginAt),this.creationTime=qa(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sh(e){var d;const t=e.auth,n=await e.getIdToken(),i=await Pl(e,Eh(t,{idToken:n}));J(i==null?void 0:i.users.length,t,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const r=(d=s.providerUserInfo)!=null&&d.length?rb(s.providerUserInfo):[],o=SL(e.providerData,r),a=e.isAnonymous,l=!(e.email&&s.passwordHash)&&!(o!=null&&o.length),c=a?l:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Dm(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(e,h)}async function EL(e){const t=Ae(e);await Sh(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function SL(e,t){return[...e.filter(i=>!t.some(s=>s.providerId===i.providerId)),...t]}function rb(e){return e.map(({providerId:t,...n})=>({providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IL(e,t){const n=await ib(e,{},async()=>{const i=Kl({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:s,apiKey:r}=e.config,o=await sb(e,s,"/v1/token",`key=${r}`),a=await e._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:i};return e.emulatorConfig&&Ro(e.emulatorConfig.host)&&(l.credentials="include"),nb.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function AL(e,t){return Fo(e,"POST","/v2/accounts:revokeToken",zy(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){J(t.idToken,"internal-error"),J(typeof t.idToken<"u","internal-error"),J(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):lT(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){J(t.length!==0,"internal-error");const n=lT(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(J(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:i,refreshToken:s,expiresIn:r}=await IL(t,n);this.updateTokensAndExpiration(i,s,Number(r))}updateTokensAndExpiration(t,n,i){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,n){const{refreshToken:i,accessToken:s,expirationTime:r}=n,o=new no;return i&&(J(typeof i=="string","internal-error",{appName:t}),o.refreshToken=i),s&&(J(typeof s=="string","internal-error",{appName:t}),o.accessToken=s),r&&(J(typeof r=="number","internal-error",{appName:t}),o.expirationTime=r),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new no,this.toJSON())}_performRefresh(){return ri("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ci(e,t){J(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class xn{constructor({uid:t,auth:n,stsTokenManager:i,...s}){this.providerId="firebase",this.proactiveRefresh=new xL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Dm(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await Pl(this,this.stsTokenManager.getToken(this.auth,t));return J(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return wL(this,t)}reload(){return EL(this)}_assign(t){this!==t&&(J(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>({...n})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new xn({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(t){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),n&&await Sh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(jn(this.auth.app))return Promise.reject(Js(this.auth));const t=await this.getIdToken();return await Pl(this,vL(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){const i=n.displayName??void 0,s=n.email??void 0,r=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,c=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:d,emailVerified:f,isAnonymous:m,providerData:v,stsTokenManager:x}=n;J(d&&x,t,"internal-error");const E=no.fromJSON(this.name,x);J(typeof d=="string",t,"internal-error"),Ci(i,t.name),Ci(s,t.name),J(typeof f=="boolean",t,"internal-error"),J(typeof m=="boolean",t,"internal-error"),Ci(r,t.name),Ci(o,t.name),Ci(a,t.name),Ci(l,t.name),Ci(c,t.name),Ci(h,t.name);const y=new xn({uid:d,auth:t,email:s,emailVerified:f,displayName:i,isAnonymous:m,photoURL:o,phoneNumber:r,tenantId:a,stsTokenManager:E,createdAt:c,lastLoginAt:h});return v&&Array.isArray(v)&&(y.providerData=v.map(w=>({...w}))),l&&(y._redirectEventId=l),y}static async _fromIdTokenResponse(t,n,i=!1){const s=new no;s.updateFromServerResponse(n);const r=new xn({uid:n.localId,auth:t,stsTokenManager:s,isAnonymous:i});return await Sh(r),r}static async _fromGetAccountInfoResponse(t,n,i){const s=n.users[0];J(s.localId!==void 0,"internal-error");const r=s.providerUserInfo!==void 0?rb(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(r!=null&&r.length),a=new no;a.updateFromIdToken(i);const l=new xn({uid:s.localId,auth:t,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:r,metadata:new Dm(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(r!=null&&r.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cT=new Map;function oi(e){yi(e instanceof Function,"Expected a class definition");let t=cT.get(e);return t?(yi(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,cT.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}ob.type="NONE";const uT=ob;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bu(e,t,n){return`firebase:${e}:${t}:${n}`}class io{constructor(t,n,i){this.persistence=t,this.auth=n,this.userKey=i;const{config:s,name:r}=this.auth;this.fullUserKey=bu(this.userKey,s.apiKey,r),this.fullPersistenceKey=bu("persistence",s.apiKey,r),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await Eh(this.auth,{idToken:t}).catch(()=>{});return n?xn._fromGetAccountInfoResponse(this.auth,n,t):null}return xn._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,i="authUser"){if(!n.length)return new io(oi(uT),t,i);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let r=s[0]||oi(uT);const o=bu(i,t.config.apiKey,t.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){let d;if(typeof h=="string"){const f=await Eh(t,{idToken:h}).catch(()=>{});if(!f)break;d=await xn._fromGetAccountInfoResponse(t,f,h)}else d=xn._fromJSON(t,h);c!==r&&(a=d),r=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!r._shouldAllowMigration||!l.length?new io(r,t,i):(r=l[0],a&&await r._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==r)try{await c._remove(o)}catch{}})),new io(r,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hT(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(ub(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(ab(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(db(t))return"Blackberry";if(fb(t))return"Webos";if(lb(t))return"Safari";if((t.includes("chrome/")||cb(t))&&!t.includes("edge/"))return"Chrome";if(hb(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=e.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function ab(e=Ie()){return/firefox\//i.test(e)}function lb(e=Ie()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function cb(e=Ie()){return/crios\//i.test(e)}function ub(e=Ie()){return/iemobile/i.test(e)}function hb(e=Ie()){return/android/i.test(e)}function db(e=Ie()){return/blackberry/i.test(e)}function fb(e=Ie()){return/webos/i.test(e)}function Hy(e=Ie()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function bL(e=Ie()){var t;return Hy(e)&&!!((t=window.navigator)!=null&&t.standalone)}function kL(){return TD()&&document.documentMode===10}function pb(e=Ie()){return Hy(e)||hb(e)||fb(e)||db(e)||/windows phone/i.test(e)||ub(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mb(e,t=[]){let n;switch(e){case"Browser":n=hT(Ie());break;case"Worker":n=`${hT(Ie())}-${e}`;break;default:n=e}const i=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Do}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PL{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const i=r=>new Promise((o,a)=>{try{const l=t(r);o(l)}catch(l){a(l)}});i.onAbort=n,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const i of this.queue)await i(t),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CL(e,t={}){return Fo(e,"GET","/v2/passwordPolicy",zy(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RL=6;class DL{constructor(t){var i;const n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??RL,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=t.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=t.length>=i),s&&(n.meetsMaxPasswordLength=t.length<=s)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let s=0;s<t.length;s++)i=t.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,n,i,s,r){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ML{constructor(t,n,i,s){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new dT(this),this.idTokenSubscription=new dT(this),this.beforeStateQueue=new PL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=tb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(r=>this._resolvePersistenceManagerAvailable=r)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=oi(n)),this._initializationPromise=this.queue(async()=>{var i,s,r;if(!this._deleted&&(this.persistenceManager=await io.create(this,t),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)==null?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await Eh(this,{idToken:t}),i=await xn._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var r;if(jn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(r=this.redirectUser)==null?void 0:r._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(t);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return J(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await Sh(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=fL()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(jn(this.app))return Promise.reject(Js(this));const n=t?Ae(t):null;return n&&J(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&J(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return jn(this.app)?Promise.reject(Js(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return jn(this.app)?Promise.reject(Js(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(oi(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await CL(this),n=new DL(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new ql("auth","Firebase",t())}onAuthStateChanged(t,n,i){return this.registerStateListener(this.authStateSubscription,t,n,i)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,i){return this.registerStateListener(this.idTokenSubscription,t,n,i)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await AL(this,i)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,n){const i=await this.getOrInitRedirectPersistenceManager(n);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&oi(t)||this._popupRedirectResolver;J(n,this,"argument-error"),this.redirectPersistenceManager=await io.create(this,[oi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===t?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,i,s){if(this._deleted)return()=>{};const r=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(J(a,this,"internal-error"),a.then(()=>{o||r(this.currentUser)}),typeof n=="function"){const l=t.addObserver(n,i,s);return()=>{o=!0,l()}}else{const l=t.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=mb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var n;if(jn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return t!=null&&t.error&&uL(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Wy(e){return Ae(e)}class dT{constructor(t){this.auth=t,this.observer=null,this.addObserver=PD(n=>this.observer=n)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qy={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function VL(e){qy=e}function NL(e){return qy.loadJS(e)}function OL(){return qy.gapiScript}function LL(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FL(e,t){const n=ry(e,"auth");if(n.isInitialized()){const s=n.getImmediate(),r=n.getOptions();if(ar(r,t??{}))return s;gi(s,"already-initialized")}return n.initialize({options:t})}function jL(e,t){const n=(t==null?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(oi);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,t==null?void 0:t.popupRedirectResolver)}function BL(e,t,n){const i=Wy(e);J(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const s=!1,r=gb(t),{host:o,port:a}=UL(t),l=a===null?"":`:${a}`,c={url:`${r}//${o}${l}/`},h=Object.freeze({host:o,port:a,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){J(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),J(ar(c,i.config.emulator)&&ar(h,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=c,i.emulatorConfig=h,i.settings.appVerificationDisabledForTesting=!0,Ro(o)?(gI(`${r}//${o}${l}`),yI("Auth",!0)):zL()}function gb(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function UL(e){const t=gb(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const r=s[1];return{host:r,port:fT(i.substr(r.length+1))}}else{const[r,o]=i.split(":");return{host:r,port:fT(o)}}}function fT(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function zL(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return ri("not implemented")}_getIdTokenResponse(t){return ri("not implemented")}_linkToIdToken(t,n){return ri("not implemented")}_getReauthenticationResolver(t){return ri("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function so(e,t){return yL(e,"POST","/v1/accounts:signInWithIdp",zy(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $L="http://localhost";class hr extends yb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new hr(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):gi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:s,...r}=n;if(!i||!s)return null;const o=new hr(i,s);return o.idToken=r.idToken||void 0,o.accessToken=r.accessToken||void 0,o.secret=r.secret,o.nonce=r.nonce,o.pendingToken=r.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return so(t,n)}_linkToIdToken(t,n){const i=this.buildRequest();return i.idToken=n,so(t,i)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,so(t,n)}buildRequest(){const t={requestUri:$L,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Kl(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec extends _b{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li extends ec{constructor(){super("facebook.com")}static credential(t){return hr._fromParams({providerId:Li.PROVIDER_ID,signInMethod:Li.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Li.credentialFromTaggedObject(t)}static credentialFromError(t){return Li.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Li.credential(t.oauthAccessToken)}catch{return null}}}Li.FACEBOOK_SIGN_IN_METHOD="facebook.com";Li.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi extends ec{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return hr._fromParams({providerId:Fi.PROVIDER_ID,signInMethod:Fi.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Fi.credentialFromTaggedObject(t)}static credentialFromError(t){return Fi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:i}=t;if(!n&&!i)return null;try{return Fi.credential(n,i)}catch{return null}}}Fi.GOOGLE_SIGN_IN_METHOD="google.com";Fi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji extends ec{constructor(){super("github.com")}static credential(t){return hr._fromParams({providerId:ji.PROVIDER_ID,signInMethod:ji.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return ji.credentialFromTaggedObject(t)}static credentialFromError(t){return ji.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return ji.credential(t.oauthAccessToken)}catch{return null}}}ji.GITHUB_SIGN_IN_METHOD="github.com";ji.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi extends ec{constructor(){super("twitter.com")}static credential(t,n){return hr._fromParams({providerId:Bi.PROVIDER_ID,signInMethod:Bi.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Bi.credentialFromTaggedObject(t)}static credentialFromError(t){return Bi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=t;if(!n||!i)return null;try{return Bi.credential(n,i)}catch{return null}}}Bi.TWITTER_SIGN_IN_METHOD="twitter.com";Bi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,i,s=!1){const r=await xn._fromIdTokenResponse(t,i,s),o=pT(i);return new Eo({user:r,providerId:o,_tokenResponse:i,operationType:n})}static async _forOperation(t,n,i){await t._updateTokensIfNecessary(i,!0);const s=pT(i);return new Eo({user:t,providerId:s,_tokenResponse:i,operationType:n})}}function pT(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih extends Ti{constructor(t,n,i,s){super(n.code,n.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,Ih.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,n,i,s){return new Ih(t,n,i,s)}}function vb(e,t,n,i){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?Ih._fromErrorAndOperation(e,r,t,i):r})}async function HL(e,t,n=!1){const i=await Pl(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Eo._forOperation(e,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WL(e,t,n=!1){const{auth:i}=e;if(jn(i.app))return Promise.reject(Js(i));const s="reauthenticate";try{const r=await Pl(e,vb(i,s,t,e),n);J(r.idToken,i,"internal-error");const o=$y(r.idToken);J(o,i,"internal-error");const{sub:a}=o;return J(e.uid===a,i,"user-mismatch"),Eo._forOperation(e,s,r)}catch(r){throw(r==null?void 0:r.code)==="auth/user-not-found"&&gi(i,"user-mismatch"),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qL(e,t,n=!1){if(jn(e.app))return Promise.reject(Js(e));const i="signIn",s=await vb(e,i,t),r=await Eo._fromIdTokenResponse(e,i,s);return n||await e._updateCurrentUser(r.user),r}function KL(e,t,n,i){return Ae(e).onIdTokenChanged(t,n,i)}function GL(e,t,n){return Ae(e).beforeAuthStateChanged(t,n)}const Ah="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ah,"1"),this.storage.removeItem(Ah),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QL=1e3,YL=10;class Tb extends wb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=pb(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),s=this.localCache[n];i!==s&&t(n,s,i)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const i=t.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(i);!n&&this.localCache[i]===o||this.notifyListeners(i,o)},r=this.storage.getItem(i);kL()&&r!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,YL):s()}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:i}),!0)})},QL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}Tb.type="LOCAL";const XL=Tb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb extends wb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}xb.type="SESSION";const Eb=xb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JL(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(s=>s.isListeningto(t));if(n)return n;const i=new Sd(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:i,eventType:s,data:r}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,r)),l=await JL(a);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Sd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ky(e="",t=10){let n="";for(let i=0;i<t;i++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZL{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let r,o;return new Promise((a,l)=>{const c=Ky("",20);s.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},i);o={messageChannel:s,onMessage(d){const f=d;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(h),r=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),a(f.data.response);break;default:clearTimeout(h),clearTimeout(r),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kn(){return window}function t4(e){Kn().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sb(){return typeof Kn().WorkerGlobalScope<"u"&&typeof Kn().importScripts=="function"}async function e4(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function n4(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)==null?void 0:e.controller)||null}function i4(){return Sb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ib="firebaseLocalStorageDb",s4=1,bh="firebaseLocalStorage",Ab="fbase_key";class nc{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Id(e,t){return e.transaction([bh],t?"readwrite":"readonly").objectStore(bh)}function r4(){const e=indexedDB.deleteDatabase(Ib);return new nc(e).toPromise()}function Mm(){const e=indexedDB.open(Ib,s4);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const i=e.result;try{i.createObjectStore(bh,{keyPath:Ab})}catch(s){n(s)}}),e.addEventListener("success",async()=>{const i=e.result;i.objectStoreNames.contains(bh)?t(i):(i.close(),await r4(),t(await Mm()))})})}async function mT(e,t,n){const i=Id(e,!0).put({[Ab]:t,value:n});return new nc(i).toPromise()}async function o4(e,t){const n=Id(e,!1).get(t),i=await new nc(n).toPromise();return i===void 0?null:i.value}function gT(e,t){const n=Id(e,!0).delete(t);return new nc(n).toPromise()}const a4=800,l4=3;class bb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Mm(),this.db)}async _withRetries(t){let n=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(n++>l4)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Sb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Sd._getInstance(i4()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await e4(),!this.activeServiceWorker)return;this.sender=new ZL(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(n=t[0])!=null&&n.fulfilled&&(i=t[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||n4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Mm();return await mT(t,Ah,"1"),await gT(t,Ah),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>mT(i,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(i=>o4(i,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>gT(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(s=>{const r=Id(s,!1).getAll();return new nc(r).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(t.length!==0)for(const{fbase_key:s,value:r}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(r)&&(this.notifyListeners(s,r),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),a4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}bb.type="LOCAL";const c4=bb;new tc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u4(e,t){return t?oi(t):(J(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy extends yb{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return so(t,this._buildIdpRequest())}_linkToIdToken(t,n){return so(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return so(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function h4(e){return qL(e.auth,new Gy(e),e.bypassAuthState)}function d4(e){const{auth:t,user:n}=e;return J(n,t,"internal-error"),WL(n,new Gy(e),e.bypassAuthState)}async function f4(e){const{auth:t,user:n}=e;return J(n,t,"internal-error"),HL(n,new Gy(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb{constructor(t,n,i,s,r=!1){this.auth=t,this.resolver=i,this.user=s,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:i,postBody:s,tenantId:r,error:o,type:a}=t;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:i,tenantId:r||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return h4;case"linkViaPopup":case"linkViaRedirect":return f4;case"reauthViaPopup":case"reauthViaRedirect":return d4;default:gi(this.auth,"internal-error")}}resolve(t){yi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){yi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p4=new tc(2e3,1e4);class Br extends kb{constructor(t,n,i,s,r){super(t,n,s,r),this.provider=i,this.authWindow=null,this.pollId=null,Br.currentPopupAction&&Br.currentPopupAction.cancel(),Br.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return J(t,this.auth,"internal-error"),t}async onExecution(){yi(this.filter.length===1,"Popup operations only handle one event");const t=Ky();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(qn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(qn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Br.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(qn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,p4.get())};t()}}Br.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m4="pendingRedirect",ku=new Map;class g4 extends kb{constructor(t,n,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let t=ku.get(this.auth._key());if(!t){try{const i=await y4(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(n){t=()=>Promise.reject(n)}ku.set(this.auth._key(),t)}return this.bypassAuthState||ku.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function y4(e,t){const n=w4(t),i=v4(e);if(!await i._isAvailable())return!1;const s=await i._get(n)==="true";return await i._remove(n),s}function _4(e,t){ku.set(e._key(),t)}function v4(e){return oi(e._redirectPersistence)}function w4(e){return bu(m4,e.config.apiKey,e.name)}async function T4(e,t,n=!1){if(jn(e.app))return Promise.reject(Js(e));const i=Wy(e),s=u4(i,t),o=await new g4(i,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x4=10*60*1e3;class E4{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(n=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!S4(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var i;if(t.error&&!Pb(t)){const s=((i=t.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(qn(this.auth,s))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const i=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=x4&&this.cachedEventUids.clear(),this.cachedEventUids.has(yT(t))}saveEventToCache(t){this.cachedEventUids.add(yT(t)),this.lastProcessedEventTime=Date.now()}}function yT(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function Pb({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function S4(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Pb(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I4(e,t={}){return Fo(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,b4=/^https?/;async function k4(e){if(e.config.emulator)return;const{authorizedDomains:t}=await I4(e);for(const n of t)try{if(P4(n))return}catch{}gi(e,"unauthorized-domain")}function P4(e){const t=Rm(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&i===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===i}if(!b4.test(n))return!1;if(A4.test(e))return i===e;const s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C4=new tc(3e4,6e4);function _T(){const e=Kn().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function R4(e){return new Promise((t,n)=>{var s,r,o;function i(){_T(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{_T(),n(qn(e,"network-request-failed"))},timeout:C4.get()})}if((r=(s=Kn().gapi)==null?void 0:s.iframes)!=null&&r.Iframe)t(gapi.iframes.getContext());else if((o=Kn().gapi)!=null&&o.load)i();else{const a=LL("iframefcb");return Kn()[a]=()=>{gapi.load?i():n(qn(e,"network-request-failed"))},NL(`${OL()}?onload=${a}`).catch(l=>n(l))}}).catch(t=>{throw Pu=null,t})}let Pu=null;function D4(e){return Pu=Pu||R4(e),Pu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M4=new tc(5e3,15e3),V4="__/auth/iframe",N4="emulator/auth/iframe",O4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},L4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function F4(e){const t=e.config;J(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Uy(t,N4):`https://${e.config.authDomain}/${V4}`,i={apiKey:t.apiKey,appName:e.name,v:Do},s=L4.get(e.config.apiHost);s&&(i.eid=s);const r=e._getFrameworks();return r.length&&(i.fw=r.join(",")),`${n}?${Kl(i).slice(1)}`}async function j4(e){const t=await D4(e),n=Kn().gapi;return J(n,e,"internal-error"),t.open({where:document.body,url:F4(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:O4,dontclear:!0},i=>new Promise(async(s,r)=>{await i.restyle({setHideOnLeave:!1});const o=qn(e,"network-request-failed"),a=Kn().setTimeout(()=>{r(o)},M4.get());function l(){Kn().clearTimeout(a),s(i)}i.ping(l).then(l,()=>{r(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},U4=500,z4=600,$4="_blank",H4="http://localhost";class vT{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function W4(e,t,n,i=U4,s=z4){const r=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l={...B4,width:i.toString(),height:s.toString(),top:r,left:o},c=Ie().toLowerCase();n&&(a=cb(c)?$4:n),ab(c)&&(t=t||H4,l.scrollbars="yes");const h=Object.entries(l).reduce((f,[m,v])=>`${f}${m}=${v},`,"");if(bL(c)&&a!=="_self")return q4(t||"",a),new vT(null);const d=window.open(t||"",a,h);J(d,e,"popup-blocked");try{d.focus()}catch{}return new vT(d)}function q4(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K4="__/auth/handler",G4="emulator/auth/handler",Q4=encodeURIComponent("fac");async function wT(e,t,n,i,s,r){J(e.config.authDomain,e,"auth-domain-config-required"),J(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:Do,eventId:s};if(t instanceof _b){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",kD(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(t instanceof ec){const h=t.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await e._getAppCheckToken(),c=l?`#${Q4}=${encodeURIComponent(l)}`:"";return`${Y4(e)}?${Kl(a).slice(1)}${c}`}function Y4({config:e}){return e.emulator?Uy(e,G4):`https://${e.authDomain}/${K4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uf="webStorageSupport";class X4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Eb,this._completeRedirectFn=T4,this._overrideRedirectResult=_4}async _openPopup(t,n,i,s){var o;yi((o=this.eventManagers[t._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const r=await wT(t,n,i,Rm(),s);return W4(t,r,Ky())}async _openRedirect(t,n,i,s){await this._originValidation(t);const r=await wT(t,n,i,Rm(),s);return t4(r),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:s,promise:r}=this.eventManagers[n];return s?Promise.resolve(s):(yi(r,"If manager is not set, promise should be"),r)}const i=this.initAndGetManager(t);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(t){const n=await j4(t),i=new E4(t);return n.register("authEvent",s=>(J(s==null?void 0:s.authEvent,t,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=n,i}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(Uf,{type:Uf},s=>{var o;const r=(o=s==null?void 0:s[0])==null?void 0:o[Uf];r!==void 0&&n(!!r),gi(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=k4(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return pb()||lb()||Hy()}}const J4=X4;var TT="@firebase/auth",xT="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z4{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(i=>{t((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tF(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function eF(e){go(new lr("auth",(t,{options:n})=>{const i=t.getProvider("app").getImmediate(),s=t.getProvider("heartbeat"),r=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;J(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:mb(e)},c=new ML(i,s,r,l);return jL(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,i)=>{t.getProvider("auth-internal").initialize()})),go(new lr("auth-internal",t=>{const n=Wy(t.getProvider("auth").getImmediate());return(i=>new Z4(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),is(TT,xT,tF(e)),is(TT,xT,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nF=5*60,iF=mI("authIdTokenMaxAge")||nF;let ET=null;const sF=e=>async t=>{const n=t&&await t.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>iF)return;const s=n==null?void 0:n.token;ET!==s&&(ET=s,await fetch(e,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function rF(e=TI()){const t=ry(e,"auth");if(t.isInitialized())return t.getImmediate();const n=FL(e,{popupRedirectResolver:J4,persistence:[c4,XL,Eb]}),i=mI("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const r=new URL(i,location.origin);if(location.origin===r.origin){const o=sF(r.toString());GL(n,o,()=>o(n.currentUser)),KL(n,a=>o(a))}}const s=fI("auth");return s&&BL(n,`http://${s}`),n}function oF(){var e;return((e=document.getElementsByTagName("head"))==null?void 0:e[0])??document}VL({loadJS(e){return new Promise((t,n)=>{const i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=s=>{const r=qn("internal-error");r.customData=s,n(r)},i.type="text/javascript",i.charset="UTF-8",oF().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});eF("Browser");var xr={VITE_FIREBASE_API_KEY:"AIzaSyDJwSFwmMZx4-8-rUOqzkxR46E6E_qBa9Q",VITE_FIREBASE_AUTH_DOMAIN:"junebug-app.firebaseapp.com",VITE_FIREBASE_PROJECT_ID:"junebug-app",VITE_FIREBASE_STORAGE_BUCKET:"junebug-app.appspot.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"647178015669",VITE_FIREBASE_APP_ID:"1:647178015669:web:49096b364944b29850bffc"};const aF={apiKey:xr.VITE_FIREBASE_API_KEY,authDomain:xr.VITE_FIREBASE_AUTH_DOMAIN,projectId:xr.VITE_FIREBASE_PROJECT_ID,storageBucket:xr.VITE_FIREBASE_STORAGE_BUCKET,messagingSenderId:xr.VITE_FIREBASE_MESSAGING_SENDER_ID,appId:xr.VITE_FIREBASE_APP_ID},Cb=wI(aF),Ds=zO(Cb);rF(Cb);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var lF={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cF=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),zt=(e,t)=>{const n=j.forwardRef(({color:i="currentColor",size:s=24,strokeWidth:r=2,absoluteStrokeWidth:o,className:a="",children:l,...c},h)=>j.createElement("svg",{ref:h,...lF,width:s,height:s,stroke:i,strokeWidth:o?Number(r)*24/Number(s):r,className:["lucide",`lucide-${cF(e)}`,a].join(" "),...c},[...t.map(([d,f])=>j.createElement(d,f)),...Array.isArray(l)?l:[l]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rb=zt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uF=zt("BedDouble",[["path",{d:"M2 20v-8a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v8",key:"1k78r4"}],["path",{d:"M4 10V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v4",key:"fb3tl2"}],["path",{d:"M12 4v6",key:"1dcgq2"}],["path",{d:"M2 18h20",key:"ajqnye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hF=zt("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dF=zt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fF=zt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Db=zt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kh=zt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mb=zt("Dog",[["path",{d:"M10 5.172C10 3.782 8.423 2.679 6.5 3c-2.823.47-4.113 6.006-4 7 .08.703 1.725 1.722 3.656 1 1.261-.472 1.96-1.45 2.344-2.5",key:"19br0u"}],["path",{d:"M14.267 5.172c0-1.39 1.577-2.493 3.5-2.172 2.823.47 4.113 6.006 4 7-.08.703-1.725 1.722-3.656 1-1.261-.472-1.855-1.45-2.239-2.5",key:"11n1an"}],["path",{d:"M8 14v.5",key:"1nzgdb"}],["path",{d:"M16 14v.5",key:"1lajdz"}],["path",{d:"M11.25 16.25h1.5L12 17l-.75-.75Z",key:"12kq1m"}],["path",{d:"M4.42 11.247A13.152 13.152 0 0 0 4 14.556C4 18.728 7.582 21 12 21s8-2.272 8-6.444c0-1.061-.162-2.2-.493-3.309m-9.243-6.082A8.801 8.801 0 0 1 12 5c.78 0 1.5.108 2.161.306",key:"wsu29d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pF=zt("Droplet",[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mF=zt("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gF=zt("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yF=zt("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _F=zt("Footprints",[["path",{d:"M4 16v-2.38C4 11.5 2.97 10.5 3 8c.03-2.72 1.49-6 4.5-6C9.37 2 10 3.8 10 5.5c0 3.11-2 5.66-2 8.68V16a2 2 0 1 1-4 0Z",key:"1dudjm"}],["path",{d:"M20 20v-2.38c0-2.12 1.03-3.12 1-5.62-.03-2.72-1.49-6-4.5-6C14.63 6 14 7.8 14 9.5c0 3.11 2 5.66 2 8.68V20a2 2 0 1 0 4 0Z",key:"l2t8xc"}],["path",{d:"M16 17h4",key:"1dejxt"}],["path",{d:"M4 13h4",key:"1bwh8b"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vF=zt("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wF=zt("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TF=zt("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xF=zt("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EF=zt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SF=zt("Soup",[["path",{d:"M12 21a9 9 0 0 0 9-9H3a9 9 0 0 0 9 9Z",key:"4rw317"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M19.5 12 22 6",key:"shfsr5"}],["path",{d:"M16.25 3c.27.1.8.53.75 1.36-.06.83-.93 1.2-1 2.02-.05.78.34 1.24.73 1.62",key:"rpc6vp"}],["path",{d:"M11.25 3c.27.1.8.53.74 1.36-.05.83-.93 1.2-.98 2.02-.06.78.33 1.24.72 1.62",key:"1lf63m"}],["path",{d:"M6.25 3c.27.1.8.53.75 1.36-.06.83-.93 1.2-1 2.02-.05.78.34 1.24.74 1.62",key:"97tijn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IF=zt("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AF=zt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Qy=j.createContext({});function Yy(e){const t=j.useRef(null);return t.current===null&&(t.current=e()),t.current}const Xy=typeof window<"u",Vb=Xy?j.useLayoutEffect:j.useEffect,Ad=j.createContext(null);function Jy(e,t){e.indexOf(t)===-1&&e.push(t)}function Zy(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const _i=(e,t,n)=>n>t?t:n<e?e:n;let t_=()=>{};const vi={},Nb=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function Ob(e){return typeof e=="object"&&e!==null}const Lb=e=>/^0[^.\s]+$/u.test(e);function e_(e){let t;return()=>(t===void 0&&(t=e()),t)}const dn=e=>e,bF=(e,t)=>n=>t(e(n)),ic=(...e)=>e.reduce(bF),Cl=(e,t,n)=>{const i=t-e;return i===0?1:(n-e)/i};class n_{constructor(){this.subscriptions=[]}add(t){return Jy(this.subscriptions,t),()=>Zy(this.subscriptions,t)}notify(t,n,i){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,n,i);else for(let r=0;r<s;r++){const o=this.subscriptions[r];o&&o(t,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Gn=e=>e*1e3,ln=e=>e/1e3;function Fb(e,t){return t?e*(1e3/t):0}const jb=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,kF=1e-7,PF=12;function CF(e,t,n,i,s){let r,o,a=0;do o=t+(n-t)/2,r=jb(o,i,s)-e,r>0?n=o:t=o;while(Math.abs(r)>kF&&++a<PF);return o}function sc(e,t,n,i){if(e===t&&n===i)return dn;const s=r=>CF(r,0,1,e,n);return r=>r===0||r===1?r:jb(s(r),t,i)}const Bb=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Ub=e=>t=>1-e(1-t),zb=sc(.33,1.53,.69,.99),i_=Ub(zb),$b=Bb(i_),Hb=e=>(e*=2)<1?.5*i_(e):.5*(2-Math.pow(2,-10*(e-1))),s_=e=>1-Math.sin(Math.acos(e)),Wb=Ub(s_),qb=Bb(s_),RF=sc(.42,0,1,1),DF=sc(0,0,.58,1),Kb=sc(.42,0,.58,1),MF=e=>Array.isArray(e)&&typeof e[0]!="number",Gb=e=>Array.isArray(e)&&typeof e[0]=="number",VF={linear:dn,easeIn:RF,easeInOut:Kb,easeOut:DF,circIn:s_,circInOut:qb,circOut:Wb,backIn:i_,backInOut:$b,backOut:zb,anticipate:Hb},NF=e=>typeof e=="string",ST=e=>{if(Gb(e)){t_(e.length===4);const[t,n,i,s]=e;return sc(t,n,i,s)}else if(NF(e))return VF[e];return e},Wc=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function OF(e,t){let n=new Set,i=new Set,s=!1,r=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function l(h){o.has(h)&&(c.schedule(h),e()),h(a)}const c={schedule:(h,d=!1,f=!1)=>{const v=f&&s?n:i;return d&&o.add(h),v.has(h)||v.add(h),h},cancel:h=>{i.delete(h),o.delete(h)},process:h=>{if(a=h,s){r=!0;return}s=!0,[n,i]=[i,n],n.forEach(l),n.clear(),s=!1,r&&(r=!1,c.process(h))}};return c}const LF=40;function Qb(e,t){let n=!1,i=!0;const s={delta:0,timestamp:0,isProcessing:!1},r=()=>n=!0,o=Wc.reduce((S,D)=>(S[D]=OF(r),S),{}),{setup:a,read:l,resolveKeyframes:c,preUpdate:h,update:d,preRender:f,render:m,postRender:v}=o,x=()=>{const S=vi.useManualTiming?s.timestamp:performance.now();n=!1,vi.useManualTiming||(s.delta=i?1e3/60:Math.max(Math.min(S-s.timestamp,LF),1)),s.timestamp=S,s.isProcessing=!0,a.process(s),l.process(s),c.process(s),h.process(s),d.process(s),f.process(s),m.process(s),v.process(s),s.isProcessing=!1,n&&t&&(i=!1,e(x))},E=()=>{n=!0,i=!0,s.isProcessing||e(x)};return{schedule:Wc.reduce((S,D)=>{const M=o[D];return S[D]=(V,T=!1,_=!1)=>(n||E(),M.schedule(V,T,_)),S},{}),cancel:S=>{for(let D=0;D<Wc.length;D++)o[Wc[D]].cancel(S)},state:s,steps:o}}const{schedule:Pt,cancel:_s,state:ae,steps:zf}=Qb(typeof requestAnimationFrame<"u"?requestAnimationFrame:dn,!0);let Cu;function FF(){Cu=void 0}const Be={now:()=>(Cu===void 0&&Be.set(ae.isProcessing||vi.useManualTiming?ae.timestamp:performance.now()),Cu),set:e=>{Cu=e,queueMicrotask(FF)}},Yb=e=>t=>typeof t=="string"&&t.startsWith(e),r_=Yb("--"),jF=Yb("var(--"),o_=e=>jF(e)?BF.test(e.split("/*")[0].trim()):!1,BF=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,jo={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Rl={...jo,transform:e=>_i(0,1,e)},qc={...jo,default:1},Ka=e=>Math.round(e*1e5)/1e5,a_=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function UF(e){return e==null}const zF=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,l_=(e,t)=>n=>!!(typeof n=="string"&&zF.test(n)&&n.startsWith(e)||t&&!UF(n)&&Object.prototype.hasOwnProperty.call(n,t)),Xb=(e,t,n)=>i=>{if(typeof i!="string")return i;const[s,r,o,a]=i.match(a_);return{[e]:parseFloat(s),[t]:parseFloat(r),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},$F=e=>_i(0,255,e),$f={...jo,transform:e=>Math.round($F(e))},Ks={test:l_("rgb","red"),parse:Xb("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:i=1})=>"rgba("+$f.transform(e)+", "+$f.transform(t)+", "+$f.transform(n)+", "+Ka(Rl.transform(i))+")"};function HF(e){let t="",n="",i="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),i=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),i=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,i+=i,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:s?parseInt(s,16)/255:1}}const Vm={test:l_("#"),parse:HF,transform:Ks.transform},rc=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Di=rc("deg"),Qn=rc("%"),X=rc("px"),WF=rc("vh"),qF=rc("vw"),IT={...Qn,parse:e=>Qn.parse(e)/100,transform:e=>Qn.transform(e*100)},Ur={test:l_("hsl","hue"),parse:Xb("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:i=1})=>"hsla("+Math.round(e)+", "+Qn.transform(Ka(t))+", "+Qn.transform(Ka(n))+", "+Ka(Rl.transform(i))+")"},Wt={test:e=>Ks.test(e)||Vm.test(e)||Ur.test(e),parse:e=>Ks.test(e)?Ks.parse(e):Ur.test(e)?Ur.parse(e):Vm.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Ks.transform(e):Ur.transform(e),getAnimatableNone:e=>{const t=Wt.parse(e);return t.alpha=0,Wt.transform(t)}},KF=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function GF(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(a_))==null?void 0:t.length)||0)+(((n=e.match(KF))==null?void 0:n.length)||0)>0}const Jb="number",Zb="color",QF="var",YF="var(",AT="${}",XF=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Dl(e){const t=e.toString(),n=[],i={color:[],number:[],var:[]},s=[];let r=0;const a=t.replace(XF,l=>(Wt.test(l)?(i.color.push(r),s.push(Zb),n.push(Wt.parse(l))):l.startsWith(YF)?(i.var.push(r),s.push(QF),n.push(l)):(i.number.push(r),s.push(Jb),n.push(parseFloat(l))),++r,AT)).split(AT);return{values:n,split:a,indexes:i,types:s}}function tk(e){return Dl(e).values}function ek(e){const{split:t,types:n}=Dl(e),i=t.length;return s=>{let r="";for(let o=0;o<i;o++)if(r+=t[o],s[o]!==void 0){const a=n[o];a===Jb?r+=Ka(s[o]):a===Zb?r+=Wt.transform(s[o]):r+=s[o]}return r}}const JF=e=>typeof e=="number"?0:Wt.test(e)?Wt.getAnimatableNone(e):e;function ZF(e){const t=tk(e);return ek(e)(t.map(JF))}const vs={test:GF,parse:tk,createTransformer:ek,getAnimatableNone:ZF};function Hf(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function t6({hue:e,saturation:t,lightness:n,alpha:i}){e/=360,t/=100,n/=100;let s=0,r=0,o=0;if(!t)s=r=o=n;else{const a=n<.5?n*(1+t):n+t-n*t,l=2*n-a;s=Hf(l,a,e+1/3),r=Hf(l,a,e),o=Hf(l,a,e-1/3)}return{red:Math.round(s*255),green:Math.round(r*255),blue:Math.round(o*255),alpha:i}}function Ph(e,t){return n=>n>0?t:e}const Rt=(e,t,n)=>e+(t-e)*n,Wf=(e,t,n)=>{const i=e*e,s=n*(t*t-i)+i;return s<0?0:Math.sqrt(s)},e6=[Vm,Ks,Ur],n6=e=>e6.find(t=>t.test(e));function bT(e){const t=n6(e);if(!t)return!1;let n=t.parse(e);return t===Ur&&(n=t6(n)),n}const kT=(e,t)=>{const n=bT(e),i=bT(t);if(!n||!i)return Ph(e,t);const s={...n};return r=>(s.red=Wf(n.red,i.red,r),s.green=Wf(n.green,i.green,r),s.blue=Wf(n.blue,i.blue,r),s.alpha=Rt(n.alpha,i.alpha,r),Ks.transform(s))},Nm=new Set(["none","hidden"]);function i6(e,t){return Nm.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function s6(e,t){return n=>Rt(e,t,n)}function c_(e){return typeof e=="number"?s6:typeof e=="string"?o_(e)?Ph:Wt.test(e)?kT:a6:Array.isArray(e)?nk:typeof e=="object"?Wt.test(e)?kT:r6:Ph}function nk(e,t){const n=[...e],i=n.length,s=e.map((r,o)=>c_(r)(r,t[o]));return r=>{for(let o=0;o<i;o++)n[o]=s[o](r);return n}}function r6(e,t){const n={...e,...t},i={};for(const s in n)e[s]!==void 0&&t[s]!==void 0&&(i[s]=c_(e[s])(e[s],t[s]));return s=>{for(const r in i)n[r]=i[r](s);return n}}function o6(e,t){const n=[],i={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const r=t.types[s],o=e.indexes[r][i[r]],a=e.values[o]??0;n[s]=a,i[r]++}return n}const a6=(e,t)=>{const n=vs.createTransformer(t),i=Dl(e),s=Dl(t);return i.indexes.var.length===s.indexes.var.length&&i.indexes.color.length===s.indexes.color.length&&i.indexes.number.length>=s.indexes.number.length?Nm.has(e)&&!s.values.length||Nm.has(t)&&!i.values.length?i6(e,t):ic(nk(o6(i,s),s.values),n):Ph(e,t)};function ik(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?Rt(e,t,n):c_(e)(e,t)}const l6=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>Pt.update(t,n),stop:()=>_s(t),now:()=>ae.isProcessing?ae.timestamp:Be.now()}},sk=(e,t,n=10)=>{let i="";const s=Math.max(Math.round(t/n),2);for(let r=0;r<s;r++)i+=Math.round(e(r/(s-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},Ch=2e4;function u_(e){let t=0;const n=50;let i=e.next(t);for(;!i.done&&t<Ch;)t+=n,i=e.next(t);return t>=Ch?1/0:t}function c6(e,t=100,n){const i=n({...e,keyframes:[0,t]}),s=Math.min(u_(i),Ch);return{type:"keyframes",ease:r=>i.next(s*r).value/t,duration:ln(s)}}const u6=5;function rk(e,t,n){const i=Math.max(t-u6,0);return Fb(n-e(i),t-i)}const Ot={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},qf=.001;function h6({duration:e=Ot.duration,bounce:t=Ot.bounce,velocity:n=Ot.velocity,mass:i=Ot.mass}){let s,r,o=1-t;o=_i(Ot.minDamping,Ot.maxDamping,o),e=_i(Ot.minDuration,Ot.maxDuration,ln(e)),o<1?(s=c=>{const h=c*o,d=h*e,f=h-n,m=Om(c,o),v=Math.exp(-d);return qf-f/m*v},r=c=>{const d=c*o*e,f=d*n+n,m=Math.pow(o,2)*Math.pow(c,2)*e,v=Math.exp(-d),x=Om(Math.pow(c,2),o);return(-s(c)+qf>0?-1:1)*((f-m)*v)/x}):(s=c=>{const h=Math.exp(-c*e),d=(c-n)*e+1;return-qf+h*d},r=c=>{const h=Math.exp(-c*e),d=(n-c)*(e*e);return h*d});const a=5/e,l=f6(s,r,a);if(e=Gn(e),isNaN(l))return{stiffness:Ot.stiffness,damping:Ot.damping,duration:e};{const c=Math.pow(l,2)*i;return{stiffness:c,damping:o*2*Math.sqrt(i*c),duration:e}}}const d6=12;function f6(e,t,n){let i=n;for(let s=1;s<d6;s++)i=i-e(i)/t(i);return i}function Om(e,t){return e*Math.sqrt(1-t*t)}const p6=["duration","bounce"],m6=["stiffness","damping","mass"];function PT(e,t){return t.some(n=>e[n]!==void 0)}function g6(e){let t={velocity:Ot.velocity,stiffness:Ot.stiffness,damping:Ot.damping,mass:Ot.mass,isResolvedFromDuration:!1,...e};if(!PT(e,m6)&&PT(e,p6))if(e.visualDuration){const n=e.visualDuration,i=2*Math.PI/(n*1.2),s=i*i,r=2*_i(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:Ot.mass,stiffness:s,damping:r}}else{const n=h6(e);t={...t,...n,mass:Ot.mass},t.isResolvedFromDuration=!0}return t}function Rh(e=Ot.visualDuration,t=Ot.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:i,restDelta:s}=n;const r=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:r},{stiffness:l,damping:c,mass:h,duration:d,velocity:f,isResolvedFromDuration:m}=g6({...n,velocity:-ln(n.velocity||0)}),v=f||0,x=c/(2*Math.sqrt(l*h)),E=o-r,y=ln(Math.sqrt(l/h)),w=Math.abs(E)<5;i||(i=w?Ot.restSpeed.granular:Ot.restSpeed.default),s||(s=w?Ot.restDelta.granular:Ot.restDelta.default);let S;if(x<1){const M=Om(y,x);S=V=>{const T=Math.exp(-x*y*V);return o-T*((v+x*y*E)/M*Math.sin(M*V)+E*Math.cos(M*V))}}else if(x===1)S=M=>o-Math.exp(-y*M)*(E+(v+y*E)*M);else{const M=y*Math.sqrt(x*x-1);S=V=>{const T=Math.exp(-x*y*V),_=Math.min(M*V,300);return o-T*((v+x*y*E)*Math.sinh(_)+M*E*Math.cosh(_))/M}}const D={calculatedDuration:m&&d||null,next:M=>{const V=S(M);if(m)a.done=M>=d;else{let T=M===0?v:0;x<1&&(T=M===0?Gn(v):rk(S,M,V));const _=Math.abs(T)<=i,A=Math.abs(o-V)<=s;a.done=_&&A}return a.value=a.done?o:V,a},toString:()=>{const M=Math.min(u_(D),Ch),V=sk(T=>D.next(M*T).value,M,30);return M+"ms "+V},toTransition:()=>{}};return D}Rh.applyToOptions=e=>{const t=c6(e,100,Rh);return e.ease=t.ease,e.duration=Gn(t.duration),e.type="keyframes",e};function Lm({keyframes:e,velocity:t=0,power:n=.8,timeConstant:i=325,bounceDamping:s=10,bounceStiffness:r=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:h}){const d=e[0],f={done:!1,value:d},m=_=>a!==void 0&&_<a||l!==void 0&&_>l,v=_=>a===void 0?l:l===void 0||Math.abs(a-_)<Math.abs(l-_)?a:l;let x=n*t;const E=d+x,y=o===void 0?E:o(E);y!==E&&(x=y-d);const w=_=>-x*Math.exp(-_/i),S=_=>y+w(_),D=_=>{const A=w(_),b=S(_);f.done=Math.abs(A)<=c,f.value=f.done?y:b};let M,V;const T=_=>{m(f.value)&&(M=_,V=Rh({keyframes:[f.value,v(f.value)],velocity:rk(S,_,f.value),damping:s,stiffness:r,restDelta:c,restSpeed:h}))};return T(0),{calculatedDuration:null,next:_=>{let A=!1;return!V&&M===void 0&&(A=!0,D(_),T(_)),M!==void 0&&_>=M?V.next(_-M):(!A&&D(_),f)}}}function y6(e,t,n){const i=[],s=n||vi.mix||ik,r=e.length-1;for(let o=0;o<r;o++){let a=s(e[o],e[o+1]);if(t){const l=Array.isArray(t)?t[o]||dn:t;a=ic(l,a)}i.push(a)}return i}function _6(e,t,{clamp:n=!0,ease:i,mixer:s}={}){const r=e.length;if(t_(r===t.length),r===1)return()=>t[0];if(r===2&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[r-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=y6(t,i,s),l=a.length,c=h=>{if(o&&h<e[0])return t[0];let d=0;if(l>1)for(;d<e.length-2&&!(h<e[d+1]);d++);const f=Cl(e[d],e[d+1],h);return a[d](f)};return n?h=>c(_i(e[0],e[r-1],h)):c}function v6(e,t){const n=e[e.length-1];for(let i=1;i<=t;i++){const s=Cl(0,t,i);e.push(Rt(n,1,s))}}function w6(e){const t=[0];return v6(t,e.length-1),t}function T6(e,t){return e.map(n=>n*t)}function x6(e,t){return e.map(()=>t||Kb).splice(0,e.length-1)}function Ga({duration:e=300,keyframes:t,times:n,ease:i="easeInOut"}){const s=MF(i)?i.map(ST):ST(i),r={done:!1,value:t[0]},o=T6(n&&n.length===t.length?n:w6(t),e),a=_6(o,t,{ease:Array.isArray(s)?s:x6(t,s)});return{calculatedDuration:e,next:l=>(r.value=a(l),r.done=l>=e,r)}}const E6=e=>e!==null;function h_(e,{repeat:t,repeatType:n="loop"},i,s=1){const r=e.filter(E6),a=s<0||t&&n!=="loop"&&t%2===1?0:r.length-1;return!a||i===void 0?r[a]:i}const S6={decay:Lm,inertia:Lm,tween:Ga,keyframes:Ga,spring:Rh};function ok(e){typeof e.type=="string"&&(e.type=S6[e.type])}class d_{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const I6=e=>e/100;class f_ extends d_{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var i,s;const{motionValue:n}=this.options;n&&n.updatedAt!==Be.now()&&this.tick(Be.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(i=this.options).onStop)==null||s.call(i))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;ok(t);const{type:n=Ga,repeat:i=0,repeatDelay:s=0,repeatType:r,velocity:o=0}=t;let{keyframes:a}=t;const l=n||Ga;l!==Ga&&typeof a[0]!="number"&&(this.mixKeyframes=ic(I6,ik(a[0],a[1])),a=[0,100]);const c=l({...t,keyframes:a});r==="mirror"&&(this.mirroredGenerator=l({...t,keyframes:[...a].reverse(),velocity:-o})),c.calculatedDuration===null&&(c.calculatedDuration=u_(c));const{calculatedDuration:h}=c;this.calculatedDuration=h,this.resolvedDuration=h+s,this.totalDuration=this.resolvedDuration*(i+1)-s,this.generator=c}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:i,totalDuration:s,mixKeyframes:r,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return i.next(0);const{delay:c=0,keyframes:h,repeat:d,repeatType:f,repeatDelay:m,type:v,onUpdate:x,finalKeyframe:E}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-s/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const y=this.currentTime-c*(this.playbackSpeed>=0?1:-1),w=this.playbackSpeed>=0?y<0:y>s;this.currentTime=Math.max(y,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let S=this.currentTime,D=i;if(d){const _=Math.min(this.currentTime,s)/a;let A=Math.floor(_),b=_%1;!b&&_>=1&&(b=1),b===1&&A--,A=Math.min(A,d+1),!!(A%2)&&(f==="reverse"?(b=1-b,m&&(b-=m/a)):f==="mirror"&&(D=o)),S=_i(0,1,b)*a}const M=w?{done:!1,value:h[0]}:D.next(S);r&&(M.value=r(M.value));let{done:V}=M;!w&&l!==null&&(V=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const T=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&V);return T&&v!==Lm&&(M.value=h_(h,this.options,E,this.speed)),x&&x(M.value),T&&this.finish(),M}then(t,n){return this.finished.then(t,n)}get duration(){return ln(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+ln(t)}get time(){return ln(this.currentTime)}set time(t){var n;t=Gn(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Be.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=ln(this.currentTime))}play(){var s,r;if(this.isStopped)return;const{driver:t=l6,startTime:n}=this.options;this.driver||(this.driver=t(o=>this.tick(o))),(r=(s=this.options).onPlay)==null||r.call(s);const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=n??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Be.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(t=this.options).onComplete)==null||n.call(t)}cancel(){var t,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(t=this.options).onCancel)==null||n.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),t.observe(this)}}function A6(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const Gs=e=>e*180/Math.PI,Fm=e=>{const t=Gs(Math.atan2(e[1],e[0]));return jm(t)},b6={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:Fm,rotateZ:Fm,skewX:e=>Gs(Math.atan(e[1])),skewY:e=>Gs(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},jm=e=>(e=e%360,e<0&&(e+=360),e),CT=Fm,RT=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),DT=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),k6={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:RT,scaleY:DT,scale:e=>(RT(e)+DT(e))/2,rotateX:e=>jm(Gs(Math.atan2(e[6],e[5]))),rotateY:e=>jm(Gs(Math.atan2(-e[2],e[0]))),rotateZ:CT,rotate:CT,skewX:e=>Gs(Math.atan(e[4])),skewY:e=>Gs(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function Bm(e){return e.includes("scale")?1:0}function Um(e,t){if(!e||e==="none")return Bm(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,s;if(n)i=k6,s=n;else{const a=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=b6,s=a}if(!s)return Bm(t);const r=i[t],o=s[1].split(",").map(C6);return typeof r=="function"?r(o):o[r]}const P6=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return Um(n,t)};function C6(e){return parseFloat(e.trim())}const Bo=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Uo=new Set(Bo),MT=e=>e===jo||e===X,R6=new Set(["x","y","z"]),D6=Bo.filter(e=>!R6.has(e));function M6(e){const t=[];return D6.forEach(n=>{const i=e.getValue(n);i!==void 0&&(t.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),t}const Zs={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>Um(t,"x"),y:(e,{transform:t})=>Um(t,"y")};Zs.translateX=Zs.x;Zs.translateY=Zs.y;const tr=new Set;let zm=!1,$m=!1,Hm=!1;function ak(){if($m){const e=Array.from(tr).filter(i=>i.needsMeasurement),t=new Set(e.map(i=>i.element)),n=new Map;t.forEach(i=>{const s=M6(i);s.length&&(n.set(i,s),i.render())}),e.forEach(i=>i.measureInitialState()),t.forEach(i=>{i.render();const s=n.get(i);s&&s.forEach(([r,o])=>{var a;(a=i.getValue(r))==null||a.set(o)})}),e.forEach(i=>i.measureEndState()),e.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}$m=!1,zm=!1,tr.forEach(e=>e.complete(Hm)),tr.clear()}function lk(){tr.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&($m=!0)})}function V6(){Hm=!0,lk(),ak(),Hm=!1}class p_{constructor(t,n,i,s,r,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=i,this.motionValue=s,this.element=r,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(tr.add(this),zm||(zm=!0,Pt.read(lk),Pt.resolveKeyframes(ak))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:i,motionValue:s}=this;if(t[0]===null){const r=s==null?void 0:s.get(),o=t[t.length-1];if(r!==void 0)t[0]=r;else if(i&&n){const a=i.readValue(n,o);a!=null&&(t[0]=a)}t[0]===void 0&&(t[0]=o),s&&r===void 0&&s.set(t[0])}A6(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),tr.delete(this)}cancel(){this.state==="scheduled"&&(tr.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const N6=e=>e.startsWith("--");function O6(e,t,n){N6(t)?e.style.setProperty(t,n):e.style[t]=n}const L6=e_(()=>window.ScrollTimeline!==void 0),F6={};function j6(e,t){const n=e_(e);return()=>F6[t]??n()}const ck=j6(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),ka=([e,t,n,i])=>`cubic-bezier(${e}, ${t}, ${n}, ${i})`,VT={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ka([0,.65,.55,1]),circOut:ka([.55,0,1,.45]),backIn:ka([.31,.01,.66,-.59]),backOut:ka([.33,1.53,.69,.99])};function uk(e,t){if(e)return typeof e=="function"?ck()?sk(e,t):"ease-out":Gb(e)?ka(e):Array.isArray(e)?e.map(n=>uk(n,t)||VT.easeOut):VT[e]}function B6(e,t,n,{delay:i=0,duration:s=300,repeat:r=0,repeatType:o="loop",ease:a="easeOut",times:l}={},c=void 0){const h={[t]:n};l&&(h.offset=l);const d=uk(a,s);Array.isArray(d)&&(h.easing=d);const f={delay:i,duration:s,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:r+1,direction:o==="reverse"?"alternate":"normal"};return c&&(f.pseudoElement=c),e.animate(h,f)}function hk(e){return typeof e=="function"&&"applyToOptions"in e}function U6({type:e,...t}){return hk(e)&&ck()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class z6 extends d_{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:i,keyframes:s,pseudoElement:r,allowFlatten:o=!1,finalKeyframe:a,onComplete:l}=t;this.isPseudoElement=!!r,this.allowFlatten=o,this.options=t,t_(typeof t.type!="string");const c=U6(t);this.animation=B6(n,i,s,c,r),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!r){const h=h_(s,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(h):O6(n,i,h),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,n;(n=(t=this.animation).finish)==null||n.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,n;this.isPseudoElement||(n=(t=this.animation).commitStyles)==null||n.call(t)}get duration(){var n,i;const t=((i=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:i.call(n).duration)||0;return ln(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+ln(t)}get time(){return ln(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Gn(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){var i;return this.allowFlatten&&((i=this.animation.effect)==null||i.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&L6()?(this.animation.timeline=t,dn):n(this)}}const dk={anticipate:Hb,backInOut:$b,circInOut:qb};function $6(e){return e in dk}function H6(e){typeof e.ease=="string"&&$6(e.ease)&&(e.ease=dk[e.ease])}const NT=10;class W6 extends z6{constructor(t){H6(t),ok(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:i,onComplete:s,element:r,...o}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const a=new f_({...o,autoplay:!1}),l=Gn(this.finishedTime??this.time);n.setWithVelocity(a.sample(l-NT).value,a.sample(l).value,NT),a.stop()}}const OT=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(vs.test(e)||e==="0")&&!e.startsWith("url("));function q6(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function K6(e,t,n,i){const s=e[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const r=e[e.length-1],o=OT(s,t),a=OT(r,t);return!o||!a?!1:q6(e)||(n==="spring"||hk(n))&&i}function Wm(e){e.duration=0,e.type="keyframes"}const G6=new Set(["opacity","clipPath","filter","transform"]),Q6=e_(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Y6(e){var h;const{motionValue:t,name:n,repeatDelay:i,repeatType:s,damping:r,type:o}=e;if(!(((h=t==null?void 0:t.owner)==null?void 0:h.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=t.owner.getProps();return Q6()&&n&&G6.has(n)&&(n!=="transform"||!c)&&!l&&!i&&s!=="mirror"&&r!==0&&o!=="inertia"}const X6=40;class J6 extends d_{constructor({autoplay:t=!0,delay:n=0,type:i="keyframes",repeat:s=0,repeatDelay:r=0,repeatType:o="loop",keyframes:a,name:l,motionValue:c,element:h,...d}){var v;super(),this.stop=()=>{var x,E;this._animation&&(this._animation.stop(),(x=this.stopTimeline)==null||x.call(this)),(E=this.keyframeResolver)==null||E.cancel()},this.createdAt=Be.now();const f={autoplay:t,delay:n,type:i,repeat:s,repeatDelay:r,repeatType:o,name:l,motionValue:c,element:h,...d},m=(h==null?void 0:h.KeyframeResolver)||p_;this.keyframeResolver=new m(a,(x,E,y)=>this.onKeyframesResolved(x,E,f,!y),l,c,h),(v=this.keyframeResolver)==null||v.scheduleResolve()}onKeyframesResolved(t,n,i,s){this.keyframeResolver=void 0;const{name:r,type:o,velocity:a,delay:l,isHandoff:c,onUpdate:h}=i;this.resolvedAt=Be.now(),K6(t,r,o,a)||((vi.instantAnimations||!l)&&(h==null||h(h_(t,i,n))),t[0]=t[t.length-1],Wm(i),i.repeat=0);const f={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>X6?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...i,keyframes:t},m=!c&&Y6(f)?new W6({...f,element:f.motionValue.owner.current}):new f_(f);m.finished.then(()=>this.notifyFinished()).catch(dn),this.pendingTimeline&&(this.stopTimeline=m.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=m}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),V6()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const Z6=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function t5(e){const t=Z6.exec(e);if(!t)return[,];const[,n,i,s]=t;return[`--${n??i}`,s]}function fk(e,t,n=1){const[i,s]=t5(e);if(!i)return;const r=window.getComputedStyle(t).getPropertyValue(i);if(r){const o=r.trim();return Nb(o)?parseFloat(o):o}return o_(s)?fk(s,t,n+1):s}function m_(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const pk=new Set(["width","height","top","left","right","bottom",...Bo]),e5={test:e=>e==="auto",parse:e=>e},mk=e=>t=>t.test(e),gk=[jo,X,Qn,Di,qF,WF,e5],LT=e=>gk.find(mk(e));function n5(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||Lb(e):!0}const i5=new Set(["brightness","contrast","saturate","opacity"]);function s5(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[i]=n.match(a_)||[];if(!i)return e;const s=n.replace(i,"");let r=i5.has(t)?1:0;return i!==n&&(r*=100),t+"("+r+s+")"}const r5=/\b([a-z-]*)\(.*?\)/gu,qm={...vs,getAnimatableNone:e=>{const t=e.match(r5);return t?t.map(s5).join(" "):e}},FT={...jo,transform:Math.round},o5={rotate:Di,rotateX:Di,rotateY:Di,rotateZ:Di,scale:qc,scaleX:qc,scaleY:qc,scaleZ:qc,skew:Di,skewX:Di,skewY:Di,distance:X,translateX:X,translateY:X,translateZ:X,x:X,y:X,z:X,perspective:X,transformPerspective:X,opacity:Rl,originX:IT,originY:IT,originZ:X},g_={borderWidth:X,borderTopWidth:X,borderRightWidth:X,borderBottomWidth:X,borderLeftWidth:X,borderRadius:X,radius:X,borderTopLeftRadius:X,borderTopRightRadius:X,borderBottomRightRadius:X,borderBottomLeftRadius:X,width:X,maxWidth:X,height:X,maxHeight:X,top:X,right:X,bottom:X,left:X,padding:X,paddingTop:X,paddingRight:X,paddingBottom:X,paddingLeft:X,margin:X,marginTop:X,marginRight:X,marginBottom:X,marginLeft:X,backgroundPositionX:X,backgroundPositionY:X,...o5,zIndex:FT,fillOpacity:Rl,strokeOpacity:Rl,numOctaves:FT},a5={...g_,color:Wt,backgroundColor:Wt,outlineColor:Wt,fill:Wt,stroke:Wt,borderColor:Wt,borderTopColor:Wt,borderRightColor:Wt,borderBottomColor:Wt,borderLeftColor:Wt,filter:qm,WebkitFilter:qm},yk=e=>a5[e];function _k(e,t){let n=yk(e);return n!==qm&&(n=vs),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const l5=new Set(["auto","none","0"]);function c5(e,t,n){let i=0,s;for(;i<e.length&&!s;){const r=e[i];typeof r=="string"&&!l5.has(r)&&Dl(r).values.length&&(s=e[i]),i++}if(s&&n)for(const r of t)e[r]=_k(n,s)}class u5 extends p_{constructor(t,n,i,s,r){super(t,n,i,s,r,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let c=t[l];if(typeof c=="string"&&(c=c.trim(),o_(c))){const h=fk(c,n.current);h!==void 0&&(t[l]=h),l===t.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!pk.has(i)||t.length!==2)return;const[s,r]=t,o=LT(s),a=LT(r);if(o!==a)if(MT(o)&&MT(a))for(let l=0;l<t.length;l++){const c=t[l];typeof c=="string"&&(t[l]=parseFloat(c))}else Zs[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,i=[];for(let s=0;s<t.length;s++)(t[s]===null||n5(t[s]))&&i.push(s);i.length&&c5(t,i,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:i}=this;if(!t||!t.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Zs[i](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&t.getValue(i,s).jump(s,!1)}measureEndState(){var a;const{element:t,name:n,unresolvedKeyframes:i}=this;if(!t||!t.current)return;const s=t.getValue(n);s&&s.jump(this.measuredOrigin,!1);const r=i.length-1,o=i[r];i[r]=Zs[n](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([l,c])=>{t.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function h5(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let i=document;const s=(n==null?void 0:n[e])??i.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}const vk=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function wk(e){return Ob(e)&&"offsetHeight"in e}const jT=30,d5=e=>!isNaN(parseFloat(e));class f5{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{var r;const s=Be.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&((r=this.events.change)==null||r.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=Be.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=d5(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new n_);const i=this.events[t].add(n);return t==="change"?()=>{i(),Pt.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-i}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Be.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>jT)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,jT);return Fb(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,n;(t=this.dependents)==null||t.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function So(e,t){return new f5(e,t)}const{schedule:y_}=Qb(queueMicrotask,!1),_n={x:!1,y:!1};function Tk(){return _n.x||_n.y}function p5(e){return e==="x"||e==="y"?_n[e]?null:(_n[e]=!0,()=>{_n[e]=!1}):_n.x||_n.y?null:(_n.x=_n.y=!0,()=>{_n.x=_n.y=!1})}function xk(e,t){const n=h5(e),i=new AbortController,s={passive:!0,...t,signal:i.signal};return[n,s,()=>i.abort()]}function BT(e){return!(e.pointerType==="touch"||Tk())}function m5(e,t,n={}){const[i,s,r]=xk(e,n),o=a=>{if(!BT(a))return;const{target:l}=a,c=t(l,a);if(typeof c!="function"||!l)return;const h=d=>{BT(d)&&(c(d),l.removeEventListener("pointerleave",h))};l.addEventListener("pointerleave",h,s)};return i.forEach(a=>{a.addEventListener("pointerenter",o,s)}),r}const Ek=(e,t)=>t?e===t?!0:Ek(e,t.parentElement):!1,__=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,g5=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function y5(e){return g5.has(e.tagName)||e.tabIndex!==-1}const Ru=new WeakSet;function UT(e){return t=>{t.key==="Enter"&&e(t)}}function Kf(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const _5=(e,t)=>{const n=e.currentTarget;if(!n)return;const i=UT(()=>{if(Ru.has(n))return;Kf(n,"down");const s=UT(()=>{Kf(n,"up")}),r=()=>Kf(n,"cancel");n.addEventListener("keyup",s,t),n.addEventListener("blur",r,t)});n.addEventListener("keydown",i,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),t)};function zT(e){return __(e)&&!Tk()}function v5(e,t,n={}){const[i,s,r]=xk(e,n),o=a=>{const l=a.currentTarget;if(!zT(a))return;Ru.add(l);const c=t(l,a),h=(m,v)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",f),Ru.has(l)&&Ru.delete(l),zT(m)&&typeof c=="function"&&c(m,{success:v})},d=m=>{h(m,l===window||l===document||n.useGlobalTarget||Ek(l,m.target))},f=m=>{h(m,!1)};window.addEventListener("pointerup",d,s),window.addEventListener("pointercancel",f,s)};return i.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,s),wk(a)&&(a.addEventListener("focus",c=>_5(c,s)),!y5(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),r}function Sk(e){return Ob(e)&&"ownerSVGElement"in e}function w5(e){return Sk(e)&&e.tagName==="svg"}const Te=e=>!!(e&&e.getVelocity),T5=[...gk,Wt,vs],x5=e=>T5.find(mk(e)),v_=j.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function $T(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function E5(...e){return t=>{let n=!1;const i=e.map(s=>{const r=$T(s,t);return!n&&typeof r=="function"&&(n=!0),r});if(n)return()=>{for(let s=0;s<i.length;s++){const r=i[s];typeof r=="function"?r():$T(e[s],null)}}}}function S5(...e){return j.useCallback(E5(...e),e)}class I5 extends j.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const i=n.offsetParent,s=wk(i)&&i.offsetWidth||0,r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft,r.right=s-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function A5({children:e,isPresent:t,anchorX:n,root:i}){const s=j.useId(),r=j.useRef(null),o=j.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=j.useContext(v_),l=S5(r,e==null?void 0:e.ref);return j.useInsertionEffect(()=>{const{width:c,height:h,top:d,left:f,right:m}=o.current;if(t||!r.current||!c||!h)return;const v=n==="left"?`left: ${f}`:`right: ${m}`;r.current.dataset.motionPopId=s;const x=document.createElement("style");a&&(x.nonce=a);const E=i??document.head;return E.appendChild(x),x.sheet&&x.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${h}px !important;
            ${v}px !important;
            top: ${d}px !important;
          }
        `),()=>{E.contains(x)&&E.removeChild(x)}},[t]),R.jsx(I5,{isPresent:t,childRef:r,sizeRef:o,children:j.cloneElement(e,{ref:l})})}const b5=({children:e,initial:t,isPresent:n,onExitComplete:i,custom:s,presenceAffectsLayout:r,mode:o,anchorX:a,root:l})=>{const c=Yy(k5),h=j.useId();let d=!0,f=j.useMemo(()=>(d=!1,{id:h,initial:t,isPresent:n,custom:s,onExitComplete:m=>{c.set(m,!0);for(const v of c.values())if(!v)return;i&&i()},register:m=>(c.set(m,!1),()=>c.delete(m))}),[n,c,i]);return r&&d&&(f={...f}),j.useMemo(()=>{c.forEach((m,v)=>c.set(v,!1))},[n]),j.useEffect(()=>{!n&&!c.size&&i&&i()},[n]),o==="popLayout"&&(e=R.jsx(A5,{isPresent:n,anchorX:a,root:l,children:e})),R.jsx(Ad.Provider,{value:f,children:e})};function k5(){return new Map}function Ik(e=!0){const t=j.useContext(Ad);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:i,register:s}=t,r=j.useId();j.useEffect(()=>{if(e)return s(r)},[e]);const o=j.useCallback(()=>e&&i&&i(r),[r,i,e]);return!n&&i?[!1,o]:[!0]}const Kc=e=>e.key||"";function HT(e){const t=[];return j.Children.forEach(e,n=>{j.isValidElement(n)&&t.push(n)}),t}const Qa=({children:e,custom:t,initial:n=!0,onExitComplete:i,presenceAffectsLayout:s=!0,mode:r="sync",propagate:o=!1,anchorX:a="left",root:l})=>{const[c,h]=Ik(o),d=j.useMemo(()=>HT(e),[e]),f=o&&!c?[]:d.map(Kc),m=j.useRef(!0),v=j.useRef(d),x=Yy(()=>new Map),[E,y]=j.useState(d),[w,S]=j.useState(d);Vb(()=>{m.current=!1,v.current=d;for(let V=0;V<w.length;V++){const T=Kc(w[V]);f.includes(T)?x.delete(T):x.get(T)!==!0&&x.set(T,!1)}},[w,f.length,f.join("-")]);const D=[];if(d!==E){let V=[...d];for(let T=0;T<w.length;T++){const _=w[T],A=Kc(_);f.includes(A)||(V.splice(T,0,_),D.push(_))}return r==="wait"&&D.length&&(V=D),S(HT(V)),y(d),null}const{forceRender:M}=j.useContext(Qy);return R.jsx(R.Fragment,{children:w.map(V=>{const T=Kc(V),_=o&&!c?!1:d===w||f.includes(T),A=()=>{if(x.has(T))x.set(T,!0);else return;let b=!0;x.forEach(P=>{P||(b=!1)}),b&&(M==null||M(),S(v.current),o&&(h==null||h()),i&&i())};return R.jsx(b5,{isPresent:_,initial:!m.current||n?void 0:!1,custom:t,presenceAffectsLayout:s,mode:r,root:l,onExitComplete:_?void 0:A,anchorX:a,children:V},T)})})},Ak=j.createContext({strict:!1}),WT={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Io={};for(const e in WT)Io[e]={isEnabled:t=>WT[e].some(n=>!!t[n])};function P5(e){for(const t in e)Io[t]={...Io[t],...e[t]}}const C5=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Dh(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||C5.has(e)}let bk=e=>!Dh(e);function R5(e){typeof e=="function"&&(bk=t=>t.startsWith("on")?!Dh(t):e(t))}try{R5(require("@emotion/is-prop-valid").default)}catch{}function D5(e,t,n){const i={};for(const s in e)s==="values"&&typeof e.values=="object"||(bk(s)||n===!0&&Dh(s)||!t&&!Dh(s)||e.draggable&&s.startsWith("onDrag"))&&(i[s]=e[s]);return i}const bd=j.createContext({});function kd(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Ml(e){return typeof e=="string"||Array.isArray(e)}const w_=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],T_=["initial",...w_];function Pd(e){return kd(e.animate)||T_.some(t=>Ml(e[t]))}function kk(e){return!!(Pd(e)||e.variants)}function M5(e,t){if(Pd(e)){const{initial:n,animate:i}=e;return{initial:n===!1||Ml(n)?n:void 0,animate:Ml(i)?i:void 0}}return e.inherit!==!1?t:{}}function V5(e){const{initial:t,animate:n}=M5(e,j.useContext(bd));return j.useMemo(()=>({initial:t,animate:n}),[qT(t),qT(n)])}function qT(e){return Array.isArray(e)?e.join(" "):e}const Vl={};function N5(e){for(const t in e)Vl[t]=e[t],r_(t)&&(Vl[t].isCSSVariable=!0)}function Pk(e,{layout:t,layoutId:n}){return Uo.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Vl[e]||e==="opacity")}const O5={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},L5=Bo.length;function F5(e,t,n){let i="",s=!0;for(let r=0;r<L5;r++){const o=Bo[r],a=e[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const c=vk(a,g_[o]);if(!l){s=!1;const h=O5[o]||o;i+=`${h}(${c}) `}n&&(t[o]=c)}}return i=i.trim(),n?i=n(t,s?"":i):s&&(i="none"),i}function x_(e,t,n){const{style:i,vars:s,transformOrigin:r}=e;let o=!1,a=!1;for(const l in t){const c=t[l];if(Uo.has(l)){o=!0;continue}else if(r_(l)){s[l]=c;continue}else{const h=vk(c,g_[l]);l.startsWith("origin")?(a=!0,r[l]=h):i[l]=h}}if(t.transform||(o||n?i.transform=F5(t,e.transform,n):i.transform&&(i.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:h=0}=r;i.transformOrigin=`${l} ${c} ${h}`}}const E_=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Ck(e,t,n){for(const i in t)!Te(t[i])&&!Pk(i,n)&&(e[i]=t[i])}function j5({transformTemplate:e},t){return j.useMemo(()=>{const n=E_();return x_(n,t,e),Object.assign({},n.vars,n.style)},[t])}function B5(e,t){const n=e.style||{},i={};return Ck(i,n,e),Object.assign(i,j5(e,t)),i}function U5(e,t){const n={},i=B5(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=i,n}const z5={offset:"stroke-dashoffset",array:"stroke-dasharray"},$5={offset:"strokeDashoffset",array:"strokeDasharray"};function H5(e,t,n=1,i=0,s=!0){e.pathLength=1;const r=s?z5:$5;e[r.offset]=X.transform(-i);const o=X.transform(t),a=X.transform(n);e[r.array]=`${o} ${a}`}function Rk(e,{attrX:t,attrY:n,attrScale:i,pathLength:s,pathSpacing:r=1,pathOffset:o=0,...a},l,c,h){if(x_(e,a,c),l){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:d,style:f}=e;d.transform&&(f.transform=d.transform,delete d.transform),(f.transform||d.transformOrigin)&&(f.transformOrigin=d.transformOrigin??"50% 50%",delete d.transformOrigin),f.transform&&(f.transformBox=(h==null?void 0:h.transformBox)??"fill-box",delete d.transformBox),t!==void 0&&(d.x=t),n!==void 0&&(d.y=n),i!==void 0&&(d.scale=i),s!==void 0&&H5(d,s,r,o,!1)}const Dk=()=>({...E_(),attrs:{}}),Mk=e=>typeof e=="string"&&e.toLowerCase()==="svg";function W5(e,t,n,i){const s=j.useMemo(()=>{const r=Dk();return Rk(r,t,Mk(i),e.transformTemplate,e.style),{...r.attrs,style:{...r.style}}},[t]);if(e.style){const r={};Ck(r,e.style,e),s.style={...r,...s.style}}return s}const q5=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function S_(e){return typeof e!="string"||e.includes("-")?!1:!!(q5.indexOf(e)>-1||/[A-Z]/u.test(e))}function K5(e,t,n,{latestValues:i},s,r=!1){const a=(S_(e)?W5:U5)(t,i,s,e),l=D5(t,typeof e=="string",r),c=e!==j.Fragment?{...l,...a,ref:n}:{},{children:h}=t,d=j.useMemo(()=>Te(h)?h.get():h,[h]);return j.createElement(e,{...c,children:d})}function KT(e){const t=[{},{}];return e==null||e.values.forEach((n,i)=>{t[0][i]=n.get(),t[1][i]=n.getVelocity()}),t}function I_(e,t,n,i){if(typeof t=="function"){const[s,r]=KT(i);t=t(n!==void 0?n:e.custom,s,r)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[s,r]=KT(i);t=t(n!==void 0?n:e.custom,s,r)}return t}function Du(e){return Te(e)?e.get():e}function G5({scrapeMotionValuesFromProps:e,createRenderState:t},n,i,s){return{latestValues:Q5(n,i,s,e),renderState:t()}}function Q5(e,t,n,i){const s={},r=i(e,{});for(const f in r)s[f]=Du(r[f]);let{initial:o,animate:a}=e;const l=Pd(e),c=kk(e);t&&c&&!l&&e.inherit!==!1&&(o===void 0&&(o=t.initial),a===void 0&&(a=t.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const d=h?a:o;if(d&&typeof d!="boolean"&&!kd(d)){const f=Array.isArray(d)?d:[d];for(let m=0;m<f.length;m++){const v=I_(e,f[m]);if(v){const{transitionEnd:x,transition:E,...y}=v;for(const w in y){let S=y[w];if(Array.isArray(S)){const D=h?S.length-1:0;S=S[D]}S!==null&&(s[w]=S)}for(const w in x)s[w]=x[w]}}}return s}const Vk=e=>(t,n)=>{const i=j.useContext(bd),s=j.useContext(Ad),r=()=>G5(e,t,i,s);return n?r():Yy(r)};function A_(e,t,n){var r;const{style:i}=e,s={};for(const o in i)(Te(i[o])||t.style&&Te(t.style[o])||Pk(o,e)||((r=n==null?void 0:n.getValue(o))==null?void 0:r.liveStyle)!==void 0)&&(s[o]=i[o]);return s}const Y5=Vk({scrapeMotionValuesFromProps:A_,createRenderState:E_});function Nk(e,t,n){const i=A_(e,t,n);for(const s in e)if(Te(e[s])||Te(t[s])){const r=Bo.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;i[r]=e[s]}return i}const X5=Vk({scrapeMotionValuesFromProps:Nk,createRenderState:Dk}),J5=Symbol.for("motionComponentSymbol");function zr(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function Z5(e,t,n){return j.useCallback(i=>{i&&e.onMount&&e.onMount(i),t&&(i?t.mount(i):t.unmount()),n&&(typeof n=="function"?n(i):zr(n)&&(n.current=i))},[t])}const b_=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),t3="framerAppearId",Ok="data-"+b_(t3),Lk=j.createContext({});function e3(e,t,n,i,s){var x,E;const{visualElement:r}=j.useContext(bd),o=j.useContext(Ak),a=j.useContext(Ad),l=j.useContext(v_).reducedMotion,c=j.useRef(null);i=i||o.renderer,!c.current&&i&&(c.current=i(e,{visualState:t,parent:r,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const h=c.current,d=j.useContext(Lk);h&&!h.projection&&s&&(h.type==="html"||h.type==="svg")&&n3(c.current,n,s,d);const f=j.useRef(!1);j.useInsertionEffect(()=>{h&&f.current&&h.update(n,a)});const m=n[Ok],v=j.useRef(!!m&&!((x=window.MotionHandoffIsComplete)!=null&&x.call(window,m))&&((E=window.MotionHasOptimisedAnimation)==null?void 0:E.call(window,m)));return Vb(()=>{h&&(f.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h.scheduleRenderMicrotask(),v.current&&h.animationState&&h.animationState.animateChanges())}),j.useEffect(()=>{h&&(!v.current&&h.animationState&&h.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{var y;(y=window.MotionHandoffMarkAsComplete)==null||y.call(window,m)}),v.current=!1),h.enteringChildren=void 0)}),h}function n3(e,t,n,i){const{layoutId:s,layout:r,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c,layoutCrossfade:h}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:Fk(e.parent)),e.projection.setOptions({layoutId:s,layout:r,alwaysMeasureLayout:!!o||a&&zr(a),visualElement:e,animationType:typeof r=="string"?r:"both",initialPromotionConfig:i,crossfade:h,layoutScroll:l,layoutRoot:c})}function Fk(e){if(e)return e.options.allowProjection!==!1?e.projection:Fk(e.parent)}function Gf(e,{forwardMotionProps:t=!1}={},n,i){n&&P5(n);const s=S_(e)?X5:Y5;function r(a,l){let c;const h={...j.useContext(v_),...a,layoutId:i3(a)},{isStatic:d}=h,f=V5(a),m=s(a,d);if(!d&&Xy){s3();const v=r3(h);c=v.MeasureLayout,f.visualElement=e3(e,m,h,i,v.ProjectionNode)}return R.jsxs(bd.Provider,{value:f,children:[c&&f.visualElement?R.jsx(c,{visualElement:f.visualElement,...h}):null,K5(e,a,Z5(m,f.visualElement,l),m,d,t)]})}r.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const o=j.forwardRef(r);return o[J5]=e,o}function i3({layoutId:e}){const t=j.useContext(Qy).id;return t&&e!==void 0?t+"-"+e:e}function s3(e,t){j.useContext(Ak).strict}function r3(e){const{drag:t,layout:n}=Io;if(!t&&!n)return{};const i={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function o3(e,t){if(typeof Proxy>"u")return Gf;const n=new Map,i=(r,o)=>Gf(r,o,e,t),s=(r,o)=>i(r,o);return new Proxy(s,{get:(r,o)=>o==="create"?i:(n.has(o)||n.set(o,Gf(o,void 0,e,t)),n.get(o))})}function jk({top:e,left:t,right:n,bottom:i}){return{x:{min:t,max:n},y:{min:e,max:i}}}function a3({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function l3(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),i=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function Qf(e){return e===void 0||e===1}function Km({scale:e,scaleX:t,scaleY:n}){return!Qf(e)||!Qf(t)||!Qf(n)}function Us(e){return Km(e)||Bk(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function Bk(e){return GT(e.x)||GT(e.y)}function GT(e){return e&&e!=="0%"}function Mh(e,t,n){const i=e-n,s=t*i;return n+s}function QT(e,t,n,i,s){return s!==void 0&&(e=Mh(e,s,i)),Mh(e,n,i)+t}function Gm(e,t=0,n=1,i,s){e.min=QT(e.min,t,n,i,s),e.max=QT(e.max,t,n,i,s)}function Uk(e,{x:t,y:n}){Gm(e.x,t.translate,t.scale,t.originPoint),Gm(e.y,n.translate,n.scale,n.originPoint)}const YT=.999999999999,XT=1.0000000000001;function c3(e,t,n,i=!1){const s=n.length;if(!s)return;t.x=t.y=1;let r,o;for(let a=0;a<s;a++){r=n[a],o=r.projectionDelta;const{visualElement:l}=r.options;l&&l.props.style&&l.props.style.display==="contents"||(i&&r.options.layoutScroll&&r.scroll&&r!==r.root&&Hr(e,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,Uk(e,o)),i&&Us(r.latestValues)&&Hr(e,r.latestValues))}t.x<XT&&t.x>YT&&(t.x=1),t.y<XT&&t.y>YT&&(t.y=1)}function $r(e,t){e.min=e.min+t,e.max=e.max+t}function JT(e,t,n,i,s=.5){const r=Rt(e.min,e.max,s);Gm(e,t,n,r,i)}function Hr(e,t){JT(e.x,t.x,t.scaleX,t.scale,t.originX),JT(e.y,t.y,t.scaleY,t.scale,t.originY)}function zk(e,t){return jk(l3(e.getBoundingClientRect(),t))}function u3(e,t,n){const i=zk(e,n),{scroll:s}=t;return s&&($r(i.x,s.offset.x),$r(i.y,s.offset.y)),i}const ZT=()=>({translate:0,scale:1,origin:0,originPoint:0}),Wr=()=>({x:ZT(),y:ZT()}),tx=()=>({min:0,max:0}),Ft=()=>({x:tx(),y:tx()}),Qm={current:null},$k={current:!1};function h3(){if($k.current=!0,!!Xy)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Qm.current=e.matches;e.addEventListener("change",t),t()}else Qm.current=!1}const d3=new WeakMap;function f3(e,t,n){for(const i in t){const s=t[i],r=n[i];if(Te(s))e.addValue(i,s);else if(Te(r))e.addValue(i,So(s,{owner:e}));else if(r!==s)if(e.hasValue(i)){const o=e.getValue(i);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=e.getStaticValue(i);e.addValue(i,So(o!==void 0?o:s,{owner:e}))}}for(const i in n)t[i]===void 0&&e.removeValue(i);return t}const ex=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class p3{scrapeMotionValuesFromProps(t,n,i){return{}}constructor({parent:t,props:n,presenceContext:i,reducedMotionConfig:s,blockInitialAnimation:r,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=p_,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=Be.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,Pt.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=t,this.props=n,this.presenceContext=i,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.blockInitialAnimation=!!r,this.isControllingVariants=Pd(n),this.isVariantNode=kk(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:h,...d}=this.scrapeMotionValuesFromProps(n,{},this);for(const f in d){const m=d[f];l[f]!==void 0&&Te(m)&&m.set(l[f])}}mount(t){var n;this.current=t,d3.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((i,s)=>this.bindToMotionValue(s,i)),$k.current||h3(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Qm.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),_s(this.notifyUpdate),_s(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const i=this.features[n];i&&(i.unmount(),i.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const i=Uo.has(t);i&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&Pt.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let r;window.MotionCheckAppearSync&&(r=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{s(),r&&r(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Io){const n=Io[t];if(!n)continue;const{isEnabled:i,Feature:s}=n;if(!this.features[t]&&s&&i(this.props)&&(this.features[t]=new s(this)),this.features[t]){const r=this.features[t];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ft()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<ex.length;i++){const s=ex[i];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const r="on"+s,o=t[r];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=f3(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const i=this.values.get(t);n!==i&&(i&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let i=this.values.get(t);return i===void 0&&n!==void 0&&(i=So(n===null?void 0:n,{owner:this}),this.addValue(t,i)),i}readValue(t,n){let i=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return i!=null&&(typeof i=="string"&&(Nb(i)||Lb(i))?i=parseFloat(i):!x5(i)&&vs.test(n)&&(i=_k(t,n)),this.setBaseTarget(t,Te(i)?i.get():i)),Te(i)?i.get():i}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var r;const{initial:n}=this.props;let i;if(typeof n=="string"||typeof n=="object"){const o=I_(this.props,n,(r=this.presenceContext)==null?void 0:r.custom);o&&(i=o[t])}if(n&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!Te(s)?s:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new n_),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){y_.render(this.render)}}class Hk extends p3{constructor(){super(...arguments),this.KeyframeResolver=u5}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:i}){delete n[t],delete i[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Te(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function Wk(e,{style:t,vars:n},i,s){const r=e.style;let o;for(o in t)r[o]=t[o];s==null||s.applyProjectionStyles(r,i);for(o in n)r.setProperty(o,n[o])}function m3(e){return window.getComputedStyle(e)}class g3 extends Hk{constructor(){super(...arguments),this.type="html",this.renderInstance=Wk}readValueFromInstance(t,n){var i;if(Uo.has(n))return(i=this.projection)!=null&&i.isProjecting?Bm(n):P6(t,n);{const s=m3(t),r=(r_(n)?s.getPropertyValue(n):s[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(t,{transformPagePoint:n}){return zk(t,n)}build(t,n,i){x_(t,n,i.transformTemplate)}scrapeMotionValuesFromProps(t,n,i){return A_(t,n,i)}}const qk=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function y3(e,t,n,i){Wk(e,t,void 0,i);for(const s in t.attrs)e.setAttribute(qk.has(s)?s:b_(s),t.attrs[s])}class _3 extends Hk{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ft}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Uo.has(n)){const i=yk(n);return i&&i.default||0}return n=qk.has(n)?n:b_(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,i){return Nk(t,n,i)}build(t,n,i){Rk(t,n,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(t,n,i,s){y3(t,n,i,s)}mount(t){this.isSVGTag=Mk(t.tagName),super.mount(t)}}const v3=(e,t)=>S_(e)?new _3(t):new g3(t,{allowProjection:e!==j.Fragment});function ro(e,t,n){const i=e.getProps();return I_(i,t,n!==void 0?n:i.custom,e)}const Ym=e=>Array.isArray(e);function w3(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,So(n))}function T3(e){return Ym(e)?e[e.length-1]||0:e}function x3(e,t){const n=ro(e,t);let{transitionEnd:i={},transition:s={},...r}=n||{};r={...r,...i};for(const o in r){const a=T3(r[o]);w3(e,o,a)}}function E3(e){return!!(Te(e)&&e.add)}function Xm(e,t){const n=e.getValue("willChange");if(E3(n))return n.add(t);if(!n&&vi.WillChange){const i=new vi.WillChange("auto");e.addValue("willChange",i),i.add(t)}}function Kk(e){return e.props[Ok]}const S3=e=>e!==null;function I3(e,{repeat:t,repeatType:n="loop"},i){const s=e.filter(S3),r=t&&n!=="loop"&&t%2===1?0:s.length-1;return s[r]}const A3={type:"spring",stiffness:500,damping:25,restSpeed:10},b3=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),k3={type:"keyframes",duration:.8},P3={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},C3=(e,{keyframes:t})=>t.length>2?k3:Uo.has(e)?e.startsWith("scale")?b3(t[1]):A3:P3;function R3({when:e,delay:t,delayChildren:n,staggerChildren:i,staggerDirection:s,repeat:r,repeatType:o,repeatDelay:a,from:l,elapsed:c,...h}){return!!Object.keys(h).length}const k_=(e,t,n,i={},s,r)=>o=>{const a=m_(i,e)||{},l=a.delay||i.delay||0;let{elapsed:c=0}=i;c=c-Gn(l);const h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...a,delay:-c,onUpdate:f=>{t.set(f),a.onUpdate&&a.onUpdate(f)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:e,motionValue:t,element:r?void 0:s};R3(a)||Object.assign(h,C3(e,h)),h.duration&&(h.duration=Gn(h.duration)),h.repeatDelay&&(h.repeatDelay=Gn(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let d=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(Wm(h),h.delay===0&&(d=!0)),(vi.instantAnimations||vi.skipAnimations)&&(d=!0,Wm(h),h.delay=0),h.allowFlatten=!a.type&&!a.ease,d&&!r&&t.get()!==void 0){const f=I3(h.keyframes,a);if(f!==void 0){Pt.update(()=>{h.onUpdate(f),h.onComplete()});return}}return a.isSync?new f_(h):new J6(h)};function D3({protectedKeys:e,needsAnimating:t},n){const i=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,i}function Gk(e,t,{delay:n=0,transitionOverride:i,type:s}={}){let{transition:r=e.getDefaultTransition(),transitionEnd:o,...a}=t;i&&(r=i);const l=[],c=s&&e.animationState&&e.animationState.getState()[s];for(const h in a){const d=e.getValue(h,e.latestValues[h]??null),f=a[h];if(f===void 0||c&&D3(c,h))continue;const m={delay:n,...m_(r||{},h)},v=d.get();if(v!==void 0&&!d.isAnimating&&!Array.isArray(f)&&f===v&&!m.velocity)continue;let x=!1;if(window.MotionHandoffAnimation){const y=Kk(e);if(y){const w=window.MotionHandoffAnimation(y,h,Pt);w!==null&&(m.startTime=w,x=!0)}}Xm(e,h),d.start(k_(h,d,f,e.shouldReduceMotion&&pk.has(h)?{type:!1}:m,e,x));const E=d.animation;E&&l.push(E)}return o&&Promise.all(l).then(()=>{Pt.update(()=>{o&&x3(e,o)})}),l}function Qk(e,t,n,i=0,s=1){const r=Array.from(e).sort((c,h)=>c.sortNodePosition(h)).indexOf(t),o=e.size,a=(o-1)*i;return typeof n=="function"?n(r,o):s===1?r*i:a-r*i}function Jm(e,t,n={}){var l;const i=ro(e,t,n.type==="exit"?(l=e.presenceContext)==null?void 0:l.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const r=i?()=>Promise.all(Gk(e,i,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:h=0,staggerChildren:d,staggerDirection:f}=s;return M3(e,t,c,h,d,f,n)}:()=>Promise.resolve(),{when:a}=s;if(a){const[c,h]=a==="beforeChildren"?[r,o]:[o,r];return c().then(()=>h())}else return Promise.all([r(),o(n.delay)])}function M3(e,t,n=0,i=0,s=0,r=1,o){const a=[];for(const l of e.variantChildren)l.notify("AnimationStart",t),a.push(Jm(l,t,{...o,delay:n+(typeof i=="function"?0:i)+Qk(e.variantChildren,l,i,s,r)}).then(()=>l.notify("AnimationComplete",t)));return Promise.all(a)}function V3(e,t,n={}){e.notify("AnimationStart",t);let i;if(Array.isArray(t)){const s=t.map(r=>Jm(e,r,n));i=Promise.all(s)}else if(typeof t=="string")i=Jm(e,t,n);else{const s=typeof t=="function"?ro(e,t,n.custom):t;i=Promise.all(Gk(e,s,n))}return i.then(()=>{e.notify("AnimationComplete",t)})}function Yk(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}const N3=T_.length;function Xk(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?Xk(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<N3;n++){const i=T_[n],s=e.props[i];(Ml(s)||s===!1)&&(t[i]=s)}return t}const O3=[...w_].reverse(),L3=w_.length;function F3(e){return t=>Promise.all(t.map(({animation:n,options:i})=>V3(e,n,i)))}function j3(e){let t=F3(e),n=nx(),i=!0;const s=l=>(c,h)=>{var f;const d=ro(e,h,l==="exit"?(f=e.presenceContext)==null?void 0:f.custom:void 0);if(d){const{transition:m,transitionEnd:v,...x}=d;c={...c,...x,...v}}return c};function r(l){t=l(e)}function o(l){const{props:c}=e,h=Xk(e.parent)||{},d=[],f=new Set;let m={},v=1/0;for(let E=0;E<L3;E++){const y=O3[E],w=n[y],S=c[y]!==void 0?c[y]:h[y],D=Ml(S),M=y===l?w.isActive:null;M===!1&&(v=E);let V=S===h[y]&&S!==c[y]&&D;if(V&&i&&e.manuallyAnimateOnMount&&(V=!1),w.protectedKeys={...m},!w.isActive&&M===null||!S&&!w.prevProp||kd(S)||typeof S=="boolean")continue;const T=B3(w.prevProp,S);let _=T||y===l&&w.isActive&&!V&&D||E>v&&D,A=!1;const b=Array.isArray(S)?S:[S];let P=b.reduce(s(y),{});M===!1&&(P={});const{prevResolvedValues:C={}}=w,k={...C,...P},it=et=>{_=!0,f.has(et)&&(A=!0,f.delete(et)),w.needsAnimating[et]=!0;const U=e.getValue(et);U&&(U.liveStyle=!1)};for(const et in k){const U=P[et],H=C[et];if(m.hasOwnProperty(et))continue;let K=!1;Ym(U)&&Ym(H)?K=!Yk(U,H):K=U!==H,K?U!=null?it(et):f.add(et):U!==void 0&&f.has(et)?it(et):w.protectedKeys[et]=!0}w.prevProp=S,w.prevResolvedValues=P,w.isActive&&(m={...m,...P}),i&&e.blockInitialAnimation&&(_=!1);const Y=V&&T;_&&(!Y||A)&&d.push(...b.map(et=>{const U={type:y};if(typeof et=="string"&&i&&!Y&&e.manuallyAnimateOnMount&&e.parent){const{parent:H}=e,K=ro(H,et);if(H.enteringChildren&&K){const{delayChildren:rt}=K.transition||{};U.delay=Qk(H.enteringChildren,e,rt)}}return{animation:et,options:U}}))}if(f.size){const E={};if(typeof c.initial!="boolean"){const y=ro(e,Array.isArray(c.initial)?c.initial[0]:c.initial);y&&y.transition&&(E.transition=y.transition)}f.forEach(y=>{const w=e.getBaseTarget(y),S=e.getValue(y);S&&(S.liveStyle=!0),E[y]=w??null}),d.push({animation:E})}let x=!!d.length;return i&&(c.initial===!1||c.initial===c.animate)&&!e.manuallyAnimateOnMount&&(x=!1),i=!1,x?t(d):Promise.resolve()}function a(l,c){var d;if(n[l].isActive===c)return Promise.resolve();(d=e.variantChildren)==null||d.forEach(f=>{var m;return(m=f.animationState)==null?void 0:m.setActive(l,c)}),n[l].isActive=c;const h=o(l);for(const f in n)n[f].protectedKeys={};return h}return{animateChanges:o,setActive:a,setAnimateFunction:r,getState:()=>n,reset:()=>{n=nx()}}}function B3(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!Yk(t,e):!1}function Ms(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function nx(){return{animate:Ms(!0),whileInView:Ms(),whileHover:Ms(),whileTap:Ms(),whileDrag:Ms(),whileFocus:Ms(),exit:Ms()}}class As{constructor(t){this.isMounted=!1,this.node=t}update(){}}class U3 extends As{constructor(t){super(t),t.animationState||(t.animationState=j3(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();kd(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let z3=0;class $3 extends As{constructor(){super(...arguments),this.id=z3++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===i)return;const s=this.node.animationState.setActive("exit",!t);n&&!t&&s.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const H3={animation:{Feature:U3},exit:{Feature:$3}};function Nl(e,t,n,i={passive:!0}){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n)}function oc(e){return{point:{x:e.pageX,y:e.pageY}}}const W3=e=>t=>__(t)&&e(t,oc(t));function Ya(e,t,n,i){return Nl(e,t,W3(n),i)}const Jk=1e-4,q3=1-Jk,K3=1+Jk,Zk=.01,G3=0-Zk,Q3=0+Zk;function Ce(e){return e.max-e.min}function Y3(e,t,n){return Math.abs(e-t)<=n}function ix(e,t,n,i=.5){e.origin=i,e.originPoint=Rt(t.min,t.max,e.origin),e.scale=Ce(n)/Ce(t),e.translate=Rt(n.min,n.max,e.origin)-e.originPoint,(e.scale>=q3&&e.scale<=K3||isNaN(e.scale))&&(e.scale=1),(e.translate>=G3&&e.translate<=Q3||isNaN(e.translate))&&(e.translate=0)}function Xa(e,t,n,i){ix(e.x,t.x,n.x,i?i.originX:void 0),ix(e.y,t.y,n.y,i?i.originY:void 0)}function sx(e,t,n){e.min=n.min+t.min,e.max=e.min+Ce(t)}function X3(e,t,n){sx(e.x,t.x,n.x),sx(e.y,t.y,n.y)}function rx(e,t,n){e.min=t.min-n.min,e.max=e.min+Ce(t)}function Ja(e,t,n){rx(e.x,t.x,n.x),rx(e.y,t.y,n.y)}function nn(e){return[e("x"),e("y")]}const tP=({current:e})=>e?e.ownerDocument.defaultView:null,ox=(e,t)=>Math.abs(e-t);function J3(e,t){const n=ox(e.x,t.x),i=ox(e.y,t.y);return Math.sqrt(n**2+i**2)}class eP{constructor(t,n,{transformPagePoint:i,contextWindow:s=window,dragSnapToOrigin:r=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=Xf(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,v=J3(f.offset,{x:0,y:0})>=this.distanceThreshold;if(!m&&!v)return;const{point:x}=f,{timestamp:E}=ae;this.history.push({...x,timestamp:E});const{onStart:y,onMove:w}=this.handlers;m||(y&&y(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,f)},this.handlePointerMove=(f,m)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=Yf(m,this.transformPagePoint),Pt.update(this.updatePoint,!0)},this.handlePointerUp=(f,m)=>{this.end();const{onEnd:v,onSessionEnd:x,resumeAnimation:E}=this.handlers;if(this.dragSnapToOrigin&&E&&E(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=Xf(f.type==="pointercancel"?this.lastMoveEventInfo:Yf(m,this.transformPagePoint),this.history);this.startEvent&&v&&v(f,y),x&&x(f,y)},!__(t))return;this.dragSnapToOrigin=r,this.handlers=n,this.transformPagePoint=i,this.distanceThreshold=o,this.contextWindow=s||window;const a=oc(t),l=Yf(a,this.transformPagePoint),{point:c}=l,{timestamp:h}=ae;this.history=[{...c,timestamp:h}];const{onSessionStart:d}=n;d&&d(t,Xf(l,this.history)),this.removeListeners=ic(Ya(this.contextWindow,"pointermove",this.handlePointerMove),Ya(this.contextWindow,"pointerup",this.handlePointerUp),Ya(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),_s(this.updatePoint)}}function Yf(e,t){return t?{point:t(e.point)}:e}function ax(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Xf({point:e},t){return{point:e,delta:ax(e,nP(t)),offset:ax(e,Z3(t)),velocity:tj(t,.1)}}function Z3(e){return e[0]}function nP(e){return e[e.length-1]}function tj(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,i=null;const s=nP(e);for(;n>=0&&(i=e[n],!(s.timestamp-i.timestamp>Gn(t)));)n--;if(!i)return{x:0,y:0};const r=ln(s.timestamp-i.timestamp);if(r===0)return{x:0,y:0};const o={x:(s.x-i.x)/r,y:(s.y-i.y)/r};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function ej(e,{min:t,max:n},i){return t!==void 0&&e<t?e=i?Rt(t,e,i.min):Math.max(e,t):n!==void 0&&e>n&&(e=i?Rt(n,e,i.max):Math.min(e,n)),e}function lx(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function nj(e,{top:t,left:n,bottom:i,right:s}){return{x:lx(e.x,n,s),y:lx(e.y,t,i)}}function cx(e,t){let n=t.min-e.min,i=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,i]=[i,n]),{min:n,max:i}}function ij(e,t){return{x:cx(e.x,t.x),y:cx(e.y,t.y)}}function sj(e,t){let n=.5;const i=Ce(e),s=Ce(t);return s>i?n=Cl(t.min,t.max-i,e.min):i>s&&(n=Cl(e.min,e.max-s,t.min)),_i(0,1,n)}function rj(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const Zm=.35;function oj(e=Zm){return e===!1?e=0:e===!0&&(e=Zm),{x:ux(e,"left","right"),y:ux(e,"top","bottom")}}function ux(e,t,n){return{min:hx(e,t),max:hx(e,n)}}function hx(e,t){return typeof e=="number"?e:e[t]||0}const aj=new WeakMap;class lj{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ft(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:i}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const r=d=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(oc(d).point)},o=(d,f)=>{const{drag:m,dragPropagation:v,onDragStart:x}=this.getProps();if(m&&!v&&(this.openDragLock&&this.openDragLock(),this.openDragLock=p5(m),!this.openDragLock))return;this.latestPointerEvent=d,this.latestPanInfo=f,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),nn(y=>{let w=this.getAxisMotionValue(y).get()||0;if(Qn.test(w)){const{projection:S}=this.visualElement;if(S&&S.layout){const D=S.layout.layoutBox[y];D&&(w=Ce(D)*(parseFloat(w)/100))}}this.originPoint[y]=w}),x&&Pt.postRender(()=>x(d,f)),Xm(this.visualElement,"transform");const{animationState:E}=this.visualElement;E&&E.setActive("whileDrag",!0)},a=(d,f)=>{this.latestPointerEvent=d,this.latestPanInfo=f;const{dragPropagation:m,dragDirectionLock:v,onDirectionLock:x,onDrag:E}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:y}=f;if(v&&this.currentDirection===null){this.currentDirection=cj(y),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",f.point,y),this.updateAxis("y",f.point,y),this.visualElement.render(),E&&E(d,f)},l=(d,f)=>{this.latestPointerEvent=d,this.latestPanInfo=f,this.stop(d,f),this.latestPointerEvent=null,this.latestPanInfo=null},c=()=>nn(d=>{var f;return this.getAnimationState(d)==="paused"&&((f=this.getAxisMotionValue(d).animation)==null?void 0:f.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new eP(t,{onSessionStart:r,onStart:o,onMove:a,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,distanceThreshold:i,contextWindow:tP(this.visualElement)})}stop(t,n){const i=t||this.latestPointerEvent,s=n||this.latestPanInfo,r=this.isDragging;if(this.cancel(),!r||!s||!i)return;const{velocity:o}=s;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&Pt.postRender(()=>a(i,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,i){const{drag:s}=this.getProps();if(!i||!Gc(t,s,this.currentDirection))return;const r=this.getAxisMotionValue(t);let o=this.originPoint[t]+i[t];this.constraints&&this.constraints[t]&&(o=ej(o,this.constraints[t],this.elastic[t])),r.set(o)}resolveConstraints(){var r;const{dragConstraints:t,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(r=this.visualElement.projection)==null?void 0:r.layout,s=this.constraints;t&&zr(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=nj(i.layoutBox,t):this.constraints=!1,this.elastic=oj(n),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&nn(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=rj(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!zr(t))return!1;const i=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const r=u3(i,s.root,this.visualElement.getTransformPagePoint());let o=ij(s.layout.layoutBox,r);if(n){const a=n(a3(o));this.hasMutatedConstraints=!!a,a&&(o=jk(a))}return o}startAnimation(t){const{drag:n,dragMomentum:i,dragElastic:s,dragTransition:r,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=nn(h=>{if(!Gc(h,n,this.currentDirection))return;let d=l&&l[h]||{};o&&(d={min:0,max:0});const f=s?200:1e6,m=s?40:1e7,v={type:"inertia",velocity:i?t[h]:0,bounceStiffness:f,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...r,...d};return this.startAxisValueAnimation(h,v)});return Promise.all(c).then(a)}startAxisValueAnimation(t,n){const i=this.getAxisMotionValue(t);return Xm(this.visualElement,t),i.start(k_(t,i,0,n,this.visualElement,!1))}stopAnimation(){nn(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){nn(t=>{var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,i=this.visualElement.getProps(),s=i[n];return s||this.visualElement.getValue(t,(i.initial?i.initial[t]:void 0)||0)}snapToCursor(t){nn(n=>{const{drag:i}=this.getProps();if(!Gc(n,i,this.currentDirection))return;const{projection:s}=this.visualElement,r=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[n];r.set(t[n]-Rt(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!zr(n)||!i||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};nn(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();s[o]=sj({min:l,max:l},this.constraints[o])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),nn(o=>{if(!Gc(o,t,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(Rt(l,c,s[o]))})}addListeners(){if(!this.visualElement.current)return;aj.set(this.visualElement,this);const t=this.visualElement.current,n=Ya(t,"pointerdown",l=>{const{drag:c,dragListener:h=!0}=this.getProps();c&&h&&this.start(l)}),i=()=>{const{dragConstraints:l}=this.getProps();zr(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,r=s.addEventListener("measure",i);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Pt.read(i);const o=Nl(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(nn(h=>{const d=this.getAxisMotionValue(h);d&&(this.originPoint[h]+=l[h].translate,d.set(d.get()+l[h].translate))}),this.visualElement.render())});return()=>{o(),n(),r(),a&&a()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:s=!1,dragConstraints:r=!1,dragElastic:o=Zm,dragMomentum:a=!0}=t;return{...t,drag:n,dragDirectionLock:i,dragPropagation:s,dragConstraints:r,dragElastic:o,dragMomentum:a}}}function Gc(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function cj(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class uj extends As{constructor(t){super(t),this.removeGroupControls=dn,this.removeListeners=dn,this.controls=new lj(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||dn}unmount(){this.removeGroupControls(),this.removeListeners()}}const dx=e=>(t,n)=>{e&&Pt.postRender(()=>e(t,n))};class hj extends As{constructor(){super(...arguments),this.removePointerDownListener=dn}onPointerDown(t){this.session=new eP(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:tP(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:i,onPanEnd:s}=this.node.getProps();return{onSessionStart:dx(t),onStart:dx(n),onMove:i,onEnd:(r,o)=>{delete this.session,s&&Pt.postRender(()=>s(r,o))}}}mount(){this.removePointerDownListener=Ya(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Mu={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function fx(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const ma={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(X.test(e))e=parseFloat(e);else return e;const n=fx(e,t.target.x),i=fx(e,t.target.y);return`${n}% ${i}%`}},dj={correct:(e,{treeScale:t,projectionDelta:n})=>{const i=e,s=vs.parse(e);if(s.length>5)return i;const r=vs.createTransformer(e),o=typeof s[0]!="number"?1:0,a=n.x.scale*t.x,l=n.y.scale*t.y;s[0+o]/=a,s[1+o]/=l;const c=Rt(a,l,.5);return typeof s[2+o]=="number"&&(s[2+o]/=c),typeof s[3+o]=="number"&&(s[3+o]/=c),r(s)}};let Jf=!1;class fj extends j.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:i,layoutId:s}=this.props,{projection:r}=t;N5(pj),r&&(n.group&&n.group.add(r),i&&i.register&&s&&i.register(r),Jf&&r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions({...r.options,onExitComplete:()=>this.safeToRemove()})),Mu.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:i,drag:s,isPresent:r}=this.props,{projection:o}=i;return o&&(o.isPresent=r,Jf=!0,s||t.layoutDependency!==n||n===void 0||t.isPresent!==r?o.willUpdate():this.safeToRemove(),t.isPresent!==r&&(r?o.promote():o.relegate()||Pt.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),y_.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:s}=t;Jf=!0,s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),i&&i.deregister&&i.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function iP(e){const[t,n]=Ik(),i=j.useContext(Qy);return R.jsx(fj,{...e,layoutGroup:i,switchLayoutGroup:j.useContext(Lk),isPresent:t,safeToRemove:n})}const pj={borderRadius:{...ma,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ma,borderTopRightRadius:ma,borderBottomLeftRadius:ma,borderBottomRightRadius:ma,boxShadow:dj};function mj(e,t,n){const i=Te(e)?e:So(e);return i.start(k_("",i,t,n)),i.animation}const gj=(e,t)=>e.depth-t.depth;class yj{constructor(){this.children=[],this.isDirty=!1}add(t){Jy(this.children,t),this.isDirty=!0}remove(t){Zy(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(gj),this.isDirty=!1,this.children.forEach(t)}}function _j(e,t){const n=Be.now(),i=({timestamp:s})=>{const r=s-n;r>=t&&(_s(i),e(r-t))};return Pt.setup(i,!0),()=>_s(i)}const sP=["TopLeft","TopRight","BottomLeft","BottomRight"],vj=sP.length,px=e=>typeof e=="string"?parseFloat(e):e,mx=e=>typeof e=="number"||X.test(e);function wj(e,t,n,i,s,r){s?(e.opacity=Rt(0,n.opacity??1,Tj(i)),e.opacityExit=Rt(t.opacity??1,0,xj(i))):r&&(e.opacity=Rt(t.opacity??1,n.opacity??1,i));for(let o=0;o<vj;o++){const a=`border${sP[o]}Radius`;let l=gx(t,a),c=gx(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||mx(l)===mx(c)?(e[a]=Math.max(Rt(px(l),px(c),i),0),(Qn.test(c)||Qn.test(l))&&(e[a]+="%")):e[a]=c}(t.rotate||n.rotate)&&(e.rotate=Rt(t.rotate||0,n.rotate||0,i))}function gx(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const Tj=rP(0,.5,Wb),xj=rP(.5,.95,dn);function rP(e,t,n){return i=>i<e?0:i>t?1:n(Cl(e,t,i))}function yx(e,t){e.min=t.min,e.max=t.max}function tn(e,t){yx(e.x,t.x),yx(e.y,t.y)}function _x(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function vx(e,t,n,i,s){return e-=t,e=Mh(e,1/n,i),s!==void 0&&(e=Mh(e,1/s,i)),e}function Ej(e,t=0,n=1,i=.5,s,r=e,o=e){if(Qn.test(t)&&(t=parseFloat(t),t=Rt(o.min,o.max,t/100)-o.min),typeof t!="number")return;let a=Rt(r.min,r.max,i);e===r&&(a-=t),e.min=vx(e.min,t,n,a,s),e.max=vx(e.max,t,n,a,s)}function wx(e,t,[n,i,s],r,o){Ej(e,t[n],t[i],t[s],t.scale,r,o)}const Sj=["x","scaleX","originX"],Ij=["y","scaleY","originY"];function Tx(e,t,n,i){wx(e.x,t,Sj,n?n.x:void 0,i?i.x:void 0),wx(e.y,t,Ij,n?n.y:void 0,i?i.y:void 0)}function xx(e){return e.translate===0&&e.scale===1}function oP(e){return xx(e.x)&&xx(e.y)}function Ex(e,t){return e.min===t.min&&e.max===t.max}function Aj(e,t){return Ex(e.x,t.x)&&Ex(e.y,t.y)}function Sx(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function aP(e,t){return Sx(e.x,t.x)&&Sx(e.y,t.y)}function Ix(e){return Ce(e.x)/Ce(e.y)}function Ax(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class bj{constructor(){this.members=[]}add(t){Jy(this.members,t),t.scheduleRender()}remove(t){if(Zy(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(s=>t===s);if(n===0)return!1;let i;for(let s=n;s>=0;s--){const r=this.members[s];if(r.isPresent!==!1){i=r;break}}return i?(this.promote(i),!0):!1}promote(t,n){const i=this.lead;if(t!==i&&(this.prevLead=i,this.lead=t,t.show(),i)){i.instance&&i.scheduleRender(),t.scheduleRender(),t.resumeFrom=i,n&&(t.resumeFrom.preserveOpacity=!0),i.snapshot&&(t.snapshot=i.snapshot,t.snapshot.latestValues=i.animationValues||i.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:i}=t;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function kj(e,t,n){let i="";const s=e.x.translate/t.x,r=e.y.translate/t.y,o=(n==null?void 0:n.z)||0;if((s||r||o)&&(i=`translate3d(${s}px, ${r}px, ${o}px) `),(t.x!==1||t.y!==1)&&(i+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:c,rotate:h,rotateX:d,rotateY:f,skewX:m,skewY:v}=n;c&&(i=`perspective(${c}px) ${i}`),h&&(i+=`rotate(${h}deg) `),d&&(i+=`rotateX(${d}deg) `),f&&(i+=`rotateY(${f}deg) `),m&&(i+=`skewX(${m}deg) `),v&&(i+=`skewY(${v}deg) `)}const a=e.x.scale*t.x,l=e.y.scale*t.y;return(a!==1||l!==1)&&(i+=`scale(${a}, ${l})`),i||"none"}const Zf=["","X","Y","Z"],Pj=1e3;let Cj=0;function tp(e,t,n,i){const{latestValues:s}=t;s[e]&&(n[e]=s[e],t.setStaticValue(e,0),i&&(i[e]=0))}function lP(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=Kk(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:r}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",Pt,!(s||r))}const{parent:i}=e;i&&!i.hasCheckedOptimisedAppear&&lP(i)}function cP({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:i,resetTransform:s}){return class{constructor(o={},a=t==null?void 0:t()){this.id=Cj++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Mj),this.nodes.forEach(Lj),this.nodes.forEach(Fj),this.nodes.forEach(Vj)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new yj)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new n_),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=Sk(o)&&!w5(o),this.instance=o;const{layoutId:a,layout:l,visualElement:c}=this.options;if(c&&!c.current&&c.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||a)&&(this.isLayoutDirty=!0),e){let h,d=0;const f=()=>this.root.updateBlockedByResize=!1;Pt.read(()=>{d=window.innerWidth}),e(o,()=>{const m=window.innerWidth;m!==d&&(d=m,this.root.updateBlockedByResize=!0,h&&h(),h=_j(f,250),Mu.hasAnimatedSinceResize&&(Mu.hasAnimatedSinceResize=!1,this.nodes.forEach(Px)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&c&&(a||l)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:d,hasRelativeLayoutChanged:f,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||c.getDefaultTransition()||$j,{onLayoutAnimationStart:x,onLayoutAnimationComplete:E}=c.getProps(),y=!this.targetLayout||!aP(this.targetLayout,m),w=!d&&f;if(this.options.layoutRoot||this.resumeFrom||w||d&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const S={...m_(v,"layout"),onPlay:x,onComplete:E};(c.shouldReduceMotion||this.options.layoutRoot)&&(S.delay=0,S.type=!1),this.startAnimation(S),this.setAnimationOrigin(h,w)}else d||Px(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),_s(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(jj),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&lP(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const d=this.path[h];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(bx);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(kx);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Oj),this.nodes.forEach(Rj),this.nodes.forEach(Dj)):this.nodes.forEach(kx),this.clearAllSnapshots();const a=Be.now();ae.delta=_i(0,1e3/60,a-ae.timestamp),ae.timestamp=a,ae.isProcessing=!0,zf.update.process(ae),zf.preRender.process(ae),zf.render.process(ae),ae.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,y_.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Nj),this.sharedNodes.forEach(Bj)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Pt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Pt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Ce(this.snapshot.measuredBox.x)&&!Ce(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ft(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const l=i(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!oP(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,h=c!==this.prevTransformTemplateValue;o&&this.instance&&(a||Us(this.latestValues)||h)&&(s(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),Hj(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var c;const{visualElement:o}=this.options;if(!o)return Ft();const a=o.measureViewportBox();if(!(((c=this.scroll)==null?void 0:c.wasRoot)||this.path.some(Wj))){const{scroll:h}=this.root;h&&($r(a.x,h.offset.x),$r(a.y,h.offset.y))}return a}removeElementScroll(o){var l;const a=Ft();if(tn(a,o),(l=this.scroll)!=null&&l.wasRoot)return a;for(let c=0;c<this.path.length;c++){const h=this.path[c],{scroll:d,options:f}=h;h!==this.root&&d&&f.layoutScroll&&(d.wasRoot&&tn(a,o),$r(a.x,d.offset.x),$r(a.y,d.offset.y))}return a}applyTransform(o,a=!1){const l=Ft();tn(l,o);for(let c=0;c<this.path.length;c++){const h=this.path[c];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Hr(l,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Us(h.latestValues)&&Hr(l,h.latestValues)}return Us(this.latestValues)&&Hr(l,this.latestValues),l}removeTransform(o){const a=Ft();tn(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Us(c.latestValues))continue;Km(c.latestValues)&&c.updateSnapshot();const h=Ft(),d=c.measurePageBox();tn(h,d),Tx(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,h)}return Us(this.latestValues)&&Tx(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ae.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var f;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(f=this.parent)!=null&&f.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:d}=this.options;if(!(!this.layout||!(h||d))){if(this.resolvedRelativeTargetAt=ae.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ft(),this.relativeTargetOrigin=Ft(),Ja(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),tn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Ft(),this.targetWithTransforms=Ft()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),X3(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):tn(this.target,this.layout.layoutBox),Uk(this.target,this.targetDelta)):tn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ft(),this.relativeTargetOrigin=Ft(),Ja(this.relativeTargetOrigin,this.target,m.target),tn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Km(this.parent.latestValues)||Bk(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var v;const o=this.getLead(),a=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||(v=this.parent)!=null&&v.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===ae.timestamp&&(l=!1),l)return;const{layout:c,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||h))return;tn(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,f=this.treeScale.y;c3(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Ft());const{target:m}=o;if(!m){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(_x(this.prevProjectionDelta.x,this.projectionDelta.x),_x(this.prevProjectionDelta.y,this.projectionDelta.y)),Xa(this.projectionDelta,this.layoutCorrected,m,this.latestValues),(this.treeScale.x!==d||this.treeScale.y!==f||!Ax(this.projectionDelta.x,this.prevProjectionDelta.x)||!Ax(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Wr(),this.projectionDelta=Wr(),this.projectionDeltaWithTransform=Wr()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},h={...this.latestValues},d=Wr();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=Ft(),m=l?l.source:void 0,v=this.layout?this.layout.source:void 0,x=m!==v,E=this.getStack(),y=!E||E.members.length<=1,w=!!(x&&!y&&this.options.crossfade===!0&&!this.path.some(zj));this.animationProgress=0;let S;this.mixTargetDelta=D=>{const M=D/1e3;Cx(d.x,o.x,M),Cx(d.y,o.y,M),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ja(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Uj(this.relativeTarget,this.relativeTargetOrigin,f,M),S&&Aj(this.relativeTarget,S)&&(this.isProjectionDirty=!1),S||(S=Ft()),tn(S,this.relativeTarget)),x&&(this.animationValues=h,wj(h,c,this.latestValues,M,w,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=M},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var a,l,c;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(),(c=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||c.stop(),this.pendingAnimation&&(_s(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Pt.update(()=>{Mu.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=So(0)),this.currentAnimation=mj(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:h=>{this.mixTargetDelta(h),o.onUpdate&&o.onUpdate(h)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Pj),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:h}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&uP(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||Ft();const d=Ce(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+d;const f=Ce(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+f}tn(a,l),Hr(a,h),Xa(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new bj),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&tp("z",o,c,this.animationValues);for(let h=0;h<Zf.length;h++)tp(`rotate${Zf[h]}`,o,c,this.animationValues),tp(`skew${Zf[h]}`,o,c,this.animationValues);o.render();for(const h in c)o.setStaticValue(h,c[h]),this.animationValues&&(this.animationValues[h]=c[h]);o.scheduleRender()}applyProjectionStyles(o,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=Du(a==null?void 0:a.pointerEvents)||"",o.transform=l?l(this.latestValues,""):"none";return}const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=Du(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Us(this.latestValues)&&(o.transform=l?l({},""):"none",this.hasProjected=!1);return}o.visibility="";const h=c.animationValues||c.latestValues;this.applyTransformsToTarget();let d=kj(this.projectionDeltaWithTransform,this.treeScale,h);l&&(d=l(h,d)),o.transform=d;const{x:f,y:m}=this.projectionDelta;o.transformOrigin=`${f.origin*100}% ${m.origin*100}% 0`,c.animationValues?o.opacity=c===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:o.opacity=c===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const v in Vl){if(h[v]===void 0)continue;const{correct:x,applyTo:E,isCSSVariable:y}=Vl[v],w=d==="none"?h[v]:x(h[v],c);if(E){const S=E.length;for(let D=0;D<S;D++)o[E[D]]=w}else y?this.options.visualElement.renderState.vars[v]=w:o[v]=w}this.options.layoutId&&(o.pointerEvents=c===this?Du(a==null?void 0:a.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)==null?void 0:a.stop()}),this.root.nodes.forEach(bx),this.root.sharedNodes.clear()}}}function Rj(e){e.updateLayout()}function Dj(e){var n;const t=((n=e.resumeFrom)==null?void 0:n.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:s}=e.layout,{animationType:r}=e.options,o=t.source!==e.layout.source;r==="size"?nn(d=>{const f=o?t.measuredBox[d]:t.layoutBox[d],m=Ce(f);f.min=i[d].min,f.max=f.min+m}):uP(r,t.layoutBox,i)&&nn(d=>{const f=o?t.measuredBox[d]:t.layoutBox[d],m=Ce(i[d]);f.max=f.min+m,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[d].max=e.relativeTarget[d].min+m)});const a=Wr();Xa(a,i,t.layoutBox);const l=Wr();o?Xa(l,e.applyTransform(s,!0),t.measuredBox):Xa(l,i,t.layoutBox);const c=!oP(a);let h=!1;if(!e.resumeFrom){const d=e.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:m}=d;if(f&&m){const v=Ft();Ja(v,t.layoutBox,f.layoutBox);const x=Ft();Ja(x,i,m.layoutBox),aP(v,x)||(h=!0),d.options.layoutRoot&&(e.relativeTarget=x,e.relativeTargetOrigin=v,e.relativeParent=d)}}}e.notifyListeners("didUpdate",{layout:i,snapshot:t,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeLayoutChanged:h})}else if(e.isLead()){const{onExitComplete:i}=e.options;i&&i()}e.options.transition=void 0}function Mj(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Vj(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Nj(e){e.clearSnapshot()}function bx(e){e.clearMeasurements()}function kx(e){e.isLayoutDirty=!1}function Oj(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Px(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Lj(e){e.resolveTargetDelta()}function Fj(e){e.calcProjection()}function jj(e){e.resetSkewAndRotation()}function Bj(e){e.removeLeadSnapshot()}function Cx(e,t,n){e.translate=Rt(t.translate,0,n),e.scale=Rt(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function Rx(e,t,n,i){e.min=Rt(t.min,n.min,i),e.max=Rt(t.max,n.max,i)}function Uj(e,t,n,i){Rx(e.x,t.x,n.x,i),Rx(e.y,t.y,n.y,i)}function zj(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const $j={duration:.45,ease:[.4,0,.1,1]},Dx=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),Mx=Dx("applewebkit/")&&!Dx("chrome/")?Math.round:dn;function Vx(e){e.min=Mx(e.min),e.max=Mx(e.max)}function Hj(e){Vx(e.x),Vx(e.y)}function uP(e,t,n){return e==="position"||e==="preserve-aspect"&&!Y3(Ix(t),Ix(n),.2)}function Wj(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const qj=cP({attachResizeListener:(e,t)=>Nl(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),ep={current:void 0},hP=cP({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!ep.current){const e=new qj({});e.mount(window),e.setOptions({layoutScroll:!0}),ep.current=e}return ep.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),Kj={pan:{Feature:hj},drag:{Feature:uj,ProjectionNode:hP,MeasureLayout:iP}};function Nx(e,t,n){const{props:i}=e;e.animationState&&i.whileHover&&e.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,r=i[s];r&&Pt.postRender(()=>r(t,oc(t)))}class Gj extends As{mount(){const{current:t}=this.node;t&&(this.unmount=m5(t,(n,i)=>(Nx(this.node,i,"Start"),s=>Nx(this.node,s,"End"))))}unmount(){}}class Qj extends As{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ic(Nl(this.node.current,"focus",()=>this.onFocus()),Nl(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Ox(e,t,n){const{props:i}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&i.whileTap&&e.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),r=i[s];r&&Pt.postRender(()=>r(t,oc(t)))}class Yj extends As{mount(){const{current:t}=this.node;t&&(this.unmount=v5(t,(n,i)=>(Ox(this.node,i,"Start"),(s,{success:r})=>Ox(this.node,s,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const tg=new WeakMap,np=new WeakMap,Xj=e=>{const t=tg.get(e.target);t&&t(e)},Jj=e=>{e.forEach(Xj)};function Zj({root:e,...t}){const n=e||document;np.has(n)||np.set(n,{});const i=np.get(n),s=JSON.stringify(t);return i[s]||(i[s]=new IntersectionObserver(Jj,{root:e,...t})),i[s]}function t9(e,t,n){const i=Zj(t);return tg.set(e,n),i.observe(e),()=>{tg.delete(e),i.unobserve(e)}}const e9={some:0,all:1};class n9 extends As{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:i,amount:s="some",once:r}=t,o={root:n?n.current:void 0,rootMargin:i,threshold:typeof s=="number"?s:e9[s]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,r&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:h,onViewportLeave:d}=this.node.getProps(),f=c?h:d;f&&f(l)};return t9(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(i9(t,n))&&this.startObserver()}unmount(){}}function i9({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const s9={inView:{Feature:n9},tap:{Feature:Yj},focus:{Feature:Qj},hover:{Feature:Gj}},r9={layout:{ProjectionNode:hP,MeasureLayout:iP}},o9={...H3,...s9,...Kj,...r9},ai=o3(o9,v3);function dP({selectedDate:e,onDateSelect:t,activityDates:n,onViewDay:i,onAddActivityForDate:s,currentMonth:r,setCurrentMonth:o}){const[a,l]=j.useState(e||new Date),c=r||a,h=o||l,d=c.getMonth(),f=c.getFullYear(),m=new Date(f,d,1),x=new Date(f,d+1,0).getDate(),E=m.getDay(),y=["January","February","March","April","May","June","July","August","September","October","November","December"],w=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],S=()=>{h(new Date(f,d-1,1))},D=()=>{h(new Date(f,d+1,1))},M=()=>{const C=new Date;t(C),h(C)},V=C=>{const k=new Date;return C===k.getDate()&&d===k.getMonth()&&f===k.getFullYear()},T=C=>e?C===e.getDate()&&d===e.getMonth()&&f===e.getFullYear():!1,_=C=>{const k=new Date(f,d,C).toDateString();return n.has(k)},A=C=>{t(new Date(f,d,C))},b=e&&_(e.getDate()),P=[];for(let C=0;C<E;C++)P.push(R.jsx("div",{className:"aspect-square"},`empty-${C}`));for(let C=1;C<=x;C++){const k=V(C),it=new Date(f,d,C),Y=e?T(C):n.has(it.toDateString()),ut=_(C);P.push(R.jsxs("button",{onClick:()=>A(C),className:`aspect-square rounded-lg font-medium transition-all relative ${Y?"bg-pink-600 text-white shadow-md":k?"bg-pink-100 text-pink-600 hover:bg-pink-200":ut&&!e?"bg-green-50 text-gray-900 hover:bg-green-100":"text-gray-700 hover:bg-gray-100"}`,children:[C,ut&&!Y&&R.jsx("div",{className:"absolute bottom-1 left-1/2 transform -translate-x-1/2 w-1 h-1 bg-green-500 rounded-full"})]},C))}return R.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[R.jsxs("div",{className:"flex items-center justify-between mb-6",children:[R.jsxs("h2",{className:"text-xl font-semibold text-gray-800",children:[y[d]," ",f]}),R.jsxs("div",{className:"flex gap-2",children:[R.jsx("button",{onClick:M,className:"px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 rounded-lg font-medium text-gray-700 transition-colors",children:"Today"}),R.jsx("button",{onClick:S,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Previous month",children:R.jsx(fF,{size:20})}),R.jsx("button",{onClick:D,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Next month",children:R.jsx(Db,{size:20})})]})]}),R.jsx("div",{className:"grid grid-cols-7 gap-2 mb-2",children:w.map(C=>R.jsx("div",{className:"text-center text-sm font-medium text-gray-500",children:C},C))}),R.jsx("div",{className:"grid grid-cols-7 gap-2",children:P}),e&&R.jsx("div",{className:"mt-6 text-center",children:b?R.jsxs("button",{onClick:()=>i(e),className:"bg-pink-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-pink-700 transition-colors",children:["View Activities for ",e.toLocaleDateString("en-US",{month:"short",day:"numeric"})]}):R.jsxs("button",{onClick:()=>s(e),className:"bg-pink-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-pink-700 transition-colors",children:["Add Activity for ",e.toLocaleDateString("en-US",{month:"short",day:"numeric"})]})})]})}function a9({selectedDates:e,onDateChange:t}){const[n,i]=j.useState(new Date),s=r=>{const o=e.findIndex(a=>a.toDateString()===r.toDateString());o>-1?t(e.filter((a,l)=>l!==o)):t([...e,r])};return R.jsx("div",{className:"rounded-lg bg-white p-4 shadow-lg",children:R.jsx(dP,{selectedDate:null,onDateSelect:s,activityDates:new Set(e.map(r=>r.toDateString())),onViewDay:()=>{},onAddActivityForDate:()=>{},currentMonth:n,setCurrentMonth:i})})}const l9=[{value:"meal",label:"Meal",emoji:""},{value:"walk",label:"Walk",emoji:""},{value:"play",label:"Play",emoji:""},{value:"training",label:"Training",emoji:""},{value:"sleep",label:"Sleep",emoji:""},{value:"chew",label:"Chew",emoji:""},{value:"med",label:"Med",emoji:""},{value:"other",label:"Other",emoji:""}],c9=[{value:"wee",label:"Wee",emoji:""},{value:"poo",label:"Poo",emoji:""}],u9=Array.from({length:60},(e,t)=>{const n=(t+1)*10;return{value:n,label:`${n} min`}});function h9({onSubmit:e,onBack:t,date:n}){const[i,s]=j.useState([]),[r,o]=j.useState(()=>{const T=n?new Date(n):new Date;return T.setMinutes(T.getMinutes()-T.getTimezoneOffset()),n&&T.setHours(9,0,0,0),T.toISOString().slice(0,16)}),[a,l]=j.useState([]),[c,h]=j.useState(void 0),[d,f]=j.useState(""),[m,v]=j.useState(!1),[x,E]=j.useState(!1),[y,w]=j.useState(!1);j.useEffect(()=>{const T=n?new Date(n):new Date;T.setMinutes(T.getMinutes()-T.getTimezoneOffset()),n&&T.setHours(9,0,0,0),o(T.toISOString().slice(0,16))},[n]),j.useEffect(()=>{i.includes("walk")||i.includes("sleep")||h(void 0)},[i]);const S=T=>{s(_=>T==="med"?_.includes("med")?[]:["med"]:T==="sleep"?_.includes("sleep")?[]:["sleep"]:_.includes("sleep")||_.includes("med")?[T]:_.includes(T)?_.filter(A=>A!==T):[..._,T])},D=async T=>{if(T.preventDefault(),i.length===0){alert("Please select at least one activity type.");return}if(i.includes("med")&&a.length===0){alert("Please select at least one date for the 'Med' activity.");return}if((i.includes("other")||i.includes("med"))&&d.trim()===""){w(!0);return}v(!0);try{let _;if(M&&c){const b=new Date(r);_=new Date(b.getTime()+c*6e4).toISOString()}const A=i.includes("med")?a.map(b=>{const P=new Date(b);return P.setHours(0,0,0,0),P.toISOString()}):r;await e(i,A,d,_)}finally{v(!1)}},M=i.includes("walk")||i.includes("sleep"),V=i.includes("med");return R.jsxs("div",{children:[R.jsx(Qa,{children:x&&R.jsx(ai.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:()=>E(!1),children:R.jsx(ai.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:T=>T.stopPropagation(),className:"bg-white rounded-2xl shadow-xl p-6",children:R.jsx("div",{className:"flex justify-center gap-4",children:c9.map(T=>R.jsx("button",{type:"button",onClick:()=>{S(T.value),E(!1)},className:`flex flex-col items-center justify-center p-4 rounded-lg border-2 transition-all text-center w-24 h-24 ${i.includes(T.value)?"border-pink-500 bg-pink-50":"border-gray-200 bg-white hover:border-gray-300"}`,children:R.jsx("span",{className:"text-4xl",children:T.emoji})},T.value))})})})}),R.jsxs("div",{className:"flex justify-between items-center mb-6",children:[R.jsx("button",{onClick:t,className:"p-2 -ml-2 text-gray-600 hover:text-gray-900",children:R.jsx(Rb,{size:24})}),R.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"Add New Activity"}),R.jsx("button",{type:"submit",form:"activity-form",disabled:m,className:"px-4 py-2 bg-pink-600 text-white rounded-lg font-semibold text-sm hover:bg-pink-700 disabled:bg-pink-400",children:m?"Adding...":"Add"})]}),R.jsxs("form",{id:"activity-form",onSubmit:D,className:"space-y-4",noValidate:!0,children:[R.jsxs("div",{children:[R.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Activity Type (select one or more)"}),R.jsxs("div",{className:"grid grid-cols-3 sm:grid-cols-5 gap-2",children:[R.jsxs("button",{type:"button",onClick:()=>E(!0),className:`flex flex-col items-center justify-center p-2 rounded-lg border-2 transition-all text-center ${i.includes("wee")||i.includes("poo")?"border-pink-500 bg-pink-50":"border-gray-200 bg-white hover:border-gray-300"}`,children:[R.jsx("span",{className:"text-2xl",children:""}),R.jsx("span",{className:"text-xs font-medium text-gray-800 mt-1",children:"Toilet"})]}),l9.map(T=>R.jsxs("button",{type:"button",onClick:()=>S(T.value),className:`flex flex-col items-center justify-center p-2 rounded-lg border-2 transition-all text-center ${i.includes(T.value)?"border-pink-500 bg-pink-50":"border-gray-200 bg-white hover:border-gray-300"}`,children:[R.jsx("span",{className:"text-2xl",children:T.emoji}),R.jsx("span",{className:"text-xs font-medium text-gray-800 mt-1",children:T.label})]},T.value))]})]}),R.jsx(Qa,{children:V&&R.jsx(ai.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:R.jsx(a9,{selectedDates:a,onDateChange:l})})}),R.jsx(Qa,{children:!V&&R.jsxs(ai.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[R.jsxs("div",{children:[R.jsx("label",{htmlFor:"activityTime",className:"text-sm font-medium text-gray-700 mb-1 block",children:"Start Time"}),R.jsx("input",{type:"datetime-local",id:"activityTime",value:r,onChange:T=>o(T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-1 focus:ring-pink-500 focus:border-transparent bg-white text-center",required:!V})]}),M&&R.jsxs("div",{children:[R.jsx("label",{htmlFor:"duration",className:"text-sm font-medium text-gray-700 mb-1 block",children:"Duration (optional)"}),R.jsxs("select",{id:"duration",value:c||"",onChange:T=>h(T.target.value?parseInt(T.target.value):void 0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-1 focus:ring-pink-500 focus:border-transparent bg-white text-center",children:[R.jsx("option",{value:"",children:"No duration"}),u9.map(T=>R.jsx("option",{value:T.value,children:T.label},T.value))]})]})]})}),R.jsxs("div",{children:[R.jsx("label",{htmlFor:"notes",className:"text-sm font-medium text-gray-700 mb-1 block",children:"Notes"}),R.jsx("textarea",{id:"notes",value:d,onChange:T=>{f(T.target.value),y&&w(!1)},placeholder:i.includes("other")||i.includes("med")?"A description is required...":"Optional notes...",rows:3,className:`w-full px-3 py-2 border rounded-lg focus:ring-1 focus:border-transparent resize-none bg-white ${y?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-pink-500"}`})]})]})]})}const Vh={meal:{icon:"",color:"bg-red-100"},wee:{icon:"",color:"bg-blue-100"},poo:{icon:"",color:"bg-yellow-200"},walk:{icon:"",color:"bg-green-100"},play:{icon:"",color:"bg-indigo-100"},sleep:{icon:"",color:"bg-purple-100"},training:{icon:"",color:"bg-orange-100"},other:{icon:"",color:"bg-gray-100"},chew:{icon:"",color:"bg-amber-100"},med:{icon:"",color:"bg-rose-100"}},Lx=({activity:e,nested:t,onDelete:n})=>{const[i,s]=j.useState(!1),{icon:r,color:o}=Vh[e.activity_type]||Vh.other,a=new Date(e.activity_time).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});let l=null;e.end_time&&(l=new Date(e.end_time).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}));let c=null;if(e.end_time){const h=new Date(e.end_time).getTime()-new Date(e.activity_time).getTime(),d=Math.floor(h/(1e3*60)),f=Math.floor(d/60),m=d%60;c=`${f>0?`${f}h `:""}${m}m`}return R.jsx("div",{className:`rounded-lg p-3 ${t?"ml-6 border-l-2 border-gray-200":""} `,children:R.jsxs("div",{className:"flex items-start gap-3",children:[R.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-xl ${o}`,children:r}),R.jsxs("div",{className:"flex-1",children:[R.jsxs("div",{className:"flex justify-between items-center",children:[R.jsx("span",{className:"font-bold capitalize text-gray-800",children:e.activity_type.replace("_"," ")}),R.jsx("span",{className:"text-sm text-gray-500 font-medium",children:a})]}),(c||l)&&R.jsxs("div",{className:"text-xs text-gray-500 mt-1 flex items-center gap-2",children:[R.jsx(kh,{size:12}),R.jsxs("span",{children:[l&&`${a} - ${l}`,c&&R.jsxs("span",{className:"font-semibold",children:[" (",c,")"]})]})]}),e.notes&&R.jsx("p",{className:"text-sm text-gray-600 mt-1",children:e.notes})]}),R.jsx("button",{onClick:()=>n(e.id),className:"text-gray-400 hover:text-red-500 p-1",children:R.jsx(AF,{size:16})})]})})},d9=({activity:e,children:t,onDelete:n})=>{const[i,s]=j.useState(!0),{icon:r,color:o}=Vh[e.activity_type]||Vh.other,a=new Date(e.activity_time).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});let l=null;e.end_time&&(l=new Date(e.end_time).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}));let c=null;if(e.end_time){const h=new Date(e.end_time).getTime()-new Date(e.activity_time).getTime(),d=Math.floor(h/(1e3*60)),f=Math.floor(d/60),m=d%60;c=`${f>0?`${f}h `:""}${m}m`}return R.jsxs("div",{className:"rounded-lg p-3 bg-white shadow-sm",children:[R.jsxs("div",{className:"flex items-start gap-3",children:[R.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-xl ${o}`,children:r}),R.jsxs("div",{className:"flex-1",children:[R.jsxs("div",{className:"flex justify-between items-center",children:[R.jsx("span",{className:"font-bold capitalize text-gray-800",children:e.activity_type.replace("_"," ")}),R.jsx("span",{className:"text-sm text-gray-500 font-medium",children:a})]}),R.jsxs("div",{className:"text-xs text-gray-500 mt-1 flex items-center gap-2",children:[R.jsx(kh,{size:12}),R.jsxs("span",{children:[l?`${a} - ${l}`:"In progress...",c&&R.jsxs("span",{className:"font-semibold",children:[" (",c,")"]})]})]}),e.notes&&R.jsx("p",{className:"text-sm text-gray-600 mt-1",children:e.notes})]}),R.jsx("button",{onClick:()=>s(!i),className:"text-gray-400 hover:text-gray-600 p-1",children:i?R.jsx(dF,{size:20}):R.jsx(Db,{size:20})})]}),R.jsx(Qa,{children:i&&R.jsx(ai.div,{initial:{opacity:0,height:0,marginTop:0},animate:{opacity:1,height:"auto",marginTop:"1rem"},exit:{opacity:0,height:0,marginTop:0},children:t})})]})};function Fx({activities:e,onDelete:t,timelineDate:n,onClearTimelineDate:i}){if(e.length===0)return R.jsxs("div",{className:"text-center py-12 px-4 bg-white rounded-lg shadow-sm",children:[R.jsx(Mb,{size:48,className:"mx-auto text-gray-400"}),R.jsx("h3",{className:"mt-4 text-lg font-semibold text-gray-800",children:"No activities logged yet"}),R.jsx("p",{className:"mt-1 text-sm text-gray-500",children:n?`No activities on ${n.toLocaleDateString()}.`:"Click the '+' button to add a new activity."}),n&&R.jsx("button",{onClick:i,className:"mt-4 px-4 py-2 text-sm font-medium text-pink-600 bg-pink-100 rounded-lg",children:"Back to full timeline"})]});const s={};e.forEach(a=>{const l=new Date(a.activity_time).toDateString();s[l]||(s[l]=[]),s[l].push(a)}),e.filter(a=>!a.parent_activity_id);const r=e.filter(a=>a.parent_activity_id),o=n?[new Date(n).toDateString()]:Object.keys(s).sort((a,l)=>new Date(l).getTime()-new Date(a).getTime());return R.jsxs("div",{children:[n&&R.jsxs("div",{className:"flex justify-between items-center pb-4",children:[R.jsx("h2",{className:"text-lg font-bold text-gray-800",children:new Date(n).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),R.jsx("button",{onClick:i,className:"text-sm text-pink-600 font-medium",children:"View all"})]}),R.jsx("div",{className:"space-y-4",children:o.map(a=>{const l=(s[a]||[]).filter(c=>!c.parent_activity_id).sort((c,h)=>new Date(h.activity_time).getTime()-new Date(c.activity_time).getTime());return l.length===0?null:R.jsxs("div",{children:[!n&&R.jsx("h2",{className:"font-bold text-gray-700 pb-2 mb-2 border-b-2 border-gray-100",children:new Date(a).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})}),R.jsx("div",{className:"space-y-3",children:l.map(c=>{if(c.activity_type==="walk"){const h=r.filter(d=>d.parent_activity_id===c.id).sort((d,f)=>new Date(f.activity_time).getTime()-new Date(d.activity_time).getTime());return R.jsx(d9,{activity:c,onDelete:t,children:h.length>0?R.jsx("div",{className:"space-y-2",children:h.map(d=>R.jsx(Lx,{activity:d,nested:!0,onDelete:t},d.id))}):R.jsx("div",{className:"text-center text-sm text-gray-500 py-3",children:"No other activities on this walk."})},c.id)}else return R.jsx(Lx,{activity:c,nested:!1,onDelete:t},c.id)})})]},a)})})]})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function ac(e){return e+.5|0}const Hi=(e,t,n)=>Math.max(Math.min(e,n),t);function Pa(e){return Hi(ac(e*2.55),0,255)}function as(e){return Hi(ac(e*255),0,255)}function ni(e){return Hi(ac(e/2.55)/100,0,1)}function jx(e){return Hi(ac(e*100),0,100)}const en={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},eg=[..."0123456789ABCDEF"],f9=e=>eg[e&15],p9=e=>eg[(e&240)>>4]+eg[e&15],Qc=e=>(e&240)>>4===(e&15),m9=e=>Qc(e.r)&&Qc(e.g)&&Qc(e.b)&&Qc(e.a);function g9(e){var t=e.length,n;return e[0]==="#"&&(t===4||t===5?n={r:255&en[e[1]]*17,g:255&en[e[2]]*17,b:255&en[e[3]]*17,a:t===5?en[e[4]]*17:255}:(t===7||t===9)&&(n={r:en[e[1]]<<4|en[e[2]],g:en[e[3]]<<4|en[e[4]],b:en[e[5]]<<4|en[e[6]],a:t===9?en[e[7]]<<4|en[e[8]]:255})),n}const y9=(e,t)=>e<255?t(e):"";function _9(e){var t=m9(e)?f9:p9;return e?"#"+t(e.r)+t(e.g)+t(e.b)+y9(e.a,t):void 0}const v9=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function fP(e,t,n){const i=t*Math.min(n,1-n),s=(r,o=(r+e/30)%12)=>n-i*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function w9(e,t,n){const i=(s,r=(s+e/60)%6)=>n-n*t*Math.max(Math.min(r,4-r,1),0);return[i(5),i(3),i(1)]}function T9(e,t,n){const i=fP(e,1,.5);let s;for(t+n>1&&(s=1/(t+n),t*=s,n*=s),s=0;s<3;s++)i[s]*=1-t-n,i[s]+=t;return i}function x9(e,t,n,i,s){return e===s?(t-n)/i+(t<n?6:0):t===s?(n-e)/i+2:(e-t)/i+4}function P_(e){const n=e.r/255,i=e.g/255,s=e.b/255,r=Math.max(n,i,s),o=Math.min(n,i,s),a=(r+o)/2;let l,c,h;return r!==o&&(h=r-o,c=a>.5?h/(2-r-o):h/(r+o),l=x9(n,i,s,h,r),l=l*60+.5),[l|0,c||0,a]}function C_(e,t,n,i){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,i)).map(as)}function R_(e,t,n){return C_(fP,e,t,n)}function E9(e,t,n){return C_(T9,e,t,n)}function S9(e,t,n){return C_(w9,e,t,n)}function pP(e){return(e%360+360)%360}function I9(e){const t=v9.exec(e);let n=255,i;if(!t)return;t[5]!==i&&(n=t[6]?Pa(+t[5]):as(+t[5]));const s=pP(+t[2]),r=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?i=E9(s,r,o):t[1]==="hsv"?i=S9(s,r,o):i=R_(s,r,o),{r:i[0],g:i[1],b:i[2],a:n}}function A9(e,t){var n=P_(e);n[0]=pP(n[0]+t),n=R_(n),e.r=n[0],e.g=n[1],e.b=n[2]}function b9(e){if(!e)return;const t=P_(e),n=t[0],i=jx(t[1]),s=jx(t[2]);return e.a<255?`hsla(${n}, ${i}%, ${s}%, ${ni(e.a)})`:`hsl(${n}, ${i}%, ${s}%)`}const Bx={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Ux={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function k9(){const e={},t=Object.keys(Ux),n=Object.keys(Bx);let i,s,r,o,a;for(i=0;i<t.length;i++){for(o=a=t[i],s=0;s<n.length;s++)r=n[s],a=a.replace(r,Bx[r]);r=parseInt(Ux[o],16),e[a]=[r>>16&255,r>>8&255,r&255]}return e}let Yc;function P9(e){Yc||(Yc=k9(),Yc.transparent=[0,0,0,0]);const t=Yc[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const C9=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function R9(e){const t=C9.exec(e);let n=255,i,s,r;if(t){if(t[7]!==i){const o=+t[7];n=t[8]?Pa(o):Hi(o*255,0,255)}return i=+t[1],s=+t[3],r=+t[5],i=255&(t[2]?Pa(i):Hi(i,0,255)),s=255&(t[4]?Pa(s):Hi(s,0,255)),r=255&(t[6]?Pa(r):Hi(r,0,255)),{r:i,g:s,b:r,a:n}}}function D9(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${ni(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const ip=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,Er=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function M9(e,t,n){const i=Er(ni(e.r)),s=Er(ni(e.g)),r=Er(ni(e.b));return{r:as(ip(i+n*(Er(ni(t.r))-i))),g:as(ip(s+n*(Er(ni(t.g))-s))),b:as(ip(r+n*(Er(ni(t.b))-r))),a:e.a+n*(t.a-e.a)}}function Xc(e,t,n){if(e){let i=P_(e);i[t]=Math.max(0,Math.min(i[t]+i[t]*n,t===0?360:1)),i=R_(i),e.r=i[0],e.g=i[1],e.b=i[2]}}function mP(e,t){return e&&Object.assign(t||{},e)}function zx(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=as(e[3]))):(t=mP(e,{r:0,g:0,b:0,a:1}),t.a=as(t.a)),t}function V9(e){return e.charAt(0)==="r"?R9(e):I9(e)}class Ol{constructor(t){if(t instanceof Ol)return t;const n=typeof t;let i;n==="object"?i=zx(t):n==="string"&&(i=g9(t)||P9(t)||V9(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=mP(this._rgb);return t&&(t.a=ni(t.a)),t}set rgb(t){this._rgb=zx(t)}rgbString(){return this._valid?D9(this._rgb):void 0}hexString(){return this._valid?_9(this._rgb):void 0}hslString(){return this._valid?b9(this._rgb):void 0}mix(t,n){if(t){const i=this.rgb,s=t.rgb;let r;const o=n===r?.5:n,a=2*o-1,l=i.a-s.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;r=1-c,i.r=255&c*i.r+r*s.r+.5,i.g=255&c*i.g+r*s.g+.5,i.b=255&c*i.b+r*s.b+.5,i.a=o*i.a+(1-o)*s.a,this.rgb=i}return this}interpolate(t,n){return t&&(this._rgb=M9(this._rgb,t._rgb,n)),this}clone(){return new Ol(this.rgb)}alpha(t){return this._rgb.a=as(t),this}clearer(t){const n=this._rgb;return n.a*=1-t,this}greyscale(){const t=this._rgb,n=ac(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=n,this}opaquer(t){const n=this._rgb;return n.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Xc(this._rgb,2,t),this}darken(t){return Xc(this._rgb,2,-t),this}saturate(t){return Xc(this._rgb,1,t),this}desaturate(t){return Xc(this._rgb,1,-t),this}rotate(t){return A9(this._rgb,t),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Xn(){}const N9=(()=>{let e=0;return()=>e++})();function Tt(e){return e==null}function Jt(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function ft(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function mn(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function Dn(e,t){return mn(e)?e:t}function pt(e,t){return typeof e>"u"?t:e}const O9=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function At(e,t,n){if(e&&typeof e.call=="function")return e.apply(n,t)}function yt(e,t,n,i){let s,r,o;if(Jt(e))for(r=e.length,s=0;s<r;s++)t.call(n,e[s],s);else if(ft(e))for(o=Object.keys(e),r=o.length,s=0;s<r;s++)t.call(n,e[o[s]],o[s])}function Nh(e,t){let n,i,s,r;if(!e||!t||e.length!==t.length)return!1;for(n=0,i=e.length;n<i;++n)if(s=e[n],r=t[n],s.datasetIndex!==r.datasetIndex||s.index!==r.index)return!1;return!0}function Oh(e){if(Jt(e))return e.map(Oh);if(ft(e)){const t=Object.create(null),n=Object.keys(e),i=n.length;let s=0;for(;s<i;++s)t[n[s]]=Oh(e[n[s]]);return t}return e}function gP(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function L9(e,t,n,i){if(!gP(e))return;const s=t[e],r=n[e];ft(s)&&ft(r)?Ll(s,r,i):t[e]=Oh(r)}function Ll(e,t,n){const i=Jt(t)?t:[t],s=i.length;if(!ft(e))return e;n=n||{};const r=n.merger||L9;let o;for(let a=0;a<s;++a){if(o=i[a],!ft(o))continue;const l=Object.keys(o);for(let c=0,h=l.length;c<h;++c)r(l[c],e,o,n)}return e}function Za(e,t){return Ll(e,t,{merger:F9})}function F9(e,t,n){if(!gP(e))return;const i=t[e],s=n[e];ft(i)&&ft(s)?Za(i,s):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Oh(s))}const $x={"":e=>e,x:e=>e.x,y:e=>e.y};function j9(e){const t=e.split("."),n=[];let i="";for(const s of t)i+=s,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function B9(e){const t=j9(e);return n=>{for(const i of t){if(i==="")break;n=n&&n[i]}return n}}function Ao(e,t){return($x[t]||($x[t]=B9(t)))(e)}function D_(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Fl=e=>typeof e<"u",ws=e=>typeof e=="function",Hx=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};function U9(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const Ee=Math.PI,ls=2*Ee,Lh=Number.POSITIVE_INFINITY,z9=Ee/180,En=Ee/2,Vs=Ee/4,Wx=Ee*2/3,yP=Math.log10,cs=Math.sign;function Vu(e,t,n){return Math.abs(e-t)<n}function qx(e){const t=Math.round(e);e=Vu(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(yP(e))),i=e/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function $9(e){const t=[],n=Math.sqrt(e);let i;for(i=1;i<n;i++)e%i===0&&(t.push(i),t.push(e/i));return n===(n|0)&&t.push(n),t.sort((s,r)=>s-r).pop(),t}function H9(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function Fh(e){return!H9(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function W9(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}function q9(e,t,n){let i,s,r;for(i=0,s=e.length;i<s;i++)r=e[i][n],isNaN(r)||(t.min=Math.min(t.min,r),t.max=Math.max(t.max,r))}function Qs(e){return e*(Ee/180)}function K9(e){return e*(180/Ee)}function Kx(e){if(!mn(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function G9(e,t){const n=t.x-e.x,i=t.y-e.y,s=Math.sqrt(n*n+i*i);let r=Math.atan2(i,n);return r<-.5*Ee&&(r+=ls),{angle:r,distance:s}}function Q9(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Ns(e){return(e%ls+ls)%ls}function Y9(e,t,n,i){const s=Ns(e),r=Ns(t),o=Ns(n),a=Ns(r-s),l=Ns(o-s),c=Ns(s-r),h=Ns(s-o);return s===r||s===o||i||a>l&&c<h}function Sn(e,t,n){return Math.max(t,Math.min(n,e))}function X9(e){return Sn(e,-32768,32767)}function qr(e,t,n,i=1e-6){return e>=Math.min(t,n)-i&&e<=Math.max(t,n)+i}function M_(e,t,n){n=n||(o=>e[o]<t);let i=e.length-1,s=0,r;for(;i-s>1;)r=s+i>>1,n(r)?s=r:i=r;return{lo:s,hi:i}}const ng=(e,t,n,i)=>M_(e,n,i?s=>{const r=e[s][t];return r<n||r===n&&e[s+1][t]===n}:s=>e[s][t]<n),J9=(e,t,n)=>M_(e,n,i=>e[i][t]>=n);function Z9(e,t,n){let i=0,s=e.length;for(;i<s&&e[i]<t;)i++;for(;s>i&&e[s-1]>n;)s--;return i>0||s<e.length?e.slice(i,s):e}const _P=["push","pop","shift","splice","unshift"];function tB(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),_P.forEach(n=>{const i="_onData"+D_(n),s=e[n];Object.defineProperty(e,n,{configurable:!0,enumerable:!1,value(...r){const o=s.apply(this,r);return e._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...r)}),o}})})}function Gx(e,t){const n=e._chartjs;if(!n)return;const i=n.listeners,s=i.indexOf(t);s!==-1&&i.splice(s,1),!(i.length>0)&&(_P.forEach(r=>{delete e[r]}),delete e._chartjs)}function vP(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const wP=function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame}();function TP(e,t){let n=[],i=!1;return function(...s){n=s,i||(i=!0,wP.call(window,()=>{i=!1,e.apply(t,n)}))}}function eB(e,t){let n;return function(...i){return t?(clearTimeout(n),n=setTimeout(e,t,i)):e.apply(this,i),t}}const V_=e=>e==="start"?"left":e==="end"?"right":"center",ye=(e,t,n)=>e==="start"?t:e==="end"?n:(t+n)/2,nB=(e,t,n,i)=>e===(i?"left":"right")?n:e==="center"?(t+n)/2:t,Jc=e=>e===0||e===1,Qx=(e,t,n)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*ls/n)),Yx=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*ls/n)+1,tl={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*En)+1,easeOutSine:e=>Math.sin(e*En),easeInOutSine:e=>-.5*(Math.cos(Ee*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>Jc(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>Jc(e)?e:Qx(e,.075,.3),easeOutElastic:e=>Jc(e)?e:Yx(e,.075,.3),easeInOutElastic(e){return Jc(e)?e:e<.5?.5*Qx(e*2,.1125,.45):.5+.5*Yx(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-tl.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?tl.easeInBounce(e*2)*.5:tl.easeOutBounce(e*2-1)*.5+.5};function xP(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function Xx(e){return xP(e)?e:new Ol(e)}function sp(e){return xP(e)?e:new Ol(e).saturate(.5).darken(.1).hexString()}const iB=["x","y","borderWidth","radius","tension"],sB=["color","borderColor","backgroundColor"];function rB(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:sB},numbers:{type:"number",properties:iB}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function oB(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Jx=new Map;function aB(e,t){t=t||{};const n=e+JSON.stringify(t);let i=Jx.get(n);return i||(i=new Intl.NumberFormat(e,t),Jx.set(n,i)),i}function EP(e,t,n){return aB(t,n).format(e)}const lB={values(e){return Jt(e)?e:""+e},numeric(e,t,n){if(e===0)return"0";const i=this.chart.options.locale;let s,r=e;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(s="scientific"),r=cB(e,n)}const o=yP(Math.abs(r)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),EP(e,i,l)}};function cB(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e)),n}var SP={formatters:lB};function uB(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,n)=>n.lineWidth,tickColor:(t,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:SP.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const dr=Object.create(null),ig=Object.create(null);function el(e,t){if(!t)return e;const n=t.split(".");for(let i=0,s=n.length;i<s;++i){const r=n[i];e=e[r]||(e[r]=Object.create(null))}return e}function rp(e,t,n){return typeof t=="string"?Ll(el(e,t),n):Ll(el(e,""),t)}class hB{constructor(t,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,s)=>sp(s.backgroundColor),this.hoverBorderColor=(i,s)=>sp(s.borderColor),this.hoverColor=(i,s)=>sp(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(n)}set(t,n){return rp(this,t,n)}get(t){return el(this,t)}describe(t,n){return rp(ig,t,n)}override(t,n){return rp(dr,t,n)}route(t,n,i,s){const r=el(this,t),o=el(this,i),a="_"+n;Object.defineProperties(r,{[a]:{value:r[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[s];return ft(l)?Object.assign({},c,l):pt(l,c)},set(l){this[a]=l}}})}apply(t){t.forEach(n=>n(this))}}var Ut=new hB({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[rB,oB,uB]);function dB(e){return!e||Tt(e.size)||Tt(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function Zx(e,t,n,i,s){let r=t[s];return r||(r=t[s]=e.measureText(s).width,n.push(s)),r>i&&(i=r),i}function Os(e,t,n){const i=e.currentDevicePixelRatio,s=n!==0?Math.max(n/2,.5):0;return Math.round((t-s)*i)/i+s}function t1(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function e1(e,t,n,i){IP(e,t,n,i,null)}function IP(e,t,n,i,s){let r,o,a,l,c,h,d,f;const m=t.pointStyle,v=t.rotation,x=t.radius;let E=(v||0)*z9;if(m&&typeof m=="object"&&(r=m.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){e.save(),e.translate(n,i),e.rotate(E),e.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),e.restore();return}if(!(isNaN(x)||x<=0)){switch(e.beginPath(),m){default:s?e.ellipse(n,i,s/2,x,0,0,ls):e.arc(n,i,x,0,ls),e.closePath();break;case"triangle":h=s?s/2:x,e.moveTo(n+Math.sin(E)*h,i-Math.cos(E)*x),E+=Wx,e.lineTo(n+Math.sin(E)*h,i-Math.cos(E)*x),E+=Wx,e.lineTo(n+Math.sin(E)*h,i-Math.cos(E)*x),e.closePath();break;case"rectRounded":c=x*.516,l=x-c,o=Math.cos(E+Vs)*l,d=Math.cos(E+Vs)*(s?s/2-c:l),a=Math.sin(E+Vs)*l,f=Math.sin(E+Vs)*(s?s/2-c:l),e.arc(n-d,i-a,c,E-Ee,E-En),e.arc(n+f,i-o,c,E-En,E),e.arc(n+d,i+a,c,E,E+En),e.arc(n-f,i+o,c,E+En,E+Ee),e.closePath();break;case"rect":if(!v){l=Math.SQRT1_2*x,h=s?s/2:l,e.rect(n-h,i-l,2*h,2*l);break}E+=Vs;case"rectRot":d=Math.cos(E)*(s?s/2:x),o=Math.cos(E)*x,a=Math.sin(E)*x,f=Math.sin(E)*(s?s/2:x),e.moveTo(n-d,i-a),e.lineTo(n+f,i-o),e.lineTo(n+d,i+a),e.lineTo(n-f,i+o),e.closePath();break;case"crossRot":E+=Vs;case"cross":d=Math.cos(E)*(s?s/2:x),o=Math.cos(E)*x,a=Math.sin(E)*x,f=Math.sin(E)*(s?s/2:x),e.moveTo(n-d,i-a),e.lineTo(n+d,i+a),e.moveTo(n+f,i-o),e.lineTo(n-f,i+o);break;case"star":d=Math.cos(E)*(s?s/2:x),o=Math.cos(E)*x,a=Math.sin(E)*x,f=Math.sin(E)*(s?s/2:x),e.moveTo(n-d,i-a),e.lineTo(n+d,i+a),e.moveTo(n+f,i-o),e.lineTo(n-f,i+o),E+=Vs,d=Math.cos(E)*(s?s/2:x),o=Math.cos(E)*x,a=Math.sin(E)*x,f=Math.sin(E)*(s?s/2:x),e.moveTo(n-d,i-a),e.lineTo(n+d,i+a),e.moveTo(n+f,i-o),e.lineTo(n-f,i+o);break;case"line":o=s?s/2:Math.cos(E)*x,a=Math.sin(E)*x,e.moveTo(n-o,i-a),e.lineTo(n+o,i+a);break;case"dash":e.moveTo(n,i),e.lineTo(n+Math.cos(E)*(s?s/2:x),i+Math.sin(E)*x);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function AP(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function N_(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function O_(e){e.restore()}function fB(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),Tt(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function pB(e,t,n,i,s){if(s.strikethrough||s.underline){const r=e.measureText(i),o=t-r.actualBoundingBoxLeft,a=t+r.actualBoundingBoxRight,l=n-r.actualBoundingBoxAscent,c=n+r.actualBoundingBoxDescent,h=s.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=s.decorationWidth||2,e.moveTo(o,h),e.lineTo(a,h),e.stroke()}}function mB(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function jl(e,t,n,i,s,r={}){const o=Jt(t)?t:[t],a=r.strokeWidth>0&&r.strokeColor!=="";let l,c;for(e.save(),e.font=s.string,fB(e,r),l=0;l<o.length;++l)c=o[l],r.backdrop&&mB(e,r.backdrop),a&&(r.strokeColor&&(e.strokeStyle=r.strokeColor),Tt(r.strokeWidth)||(e.lineWidth=r.strokeWidth),e.strokeText(c,n,i,r.maxWidth)),e.fillText(c,n,i,r.maxWidth),pB(e,n,i,c,r),i+=Number(s.lineHeight);e.restore()}function jh(e,t){const{x:n,y:i,w:s,h:r,radius:o}=t;e.arc(n+o.topLeft,i+o.topLeft,o.topLeft,1.5*Ee,Ee,!0),e.lineTo(n,i+r-o.bottomLeft),e.arc(n+o.bottomLeft,i+r-o.bottomLeft,o.bottomLeft,Ee,En,!0),e.lineTo(n+s-o.bottomRight,i+r),e.arc(n+s-o.bottomRight,i+r-o.bottomRight,o.bottomRight,En,0,!0),e.lineTo(n+s,i+o.topRight),e.arc(n+s-o.topRight,i+o.topRight,o.topRight,0,-En,!0),e.lineTo(n+o.topLeft,i)}const gB=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,yB=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function _B(e,t){const n=(""+e).match(gB);if(!n||n[1]==="normal")return t*1.2;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100;break}return t*e}const vB=e=>+e||0;function bP(e,t){const n={},i=ft(t),s=i?Object.keys(t):t,r=ft(e)?i?o=>pt(e[o],e[t[o]]):o=>e[o]:()=>e;for(const o of s)n[o]=vB(r(o));return n}function kP(e){return bP(e,{top:"y",right:"x",bottom:"y",left:"x"})}function oo(e){return bP(e,["topLeft","topRight","bottomLeft","bottomRight"])}function gn(e){const t=kP(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function xe(e,t){e=e||{},t=t||Ut.font;let n=pt(e.size,t.size);typeof n=="string"&&(n=parseInt(n,10));let i=pt(e.style,t.style);i&&!(""+i).match(yB)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const s={family:pt(e.family,t.family),lineHeight:_B(pt(e.lineHeight,t.lineHeight),n),size:n,style:i,weight:pt(e.weight,t.weight),string:""};return s.string=dB(s),s}function Zc(e,t,n,i){let s,r,o;for(s=0,r=e.length;s<r;++s)if(o=e[s],o!==void 0&&o!==void 0)return o}function wB(e,t,n){const{min:i,max:s}=e,r=O9(t,(s-i)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(i,-Math.abs(r)),max:o(s,r)}}function zo(e,t){return Object.assign(Object.create(e),t)}function L_(e,t=[""],n,i,s=()=>e[0]){const r=n||e;typeof i>"u"&&(i=DP("_fallback",e));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:r,_fallback:i,_getTarget:s,override:a=>L_([a,...e],t,r,i)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete e[0][l],!0},get(a,l){return CP(a,l,()=>kB(l,t,e,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(a,l){return i1(a).includes(l)},ownKeys(a){return i1(a)},set(a,l,c){const h=a._storage||(a._storage=s());return a[l]=h[l]=c,delete a._keys,!0}})}function bo(e,t,n,i){const s={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:PP(e,i),setContext:r=>bo(e,r,n,i),override:r=>bo(e.override(r),t,n,i)};return new Proxy(s,{deleteProperty(r,o){return delete r[o],delete e[o],!0},get(r,o,a){return CP(r,o,()=>xB(r,o,a))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(e,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,o)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(r,o){return Reflect.has(e,o)},ownKeys(){return Reflect.ownKeys(e)},set(r,o,a){return e[o]=a,delete r[o],!0}})}function PP(e,t={scriptable:!0,indexable:!0}){const{_scriptable:n=t.scriptable,_indexable:i=t.indexable,_allKeys:s=t.allKeys}=e;return{allKeys:s,scriptable:n,indexable:i,isScriptable:ws(n)?n:()=>n,isIndexable:ws(i)?i:()=>i}}const TB=(e,t)=>e?e+D_(t):t,F_=(e,t)=>ft(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function CP(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const i=n();return e[t]=i,i}function xB(e,t,n){const{_proxy:i,_context:s,_subProxy:r,_descriptors:o}=e;let a=i[t];return ws(a)&&o.isScriptable(t)&&(a=EB(t,a,e,n)),Jt(a)&&a.length&&(a=SB(t,a,e,o.isIndexable)),F_(t,a)&&(a=bo(a,s,r&&r[t],o)),a}function EB(e,t,n,i){const{_proxy:s,_context:r,_subProxy:o,_stack:a}=n;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);a.add(e);let l=t(r,o||i);return a.delete(e),F_(e,l)&&(l=j_(s._scopes,s,e,l)),l}function SB(e,t,n,i){const{_proxy:s,_context:r,_subProxy:o,_descriptors:a}=n;if(typeof r.index<"u"&&i(e))return t[r.index%t.length];if(ft(t[0])){const l=t,c=s._scopes.filter(h=>h!==l);t=[];for(const h of l){const d=j_(c,s,e,h);t.push(bo(d,r,o&&o[e],a))}}return t}function RP(e,t,n){return ws(e)?e(t,n):e}const IB=(e,t)=>e===!0?t:typeof e=="string"?Ao(t,e):void 0;function AB(e,t,n,i,s){for(const r of t){const o=IB(n,r);if(o){e.add(o);const a=RP(o._fallback,n,s);if(typeof a<"u"&&a!==n&&a!==i)return a}else if(o===!1&&typeof i<"u"&&n!==i)return null}return!1}function j_(e,t,n,i){const s=t._rootScopes,r=RP(t._fallback,n,i),o=[...e,...s],a=new Set;a.add(i);let l=n1(a,o,n,r||n,i);return l===null||typeof r<"u"&&r!==n&&(l=n1(a,o,r,l,i),l===null)?!1:L_(Array.from(a),[""],s,r,()=>bB(t,n,i))}function n1(e,t,n,i,s){for(;n;)n=AB(e,t,n,i,s);return n}function bB(e,t,n){const i=e._getTarget();t in i||(i[t]={});const s=i[t];return Jt(s)&&ft(n)?n:s||{}}function kB(e,t,n,i){let s;for(const r of t)if(s=DP(TB(r,e),n),typeof s<"u")return F_(e,s)?j_(n,i,e,s):s}function DP(e,t){for(const n of t){if(!n)continue;const i=n[e];if(typeof i<"u")return i}}function i1(e){let t=e._keys;return t||(t=e._keys=PB(e._scopes)),t}function PB(e){const t=new Set;for(const n of e)for(const i of Object.keys(n).filter(s=>!s.startsWith("_")))t.add(i);return Array.from(t)}function B_(){return typeof window<"u"&&typeof document<"u"}function U_(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Bh(e,t,n){let i;return typeof e=="string"?(i=parseInt(e,10),e.indexOf("%")!==-1&&(i=i/100*t.parentNode[n])):i=e,i}const Cd=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function CB(e,t){return Cd(e).getPropertyValue(t)}const RB=["top","right","bottom","left"];function er(e,t,n){const i={};n=n?"-"+n:"";for(let s=0;s<4;s++){const r=RB[s];i[r]=parseFloat(e[t+"-"+r+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const DB=(e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot);function MB(e,t){const n=e.touches,i=n&&n.length?n[0]:e,{offsetX:s,offsetY:r}=i;let o=!1,a,l;if(DB(s,r,e.target))a=s,l=r;else{const c=t.getBoundingClientRect();a=i.clientX-c.left,l=i.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function zs(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:i}=t,s=Cd(n),r=s.boxSizing==="border-box",o=er(s,"padding"),a=er(s,"border","width"),{x:l,y:c,box:h}=MB(e,n),d=o.left+(h&&a.left),f=o.top+(h&&a.top);let{width:m,height:v}=t;return r&&(m-=o.width+a.width,v-=o.height+a.height),{x:Math.round((l-d)/m*n.width/i),y:Math.round((c-f)/v*n.height/i)}}function VB(e,t,n){let i,s;if(t===void 0||n===void 0){const r=e&&U_(e);if(!r)t=e.clientWidth,n=e.clientHeight;else{const o=r.getBoundingClientRect(),a=Cd(r),l=er(a,"border","width"),c=er(a,"padding");t=o.width-c.width-l.width,n=o.height-c.height-l.height,i=Bh(a.maxWidth,r,"clientWidth"),s=Bh(a.maxHeight,r,"clientHeight")}}return{width:t,height:n,maxWidth:i||Lh,maxHeight:s||Lh}}const Wi=e=>Math.round(e*10)/10;function NB(e,t,n,i){const s=Cd(e),r=er(s,"margin"),o=Bh(s.maxWidth,e,"clientWidth")||Lh,a=Bh(s.maxHeight,e,"clientHeight")||Lh,l=VB(e,t,n);let{width:c,height:h}=l;if(s.boxSizing==="content-box"){const f=er(s,"border","width"),m=er(s,"padding");c-=m.width+f.width,h-=m.height+f.height}return c=Math.max(0,c-r.width),h=Math.max(0,i?c/i:h-r.height),c=Wi(Math.min(c,o,l.maxWidth)),h=Wi(Math.min(h,a,l.maxHeight)),c&&!h&&(h=Wi(c/2)),(t!==void 0||n!==void 0)&&i&&l.height&&h>l.height&&(h=l.height,c=Wi(Math.floor(h*i))),{width:c,height:h}}function s1(e,t,n){const i=t||1,s=Wi(e.height*i),r=Wi(e.width*i);e.height=Wi(e.height),e.width=Wi(e.width);const o=e.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${e.height}px`,o.style.width=`${e.width}px`),e.currentDevicePixelRatio!==i||o.height!==s||o.width!==r?(e.currentDevicePixelRatio=i,o.height=s,o.width=r,e.ctx.setTransform(i,0,0,i,0,0),!0):!1}const OB=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};B_()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e}();function r1(e,t){const n=CB(e,t),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}const LB=function(e,t){return{x(n){return e+e+t-n},setWidth(n){t=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,i){return n-i},leftForLtr(n,i){return n-i}}},FB=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function ao(e,t,n){return e?LB(t,n):FB()}function MP(e,t){let n,i;(t==="ltr"||t==="rtl")&&(n=e.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=i)}function VP(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function tu(e,t,n){return e.options.clip?e[n]:t[n]}function jB(e,t){const{xScale:n,yScale:i}=e;return n&&i?{left:tu(n,t,"left"),right:tu(n,t,"right"),top:tu(i,t,"top"),bottom:tu(i,t,"bottom")}:t}function BB(e,t){const n=t._clip;if(n.disabled)return!1;const i=jB(t,e.chartArea);return{left:n.left===!1?0:i.left-(n.left===!0?0:n.left),right:n.right===!1?e.width:i.right+(n.right===!0?0:n.right),top:n.top===!1?0:i.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?e.height:i.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class UB{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,n,i,s){const r=n.listeners[s],o=n.duration;r.forEach(a=>a({chart:t,initial:n.initial,numSteps:o,currentStep:Math.min(i-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=wP.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let n=0;this._charts.forEach((i,s)=>{if(!i.running||!i.items.length)return;const r=i.items;let o=r.length-1,a=!1,l;for(;o>=0;--o)l=r[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(t),a=!0):(r[o]=r[r.length-1],r.pop());a&&(s.draw(),this._notify(s,i,t,"progress")),r.length||(i.running=!1,this._notify(s,i,t,"complete"),i.initial=!1),n+=r.length}),this._lastDate=t,n===0&&(this._running=!1)}_getAnims(t){const n=this._charts;let i=n.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(t,i)),i}listen(t,n,i){this._getAnims(t).listeners[n].push(i)}add(t,n){!n||!n.length||this._getAnims(t).items.push(...n)}has(t){return this._getAnims(t).items.length>0}start(t){const n=this._charts.get(t);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((i,s)=>Math.max(i,s._duration),0),this._refresh())}running(t){if(!this._running)return!1;const n=this._charts.get(t);return!(!n||!n.running||!n.items.length)}stop(t){const n=this._charts.get(t);if(!n||!n.items.length)return;const i=n.items;let s=i.length-1;for(;s>=0;--s)i[s].cancel();n.items=[],this._notify(t,n,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var Jn=new UB;const o1="transparent",zB={boolean(e,t,n){return n>.5?t:e},color(e,t,n){const i=Xx(e||o1),s=i.valid&&Xx(t||o1);return s&&s.valid?s.mix(i,n).hexString():t},number(e,t,n){return e+(t-e)*n}};class $B{constructor(t,n,i,s){const r=n[i];s=Zc([t.to,s,r,t.from]);const o=Zc([t.from,r,s]);this._active=!0,this._fn=t.fn||zB[t.type||typeof o],this._easing=tl[t.easing]||tl.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=n,this._prop=i,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(t,n,i){if(this._active){this._notify(!1);const s=this._target[this._prop],r=i-this._start,o=this._duration-r;this._start=i,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=Zc([t.to,n,s,t.from]),this._from=Zc([t.from,s,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const n=t-this._start,i=this._duration,s=this._prop,r=this._from,o=this._loop,a=this._to;let l;if(this._active=r!==a&&(o||n<i),!this._active){this._target[s]=a,this._notify(!0);return}if(n<0){this._target[s]=r;return}l=n/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(r,a,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((n,i)=>{t.push({res:n,rej:i})})}_notify(t){const n=t?"res":"rej",i=this._promises||[];for(let s=0;s<i.length;s++)i[s][n]()}}class NP{constructor(t,n){this._chart=t,this._properties=new Map,this.configure(n)}configure(t){if(!ft(t))return;const n=Object.keys(Ut.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(s=>{const r=t[s];if(!ft(r))return;const o={};for(const a of n)o[a]=r[a];(Jt(r.properties)&&r.properties||[s]).forEach(a=>{(a===s||!i.has(a))&&i.set(a,o)})})}_animateOptions(t,n){const i=n.options,s=WB(t,i);if(!s)return[];const r=this._createAnimations(s,i);return i.$shared&&HB(t.options.$animations,i).then(()=>{t.options=i},()=>{}),r}_createAnimations(t,n){const i=this._properties,s=[],r=t.$animations||(t.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){s.push(...this._animateOptions(t,n));continue}const h=n[c];let d=r[c];const f=i.get(c);if(d)if(f&&d.active()){d.update(f,h,a);continue}else d.cancel();if(!f||!f.duration){t[c]=h;continue}r[c]=d=new $B(f,t,c,h),s.push(d)}return s}update(t,n){if(this._properties.size===0){Object.assign(t,n);return}const i=this._createAnimations(t,n);if(i.length)return Jn.add(this._chart,i),!0}}function HB(e,t){const n=[],i=Object.keys(t);for(let s=0;s<i.length;s++){const r=e[i[s]];r&&r.active()&&n.push(r.wait())}return Promise.all(n)}function WB(e,t){if(!t)return;let n=e.options;if(!n){e.options=t;return}return n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function a1(e,t){const n=e&&e.options||{},i=n.reverse,s=n.min===void 0?t:0,r=n.max===void 0?t:0;return{start:i?r:s,end:i?s:r}}function qB(e,t,n){if(n===!1)return!1;const i=a1(e,n),s=a1(t,n);return{top:s.end,right:i.end,bottom:s.start,left:i.start}}function KB(e){let t,n,i,s;return ft(e)?(t=e.top,n=e.right,i=e.bottom,s=e.left):t=n=i=s=e,{top:t,right:n,bottom:i,left:s,disabled:e===!1}}function OP(e,t){const n=[],i=e._getSortedDatasetMetas(t);let s,r;for(s=0,r=i.length;s<r;++s)n.push(i[s].index);return n}function l1(e,t,n,i={}){const s=e.keys,r=i.mode==="single";let o,a,l,c;if(t===null)return;let h=!1;for(o=0,a=s.length;o<a;++o){if(l=+s[o],l===n){if(h=!0,i.all)continue;break}c=e.values[l],mn(c)&&(r||t===0||cs(t)===cs(c))&&(t+=c)}return!h&&!i.all?0:t}function GB(e,t){const{iScale:n,vScale:i}=t,s=n.axis==="x"?"x":"y",r=i.axis==="x"?"x":"y",o=Object.keys(e),a=new Array(o.length);let l,c,h;for(l=0,c=o.length;l<c;++l)h=o[l],a[l]={[s]:h,[r]:e[h]};return a}function op(e,t){const n=e&&e.options.stacked;return n||n===void 0&&t.stack!==void 0}function QB(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}function YB(e){const{min:t,max:n,minDefined:i,maxDefined:s}=e.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}function XB(e,t,n){const i=e[t]||(e[t]={});return i[n]||(i[n]={})}function c1(e,t,n,i){for(const s of t.getMatchingVisibleMetas(i).reverse()){const r=e[s.index];if(n&&r>0||!n&&r<0)return s.index}return null}function u1(e,t){const{chart:n,_cachedMeta:i}=e,s=n._stacks||(n._stacks={}),{iScale:r,vScale:o,index:a}=i,l=r.axis,c=o.axis,h=QB(r,o,i),d=t.length;let f;for(let m=0;m<d;++m){const v=t[m],{[l]:x,[c]:E}=v,y=v._stacks||(v._stacks={});f=y[c]=XB(s,h,x),f[a]=E,f._top=c1(f,o,!0,i.type),f._bottom=c1(f,o,!1,i.type);const w=f._visualValues||(f._visualValues={});w[a]=E}}function ap(e,t){const n=e.scales;return Object.keys(n).filter(i=>n[i].axis===t).shift()}function JB(e,t){return zo(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function ZB(e,t,n){return zo(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}function ga(e,t){const n=e.controller.index,i=e.vScale&&e.vScale.axis;if(i){t=t||e._parsed;for(const s of t){const r=s._stacks;if(!r||r[i]===void 0||r[i][n]===void 0)return;delete r[i][n],r[i]._visualValues!==void 0&&r[i]._visualValues[n]!==void 0&&delete r[i]._visualValues[n]}}}const lp=e=>e==="reset"||e==="none",h1=(e,t)=>t?e:Object.assign({},e),tU=(e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:OP(n,!0),values:null};class nl{constructor(t,n){this.chart=t,this._ctx=t.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=op(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&ga(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,n=this._cachedMeta,i=this.getDataset(),s=(d,f,m,v)=>d==="x"?f:d==="r"?v:m,r=n.xAxisID=pt(i.xAxisID,ap(t,"x")),o=n.yAxisID=pt(i.yAxisID,ap(t,"y")),a=n.rAxisID=pt(i.rAxisID,ap(t,"r")),l=n.indexAxis,c=n.iAxisID=s(l,r,o,a),h=n.vAxisID=s(l,o,r,a);n.xScale=this.getScaleForId(r),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const n=this._cachedMeta;return t===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&Gx(this._data,this),t._stacked&&ga(t)}_dataCheck(){const t=this.getDataset(),n=t.data||(t.data=[]),i=this._data;if(ft(n)){const s=this._cachedMeta;this._data=GB(n,s)}else if(i!==n){if(i){Gx(i,this);const s=this._cachedMeta;ga(s),s._parsed=[]}n&&Object.isExtensible(n)&&tB(n,this),this._syncList=[],this._data=n}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const n=this._cachedMeta,i=this.getDataset();let s=!1;this._dataCheck();const r=n._stacked;n._stacked=op(n.vScale,n),n.stack!==i.stack&&(s=!0,ga(n),n.stack=i.stack),this._resyncElements(t),(s||r!==n._stacked)&&(u1(this,n._parsed),n._stacked=op(n.vScale,n))}configure(){const t=this.chart.config,n=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),n,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,n){const{_cachedMeta:i,_data:s}=this,{iScale:r,_stacked:o}=i,a=r.axis;let l=t===0&&n===s.length?!0:i._sorted,c=t>0&&i._parsed[t-1],h,d,f;if(this._parsing===!1)i._parsed=s,i._sorted=!0,f=s;else{Jt(s[t])?f=this.parseArrayData(i,s,t,n):ft(s[t])?f=this.parseObjectData(i,s,t,n):f=this.parsePrimitiveData(i,s,t,n);const m=()=>d[a]===null||c&&d[a]<c[a];for(h=0;h<n;++h)i._parsed[h+t]=d=f[h],l&&(m()&&(l=!1),c=d);i._sorted=l}o&&u1(this,f)}parsePrimitiveData(t,n,i,s){const{iScale:r,vScale:o}=t,a=r.axis,l=o.axis,c=r.getLabels(),h=r===o,d=new Array(s);let f,m,v;for(f=0,m=s;f<m;++f)v=f+i,d[f]={[a]:h||r.parse(c[v],v),[l]:o.parse(n[v],v)};return d}parseArrayData(t,n,i,s){const{xScale:r,yScale:o}=t,a=new Array(s);let l,c,h,d;for(l=0,c=s;l<c;++l)h=l+i,d=n[h],a[l]={x:r.parse(d[0],h),y:o.parse(d[1],h)};return a}parseObjectData(t,n,i,s){const{xScale:r,yScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(s);let h,d,f,m;for(h=0,d=s;h<d;++h)f=h+i,m=n[f],c[h]={x:r.parse(Ao(m,a),f),y:o.parse(Ao(m,l),f)};return c}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,n,i){const s=this.chart,r=this._cachedMeta,o=n[t.axis],a={keys:OP(s,!0),values:n._stacks[t.axis]._visualValues};return l1(a,o,r.index,{mode:i})}updateRangeFromParsed(t,n,i,s){const r=i[n.axis];let o=r===null?NaN:r;const a=s&&i._stacks[n.axis];s&&a&&(s.values=a,o=l1(s,r,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,n){const i=this._cachedMeta,s=i._parsed,r=i._sorted&&t===i.iScale,o=s.length,a=this._getOtherScale(t),l=tU(n,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:d}=YB(a);let f,m;function v(){m=s[f];const x=m[a.axis];return!mn(m[t.axis])||h>x||d<x}for(f=0;f<o&&!(!v()&&(this.updateRangeFromParsed(c,t,m,l),r));++f);if(r){for(f=o-1;f>=0;--f)if(!v()){this.updateRangeFromParsed(c,t,m,l);break}}return c}getAllParsedValues(t){const n=this._cachedMeta._parsed,i=[];let s,r,o;for(s=0,r=n.length;s<r;++s)o=n[s][t.axis],mn(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const n=this._cachedMeta,i=n.iScale,s=n.vScale,r=this.getParsed(t);return{label:i?""+i.getLabelForValue(r[i.axis]):"",value:s?""+s.getLabelForValue(r[s.axis]):""}}_update(t){const n=this._cachedMeta;this.update(t||"default"),n._clip=KB(pt(this.options.clip,qB(n.xScale,n.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,n=this.chart,i=this._cachedMeta,s=i.data||[],r=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||s.length-a,c=this.options.drawActiveElementsOnTop;let h;for(i.dataset&&i.dataset.draw(t,r,a,l),h=a;h<a+l;++h){const d=s[h];d.hidden||(d.active&&c?o.push(d):d.draw(t,r))}for(h=0;h<o.length;++h)o[h].draw(t,r)}getStyle(t,n){const i=n?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,n,i){const s=this.getDataset();let r;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];r=o.$context||(o.$context=ZB(this.getContext(),t,o)),r.parsed=this.getParsed(t),r.raw=s.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=JB(this.chart.getContext(),this.index)),r.dataset=s,r.index=r.datasetIndex=this.index;return r.active=!!n,r.mode=i,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,n){return this._resolveElementOptions(this.dataElementType.id,n,t)}_resolveElementOptions(t,n="default",i){const s=n==="active",r=this._cachedDataOpts,o=t+"-"+n,a=r[o],l=this.enableOptionSharing&&Fl(i);if(a)return h1(a,l);const c=this.chart.config,h=c.datasetElementScopeKeys(this._type,t),d=s?[`${t}Hover`,"hover",t,""]:[t,""],f=c.getOptionScopes(this.getDataset(),h),m=Object.keys(Ut.elements[t]),v=()=>this.getContext(i,s,n),x=c.resolveNamedOptions(f,m,v,d);return x.$shared&&(x.$shared=l,r[o]=Object.freeze(h1(x,l))),x}_resolveAnimations(t,n,i){const s=this.chart,r=this._cachedDataOpts,o=`animation-${n}`,a=r[o];if(a)return a;let l;if(s.options.animation!==!1){const h=this.chart.config,d=h.datasetAnimationScopeKeys(this._type,n),f=h.getOptionScopes(this.getDataset(),d);l=h.createResolver(f,this.getContext(t,i,n))}const c=new NP(s,l&&l.animations);return l&&l._cacheable&&(r[o]=Object.freeze(c)),c}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,n){return!n||lp(t)||this.chart._animationsDisabled}_getSharedOptions(t,n){const i=this.resolveDataElementOptions(t,n),s=this._sharedOptions,r=this.getSharedOptions(i),o=this.includeOptions(n,r)||r!==s;return this.updateSharedOptions(r,n,i),{sharedOptions:r,includeOptions:o}}updateElement(t,n,i,s){lp(s)?Object.assign(t,i):this._resolveAnimations(n,s).update(t,i)}updateSharedOptions(t,n,i){t&&!lp(n)&&this._resolveAnimations(void 0,n).update(t,i)}_setStyle(t,n,i,s){t.active=s;const r=this.getStyle(n,s);this._resolveAnimations(n,i,s).update(t,{options:!s&&this.getSharedOptions(r)||r})}removeHoverStyle(t,n,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,n,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const n=this._data,i=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const s=i.length,r=n.length,o=Math.min(r,s);o&&this.parse(0,o),r>s?this._insertElements(s,r-s,t):r<s&&this._removeElements(r,s-r)}_insertElements(t,n,i=!0){const s=this._cachedMeta,r=s.data,o=t+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(r),a=t;a<o;++a)r[a]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(t,n),i&&this.updateElements(r,t,n,"reset")}updateElements(t,n,i,s){}_removeElements(t,n){const i=this._cachedMeta;if(this._parsing){const s=i._parsed.splice(t,n);i._stacked&&ga(i,s)}i.data.splice(t,n)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[n,i,s]=t;this[n](i,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,n){n&&this._sync(["_removeElements",t,n]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}ht(nl,"defaults",{}),ht(nl,"datasetElementType",null),ht(nl,"dataElementType",null);function eU(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let i=[];for(let s=0,r=n.length;s<r;s++)i=i.concat(n[s].controller.getAllParsedValues(e));e._cache.$bar=vP(i.sort((s,r)=>s-r))}return e._cache.$bar}function nU(e){const t=e.iScale,n=eU(t,e.type);let i=t._length,s,r,o,a;const l=()=>{o===32767||o===-32768||(Fl(a)&&(i=Math.min(i,Math.abs(o-a)||i)),a=o)};for(s=0,r=n.length;s<r;++s)o=t.getPixelForValue(n[s]),l();for(a=void 0,s=0,r=t.ticks.length;s<r;++s)o=t.getPixelForTick(s),l();return i}function iU(e,t,n,i){const s=n.barThickness;let r,o;return Tt(s)?(r=t.min*n.categoryPercentage,o=n.barPercentage):(r=s*i,o=1),{chunk:r/i,ratio:o,start:t.pixels[e]-r/2}}function sU(e,t,n,i){const s=t.pixels,r=s[e];let o=e>0?s[e-1]:null,a=e<s.length-1?s[e+1]:null;const l=n.categoryPercentage;o===null&&(o=r-(a===null?t.end-t.start:a-r)),a===null&&(a=r+r-o);const c=r-(r-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/i,ratio:n.barPercentage,start:c}}function rU(e,t,n,i){const s=n.parse(e[0],i),r=n.parse(e[1],i),o=Math.min(s,r),a=Math.max(s,r);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),t[n.axis]=c,t._custom={barStart:l,barEnd:c,start:s,end:r,min:o,max:a}}function LP(e,t,n,i){return Jt(e)?rU(e,t,n,i):t[n.axis]=n.parse(e,i),t}function d1(e,t,n,i){const s=e.iScale,r=e.vScale,o=s.getLabels(),a=s===r,l=[];let c,h,d,f;for(c=n,h=n+i;c<h;++c)f=t[c],d={},d[s.axis]=a||s.parse(o[c],c),l.push(LP(f,d,r,c));return l}function cp(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function oU(e,t,n){return e!==0?cs(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}function aU(e){let t,n,i,s,r;return e.horizontal?(t=e.base>e.x,n="left",i="right"):(t=e.base<e.y,n="bottom",i="top"),t?(s="end",r="start"):(s="start",r="end"),{start:n,end:i,reverse:t,top:s,bottom:r}}function lU(e,t,n,i){let s=t.borderSkipped;const r={};if(!s){e.borderSkipped=r;return}if(s===!0){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:h}=aU(e);s==="middle"&&n&&(e.enableBorderRadius=!0,(n._top||0)===i?s=c:(n._bottom||0)===i?s=h:(r[f1(h,o,a,l)]=!0,s=c)),r[f1(s,o,a,l)]=!0,e.borderSkipped=r}function f1(e,t,n,i){return i?(e=cU(e,t,n),e=p1(e,n,t)):e=p1(e,t,n),e}function cU(e,t,n){return e===t?n:e===n?t:e}function p1(e,t,n){return e==="start"?t:e==="end"?n:e}function uU(e,{inflateAmount:t},n){e.inflateAmount=t==="auto"?n===1?.33:0:t}class Nu extends nl{parsePrimitiveData(t,n,i,s){return d1(t,n,i,s)}parseArrayData(t,n,i,s){return d1(t,n,i,s)}parseObjectData(t,n,i,s){const{iScale:r,vScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=r.axis==="x"?a:l,h=o.axis==="x"?a:l,d=[];let f,m,v,x;for(f=i,m=i+s;f<m;++f)x=n[f],v={},v[r.axis]=r.parse(Ao(x,c),f),d.push(LP(Ao(x,h),v,o,f));return d}updateRangeFromParsed(t,n,i,s){super.updateRangeFromParsed(t,n,i,s);const r=i._custom;r&&n===this._cachedMeta.vScale&&(t.min=Math.min(t.min,r.min),t.max=Math.max(t.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const n=this._cachedMeta,{iScale:i,vScale:s}=n,r=this.getParsed(t),o=r._custom,a=cp(o)?"["+o.start+", "+o.end+"]":""+s.getLabelForValue(r[s.axis]);return{label:""+i.getLabelForValue(r[i.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,t)}updateElements(t,n,i,s){const r=s==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),h=this._getRuler(),{sharedOptions:d,includeOptions:f}=this._getSharedOptions(n,s);for(let m=n;m<n+i;m++){const v=this.getParsed(m),x=r||Tt(v[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(m),E=this._calculateBarIndexPixels(m,h),y=(v._stacks||{})[a.axis],w={horizontal:c,base:x.base,enableBorderRadius:!y||cp(v._custom)||o===y._top||o===y._bottom,x:c?x.head:E.center,y:c?E.center:x.head,height:c?E.size:Math.abs(x.size),width:c?Math.abs(x.size):E.size};f&&(w.options=d||this.resolveDataElementOptions(m,t[m].active?"active":s));const S=w.options||t[m].options;lU(w,S,y,o),uU(w,S,h.ratio),this.updateElement(t[m],m,w,s)}}_getStacks(t,n){const{iScale:i}=this._cachedMeta,s=i.getMatchingVisibleMetas(this._type).filter(h=>h.controller.options.grouped),r=i.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(n),l=a&&a[i.axis],c=h=>{const d=h._parsed.find(m=>m[i.axis]===l),f=d&&d[h.vScale.axis];if(Tt(f)||isNaN(f))return!0};for(const h of s)if(!(n!==void 0&&c(h))&&((r===!1||o.indexOf(h.stack)===-1||r===void 0&&h.stack===void 0)&&o.push(h.stack),h.index===t))break;return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,n=this.chart.options.indexAxis;return Object.keys(t).filter(i=>t[i].axis===n).shift()}_getAxis(){const t={},n=this.getFirstScaleIdForIndexAxis();for(const i of this.chart.data.datasets)t[pt(this.chart.options.indexAxis==="x"?i.xAxisID:i.yAxisID,n)]=!0;return Object.keys(t)}_getStackIndex(t,n,i){const s=this._getStacks(t,i),r=n!==void 0?s.indexOf(n):-1;return r===-1?s.length-1:r}_getRuler(){const t=this.options,n=this._cachedMeta,i=n.iScale,s=[];let r,o;for(r=0,o=n.data.length;r<o;++r)s.push(i.getPixelForValue(this.getParsed(r)[i.axis],r));const a=t.barThickness;return{min:a||nU(n),pixels:s,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:a?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:n,_stacked:i,index:s},options:{base:r,minBarLength:o}}=this,a=r||0,l=this.getParsed(t),c=l._custom,h=cp(c);let d=l[n.axis],f=0,m=i?this.applyStack(n,l,i):d,v,x;m!==d&&(f=m-d,m=d),h&&(d=c.barStart,m=c.barEnd-c.barStart,d!==0&&cs(d)!==cs(c.barEnd)&&(f=0),f+=d);const E=!Tt(r)&&!h?r:f;let y=n.getPixelForValue(E);if(this.chart.getDataVisibility(t)?v=n.getPixelForValue(f+m):v=y,x=v-y,Math.abs(x)<o){x=oU(x,n,a)*o,d===a&&(y-=x/2);const w=n.getPixelForDecimal(0),S=n.getPixelForDecimal(1),D=Math.min(w,S),M=Math.max(w,S);y=Math.max(Math.min(y,M),D),v=y+x,i&&!h&&(l._stacks[n.axis]._visualValues[s]=n.getValueForPixel(v)-n.getValueForPixel(y))}if(y===n.getPixelForValue(a)){const w=cs(x)*n.getLineWidthForValue(a)/2;y+=w,x-=w}return{size:x,base:y,head:v,center:v+x/2}}_calculateBarIndexPixels(t,n){const i=n.scale,s=this.options,r=s.skipNull,o=pt(s.maxBarThickness,1/0);let a,l;const c=this._getAxisCount();if(n.grouped){const h=r?this._getStackCount(t):n.stackCount,d=s.barThickness==="flex"?sU(t,n,s,h*c):iU(t,n,s,h*c),f=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,m=this._getAxis().indexOf(pt(f,this.getFirstScaleIdForIndexAxis())),v=this._getStackIndex(this.index,this._cachedMeta.stack,r?t:void 0)+m;a=d.start+d.chunk*v+d.chunk/2,l=Math.min(o,d.chunk*d.ratio)}else a=i.getPixelForValue(this.getParsed(t)[i.axis],t),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const t=this._cachedMeta,n=t.vScale,i=t.data,s=i.length;let r=0;for(;r<s;++r)this.getParsed(r)[n.axis]!==null&&!i[r].hidden&&i[r].draw(this._ctx)}}ht(Nu,"id","bar"),ht(Nu,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),ht(Nu,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function Ls(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class z_{constructor(t){ht(this,"options");this.options=t||{}}static override(t){Object.assign(z_.prototype,t)}init(){}formats(){return Ls()}parse(){return Ls()}format(){return Ls()}add(){return Ls()}diff(){return Ls()}startOf(){return Ls()}endOf(){return Ls()}}var hU={_date:z_};function dU(e,t,n,i){const{controller:s,data:r,_sorted:o}=e,a=s._cachedMeta.iScale,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(a&&t===a.axis&&t!=="r"&&o&&r.length){const c=a._reversePixels?J9:ng;if(i){if(s._sharedOptions){const h=r[0],d=typeof h.getRange=="function"&&h.getRange(t);if(d){const f=c(r,t,n-d),m=c(r,t,n+d);return{lo:f.lo,hi:m.hi}}}}else{const h=c(r,t,n);if(l){const{vScale:d}=s._cachedMeta,{_parsed:f}=e,m=f.slice(0,h.lo+1).reverse().findIndex(x=>!Tt(x[d.axis]));h.lo-=Math.max(0,m);const v=f.slice(h.hi).findIndex(x=>!Tt(x[d.axis]));h.hi+=Math.max(0,v)}return h}}return{lo:0,hi:r.length-1}}function Rd(e,t,n,i,s){const r=e.getSortedVisibleDatasetMetas(),o=n[t];for(let a=0,l=r.length;a<l;++a){const{index:c,data:h}=r[a],{lo:d,hi:f}=dU(r[a],t,o,s);for(let m=d;m<=f;++m){const v=h[m];v.skip||i(v,c,m)}}}function fU(e){const t=e.indexOf("x")!==-1,n=e.indexOf("y")!==-1;return function(i,s){const r=t?Math.abs(i.x-s.x):0,o=n?Math.abs(i.y-s.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function up(e,t,n,i,s){const r=[];return!s&&!e.isPointInArea(t)||Rd(e,n,t,function(a,l,c){!s&&!AP(a,e.chartArea,0)||a.inRange(t.x,t.y,i)&&r.push({element:a,datasetIndex:l,index:c})},!0),r}function pU(e,t,n,i){let s=[];function r(o,a,l){const{startAngle:c,endAngle:h}=o.getProps(["startAngle","endAngle"],i),{angle:d}=G9(o,{x:t.x,y:t.y});Y9(d,c,h)&&s.push({element:o,datasetIndex:a,index:l})}return Rd(e,n,t,r),s}function mU(e,t,n,i,s,r){let o=[];const a=fU(n);let l=Number.POSITIVE_INFINITY;function c(h,d,f){const m=h.inRange(t.x,t.y,s);if(i&&!m)return;const v=h.getCenterPoint(s);if(!(!!r||e.isPointInArea(v))&&!m)return;const E=a(t,v);E<l?(o=[{element:h,datasetIndex:d,index:f}],l=E):E===l&&o.push({element:h,datasetIndex:d,index:f})}return Rd(e,n,t,c),o}function hp(e,t,n,i,s,r){return!r&&!e.isPointInArea(t)?[]:n==="r"&&!i?pU(e,t,n,s):mU(e,t,n,i,s,r)}function m1(e,t,n,i,s){const r=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return Rd(e,n,t,(l,c,h)=>{l[o]&&l[o](t[n],s)&&(r.push({element:l,datasetIndex:c,index:h}),a=a||l.inRange(t.x,t.y,s))}),i&&!a?[]:r}var gU={modes:{index(e,t,n,i){const s=zs(t,e),r=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?up(e,s,r,i,o):hp(e,s,r,!1,i,o),l=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach(c=>{const h=a[0].index,d=c.data[h];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:h})}),l):[]},dataset(e,t,n,i){const s=zs(t,e),r=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?up(e,s,r,i,o):hp(e,s,r,!1,i,o);if(a.length>0){const l=a[0].datasetIndex,c=e.getDatasetMeta(l).data;a=[];for(let h=0;h<c.length;++h)a.push({element:c[h],datasetIndex:l,index:h})}return a},point(e,t,n,i){const s=zs(t,e),r=n.axis||"xy",o=n.includeInvisible||!1;return up(e,s,r,i,o)},nearest(e,t,n,i){const s=zs(t,e),r=n.axis||"xy",o=n.includeInvisible||!1;return hp(e,s,r,n.intersect,i,o)},x(e,t,n,i){const s=zs(t,e);return m1(e,s,"x",n.intersect,i)},y(e,t,n,i){const s=zs(t,e);return m1(e,s,"y",n.intersect,i)}}};const FP=["left","top","right","bottom"];function ya(e,t){return e.filter(n=>n.pos===t)}function g1(e,t){return e.filter(n=>FP.indexOf(n.pos)===-1&&n.box.axis===t)}function _a(e,t){return e.sort((n,i)=>{const s=t?i:n,r=t?n:i;return s.weight===r.weight?s.index-r.index:s.weight-r.weight})}function yU(e){const t=[];let n,i,s,r,o,a;for(n=0,i=(e||[]).length;n<i;++n)s=e[n],{position:r,options:{stack:o,stackWeight:a=1}}=s,t.push({index:n,box:s,pos:r,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&r+o,stackWeight:a});return t}function _U(e){const t={};for(const n of e){const{stack:i,pos:s,stackWeight:r}=n;if(!i||!FP.includes(s))continue;const o=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return t}function vU(e,t){const n=_U(e),{vBoxMaxWidth:i,hBoxMaxHeight:s}=t;let r,o,a;for(r=0,o=e.length;r<o;++r){a=e[r];const{fullSize:l}=a.box,c=n[a.stack],h=c&&a.stackWeight/c.weight;a.horizontal?(a.width=h?h*i:l&&t.availableWidth,a.height=s):(a.width=i,a.height=h?h*s:l&&t.availableHeight)}return n}function wU(e){const t=yU(e),n=_a(t.filter(c=>c.box.fullSize),!0),i=_a(ya(t,"left"),!0),s=_a(ya(t,"right")),r=_a(ya(t,"top"),!0),o=_a(ya(t,"bottom")),a=g1(t,"x"),l=g1(t,"y");return{fullSize:n,leftAndTop:i.concat(r),rightAndBottom:s.concat(l).concat(o).concat(a),chartArea:ya(t,"chartArea"),vertical:i.concat(s).concat(l),horizontal:r.concat(o).concat(a)}}function y1(e,t,n,i){return Math.max(e[n],t[n])+Math.max(e[i],t[i])}function jP(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function TU(e,t,n,i){const{pos:s,box:r}=n,o=e.maxPadding;if(!ft(s)){n.size&&(e[s]-=n.size);const d=i[n.stack]||{size:0,count:1};d.size=Math.max(d.size,n.horizontal?r.height:r.width),n.size=d.size/d.count,e[s]+=n.size}r.getPadding&&jP(o,r.getPadding());const a=Math.max(0,t.outerWidth-y1(o,e,"left","right")),l=Math.max(0,t.outerHeight-y1(o,e,"top","bottom")),c=a!==e.w,h=l!==e.h;return e.w=a,e.h=l,n.horizontal?{same:c,other:h}:{same:h,other:c}}function xU(e){const t=e.maxPadding;function n(i){const s=Math.max(t[i]-e[i],0);return e[i]+=s,s}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}function EU(e,t){const n=t.maxPadding;function i(s){const r={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{r[o]=Math.max(t[o],n[o])}),r}return i(e?["left","right"]:["top","bottom"])}function Ca(e,t,n,i){const s=[];let r,o,a,l,c,h;for(r=0,o=e.length,c=0;r<o;++r){a=e[r],l=a.box,l.update(a.width||t.w,a.height||t.h,EU(a.horizontal,t));const{same:d,other:f}=TU(t,n,a,i);c|=d&&s.length,h=h||f,l.fullSize||s.push(a)}return c&&Ca(s,t,n,i)||h}function eu(e,t,n,i,s){e.top=n,e.left=t,e.right=t+i,e.bottom=n+s,e.width=i,e.height=s}function _1(e,t,n,i){const s=n.padding;let{x:r,y:o}=t;for(const a of e){const l=a.box,c=i[a.stack]||{placed:0,weight:1},h=a.stackWeight/c.weight||1;if(a.horizontal){const d=t.w*h,f=c.size||l.height;Fl(c.start)&&(o=c.start),l.fullSize?eu(l,s.left,o,n.outerWidth-s.right-s.left,f):eu(l,t.left+c.placed,o,d,f),c.start=o,c.placed+=d,o=l.bottom}else{const d=t.h*h,f=c.size||l.width;Fl(c.start)&&(r=c.start),l.fullSize?eu(l,r,s.top,f,n.outerHeight-s.bottom-s.top):eu(l,r,t.top+c.placed,f,d),c.start=r,c.placed+=d,r=l.right}}t.x=r,t.y=o}var cn={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(n){t.draw(n)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;n!==-1&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,i){if(!e)return;const s=gn(e.options.layout.padding),r=Math.max(t-s.width,0),o=Math.max(n-s.height,0),a=wU(e.boxes),l=a.vertical,c=a.horizontal;yt(e.boxes,x=>{typeof x.beforeLayout=="function"&&x.beforeLayout()});const h=l.reduce((x,E)=>E.box.options&&E.box.options.display===!1?x:x+1,0)||1,d=Object.freeze({outerWidth:t,outerHeight:n,padding:s,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/h,hBoxMaxHeight:o/2}),f=Object.assign({},s);jP(f,gn(i));const m=Object.assign({maxPadding:f,w:r,h:o,x:s.left,y:s.top},s),v=vU(l.concat(c),d);Ca(a.fullSize,m,d,v),Ca(l,m,d,v),Ca(c,m,d,v)&&Ca(l,m,d,v),xU(m),_1(a.leftAndTop,m,d,v),m.x+=m.w,m.y+=m.h,_1(a.rightAndBottom,m,d,v),e.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},yt(a.chartArea,x=>{const E=x.box;Object.assign(E,e.chartArea),E.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class BP{acquireContext(t,n){}releaseContext(t){return!1}addEventListener(t,n,i){}removeEventListener(t,n,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,n,i,s){return n=Math.max(0,n||t.width),i=i||t.height,{width:n,height:Math.max(0,s?Math.floor(n/s):i)}}isAttached(t){return!0}updateConfig(t){}}class SU extends BP{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Ou="$chartjs",IU={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},v1=e=>e===null||e==="";function AU(e,t){const n=e.style,i=e.getAttribute("height"),s=e.getAttribute("width");if(e[Ou]={initial:{height:i,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",v1(s)){const r=r1(e,"width");r!==void 0&&(e.width=r)}if(v1(i))if(e.style.height==="")e.height=e.width/(t||2);else{const r=r1(e,"height");r!==void 0&&(e.height=r)}return e}const UP=OB?{passive:!0}:!1;function bU(e,t,n){e&&e.addEventListener(t,n,UP)}function kU(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,UP)}function PU(e,t){const n=IU[e.type]||e.type,{x:i,y:s}=zs(e,t);return{type:n,chart:t,native:e,x:i!==void 0?i:null,y:s!==void 0?s:null}}function Uh(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function CU(e,t,n){const i=e.canvas,s=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||Uh(a.addedNodes,i),o=o&&!Uh(a.removedNodes,i);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function RU(e,t,n){const i=e.canvas,s=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||Uh(a.removedNodes,i),o=o&&!Uh(a.addedNodes,i);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const Bl=new Map;let w1=0;function zP(){const e=window.devicePixelRatio;e!==w1&&(w1=e,Bl.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function DU(e,t){Bl.size||window.addEventListener("resize",zP),Bl.set(e,t)}function MU(e){Bl.delete(e),Bl.size||window.removeEventListener("resize",zP)}function VU(e,t,n){const i=e.canvas,s=i&&U_(i);if(!s)return;const r=TP((a,l)=>{const c=s.clientWidth;n(a,l),c<s.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,h=l.contentRect.height;c===0&&h===0||r(c,h)});return o.observe(s),DU(e,r),o}function dp(e,t,n){n&&n.disconnect(),t==="resize"&&MU(e)}function NU(e,t,n){const i=e.canvas,s=TP(r=>{e.ctx!==null&&n(PU(r,e))},e);return bU(i,t,s),s}class OU extends BP{acquireContext(t,n){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(AU(t,n),i):null}releaseContext(t){const n=t.canvas;if(!n[Ou])return!1;const i=n[Ou].initial;["height","width"].forEach(r=>{const o=i[r];Tt(o)?n.removeAttribute(r):n.setAttribute(r,o)});const s=i.style||{};return Object.keys(s).forEach(r=>{n.style[r]=s[r]}),n.width=n.width,delete n[Ou],!0}addEventListener(t,n,i){this.removeEventListener(t,n);const s=t.$proxies||(t.$proxies={}),o={attach:CU,detach:RU,resize:VU}[n]||NU;s[n]=o(t,n,i)}removeEventListener(t,n){const i=t.$proxies||(t.$proxies={}),s=i[n];if(!s)return;({attach:dp,detach:dp,resize:dp}[n]||kU)(t,n,s),i[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,n,i,s){return NB(t,n,i,s)}isAttached(t){const n=t&&U_(t);return!!(n&&n.isConnected)}}function LU(e){return!B_()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?SU:OU}var au;let $o=(au=class{constructor(){ht(this,"x");ht(this,"y");ht(this,"active",!1);ht(this,"options");ht(this,"$animations")}tooltipPosition(t){const{x:n,y:i}=this.getProps(["x","y"],t);return{x:n,y:i}}hasValue(){return Fh(this.x)&&Fh(this.y)}getProps(t,n){const i=this.$animations;if(!n||!i)return this;const s={};return t.forEach(r=>{s[r]=i[r]&&i[r].active()?i[r]._to:this[r]}),s}},ht(au,"defaults",{}),ht(au,"defaultRoutes"),au);function FU(e,t){const n=e.options.ticks,i=jU(e),s=Math.min(n.maxTicksLimit||i,i),r=n.major.enabled?UU(t):[],o=r.length,a=r[0],l=r[o-1],c=[];if(o>s)return zU(t,c,r,o/s),c;const h=BU(r,t,s);if(o>0){let d,f;const m=o>1?Math.round((l-a)/(o-1)):null;for(nu(t,c,h,Tt(m)?0:a-m,a),d=0,f=o-1;d<f;d++)nu(t,c,h,r[d],r[d+1]);return nu(t,c,h,l,Tt(m)?t.length:l+m),c}return nu(t,c,h),c}function jU(e){const t=e.options.offset,n=e._tickSize(),i=e._length/n+(t?0:1),s=e._maxLength/n;return Math.floor(Math.min(i,s))}function BU(e,t,n){const i=$U(e),s=t.length/n;if(!i)return Math.max(s,1);const r=$9(i);for(let o=0,a=r.length-1;o<a;o++){const l=r[o];if(l>s)return l}return Math.max(s,1)}function UU(e){const t=[];let n,i;for(n=0,i=e.length;n<i;n++)e[n].major&&t.push(n);return t}function zU(e,t,n,i){let s=0,r=n[0],o;for(i=Math.ceil(i),o=0;o<e.length;o++)o===r&&(t.push(e[o]),s++,r=n[s*i])}function nu(e,t,n,i,s){const r=pt(i,0),o=Math.min(pt(s,e.length),e.length);let a=0,l,c,h;for(n=Math.ceil(n),s&&(l=s-i,n=l/Math.floor(l/n)),h=r;h<0;)a++,h=Math.round(r+a*n);for(c=Math.max(r,0);c<o;c++)c===h&&(t.push(e[c]),a++,h=Math.round(r+a*n))}function $U(e){const t=e.length;let n,i;if(t<2)return!1;for(i=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==i)return!1;return i}const HU=e=>e==="left"?"right":e==="right"?"left":e,T1=(e,t,n)=>t==="top"||t==="left"?e[t]+n:e[t]-n,x1=(e,t)=>Math.min(t||e,e);function E1(e,t){const n=[],i=e.length/t,s=e.length;let r=0;for(;r<s;r+=i)n.push(e[Math.floor(r)]);return n}function WU(e,t,n){const i=e.ticks.length,s=Math.min(t,i-1),r=e._startPixel,o=e._endPixel,a=1e-6;let l=e.getPixelForTick(s),c;if(!(n&&(i===1?c=Math.max(l-r,o-l):t===0?c=(e.getPixelForTick(1)-l)/2:c=(l-e.getPixelForTick(s-1))/2,l+=s<t?c:-c,l<r-a||l>o+a)))return l}function qU(e,t){yt(e,n=>{const i=n.gc,s=i.length/2;let r;if(s>t){for(r=0;r<s;++r)delete n.data[i[r]];i.splice(0,s)}})}function va(e){return e.drawTicks?e.tickLength:0}function S1(e,t){if(!e.display)return 0;const n=xe(e.font,t),i=gn(e.padding);return(Jt(e.text)?e.text.length:1)*n.lineHeight+i.height}function KU(e,t){return zo(e,{scale:t,type:"scale"})}function GU(e,t,n){return zo(e,{tick:n,index:t,type:"tick"})}function QU(e,t,n){let i=V_(e);return(n&&t!=="right"||!n&&t==="right")&&(i=HU(i)),i}function YU(e,t,n,i){const{top:s,left:r,bottom:o,right:a,chart:l}=e,{chartArea:c,scales:h}=l;let d=0,f,m,v;const x=o-s,E=a-r;if(e.isHorizontal()){if(m=ye(i,r,a),ft(n)){const y=Object.keys(n)[0],w=n[y];v=h[y].getPixelForValue(w)+x-t}else n==="center"?v=(c.bottom+c.top)/2+x-t:v=T1(e,n,t);f=a-r}else{if(ft(n)){const y=Object.keys(n)[0],w=n[y];m=h[y].getPixelForValue(w)-E+t}else n==="center"?m=(c.left+c.right)/2-E+t:m=T1(e,n,t);v=ye(i,o,s),d=n==="left"?-En:En}return{titleX:m,titleY:v,maxWidth:f,rotation:d}}class Ho extends $o{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,n){return t}getUserBounds(){let{_userMin:t,_userMax:n,_suggestedMin:i,_suggestedMax:s}=this;return t=Dn(t,Number.POSITIVE_INFINITY),n=Dn(n,Number.NEGATIVE_INFINITY),i=Dn(i,Number.POSITIVE_INFINITY),s=Dn(s,Number.NEGATIVE_INFINITY),{min:Dn(t,i),max:Dn(n,s),minDefined:mn(t),maxDefined:mn(n)}}getMinMax(t){let{min:n,max:i,minDefined:s,maxDefined:r}=this.getUserBounds(),o;if(s&&r)return{min:n,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,t),s||(n=Math.min(n,o.min)),r||(i=Math.max(i,o.max));return n=r&&n>i?i:n,i=s&&n>i?n:i,{min:Dn(n,Dn(i,n)),max:Dn(i,Dn(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){At(this.options.beforeUpdate,[this])}update(t,n,i){const{beginAtZero:s,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=n,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=wB(this,r,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?E1(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=FU(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,n,i;this.isHorizontal()?(n=this.left,i=this.right):(n=this.top,i=this.bottom,t=!t),this._startPixel=n,this._endPixel=i,this._reversePixels=t,this._length=i-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){At(this.options.afterUpdate,[this])}beforeSetDimensions(){At(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){At(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),At(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){At(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const n=this.options.ticks;let i,s,r;for(i=0,s=t.length;i<s;i++)r=t[i],r.label=At(n.callback,[r.value,i,t],this)}afterTickToLabelConversion(){At(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){At(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,n=t.ticks,i=x1(this.ticks.length,t.ticks.maxTicksLimit),s=n.minRotation||0,r=n.maxRotation;let o=s,a,l,c;if(!this._isVisible()||!n.display||s>=r||i<=1||!this.isHorizontal()){this.labelRotation=s;return}const h=this._getLabelSizes(),d=h.widest.width,f=h.highest.height,m=Sn(this.chart.width-d,0,this.maxWidth);a=t.offset?this.maxWidth/i:m/(i-1),d+6>a&&(a=m/(i-(t.offset?.5:1)),l=this.maxHeight-va(t.grid)-n.padding-S1(t.title,this.chart.options.font),c=Math.sqrt(d*d+f*f),o=K9(Math.min(Math.asin(Sn((h.highest.height+6)/a,-1,1)),Math.asin(Sn(l/c,-1,1))-Math.asin(Sn(f/c,-1,1)))),o=Math.max(s,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){At(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){At(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:n,options:{ticks:i,title:s,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=S1(s,n.options.font);if(a?(t.width=this.maxWidth,t.height=va(r)+l):(t.height=this.maxHeight,t.width=va(r)+l),i.display&&this.ticks.length){const{first:c,last:h,widest:d,highest:f}=this._getLabelSizes(),m=i.padding*2,v=Qs(this.labelRotation),x=Math.cos(v),E=Math.sin(v);if(a){const y=i.mirror?0:E*d.width+x*f.height;t.height=Math.min(this.maxHeight,t.height+y+m)}else{const y=i.mirror?0:x*d.width+E*f.height;t.width=Math.min(this.maxWidth,t.width+y+m)}this._calculatePadding(c,h,E,x)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,n,i,s){const{ticks:{align:r,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,m=0;l?c?(f=s*t.width,m=i*n.height):(f=i*t.height,m=s*n.width):r==="start"?m=n.width:r==="end"?f=t.width:r!=="inner"&&(f=t.width/2,m=n.width/2),this.paddingLeft=Math.max((f-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((m-d+o)*this.width/(this.width-d),0)}else{let h=n.height/2,d=t.height/2;r==="start"?(h=0,d=t.height):r==="end"&&(h=n.height,d=0),this.paddingTop=h+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){At(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:n}=this.options;return n==="top"||n==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let n,i;for(n=0,i=t.length;n<i;n++)Tt(t[n].label)&&(t.splice(n,1),i--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const n=this.options.ticks.sampleSize;let i=this.ticks;n<i.length&&(i=E1(i,n)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,n,i){const{ctx:s,_longestTextCache:r}=this,o=[],a=[],l=Math.floor(n/x1(n,i));let c=0,h=0,d,f,m,v,x,E,y,w,S,D,M;for(d=0;d<n;d+=l){if(v=t[d].label,x=this._resolveTickFontOptions(d),s.font=E=x.string,y=r[E]=r[E]||{data:{},gc:[]},w=x.lineHeight,S=D=0,!Tt(v)&&!Jt(v))S=Zx(s,y.data,y.gc,S,v),D=w;else if(Jt(v))for(f=0,m=v.length;f<m;++f)M=v[f],!Tt(M)&&!Jt(M)&&(S=Zx(s,y.data,y.gc,S,M),D+=w);o.push(S),a.push(D),c=Math.max(S,c),h=Math.max(D,h)}qU(r,n);const V=o.indexOf(c),T=a.indexOf(h),_=A=>({width:o[A]||0,height:a[A]||0});return{first:_(0),last:_(n-1),widest:_(V),highest:_(T),widths:o,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,n){return NaN}getValueForPixel(t){}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const n=this._startPixel+t*this._length;return X9(this._alignToPixels?Os(this.chart,n,0):n)}getDecimalForPixel(t){const n=(t-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:n}=this;return t<0&&n<0?n:t>0&&n>0?t:0}getContext(t){const n=this.ticks||[];if(t>=0&&t<n.length){const i=n[t];return i.$context||(i.$context=GU(this.getContext(),t,i))}return this.$context||(this.$context=KU(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,n=Qs(this.labelRotation),i=Math.abs(Math.cos(n)),s=Math.abs(Math.sin(n)),r=this._getLabelSizes(),o=t.autoSkipPadding||0,a=r?r.widest.width+o:0,l=r?r.highest.height+o:0;return this.isHorizontal()?l*i>a*s?a/i:l/s:l*s<a*i?l/i:a/s}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const n=this.axis,i=this.chart,s=this.options,{grid:r,position:o,border:a}=s,l=r.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),f=va(r),m=[],v=a.setContext(this.getContext()),x=v.display?v.width:0,E=x/2,y=function(ut){return Os(i,ut,x)};let w,S,D,M,V,T,_,A,b,P,C,k;if(o==="top")w=y(this.bottom),T=this.bottom-f,A=w-E,P=y(t.top)+E,k=t.bottom;else if(o==="bottom")w=y(this.top),P=t.top,k=y(t.bottom)-E,T=w+E,A=this.top+f;else if(o==="left")w=y(this.right),V=this.right-f,_=w-E,b=y(t.left)+E,C=t.right;else if(o==="right")w=y(this.left),b=t.left,C=y(t.right)-E,V=w+E,_=this.left+f;else if(n==="x"){if(o==="center")w=y((t.top+t.bottom)/2+.5);else if(ft(o)){const ut=Object.keys(o)[0],et=o[ut];w=y(this.chart.scales[ut].getPixelForValue(et))}P=t.top,k=t.bottom,T=w+E,A=T+f}else if(n==="y"){if(o==="center")w=y((t.left+t.right)/2);else if(ft(o)){const ut=Object.keys(o)[0],et=o[ut];w=y(this.chart.scales[ut].getPixelForValue(et))}V=w-E,_=V-f,b=t.left,C=t.right}const it=pt(s.ticks.maxTicksLimit,d),Y=Math.max(1,Math.ceil(d/it));for(S=0;S<d;S+=Y){const ut=this.getContext(S),et=r.setContext(ut),U=a.setContext(ut),H=et.lineWidth,K=et.color,rt=U.dash||[],vt=U.dashOffset,He=et.tickWidth,$t=et.tickColor,We=et.tickBorderDash||[],Qt=et.tickBorderDashOffset;D=WU(this,S,l),D!==void 0&&(M=Os(i,D,H),c?V=_=b=C=M:T=A=P=k=M,m.push({tx1:V,ty1:T,tx2:_,ty2:A,x1:b,y1:P,x2:C,y2:k,width:H,color:K,borderDash:rt,borderDashOffset:vt,tickWidth:He,tickColor:$t,tickBorderDash:We,tickBorderDashOffset:Qt}))}return this._ticksLength=d,this._borderValue=w,m}_computeLabelItems(t){const n=this.axis,i=this.options,{position:s,ticks:r}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:h,mirror:d}=r,f=va(i.grid),m=f+h,v=d?-h:m,x=-Qs(this.labelRotation),E=[];let y,w,S,D,M,V,T,_,A,b,P,C,k="middle";if(s==="top")V=this.bottom-v,T=this._getXAxisLabelAlignment();else if(s==="bottom")V=this.top+v,T=this._getXAxisLabelAlignment();else if(s==="left"){const Y=this._getYAxisLabelAlignment(f);T=Y.textAlign,M=Y.x}else if(s==="right"){const Y=this._getYAxisLabelAlignment(f);T=Y.textAlign,M=Y.x}else if(n==="x"){if(s==="center")V=(t.top+t.bottom)/2+m;else if(ft(s)){const Y=Object.keys(s)[0],ut=s[Y];V=this.chart.scales[Y].getPixelForValue(ut)+m}T=this._getXAxisLabelAlignment()}else if(n==="y"){if(s==="center")M=(t.left+t.right)/2-m;else if(ft(s)){const Y=Object.keys(s)[0],ut=s[Y];M=this.chart.scales[Y].getPixelForValue(ut)}T=this._getYAxisLabelAlignment(f).textAlign}n==="y"&&(l==="start"?k="top":l==="end"&&(k="bottom"));const it=this._getLabelSizes();for(y=0,w=a.length;y<w;++y){S=a[y],D=S.label;const Y=r.setContext(this.getContext(y));_=this.getPixelForTick(y)+r.labelOffset,A=this._resolveTickFontOptions(y),b=A.lineHeight,P=Jt(D)?D.length:1;const ut=P/2,et=Y.color,U=Y.textStrokeColor,H=Y.textStrokeWidth;let K=T;o?(M=_,T==="inner"&&(y===w-1?K=this.options.reverse?"left":"right":y===0?K=this.options.reverse?"right":"left":K="center"),s==="top"?c==="near"||x!==0?C=-P*b+b/2:c==="center"?C=-it.highest.height/2-ut*b+b:C=-it.highest.height+b/2:c==="near"||x!==0?C=b/2:c==="center"?C=it.highest.height/2-ut*b:C=it.highest.height-P*b,d&&(C*=-1),x!==0&&!Y.showLabelBackdrop&&(M+=b/2*Math.sin(x))):(V=_,C=(1-P)*b/2);let rt;if(Y.showLabelBackdrop){const vt=gn(Y.backdropPadding),He=it.heights[y],$t=it.widths[y];let We=C-vt.top,Qt=0-vt.left;switch(k){case"middle":We-=He/2;break;case"bottom":We-=He;break}switch(T){case"center":Qt-=$t/2;break;case"right":Qt-=$t;break;case"inner":y===w-1?Qt-=$t:y>0&&(Qt-=$t/2);break}rt={left:Qt,top:We,width:$t+vt.width,height:He+vt.height,color:Y.backdropColor}}E.push({label:D,font:A,textOffset:C,options:{rotation:x,color:et,strokeColor:U,strokeWidth:H,textAlign:K,textBaseline:k,translation:[M,V],backdrop:rt}})}return E}_getXAxisLabelAlignment(){const{position:t,ticks:n}=this.options;if(-Qs(this.labelRotation))return t==="top"?"left":"right";let s="center";return n.align==="start"?s="left":n.align==="end"?s="right":n.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(t){const{position:n,ticks:{crossAlign:i,mirror:s,padding:r}}=this.options,o=this._getLabelSizes(),a=t+r,l=o.widest.width;let c,h;return n==="left"?s?(h=this.right+r,i==="near"?c="left":i==="center"?(c="center",h+=l/2):(c="right",h+=l)):(h=this.right-a,i==="near"?c="right":i==="center"?(c="center",h-=l/2):(c="left",h=this.left)):n==="right"?s?(h=this.left+r,i==="near"?c="right":i==="center"?(c="center",h-=l/2):(c="left",h-=l)):(h=this.left+a,i==="near"?c="left":i==="center"?(c="center",h+=l/2):(c="right",h=this.right)):c="right",{textAlign:c,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:n},left:i,top:s,width:r,height:o}=this;n&&(t.save(),t.fillStyle=n,t.fillRect(i,s,r,o),t.restore())}getLineWidthForValue(t){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const s=this.ticks.findIndex(r=>r.value===t);return s>=0?n.setContext(this.getContext(s)).lineWidth:0}drawGrid(t){const n=this.options.grid,i=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let r,o;const a=(l,c,h)=>{!h.width||!h.color||(i.save(),i.lineWidth=h.width,i.strokeStyle=h.color,i.setLineDash(h.borderDash||[]),i.lineDashOffset=h.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(n.display)for(r=0,o=s.length;r<o;++r){const l=s[r];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:n,options:{border:i,grid:s}}=this,r=i.setContext(this.getContext()),o=i.display?r.width:0;if(!o)return;const a=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,h,d,f;this.isHorizontal()?(c=Os(t,this.left,o)-o/2,h=Os(t,this.right,a)+a/2,d=f=l):(d=Os(t,this.top,o)-o/2,f=Os(t,this.bottom,a)+a/2,c=h=l),n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.beginPath(),n.moveTo(c,d),n.lineTo(h,f),n.stroke(),n.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,s=this._computeLabelArea();s&&N_(i,s);const r=this.getLabelItems(t);for(const o of r){const a=o.options,l=o.font,c=o.label,h=o.textOffset;jl(i,c,0,h,l,a)}s&&O_(i)}drawTitle(){const{ctx:t,options:{position:n,title:i,reverse:s}}=this;if(!i.display)return;const r=xe(i.font),o=gn(i.padding),a=i.align;let l=r.lineHeight/2;n==="bottom"||n==="center"||ft(n)?(l+=o.bottom,Jt(i.text)&&(l+=r.lineHeight*(i.text.length-1))):l+=o.top;const{titleX:c,titleY:h,maxWidth:d,rotation:f}=YU(this,l,n,a);jl(t,i.text,0,0,r,{color:i.color,maxWidth:d,rotation:f,textAlign:QU(a,n,s),textBaseline:"middle",translation:[c,h]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,n=t.ticks&&t.ticks.z||0,i=pt(t.grid&&t.grid.z,-1),s=pt(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==Ho.prototype.draw?[{z:n,draw:r=>{this.draw(r)}}]:[{z:i,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:n,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(t){const n=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",s=[];let r,o;for(r=0,o=n.length;r<o;++r){const a=n[r];a[i]===this.id&&(!t||a.type===t)&&s.push(a)}return s}_resolveTickFontOptions(t){const n=this.options.ticks.setContext(this.getContext(t));return xe(n.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class iu{constructor(t,n,i){this.type=t,this.scope=n,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const n=Object.getPrototypeOf(t);let i;ZU(n)&&(i=this.register(n));const s=this.items,r=t.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in s||(s[r]=t,XU(t,o,i),this.override&&Ut.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const n=this.items,i=t.id,s=this.scope;i in n&&delete n[i],s&&i in Ut[s]&&(delete Ut[s][i],this.override&&delete dr[i])}}function XU(e,t,n){const i=Ll(Object.create(null),[n?Ut.get(n):{},Ut.get(t),e.defaults]);Ut.set(t,i),e.defaultRoutes&&JU(t,e.defaultRoutes),e.descriptors&&Ut.describe(t,e.descriptors)}function JU(e,t){Object.keys(t).forEach(n=>{const i=n.split("."),s=i.pop(),r=[e].concat(i).join("."),o=t[n].split("."),a=o.pop(),l=o.join(".");Ut.route(r,s,l,a)})}function ZU(e){return"id"in e&&"defaults"in e}class tz{constructor(){this.controllers=new iu(nl,"datasets",!0),this.elements=new iu($o,"elements"),this.plugins=new iu(Object,"plugins"),this.scales=new iu(Ho,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,n,i){[...n].forEach(s=>{const r=i||this._getRegistryForType(s);i||r.isForType(s)||r===this.plugins&&s.id?this._exec(t,r,s):yt(s,o=>{const a=i||this._getRegistryForType(o);this._exec(t,a,o)})})}_exec(t,n,i){const s=D_(t);At(i["before"+s],[],i),n[t](i),At(i["after"+s],[],i)}_getRegistryForType(t){for(let n=0;n<this._typedRegistries.length;n++){const i=this._typedRegistries[n];if(i.isForType(t))return i}return this.plugins}_get(t,n,i){const s=n.get(t);if(s===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return s}}var Nn=new tz;class ez{constructor(){this._init=void 0}notify(t,n,i,s){if(n==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install")),this._init===void 0)return;const r=s?this._descriptors(t).filter(s):this._descriptors(t),o=this._notify(r,t,n,i);return n==="afterDestroy"&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall"),this._init=void 0),o}_notify(t,n,i,s){s=s||{};for(const r of t){const o=r.plugin,a=o[i],l=[n,s,r.options];if(At(a,l,o)===!1&&s.cancelable)return!1}return!0}invalidate(){Tt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),n}_createDescriptors(t,n){const i=t&&t.config,s=pt(i.options&&i.options.plugins,{}),r=nz(i);return s===!1&&!n?[]:sz(t,r,s,n)}_notifyStateChanges(t){const n=this._oldCache||[],i=this._cache,s=(r,o)=>r.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(s(n,i),t,"stop"),this._notify(s(i,n),t,"start")}}function nz(e){const t={},n=[],i=Object.keys(Nn.plugins.items);for(let r=0;r<i.length;r++)n.push(Nn.getPlugin(i[r]));const s=e.plugins||[];for(let r=0;r<s.length;r++){const o=s[r];n.indexOf(o)===-1&&(n.push(o),t[o.id]=!0)}return{plugins:n,localIds:t}}function iz(e,t){return!t&&e===!1?null:e===!0?{}:e}function sz(e,{plugins:t,localIds:n},i,s){const r=[],o=e.getContext();for(const a of t){const l=a.id,c=iz(i[l],s);c!==null&&r.push({plugin:a,options:rz(e.config,{plugin:a,local:n[l]},c,o)})}return r}function rz(e,{plugin:t,local:n},i,s){const r=e.pluginScopeKeys(t),o=e.getOptionScopes(i,r);return n&&t.defaults&&o.push(t.defaults),e.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function sg(e,t){const n=Ut.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function oz(e,t){let n=e;return e==="_index_"?n=t:e==="_value_"&&(n=t==="x"?"y":"x"),n}function az(e,t){return e===t?"_index_":"_value_"}function I1(e){if(e==="x"||e==="y"||e==="r")return e}function lz(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function rg(e,...t){if(I1(e))return e;for(const n of t){const i=n.axis||lz(n.position)||e.length>1&&I1(e[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function A1(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function cz(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(i=>i.xAxisID===e||i.yAxisID===e);if(n.length)return A1(e,"x",n[0])||A1(e,"y",n[0])}return{}}function uz(e,t){const n=dr[e.type]||{scales:{}},i=t.scales||{},s=sg(e.type,t),r=Object.create(null);return Object.keys(i).forEach(o=>{const a=i[o];if(!ft(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=rg(o,a,cz(o,e),Ut.scales[a.type]),c=az(l,s),h=n.scales||{};r[o]=Za(Object.create(null),[{axis:l},a,h[l],h[c]])}),e.data.datasets.forEach(o=>{const a=o.type||e.type,l=o.indexAxis||sg(a,t),h=(dr[a]||{}).scales||{};Object.keys(h).forEach(d=>{const f=oz(d,l),m=o[f+"AxisID"]||f;r[m]=r[m]||Object.create(null),Za(r[m],[{axis:f},i[m],h[d]])})}),Object.keys(r).forEach(o=>{const a=r[o];Za(a,[Ut.scales[a.type],Ut.scale])}),r}function $P(e){const t=e.options||(e.options={});t.plugins=pt(t.plugins,{}),t.scales=uz(e,t)}function HP(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function hz(e){return e=e||{},e.data=HP(e.data),$P(e),e}const b1=new Map,WP=new Set;function su(e,t){let n=b1.get(e);return n||(n=t(),b1.set(e,n),WP.add(n)),n}const wa=(e,t,n)=>{const i=Ao(t,n);i!==void 0&&e.add(i)};class dz{constructor(t){this._config=hz(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=HP(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),$P(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return su(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,n){return su(`${t}.transition.${n}`,()=>[[`datasets.${t}.transitions.${n}`,`transitions.${n}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,n){return su(`${t}-${n}`,()=>[[`datasets.${t}.elements.${n}`,`datasets.${t}`,`elements.${n}`,""]])}pluginScopeKeys(t){const n=t.id,i=this.type;return su(`${i}-plugin-${n}`,()=>[[`plugins.${n}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,n){const i=this._scopeCache;let s=i.get(t);return(!s||n)&&(s=new Map,i.set(t,s)),s}getOptionScopes(t,n,i){const{options:s,type:r}=this,o=this._cachedScopes(t,i),a=o.get(n);if(a)return a;const l=new Set;n.forEach(h=>{t&&(l.add(t),h.forEach(d=>wa(l,t,d))),h.forEach(d=>wa(l,s,d)),h.forEach(d=>wa(l,dr[r]||{},d)),h.forEach(d=>wa(l,Ut,d)),h.forEach(d=>wa(l,ig,d))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),WP.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:t,type:n}=this;return[t,dr[n]||{},Ut.datasets[n]||{},{type:n},Ut,ig]}resolveNamedOptions(t,n,i,s=[""]){const r={$shared:!0},{resolver:o,subPrefixes:a}=k1(this._resolverCache,t,s);let l=o;if(pz(o,n)){r.$shared=!1,i=ws(i)?i():i;const c=this.createResolver(t,i,a);l=bo(o,i,c)}for(const c of n)r[c]=l[c];return r}createResolver(t,n,i=[""],s){const{resolver:r}=k1(this._resolverCache,t,i);return ft(n)?bo(r,n,void 0,s):r}}function k1(e,t,n){let i=e.get(t);i||(i=new Map,e.set(t,i));const s=n.join();let r=i.get(s);return r||(r={resolver:L_(t,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},i.set(s,r)),r}const fz=e=>ft(e)&&Object.getOwnPropertyNames(e).some(t=>ws(e[t]));function pz(e,t){const{isScriptable:n,isIndexable:i}=PP(e);for(const s of t){const r=n(s),o=i(s),a=(o||r)&&e[s];if(r&&(ws(a)||fz(a))||o&&Jt(a))return!0}return!1}var mz="4.5.1";const gz=["top","bottom","left","right","chartArea"];function P1(e,t){return e==="top"||e==="bottom"||gz.indexOf(e)===-1&&t==="x"}function C1(e,t){return function(n,i){return n[e]===i[e]?n[t]-i[t]:n[e]-i[e]}}function R1(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),At(n&&n.onComplete,[e],t)}function yz(e){const t=e.chart,n=t.options.animation;At(n&&n.onProgress,[e],t)}function qP(e){return B_()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const Lu={},D1=e=>{const t=qP(e);return Object.values(Lu).filter(n=>n.canvas===t).pop()};function _z(e,t,n){const i=Object.keys(e);for(const s of i){const r=+s;if(r>=t){const o=e[s];delete e[s],(n>0||r>t)&&(e[r+n]=o)}}}function vz(e,t,n,i){return!n||e.type==="mouseout"?null:i?t:e}var Ri;let Dd=(Ri=class{static register(...t){Nn.add(...t),M1()}static unregister(...t){Nn.remove(...t),M1()}constructor(t,n){const i=this.config=new dz(n),s=qP(t),r=D1(s);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||LU(s)),this.platform.updateConfig(i);const a=this.platform.acquireContext(s,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,h=l&&l.width;if(this.id=N9(),this.ctx=a,this.canvas=l,this.width=h,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new ez,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=eB(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],Lu[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Jn.listen(this,"complete",R1),Jn.listen(this,"progress",yz),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:n},width:i,height:s,_aspectRatio:r}=this;return Tt(t)?n&&r?r:s?i/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Nn}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():s1(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return t1(this.canvas,this.ctx),this}stop(){return Jn.stop(this),this}resize(t,n){Jn.running(this)?this._resizeBeforeDraw={width:t,height:n}:this._resize(t,n)}_resize(t,n){const i=this.options,s=this.canvas,r=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,t,n,r),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,s1(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),At(i.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};yt(n,(i,s)=>{i.id=s})}buildOrUpdateScales(){const t=this.options,n=t.scales,i=this.scales,s=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{});let r=[];n&&(r=r.concat(Object.keys(n).map(o=>{const a=n[o],l=rg(o,a),c=l==="r",h=l==="x";return{options:a,dposition:c?"chartArea":h?"bottom":"left",dtype:c?"radialLinear":h?"category":"linear"}}))),yt(r,o=>{const a=o.options,l=a.id,c=rg(l,a),h=pt(a.type,o.dtype);(a.position===void 0||P1(a.position,c)!==P1(o.dposition))&&(a.position=o.dposition),s[l]=!0;let d=null;if(l in i&&i[l].type===h)d=i[l];else{const f=Nn.getScale(h);d=new f({id:l,type:h,ctx:this.ctx,chart:this}),i[d.id]=d}d.init(a,t)}),yt(s,(o,a)=>{o||delete i[a]}),yt(i,o=>{cn.configure(this,o,o.options),cn.addBox(this,o)})}_updateMetasets(){const t=this._metasets,n=this.data.datasets.length,i=t.length;if(t.sort((s,r)=>s.index-r.index),i>n){for(let s=n;s<i;++s)this._destroyDatasetMeta(s);t.splice(n,i-n)}this._sortedMetasets=t.slice(0).sort(C1("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:n}}=this;t.length>n.length&&delete this._stacks,t.forEach((i,s)=>{n.filter(r=>r===i._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const t=[],n=this.data.datasets;let i,s;for(this._removeUnreferencedMetasets(),i=0,s=n.length;i<s;i++){const r=n[i];let o=this.getDatasetMeta(i);const a=r.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=r.indexAxis||sg(a,this.options),o.order=r.order||0,o.index=i,o.label=""+r.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const l=Nn.getController(a),{datasetElementType:c,dataElementType:h}=Ut.datasets[a];Object.assign(l,{dataElementType:Nn.getElement(h),datasetElementType:c&&Nn.getElement(c)}),o.controller=new l(this,i),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){yt(this.data.datasets,(t,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const n=this.config;n.update();const i=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,h=this.data.datasets.length;c<h;c++){const{controller:d}=this.getDatasetMeta(c),f=!s&&r.indexOf(d)===-1;d.buildOrUpdateElements(f),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),s||yt(r,c=>{c.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(C1("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){yt(this.scales,t=>{cn.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,n=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!Hx(n,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,n=this._getUniformDataChanges()||[];for(const{method:i,start:s,count:r}of n){const o=i==="_removeElements"?-r:r;_z(t,s,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const n=this.data.datasets.length,i=r=>new Set(t.filter(o=>o[0]===r).map((o,a)=>a+","+o.splice(1).join(","))),s=i(0);for(let r=1;r<n;r++)if(!Hx(s,i(r)))return;return Array.from(s).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;cn.update(this,this.width,this.height,t);const n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],yt(this.boxes,s=>{i&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,r)=>{s._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let n=0,i=this.data.datasets.length;n<i;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,i=this.data.datasets.length;n<i;++n)this._updateDataset(n,ws(t)?t({datasetIndex:n}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,n){const i=this.getDatasetMeta(t),s={meta:i,index:t,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(i.controller._update(n),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Jn.has(this)?this.attached&&!Jn.running(this)&&Jn.start(this):(this.draw(),R1({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:i,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(t=0;t<n.length&&n[t].z<=0;++t)n[t].draw(this.chartArea);for(this._drawDatasets();t<n.length;++t)n[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const n=this._sortedMetasets,i=[];let s,r;for(s=0,r=n.length;s<r;++s){const o=n[s];(!t||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let n=t.length-1;n>=0;--n)this._drawDataset(t[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const n=this.ctx,i={meta:t,index:t.index,cancelable:!0},s=BB(this,t);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(s&&N_(n,s),t.controller.draw(),s&&O_(n),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(t){return AP(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,n,i,s){const r=gU.modes[n];return typeof r=="function"?r(this,t,i,s):[]}getDatasetMeta(t){const n=this.data.datasets[t],i=this._metasets;let s=i.filter(r=>r&&r._dataset===n).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:t,_dataset:n,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=zo(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const n=this.data.datasets[t];if(!n)return!1;const i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!n.hidden}setDatasetVisibility(t,n){const i=this.getDatasetMeta(t);i.hidden=!n}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,n,i){const s=i?"show":"hide",r=this.getDatasetMeta(t),o=r.controller._resolveAnimations(void 0,s);Fl(n)?(r.data[n].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),o.update(r,{visible:i}),this.update(a=>a.datasetIndex===t?s:void 0))}hide(t,n){this._updateVisibility(t,n,!1)}show(t,n){this._updateVisibility(t,n,!0)}_destroyDatasetMeta(t){const n=this._metasets[t];n&&n.controller&&n.controller._destroy(),delete this._metasets[t]}_stop(){let t,n;for(this.stop(),Jn.remove(this),t=0,n=this.data.datasets.length;t<n;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:n}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),t1(t,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Lu[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,n=this.platform,i=(r,o)=>{n.addEventListener(this,r,o),t[r]=o},s=(r,o,a)=>{r.offsetX=o,r.offsetY=a,this._eventHandler(r)};yt(this.options.events,r=>i(r,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,n=this.platform,i=(l,c)=>{n.addEventListener(this,l,c),t[l]=c},s=(l,c)=>{t[l]&&(n.removeEventListener(this,l,c),delete t[l])},r=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{s("attach",a),this.attached=!0,this.resize(),i("resize",r),i("detach",o)};o=()=>{this.attached=!1,s("resize",r),this._stop(),this._resize(0,0),i("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){yt(this._listeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._listeners={},yt(this._responsiveListeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,n,i){const s=i?"set":"remove";let r,o,a,l;for(n==="dataset"&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+s+"DatasetHoverStyle"]()),a=0,l=t.length;a<l;++a){o=t[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const n=this._active||[],i=t.map(({datasetIndex:r,index:o})=>{const a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[o],index:o}});!Nh(i,n)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,n))}notifyPlugins(t,n,i){return this._plugins.notify(this,t,n,i)}isPluginEnabled(t){return this._plugins._cache.filter(n=>n.plugin.id===t).length===1}_updateHoverStyles(t,n,i){const s=this.options.hover,r=(l,c)=>l.filter(h=>!c.some(d=>h.datasetIndex===d.datasetIndex&&h.index===d.index)),o=r(n,t),a=i?t:r(t,n);o.length&&this.updateHoverStyle(o,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(t,n){const i={event:t,replay:n,cancelable:!0,inChartArea:this.isPointInArea(t)},s=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,s)===!1)return;const r=this._handleEvent(t,n,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(r||i.changed)&&this.render(),this}_handleEvent(t,n,i){const{_active:s=[],options:r}=this,o=n,a=this._getActiveElements(t,s,i,o),l=U9(t),c=vz(t,this._lastEvent,i,l);i&&(this._lastEvent=null,At(r.onHover,[t,a,this],this),l&&At(r.onClick,[t,a,this],this));const h=!Nh(a,s);return(h||n)&&(this._active=a,this._updateHoverStyles(a,s,n)),this._lastEvent=c,h}_getActiveElements(t,n,i,s){if(t.type==="mouseout")return[];if(!i)return n;const r=this.options.hover;return this.getElementsAtEventForMode(t,r.mode,r,s)}},ht(Ri,"defaults",Ut),ht(Ri,"instances",Lu),ht(Ri,"overrides",dr),ht(Ri,"registry",Nn),ht(Ri,"version",mz),ht(Ri,"getChart",D1),Ri);function M1(){return yt(Dd.instances,e=>e._plugins.invalidate())}function KP(e,t){const{x:n,y:i,base:s,width:r,height:o}=e.getProps(["x","y","base","width","height"],t);let a,l,c,h,d;return e.horizontal?(d=o/2,a=Math.min(n,s),l=Math.max(n,s),c=i-d,h=i+d):(d=r/2,a=n-d,l=n+d,c=Math.min(i,s),h=Math.max(i,s)),{left:a,top:c,right:l,bottom:h}}function qi(e,t,n,i){return e?0:Sn(t,n,i)}function wz(e,t,n){const i=e.options.borderWidth,s=e.borderSkipped,r=kP(i);return{t:qi(s.top,r.top,0,n),r:qi(s.right,r.right,0,t),b:qi(s.bottom,r.bottom,0,n),l:qi(s.left,r.left,0,t)}}function Tz(e,t,n){const{enableBorderRadius:i}=e.getProps(["enableBorderRadius"]),s=e.options.borderRadius,r=oo(s),o=Math.min(t,n),a=e.borderSkipped,l=i||ft(s);return{topLeft:qi(!l||a.top||a.left,r.topLeft,0,o),topRight:qi(!l||a.top||a.right,r.topRight,0,o),bottomLeft:qi(!l||a.bottom||a.left,r.bottomLeft,0,o),bottomRight:qi(!l||a.bottom||a.right,r.bottomRight,0,o)}}function xz(e){const t=KP(e),n=t.right-t.left,i=t.bottom-t.top,s=wz(e,n/2,i/2),r=Tz(e,n/2,i/2);return{outer:{x:t.left,y:t.top,w:n,h:i,radius:r},inner:{x:t.left+s.l,y:t.top+s.t,w:n-s.l-s.r,h:i-s.t-s.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,r.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(s.b,s.r))}}}}function fp(e,t,n,i){const s=t===null,r=n===null,a=e&&!(s&&r)&&KP(e,i);return a&&(s||qr(t,a.left,a.right))&&(r||qr(n,a.top,a.bottom))}function Ez(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function Sz(e,t){e.rect(t.x,t.y,t.w,t.h)}function pp(e,t,n={}){const i=e.x!==n.x?-t:0,s=e.y!==n.y?-t:0,r=(e.x+e.w!==n.x+n.w?t:0)-i,o=(e.y+e.h!==n.y+n.h?t:0)-s;return{x:e.x+i,y:e.y+s,w:e.w+r,h:e.h+o,radius:e.radius}}class Fu extends $o{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:n,options:{borderColor:i,backgroundColor:s}}=this,{inner:r,outer:o}=xz(this),a=Ez(o.radius)?jh:Sz;t.save(),(o.w!==r.w||o.h!==r.h)&&(t.beginPath(),a(t,pp(o,n,r)),t.clip(),a(t,pp(r,-n,o)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),a(t,pp(r,n)),t.fillStyle=s,t.fill(),t.restore()}inRange(t,n,i){return fp(this,t,n,i)}inXRange(t,n){return fp(this,t,null,n)}inYRange(t,n){return fp(this,null,t,n)}getCenterPoint(t){const{x:n,y:i,base:s,horizontal:r}=this.getProps(["x","y","base","horizontal"],t);return{x:r?(n+s)/2:n,y:r?i:(i+s)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}ht(Fu,"id","bar"),ht(Fu,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),ht(Fu,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const V1=(e,t)=>{let{boxHeight:n=t,boxWidth:i=t}=e;return e.usePointStyle&&(n=Math.min(n,t),i=e.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(t,n)}},Iz=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class N1 extends $o{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n,i){this.maxWidth=t,this.maxHeight=n,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let n=At(t.generateLabels,[this.chart],this)||[];t.filter&&(n=n.filter(i=>t.filter(i,this.chart.data))),t.sort&&(n=n.sort((i,s)=>t.sort(i,s,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:t,ctx:n}=this;if(!t.display){this.width=this.height=0;return}const i=t.labels,s=xe(i.font),r=s.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=V1(i,r);let c,h;n.font=s.string,this.isHorizontal()?(c=this.maxWidth,h=this._fitRows(o,r,a,l)+10):(h=this.maxHeight,c=this._fitCols(o,s,a,l)+10),this.width=Math.min(c,t.maxWidth||this.maxWidth),this.height=Math.min(h,t.maxHeight||this.maxHeight)}_fitRows(t,n,i,s){const{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],h=s+a;let d=t;r.textAlign="left",r.textBaseline="middle";let f=-1,m=-h;return this.legendItems.forEach((v,x)=>{const E=i+n/2+r.measureText(v.text).width;(x===0||c[c.length-1]+E+2*a>o)&&(d+=h,c[c.length-(x>0?0:1)]=0,m+=h,f++),l[x]={left:0,top:m,row:f,width:E,height:s},c[c.length-1]+=E+a}),d}_fitCols(t,n,i,s){const{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],h=o-t;let d=a,f=0,m=0,v=0,x=0;return this.legendItems.forEach((E,y)=>{const{itemWidth:w,itemHeight:S}=Az(i,n,r,E,s);y>0&&m+S+2*a>h&&(d+=f+a,c.push({width:f,height:m}),v+=f+a,x++,f=m=0),l[y]={left:v,top:m,col:x,width:w,height:S},f=Math.max(f,w),m+=S+a}),d+=f,c.push({width:f,height:m}),d}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:i,labels:{padding:s},rtl:r}}=this,o=ao(r,this.left,this.width);if(this.isHorizontal()){let a=0,l=ye(i,this.left+s,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=ye(i,this.left+s,this.right-this.lineWidths[a])),c.top+=this.top+t+s,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+s}else{let a=0,l=ye(i,this.top+t+s,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=ye(i,this.top+t+s,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+s,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;N_(t,this),this._draw(),O_(t)}}_draw(){const{options:t,columnSizes:n,lineWidths:i,ctx:s}=this,{align:r,labels:o}=t,a=Ut.color,l=ao(t.rtl,this.left,this.width),c=xe(o.font),{padding:h}=o,d=c.size,f=d/2;let m;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=c.string;const{boxWidth:v,boxHeight:x,itemHeight:E}=V1(o,d),y=function(V,T,_){if(isNaN(v)||v<=0||isNaN(x)||x<0)return;s.save();const A=pt(_.lineWidth,1);if(s.fillStyle=pt(_.fillStyle,a),s.lineCap=pt(_.lineCap,"butt"),s.lineDashOffset=pt(_.lineDashOffset,0),s.lineJoin=pt(_.lineJoin,"miter"),s.lineWidth=A,s.strokeStyle=pt(_.strokeStyle,a),s.setLineDash(pt(_.lineDash,[])),o.usePointStyle){const b={radius:x*Math.SQRT2/2,pointStyle:_.pointStyle,rotation:_.rotation,borderWidth:A},P=l.xPlus(V,v/2),C=T+f;IP(s,b,P,C,o.pointStyleWidth&&v)}else{const b=T+Math.max((d-x)/2,0),P=l.leftForLtr(V,v),C=oo(_.borderRadius);s.beginPath(),Object.values(C).some(k=>k!==0)?jh(s,{x:P,y:b,w:v,h:x,radius:C}):s.rect(P,b,v,x),s.fill(),A!==0&&s.stroke()}s.restore()},w=function(V,T,_){jl(s,_.text,V,T+E/2,c,{strikethrough:_.hidden,textAlign:l.textAlign(_.textAlign)})},S=this.isHorizontal(),D=this._computeTitleHeight();S?m={x:ye(r,this.left+h,this.right-i[0]),y:this.top+h+D,line:0}:m={x:this.left+h,y:ye(r,this.top+D+h,this.bottom-n[0].height),line:0},MP(this.ctx,t.textDirection);const M=E+h;this.legendItems.forEach((V,T)=>{s.strokeStyle=V.fontColor,s.fillStyle=V.fontColor;const _=s.measureText(V.text).width,A=l.textAlign(V.textAlign||(V.textAlign=o.textAlign)),b=v+f+_;let P=m.x,C=m.y;l.setWidth(this.width),S?T>0&&P+b+h>this.right&&(C=m.y+=M,m.line++,P=m.x=ye(r,this.left+h,this.right-i[m.line])):T>0&&C+M>this.bottom&&(P=m.x=P+n[m.line].width+h,m.line++,C=m.y=ye(r,this.top+D+h,this.bottom-n[m.line].height));const k=l.x(P);if(y(k,C,V),P=nB(A,P+v+f,S?P+b:this.right,t.rtl),w(l.x(P),C,V),S)m.x+=b+h;else if(typeof V.text!="string"){const it=c.lineHeight;m.y+=GP(V,it)+h}else m.y+=M}),VP(this.ctx,t.textDirection)}drawTitle(){const t=this.options,n=t.title,i=xe(n.font),s=gn(n.padding);if(!n.display)return;const r=ao(t.rtl,this.left,this.width),o=this.ctx,a=n.position,l=i.size/2,c=s.top+l;let h,d=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),h=this.top+c,d=ye(t.align,d,this.right-f);else{const v=this.columnSizes.reduce((x,E)=>Math.max(x,E.height),0);h=c+ye(t.align,this.top,this.bottom-v-t.labels.padding-this._computeTitleHeight())}const m=ye(a,d,d+f);o.textAlign=r.textAlign(V_(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=i.string,jl(o,n.text,m,h,i)}_computeTitleHeight(){const t=this.options.title,n=xe(t.font),i=gn(t.padding);return t.display?n.lineHeight+i.height:0}_getLegendItemAt(t,n){let i,s,r;if(qr(t,this.left,this.right)&&qr(n,this.top,this.bottom)){for(r=this.legendHitBoxes,i=0;i<r.length;++i)if(s=r[i],qr(t,s.left,s.left+s.width)&&qr(n,s.top,s.top+s.height))return this.legendItems[i]}return null}handleEvent(t){const n=this.options;if(!Pz(t.type,n))return;const i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const s=this._hoveredItem,r=Iz(s,i);s&&!r&&At(n.onLeave,[t,s,this],this),this._hoveredItem=i,i&&!r&&At(n.onHover,[t,i,this],this)}else i&&At(n.onClick,[t,i,this],this)}}function Az(e,t,n,i,s){const r=bz(i,e,t,n),o=kz(s,i,t.lineHeight);return{itemWidth:r,itemHeight:o}}function bz(e,t,n,i){let s=e.text;return s&&typeof s!="string"&&(s=s.reduce((r,o)=>r.length>o.length?r:o)),t+n.size/2+i.measureText(s).width}function kz(e,t,n){let i=e;return typeof t.text!="string"&&(i=GP(t,n)),i}function GP(e,t){const n=e.text?e.text.length:0;return t*n}function Pz(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var Cz={id:"legend",_element:N1,start(e,t,n){const i=e.legend=new N1({ctx:e.ctx,options:n,chart:e});cn.configure(e,i,n),cn.addBox(e,i)},stop(e){cn.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const i=e.legend;cn.configure(e,i,n),i.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const i=t.datasetIndex,s=n.chart;s.isDatasetVisible(i)?(s.hide(i),t.hidden=!0):(s.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:s,color:r,useBorderRadius:o,borderRadius:a}}=e.legend.options;return e._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),h=gn(c.borderWidth);return{text:t[l.index].label,fillStyle:c.backgroundColor,fontColor:r,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:s||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class QP extends $o{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=n;const s=Jt(i.text)?i.text.length:1;this._padding=gn(i.padding);const r=s*xe(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:n,left:i,bottom:s,right:r,options:o}=this,a=o.align;let l=0,c,h,d;return this.isHorizontal()?(h=ye(a,i,r),d=n+t,c=r-i):(o.position==="left"?(h=i+t,d=ye(a,s,n),l=Ee*-.5):(h=r-t,d=ye(a,n,s),l=Ee*.5),c=s-n),{titleX:h,titleY:d,maxWidth:c,rotation:l}}draw(){const t=this.ctx,n=this.options;if(!n.display)return;const i=xe(n.font),r=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(r);jl(t,n.text,0,0,i,{color:n.color,maxWidth:l,rotation:c,textAlign:V_(n.align),textBaseline:"middle",translation:[o,a]})}}function Rz(e,t){const n=new QP({ctx:e.ctx,options:t,chart:e});cn.configure(e,n,t),cn.addBox(e,n),e.titleBlock=n}var Dz={id:"title",_element:QP,start(e,t,n){Rz(e,n)},stop(e){const t=e.titleBlock;cn.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const i=e.titleBlock;cn.configure(e,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Ra={average(e){if(!e.length)return!1;let t,n,i=new Set,s=0,r=0;for(t=0,n=e.length;t<n;++t){const a=e[t].element;if(a&&a.hasValue()){const l=a.tooltipPosition();i.add(l.x),s+=l.y,++r}}return r===0||i.size===0?!1:{x:[...i].reduce((a,l)=>a+l)/i.size,y:s/r}},nearest(e,t){if(!e.length)return!1;let n=t.x,i=t.y,s=Number.POSITIVE_INFINITY,r,o,a;for(r=0,o=e.length;r<o;++r){const l=e[r].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),h=Q9(t,c);h<s&&(s=h,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,i=l.y}return{x:n,y:i}}};function Mn(e,t){return t&&(Jt(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Zn(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function Mz(e,t){const{element:n,datasetIndex:i,index:s}=t,r=e.getDatasetMeta(i).controller,{label:o,value:a}=r.getLabelAndValue(s);return{chart:e,label:o,parsed:r.getParsed(s),raw:e.data.datasets[i].data[s],formattedValue:a,dataset:r.getDataset(),dataIndex:s,datasetIndex:i,element:n}}function O1(e,t){const n=e.chart.ctx,{body:i,footer:s,title:r}=e,{boxWidth:o,boxHeight:a}=t,l=xe(t.bodyFont),c=xe(t.titleFont),h=xe(t.footerFont),d=r.length,f=s.length,m=i.length,v=gn(t.padding);let x=v.height,E=0,y=i.reduce((D,M)=>D+M.before.length+M.lines.length+M.after.length,0);if(y+=e.beforeBody.length+e.afterBody.length,d&&(x+=d*c.lineHeight+(d-1)*t.titleSpacing+t.titleMarginBottom),y){const D=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;x+=m*D+(y-m)*l.lineHeight+(y-1)*t.bodySpacing}f&&(x+=t.footerMarginTop+f*h.lineHeight+(f-1)*t.footerSpacing);let w=0;const S=function(D){E=Math.max(E,n.measureText(D).width+w)};return n.save(),n.font=c.string,yt(e.title,S),n.font=l.string,yt(e.beforeBody.concat(e.afterBody),S),w=t.displayColors?o+2+t.boxPadding:0,yt(i,D=>{yt(D.before,S),yt(D.lines,S),yt(D.after,S)}),w=0,n.font=h.string,yt(e.footer,S),n.restore(),E+=v.width,{width:E,height:x}}function Vz(e,t){const{y:n,height:i}=t;return n<i/2?"top":n>e.height-i/2?"bottom":"center"}function Nz(e,t,n,i){const{x:s,width:r}=i,o=n.caretSize+n.caretPadding;if(e==="left"&&s+r+o>t.width||e==="right"&&s-r-o<0)return!0}function Oz(e,t,n,i){const{x:s,width:r}=n,{width:o,chartArea:{left:a,right:l}}=e;let c="center";return i==="center"?c=s<=(a+l)/2?"left":"right":s<=r/2?c="left":s>=o-r/2&&(c="right"),Nz(c,e,t,n)&&(c="center"),c}function L1(e,t,n){const i=n.yAlign||t.yAlign||Vz(e,n);return{xAlign:n.xAlign||t.xAlign||Oz(e,t,n,i),yAlign:i}}function Lz(e,t){let{x:n,width:i}=e;return t==="right"?n-=i:t==="center"&&(n-=i/2),n}function Fz(e,t,n){let{y:i,height:s}=e;return t==="top"?i+=n:t==="bottom"?i-=s+n:i-=s/2,i}function F1(e,t,n,i){const{caretSize:s,caretPadding:r,cornerRadius:o}=e,{xAlign:a,yAlign:l}=n,c=s+r,{topLeft:h,topRight:d,bottomLeft:f,bottomRight:m}=oo(o);let v=Lz(t,a);const x=Fz(t,l,c);return l==="center"?a==="left"?v+=c:a==="right"&&(v-=c):a==="left"?v-=Math.max(h,f)+s:a==="right"&&(v+=Math.max(d,m)+s),{x:Sn(v,0,i.width-t.width),y:Sn(x,0,i.height-t.height)}}function ru(e,t,n){const i=gn(n.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-i.right:e.x+i.left}function j1(e){return Mn([],Zn(e))}function jz(e,t,n){return zo(e,{tooltip:t,tooltipItems:n,type:"tooltip"})}function B1(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const YP={beforeTitle:Xn,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,i=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return n[t.dataIndex]}return""},afterTitle:Xn,beforeBody:Xn,beforeLabel:Xn,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return Tt(n)||(t+=n),t},labelColor(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Xn,afterBody:Xn,beforeFooter:Xn,footer:Xn,afterFooter:Xn};function Ve(e,t,n,i){const s=e[t].call(n,i);return typeof s>"u"?YP[t].call(n,i):s}class og extends $o{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const n=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&n.options.animation&&i.animations,r=new NP(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=jz(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,n){const{callbacks:i}=n,s=Ve(i,"beforeTitle",this,t),r=Ve(i,"title",this,t),o=Ve(i,"afterTitle",this,t);let a=[];return a=Mn(a,Zn(s)),a=Mn(a,Zn(r)),a=Mn(a,Zn(o)),a}getBeforeBody(t,n){return j1(Ve(n.callbacks,"beforeBody",this,t))}getBody(t,n){const{callbacks:i}=n,s=[];return yt(t,r=>{const o={before:[],lines:[],after:[]},a=B1(i,r);Mn(o.before,Zn(Ve(a,"beforeLabel",this,r))),Mn(o.lines,Ve(a,"label",this,r)),Mn(o.after,Zn(Ve(a,"afterLabel",this,r))),s.push(o)}),s}getAfterBody(t,n){return j1(Ve(n.callbacks,"afterBody",this,t))}getFooter(t,n){const{callbacks:i}=n,s=Ve(i,"beforeFooter",this,t),r=Ve(i,"footer",this,t),o=Ve(i,"afterFooter",this,t);let a=[];return a=Mn(a,Zn(s)),a=Mn(a,Zn(r)),a=Mn(a,Zn(o)),a}_createItems(t){const n=this._active,i=this.chart.data,s=[],r=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(Mz(this.chart,n[l]));return t.filter&&(a=a.filter((h,d,f)=>t.filter(h,d,f,i))),t.itemSort&&(a=a.sort((h,d)=>t.itemSort(h,d,i))),yt(a,h=>{const d=B1(t.callbacks,h);s.push(Ve(d,"labelColor",this,h)),r.push(Ve(d,"labelPointStyle",this,h)),o.push(Ve(d,"labelTextColor",this,h))}),this.labelColors=s,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=a,a}update(t,n){const i=this.options.setContext(this.getContext()),s=this._active;let r,o=[];if(!s.length)this.opacity!==0&&(r={opacity:0});else{const a=Ra[i.position].call(this,s,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const l=this._size=O1(this,i),c=Object.assign({},a,l),h=L1(this.chart,i,c),d=F1(i,c,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,r={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(t,n,i,s){const r=this.getCaretPosition(t,i,s);n.lineTo(r.x1,r.y1),n.lineTo(r.x2,r.y2),n.lineTo(r.x3,r.y3)}getCaretPosition(t,n,i){const{xAlign:s,yAlign:r}=this,{caretSize:o,cornerRadius:a}=i,{topLeft:l,topRight:c,bottomLeft:h,bottomRight:d}=oo(a),{x:f,y:m}=t,{width:v,height:x}=n;let E,y,w,S,D,M;return r==="center"?(D=m+x/2,s==="left"?(E=f,y=E-o,S=D+o,M=D-o):(E=f+v,y=E+o,S=D-o,M=D+o),w=E):(s==="left"?y=f+Math.max(l,h)+o:s==="right"?y=f+v-Math.max(c,d)-o:y=this.caretX,r==="top"?(S=m,D=S-o,E=y-o,w=y+o):(S=m+x,D=S+o,E=y+o,w=y-o),M=S),{x1:E,x2:y,x3:w,y1:S,y2:D,y3:M}}drawTitle(t,n,i){const s=this.title,r=s.length;let o,a,l;if(r){const c=ao(i.rtl,this.x,this.width);for(t.x=ru(this,i.titleAlign,i),n.textAlign=c.textAlign(i.titleAlign),n.textBaseline="middle",o=xe(i.titleFont),a=i.titleSpacing,n.fillStyle=i.titleColor,n.font=o.string,l=0;l<r;++l)n.fillText(s[l],c.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+a,l+1===r&&(t.y+=i.titleMarginBottom-a)}}_drawColorBox(t,n,i,s,r){const o=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:c}=r,h=xe(r.bodyFont),d=ru(this,"left",r),f=s.x(d),m=l<h.lineHeight?(h.lineHeight-l)/2:0,v=n.y+m;if(r.usePointStyle){const x={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},E=s.leftForLtr(f,c)+c/2,y=v+l/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,e1(t,x,E,y),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,e1(t,x,E,y)}else{t.lineWidth=ft(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const x=s.leftForLtr(f,c),E=s.leftForLtr(s.xPlus(f,1),c-2),y=oo(o.borderRadius);Object.values(y).some(w=>w!==0)?(t.beginPath(),t.fillStyle=r.multiKeyBackground,jh(t,{x,y:v,w:c,h:l,radius:y}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),jh(t,{x:E,y:v+1,w:c-2,h:l-2,radius:y}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(x,v,c,l),t.strokeRect(x,v,c,l),t.fillStyle=o.backgroundColor,t.fillRect(E,v+1,c-2,l-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,n,i){const{body:s}=this,{bodySpacing:r,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:h}=i,d=xe(i.bodyFont);let f=d.lineHeight,m=0;const v=ao(i.rtl,this.x,this.width),x=function(_){n.fillText(_,v.x(t.x+m),t.y+f/2),t.y+=f+r},E=v.textAlign(o);let y,w,S,D,M,V,T;for(n.textAlign=o,n.textBaseline="middle",n.font=d.string,t.x=ru(this,E,i),n.fillStyle=i.bodyColor,yt(this.beforeBody,x),m=a&&E!=="right"?o==="center"?c/2+h:c+2+h:0,D=0,V=s.length;D<V;++D){for(y=s[D],w=this.labelTextColors[D],n.fillStyle=w,yt(y.before,x),S=y.lines,a&&S.length&&(this._drawColorBox(n,t,D,v,i),f=Math.max(d.lineHeight,l)),M=0,T=S.length;M<T;++M)x(S[M]),f=d.lineHeight;yt(y.after,x)}m=0,f=d.lineHeight,yt(this.afterBody,x),t.y-=r}drawFooter(t,n,i){const s=this.footer,r=s.length;let o,a;if(r){const l=ao(i.rtl,this.x,this.width);for(t.x=ru(this,i.footerAlign,i),t.y+=i.footerMarginTop,n.textAlign=l.textAlign(i.footerAlign),n.textBaseline="middle",o=xe(i.footerFont),n.fillStyle=i.footerColor,n.font=o.string,a=0;a<r;++a)n.fillText(s[a],l.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+i.footerSpacing}}drawBackground(t,n,i,s){const{xAlign:r,yAlign:o}=this,{x:a,y:l}=t,{width:c,height:h}=i,{topLeft:d,topRight:f,bottomLeft:m,bottomRight:v}=oo(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(a+d,l),o==="top"&&this.drawCaret(t,n,i,s),n.lineTo(a+c-f,l),n.quadraticCurveTo(a+c,l,a+c,l+f),o==="center"&&r==="right"&&this.drawCaret(t,n,i,s),n.lineTo(a+c,l+h-v),n.quadraticCurveTo(a+c,l+h,a+c-v,l+h),o==="bottom"&&this.drawCaret(t,n,i,s),n.lineTo(a+m,l+h),n.quadraticCurveTo(a,l+h,a,l+h-m),o==="center"&&r==="left"&&this.drawCaret(t,n,i,s),n.lineTo(a,l+d),n.quadraticCurveTo(a,l,a+d,l),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(t){const n=this.chart,i=this.$animations,s=i&&i.x,r=i&&i.y;if(s||r){const o=Ra[t.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=O1(this,t),l=Object.assign({},o,this._size),c=L1(n,t,l),h=F1(t,l,c,n);(s._to!==h.x||r._to!==h.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(t){const n=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(n);const s={width:this.width,height:this.height},r={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=gn(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(t.save(),t.globalAlpha=i,this.drawBackground(r,t,s,n),MP(t,n.textDirection),r.y+=o.top,this.drawTitle(r,t,n),this.drawBody(r,t,n),this.drawFooter(r,t,n),VP(t,n.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,n){const i=this._active,s=t.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),r=!Nh(i,s),o=this._positionChanged(s,n);(r||o)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,n,i=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,r=this._active||[],o=this._getActiveElements(t,r,n,i),a=this._positionChanged(o,t),l=n||!Nh(o,r)||a;return l&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,n))),l}_getActiveElements(t,n,i,s){const r=this.options;if(t.type==="mouseout")return[];if(!s)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(t,r.mode,r,i);return r.reverse&&o.reverse(),o}_positionChanged(t,n){const{caretX:i,caretY:s,options:r}=this,o=Ra[r.position].call(this,t,n);return o!==!1&&(i!==o.x||s!==o.y)}}ht(og,"positioners",Ra);var Bz={id:"tooltip",_element:og,positioners:Ra,afterInit(e,t,n){n&&(e.tooltip=new og({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:YP},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const Uz=(e,t,n,i)=>(typeof t=="string"?(n=e.push(t)-1,i.unshift({index:n,label:t})):isNaN(t)&&(n=null),n);function zz(e,t,n,i){const s=e.indexOf(t);if(s===-1)return Uz(e,t,n,i);const r=e.lastIndexOf(t);return s!==r?n:s}const $z=(e,t)=>e===null?null:Sn(Math.round(e),0,t);function U1(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class ag extends Ho{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const n=this._addedLabels;if(n.length){const i=this.getLabels();for(const{index:s,label:r}of n)i[s]===r&&i.splice(s,1);this._addedLabels=[]}super.init(t)}parse(t,n){if(Tt(t))return null;const i=this.getLabels();return n=isFinite(n)&&i[n]===t?n:zz(i,t,pt(n,t),this._addedLabels),$z(n,i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:i,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),n||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){const t=this.min,n=this.max,i=this.options.offset,s=[];let r=this.getLabels();r=t===0&&n===r.length-1?r:r.slice(t,n+1),this._valueRange=Math.max(r.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=t;o<=n;o++)s.push({value:o});return s}getLabelForValue(t){return U1.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}ht(ag,"id","category"),ht(ag,"defaults",{ticks:{callback:U1}});function Hz(e,t){const n=[],{bounds:s,step:r,min:o,max:a,precision:l,count:c,maxTicks:h,maxDigits:d,includeBounds:f}=e,m=r||1,v=h-1,{min:x,max:E}=t,y=!Tt(o),w=!Tt(a),S=!Tt(c),D=(E-x)/(d+1);let M=qx((E-x)/v/m)*m,V,T,_,A;if(M<1e-14&&!y&&!w)return[{value:x},{value:E}];A=Math.ceil(E/M)-Math.floor(x/M),A>v&&(M=qx(A*M/v/m)*m),Tt(l)||(V=Math.pow(10,l),M=Math.ceil(M*V)/V),s==="ticks"?(T=Math.floor(x/M)*M,_=Math.ceil(E/M)*M):(T=x,_=E),y&&w&&r&&W9((a-o)/r,M/1e3)?(A=Math.round(Math.min((a-o)/M,h)),M=(a-o)/A,T=o,_=a):S?(T=y?o:T,_=w?a:_,A=c-1,M=(_-T)/A):(A=(_-T)/M,Vu(A,Math.round(A),M/1e3)?A=Math.round(A):A=Math.ceil(A));const b=Math.max(Kx(M),Kx(T));V=Math.pow(10,Tt(l)?b:l),T=Math.round(T*V)/V,_=Math.round(_*V)/V;let P=0;for(y&&(f&&T!==o?(n.push({value:o}),T<o&&P++,Vu(Math.round((T+P*M)*V)/V,o,z1(o,D,e))&&P++):T<o&&P++);P<A;++P){const C=Math.round((T+P*M)*V)/V;if(w&&C>a)break;n.push({value:C})}return w&&f&&_!==a?n.length&&Vu(n[n.length-1].value,a,z1(a,D,e))?n[n.length-1].value=a:n.push({value:a}):(!w||_===a)&&n.push({value:_}),n}function z1(e,t,{horizontal:n,minRotation:i}){const s=Qs(i),r=(n?Math.sin(s):Math.cos(s))||.001,o=.75*t*(""+e).length;return Math.min(t/r,o)}class Wz extends Ho{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,n){return Tt(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:n,maxDefined:i}=this.getUserBounds();let{min:s,max:r}=this;const o=l=>s=n?s:l,a=l=>r=i?r:l;if(t){const l=cs(s),c=cs(r);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(s===r){let l=r===0?1:Math.abs(r*.05);a(r+l),t||o(s-l)}this.min=s,this.max=r}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:n,stepSize:i}=t,s;return i?(s=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),n=n||11),n&&(s=Math.min(n,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,n=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const s={maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},r=this._range||this,o=Hz(s,r);return t.bounds==="ticks"&&q9(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let n=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const s=(i-n)/Math.max(t.length-1,1)/2;n-=s,i+=s}this._startValue=n,this._endValue=i,this._valueRange=i-n}getLabelForValue(t){return EP(t,this.chart.options.locale,this.options.ticks.format)}}class lg extends Wz{determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=mn(t)?t:0,this.max=mn(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),n=t?this.width:this.height,i=Qs(this.options.ticks.minRotation),s=(t?Math.sin(i):Math.cos(i))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,r.lineHeight/s))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}ht(lg,"id","linear"),ht(lg,"defaults",{ticks:{callback:SP.formatters.numeric}});const Md={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Fe=Object.keys(Md);function $1(e,t){return e-t}function H1(e,t){if(Tt(t))return null;const n=e._adapter,{parser:i,round:s,isoWeekday:r}=e._parseOpts;let o=t;return typeof i=="function"&&(o=i(o)),mn(o)||(o=typeof i=="string"?n.parse(o,i):n.parse(o)),o===null?null:(s&&(o=s==="week"&&(Fh(r)||r===!0)?n.startOf(o,"isoWeek",r):n.startOf(o,s)),+o)}function W1(e,t,n,i){const s=Fe.length;for(let r=Fe.indexOf(e);r<s-1;++r){const o=Md[Fe[r]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-t)/(a*o.size))<=i)return Fe[r]}return Fe[s-1]}function qz(e,t,n,i,s){for(let r=Fe.length-1;r>=Fe.indexOf(n);r--){const o=Fe[r];if(Md[o].common&&e._adapter.diff(s,i,o)>=t-1)return o}return Fe[n?Fe.indexOf(n):0]}function Kz(e){for(let t=Fe.indexOf(e)+1,n=Fe.length;t<n;++t)if(Md[Fe[t]].common)return Fe[t]}function q1(e,t,n){if(!n)e[t]=!0;else if(n.length){const{lo:i,hi:s}=M_(n,t),r=n[i]>=t?n[i]:n[s];e[r]=!0}}function Gz(e,t,n,i){const s=e._adapter,r=+s.startOf(t[0].value,i),o=t[t.length-1].value;let a,l;for(a=r;a<=o;a=+s.add(a,1,i))l=n[a],l>=0&&(t[l].major=!0);return t}function K1(e,t,n){const i=[],s={},r=t.length;let o,a;for(o=0;o<r;++o)a=t[o],s[a]=o,i.push({value:a,major:!1});return r===0||!n?i:Gz(e,i,s,n)}class zh extends Ho{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,n={}){const i=t.time||(t.time={}),s=this._adapter=new hU._date(t.adapters.date);s.init(n),Za(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=n.normalized}parse(t,n){return t===void 0?null:H1(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,n=this._adapter,i=t.time.unit||"day";let{min:s,max:r,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(s=Math.min(s,c.min)),!a&&!isNaN(c.max)&&(r=Math.max(r,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=mn(s)&&!isNaN(s)?s:+n.startOf(Date.now(),i),r=mn(r)&&!isNaN(r)?r:+n.endOf(Date.now(),i)+1,this.min=Math.min(s,r-1),this.max=Math.max(s+1,r)}_getLabelBounds(){const t=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(n=t[0],i=t[t.length-1]),{min:n,max:i}}buildTicks(){const t=this.options,n=t.time,i=t.ticks,s=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const r=this.min,o=this.max,a=Z9(s,r,o);return this._unit=n.unit||(i.autoSkip?W1(n.minUnit,this.min,this.max,this._getLabelCapacity(r)):qz(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:Kz(this._unit),this.initOffsets(s),t.reverse&&a.reverse(),K1(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let n=0,i=0,s,r;this.options.offset&&t.length&&(s=this.getDecimalForValue(t[0]),t.length===1?n=1-s:n=(this.getDecimalForValue(t[1])-s)/2,r=this.getDecimalForValue(t[t.length-1]),t.length===1?i=r:i=(r-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;n=Sn(n,0,o),i=Sn(i,0,o),this._offsets={start:n,end:i,factor:1/(n+1+i)}}_generate(){const t=this._adapter,n=this.min,i=this.max,s=this.options,r=s.time,o=r.unit||W1(r.minUnit,n,i,this._getLabelCapacity(n)),a=pt(s.ticks.stepSize,1),l=o==="week"?r.isoWeekday:!1,c=Fh(l)||l===!0,h={};let d=n,f,m;if(c&&(d=+t.startOf(d,"isoWeek",l)),d=+t.startOf(d,c?"day":o),t.diff(i,n,o)>1e5*a)throw new Error(n+" and "+i+" are too far apart with stepSize of "+a+" "+o);const v=s.ticks.source==="data"&&this.getDataTimestamps();for(f=d,m=0;f<i;f=+t.add(f,a,o),m++)q1(h,f,v);return(f===i||s.bounds==="ticks"||m===1)&&q1(h,f,v),Object.keys(h).sort($1).map(x=>+x)}getLabelForValue(t){const n=this._adapter,i=this.options.time;return i.tooltipFormat?n.format(t,i.tooltipFormat):n.format(t,i.displayFormats.datetime)}format(t,n){const s=this.options.time.displayFormats,r=this._unit,o=n||s[r];return this._adapter.format(t,o)}_tickFormatFunction(t,n,i,s){const r=this.options,o=r.ticks.callback;if(o)return At(o,[t,n,i],this);const a=r.time.displayFormats,l=this._unit,c=this._majorUnit,h=l&&a[l],d=c&&a[c],f=i[n],m=c&&d&&f&&f.major;return this._adapter.format(t,s||(m?d:h))}generateTickLabels(t){let n,i,s;for(n=0,i=t.length;n<i;++n)s=t[n],s.label=this._tickFormatFunction(s.value,n,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const n=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((n.start+i)*n.factor)}getValueForPixel(t){const n=this._offsets,i=this.getDecimalForPixel(t)/n.factor-n.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const n=this.options.ticks,i=this.ctx.measureText(t).width,s=Qs(this.isHorizontal()?n.maxRotation:n.minRotation),r=Math.cos(s),o=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:i*r+a*o,h:i*o+a*r}}_getLabelCapacity(t){const n=this.options.time,i=n.displayFormats,s=i[n.unit]||i.millisecond,r=this._tickFormatFunction(t,0,K1(this,[t],this._majorUnit),s),o=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],n,i;if(t.length)return t;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,i=s.length;n<i;++n)t=t.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let n,i;if(t.length)return t;const s=this.getLabels();for(n=0,i=s.length;n<i;++n)t.push(H1(this,s[n]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return vP(t.sort($1))}}ht(zh,"id","time"),ht(zh,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function ou(e,t,n){let i=0,s=e.length-1,r,o,a,l;n?(t>=e[i].pos&&t<=e[s].pos&&({lo:i,hi:s}=ng(e,"pos",t)),{pos:r,time:a}=e[i],{pos:o,time:l}=e[s]):(t>=e[i].time&&t<=e[s].time&&({lo:i,hi:s}=ng(e,"time",t)),{time:r,pos:a}=e[i],{time:o,pos:l}=e[s]);const c=o-r;return c?a+(l-a)*(t-r)/c:a}class G1 extends zh{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(t);this._minPos=ou(n,this.min),this._tableRange=ou(n,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:n,max:i}=this,s=[],r=[];let o,a,l,c,h;for(o=0,a=t.length;o<a;++o)c=t[o],c>=n&&c<=i&&s.push(c);if(s.length<2)return[{time:n,pos:0},{time:i,pos:1}];for(o=0,a=s.length;o<a;++o)h=s[o+1],l=s[o-1],c=s[o],Math.round((h+l)/2)!==c&&r.push({time:c,pos:o/(a-1)});return r}_generate(){const t=this.min,n=this.max;let i=super.getDataTimestamps();return(!i.includes(t)||!i.length)&&i.splice(0,0,t),(!i.includes(n)||i.length===1)&&i.push(n),i.sort((s,r)=>s-r)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const n=this.getDataTimestamps(),i=this.getLabelTimestamps();return n.length&&i.length?t=this.normalize(n.concat(i)):t=n.length?n:i,t=this._cache.all=t,t}getDecimalForValue(t){return(ou(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const n=this._offsets,i=this.getDecimalForPixel(t)/n.factor-n.end;return ou(this._table,i*this._tableRange+this._minPos,!0)}}ht(G1,"id","timeseries"),ht(G1,"defaults",zh.defaults);const XP="label";function Q1(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function Qz(e,t){const n=e.options;n&&t&&Object.assign(n,t)}function JP(e,t){e.labels=t}function ZP(e,t,n=XP){const i=[];e.datasets=t.map(s=>{const r=e.datasets.find(o=>o[n]===s[n]);return!r||!s.data||i.includes(r)?{...s}:(i.push(r),Object.assign(r,s),r)})}function Yz(e,t=XP){const n={labels:[],datasets:[]};return JP(n,e.labels),ZP(n,e.datasets,t),n}function Xz(e,t){const{height:n=150,width:i=300,redraw:s=!1,datasetIdKey:r,type:o,data:a,options:l,plugins:c=[],fallbackContent:h,updateMode:d,...f}=e,m=j.useRef(null),v=j.useRef(null),x=()=>{m.current&&(v.current=new Dd(m.current,{type:o,data:Yz(a,r),options:l&&{...l},plugins:c}),Q1(t,v.current))},E=()=>{Q1(t,null),v.current&&(v.current.destroy(),v.current=null)};return j.useEffect(()=>{!s&&v.current&&l&&Qz(v.current,l)},[s,l]),j.useEffect(()=>{!s&&v.current&&JP(v.current.config.data,a.labels)},[s,a.labels]),j.useEffect(()=>{!s&&v.current&&a.datasets&&ZP(v.current.config.data,a.datasets,r)},[s,a.datasets]),j.useEffect(()=>{v.current&&(s?(E(),setTimeout(x)):v.current.update(d))},[s,l,a.labels,a.datasets,d]),j.useEffect(()=>{v.current&&(E(),setTimeout(x))},[o]),j.useEffect(()=>(x(),()=>E()),[]),R.jsx("canvas",{ref:m,role:"img",height:n,width:i,...f,children:h})}const Jz=j.forwardRef(Xz);function Zz(e,t){return Dd.register(t),j.forwardRef((n,i)=>R.jsx(Jz,{...n,ref:i,type:e}))}const t8=Zz("bar",Nu);Dd.register(ag,lg,Fu,Dz,Bz,Cz);const $h=e=>{let t=0;return e.forEach(n=>{if(n.activity_type==="walk"&&n.end_time){const i=(new Date(n.end_time).getTime()-new Date(n.activity_time).getTime())/6e4;t+=i}}),Math.round(t)},e8=e=>{const n=[...e].sort((h,d)=>new Date(d.activity_time).getTime()-new Date(h.activity_time).getTime()).find(h=>h.activity_type==="sleep");if(!n)return null;const i=new Date(n.activity_time);let s=null;if(n.end_time)s=new Date(n.end_time);else{const h=[...e].sort((m,v)=>new Date(m.activity_time).getTime()-new Date(v.activity_time).getTime()),d=h.findIndex(m=>m.id===n.id),f=h[d+1];if(f)s=new Date(f.activity_time);else return null}const r=s.getTime()-i.getTime(),o=Math.floor(r/(1e3*60)),a=Math.floor(o/60),l=o%60;let c="";return a>0&&(c+=`${a}h `),l>0&&(c+=`${l}m`),{duration:c.trim()||"0m",sleepTime:i.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),wakeTime:s.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}},n8=e=>{const t=[...e].sort((i,s)=>new Date(i.activity_time).getTime()-new Date(s.activity_time).getTime());let n=0;for(let i=0;i<t.length;i++){const s=t[i];if(s.activity_type==="sleep"){const r=new Date(s.activity_time);let o=null;if(s.end_time)o=new Date(s.end_time);else{const a=t[i+1];a&&a.activity_type!=="sleep"&&(o=new Date(a.activity_time))}if(o&&r.toDateString()===o.toDateString()){const a=o.getHours();if(a>=7&&a<22){const l=o.getTime()-r.getTime(),c=Math.floor(l/(1e3*60));n+=c}}}}return n},i8=({title:e,onBack:t,children:n})=>R.jsxs("div",{className:"p-4",children:[R.jsxs("div",{className:"flex items-center mb-4",children:[R.jsx("button",{onClick:t,className:"p-2 -ml-2 text-gray-600 hover:text-gray-900",children:R.jsx(Rb,{size:24})}),R.jsx("h2",{className:"text-xl font-bold text-gray-800 ml-2",children:e})]}),R.jsx("div",{children:n})]}),Ln=({icon:e,title:t,value:n,footer:i,color:s,onClick:r})=>R.jsxs("div",{className:`rounded-2xl p-4 shadow-sm ${s} ${r?"cursor-pointer":""}`,onClick:r,children:[R.jsxs("div",{className:"flex items-center gap-4",children:[R.jsx("div",{className:"w-10 h-10 flex items-center justify-center",children:e}),R.jsxs("div",{children:[R.jsx("p",{className:"text-sm font-medium opacity-80",children:t}),R.jsx("p",{className:"text-2xl font-bold",children:n})]})]}),i&&R.jsx("p",{className:"text-xs opacity-70 mt-3",children:i})]}),s8=({activities:e,onStatClick:t})=>{const n=new Date;n.setHours(0,0,0,0);const i=e.filter(M=>new Date(M.activity_time)>=n),s=M=>i.filter(V=>V.activity_type===M).length,r=M=>{const V=i.find(T=>T.activity_type===M);return V?new Date(V.activity_time).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}):null},o=s("wee"),a=r("wee"),l=s("poo"),c=r("poo"),h=s("meal"),d=r("meal"),f=s("walk"),m=$h(i),v=Math.floor(m/60),x=m%60,E=e8(e),y=n8(i),w=Math.floor(y/60),S=y%60,D=new Date().getHours()<12;return R.jsxs("div",{className:"space-y-4 pt-4",children:[R.jsxs("div",{className:"px-4 text-center",children:[R.jsxs("h2",{className:"text-2xl font-bold text-gray-800 flex items-center justify-center gap-2",children:["Good ",D?"morning":"afternoon","! ",D?R.jsx(IF,{className:"text-yellow-500"}):R.jsx(xF,{className:"text-indigo-500"})]}),R.jsxs("p",{className:"text-gray-500 flex items-center justify-center gap-2",children:["Here's June's daily brief ",R.jsx(Mb,{size:16,className:"inline"})," ",R.jsx(vF,{size:16,className:"inline text-red-500"})]})]}),R.jsxs("div",{className:"space-y-4 p-4",children:[R.jsx(Ln,{icon:R.jsx(mF,{size:32,className:"text-blue-800"}),title:"Wee Breaks",value:o>0?`${o} times`:"None yet",footer:a?`Last break at ${a}`:"",color:"bg-blue-100 text-blue-900",onClick:()=>t("wee")}),R.jsx(Ln,{icon:R.jsx(pF,{size:32,className:"text-yellow-800"}),title:"Poo Breaks",value:l>0?`${l} times`:"None yet",footer:c?`Last break at ${c}`:"",color:"bg-yellow-100 text-yellow-900",onClick:()=>t("poo")}),R.jsx(Ln,{icon:R.jsx(SF,{size:32,className:"text-red-800"}),title:"Meals",value:h>0?`${h} times`:"None yet",footer:d?`Last meal at ${d}`:"",color:"bg-red-100 text-red-900",onClick:()=>t("meal")}),R.jsx(Ln,{icon:R.jsx(_F,{size:32,className:"text-green-800"}),title:"Walks",value:`${v>0?`${v}h `:""}${x}m total`,footer:f>0?`${f} walks today`:"No walks yet",color:"bg-green-100 text-green-900",onClick:()=>t("walk")}),E&&R.jsx(Ln,{icon:R.jsx(uF,{size:32,className:"text-purple-800"}),title:"Last Sleep",value:E.duration,footer:R.jsxs(R.Fragment,{children:[R.jsx(kh,{size:12,className:"inline-block mr-1"})," ",E.sleepTime," - ",E.wakeTime]}),color:"bg-purple-100 text-purple-900",onClick:()=>t("sleep")}),y>0&&R.jsx(Ln,{icon:R.jsx(kh,{size:32,className:"text-orange-800"}),title:"Total Nap Time",value:`${w>0?`${w}h `:""}${S}m`,footer:"Daytime naps today",color:"bg-orange-100 text-orange-900",onClick:()=>t("nap")})]})]})},Y1=({activities:e,period:t,onStatClick:n})=>{const i=(E,y)=>{if(E==="week"){const D=new Date(y);D.setDate(y.getDate()-y.getDay()+(y.getDay()===0?-6:1)),D.setHours(0,0,0,0);const M=new Date(D);return M.setDate(M.getDate()+6),M.setHours(23,59,59,999),{start:D,end:M}}const w=new Date(y.getFullYear(),y.getMonth(),1),S=new Date(y.getFullYear(),y.getMonth()+1,0);return S.setHours(23,59,59,999),{start:w,end:S}},s=new Date,{start:r,end:o}=i(t,s),a=new Date(s);t==="week"?a.setDate(a.getDate()-7):a.setMonth(a.getMonth()-1);const{start:l,end:c}=i(t,a),h=e.filter(E=>new Date(E.activity_time)>=r&&new Date(E.activity_time)<=o),d=e.filter(E=>new Date(E.activity_time)>=l&&new Date(E.activity_time)<=c),f=E=>({wee:E.filter(y=>y.activity_type==="wee").length,poo:E.filter(y=>y.activity_type==="poo").length,meal:E.filter(y=>y.activity_type==="meal").length,walk:E.filter(y=>y.activity_type==="walk").length,walkMinutes:$h(E)}),m=f(h),v=f(d),x=(E,y,w,S=!0)=>{if(y===0)return E>0?R.jsx("span",{className:w,children:"Up from none"}):R.jsx("span",{className:w,children:"No change"});const D=(E-y)/y*100;if(D===0)return R.jsx("span",{className:w,children:"No change"});const M=D>0&&S||D<0&&!S?"text-green-600":"text-red-600";return R.jsxs("span",{className:M,children:[D>0?"":"",Math.abs(D).toFixed(0),"% vs last ",t]})};return R.jsxs("div",{className:"space-y-4 p-4",children:[R.jsxs("h2",{className:"text-xl font-bold text-center text-gray-700",children:["This ",t]}),R.jsxs("div",{className:"space-y-4",children:[R.jsx(Ln,{title:"Total Wee Breaks",value:String(m.wee),footer:x(m.wee,v.wee,"text-blue-800"),color:"bg-blue-100 text-blue-900",onClick:()=>n("wee"),icon:void 0}),R.jsx(Ln,{title:"Total Poo Breaks",value:String(m.poo),footer:x(m.poo,v.poo,"text-yellow-800",!1),color:"bg-yellow-100 text-yellow-900",onClick:()=>n("poo"),icon:void 0}),R.jsx(Ln,{title:"Total Meals",value:String(m.meal),footer:x(m.meal,v.meal,"text-red-800"),color:"bg-red-100 text-red-900",onClick:()=>n("meal"),icon:void 0}),R.jsx(Ln,{title:"Total Walks",value:String(m.walk),footer:R.jsx("span",{className:"text-green-900",children:`${m.walkMinutes} min total`}),color:"bg-green-100 text-green-900",onClick:()=>n("walk"),icon:void 0})]})]})};function r8({activities:e}){const[t,n]=j.useState("day"),[i,s]=j.useState(null),r=a=>{s(a)},o=()=>{if(!i)return null;const a=new Date,l=[],c=[];if(t==="day")e.filter(d=>new Date(d.activity_time).toDateString()===a.toDateString()).filter(d=>d.activity_type===i||i==="nap"&&d.activity_type==="sleep").forEach(d=>{if(l.push(new Date(d.activity_time).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})),i==="walk"||i==="sleep"||i==="nap"){const f=d.end_time?(new Date(d.end_time).getTime()-new Date(d.activity_time).getTime())/6e4:0;c.push(f)}else c.push(1)});else if(t==="week")for(let h=6;h>=0;h--){const d=new Date(a);d.setDate(d.getDate()-h),l.push(d.toLocaleDateString("en-US",{weekday:"short"}));const f=e.filter(m=>new Date(m.activity_time).toDateString()===d.toDateString());c.push(i==="walk"?$h(f):f.filter(m=>m.activity_type===i).length)}else if(t==="month"){const h=[];for(let d=3;d>=0;d--){const f=new Date(a);f.setDate(f.getDate()-d*7-a.getDay()+(a.getDay()===0?-6:1));const m=new Date(f);m.setDate(m.getDate()+6),h.push({label:`Week of ${f.toLocaleDateString("en-US",{month:"short",day:"numeric"})}`,activities:e.filter(v=>{const x=new Date(v.activity_time);return x>=f&&x<=m})})}h.forEach(d=>{l.push(d.label),c.push(i==="walk"?$h(d.activities):d.activities.filter(f=>f.activity_type===i).length)})}return{labels:l,datasets:[{label:i,data:c,backgroundColor:"#f472b6"}]}};if(i){const a=o();return R.jsx(i8,{title:`${i} trends`,onBack:()=>s(null),children:a&&R.jsx(t8,{data:a,options:{responsive:!0,plugins:{legend:{display:!1}}}})})}return R.jsxs("div",{className:"pb-24",children:[R.jsx("div",{className:"bg-white sticky top-0 z-10 p-2",children:R.jsxs("div",{className:"flex justify-center rounded-lg bg-gray-200 p-1",children:[R.jsx("button",{onClick:()=>n("day"),className:`w-full py-2 text-sm font-medium rounded-md ${t==="day"?"bg-white shadow":"text-gray-600"}`,children:"Day"}),R.jsx("button",{onClick:()=>n("week"),className:`w-full py-2 text-sm font-medium rounded-md ${t==="week"?"bg-white shadow":"text-gray-600"}`,children:"Week"}),R.jsx("button",{onClick:()=>n("month"),className:`w-full py-2 text-sm font-medium rounded-md ${t==="month"?"bg-white shadow":"text-gray-600"}`,children:"Month"})]})}),t==="day"&&R.jsx(s8,{activities:e,onStatClick:r}),t==="week"&&R.jsx(Y1,{activities:e,period:"week",onStatClick:r}),t==="month"&&R.jsx(Y1,{activities:e,period:"month",onStatClick:r})]})}function o8({onAuthenticated:e}){const[t,n]=j.useState(""),[i,s]=j.useState(!1),[r,o]=j.useState(!1),a=l=>{if(l.preventDefault(),t==="junebugwibble"){const c=new Date;c.setTime(c.getTime()+365*24*60*60*1e3);const h=`expires=${c.toUTCString()}`;document.cookie=`junebug_authenticated=true;${h};path=/`,e()}else s(!0),n("")};return R.jsxs("div",{className:"min-h-screen bg-pink-50 flex flex-col items-center justify-center p-4",children:[R.jsxs("div",{className:"text-center mb-8",children:[R.jsx("img",{src:"/june.png",alt:"June",className:"w-24 h-24 rounded-full mx-auto mb-4"}),R.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"The June-bug Diaries "}),R.jsx("p",{className:"text-gray-600",children:"Please enter the passcode to continue."})]}),R.jsxs("form",{onSubmit:a,className:"w-full max-w-xs",children:[R.jsxs("div",{className:"relative",children:[R.jsx("input",{type:r?"text":"password",value:t,onChange:l=>n(l.target.value),className:`w-full px-4 py-2 text-center border rounded-lg focus:ring-1 focus:border-transparent ${i?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-pink-500"}`,placeholder:"Enter passcode"}),R.jsx("button",{type:"button",onClick:()=>o(!r),className:"absolute inset-y-0 right-0 px-3 flex items-center text-gray-500 hover:text-gray-700",children:r?R.jsx(gF,{size:20}):R.jsx(yF,{size:20})})]}),i&&R.jsx("p",{className:"text-red-500 text-sm text-center mt-2",children:"Incorrect passcode. Please try again."}),R.jsx("button",{type:"submit",className:"w-full mt-4 bg-pink-600 text-white rounded-lg py-2 font-semibold hover:bg-pink-700",children:"Unlock"})]})]})}function a8({message:e,onConfirm:t,onCancel:n}){return R.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:R.jsxs(ai.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-2xl shadow-xl p-6 w-full max-w-sm mx-auto",children:[R.jsx("p",{className:"text-center text-gray-800 mb-6",children:e}),R.jsxs("div",{className:"flex justify-center gap-4",children:[R.jsx("button",{onClick:t,className:"px-6 py-2 bg-pink-600 text-white rounded-lg font-semibold hover:bg-pink-700 transition-colors",children:"Yes"}),R.jsx("button",{onClick:n,className:"px-6 py-2 bg-gray-200 text-gray-800 rounded-lg font-semibold hover:bg-gray-300 transition-colors",children:"No"})]})]})})}const l8=e=>{var i;const n=`; ${document.cookie}`.split(`; ${e}=`);if(n.length===2)return(i=n.pop())==null?void 0:i.split(";").shift()};function c8(){const[e,t]=j.useState([]),[n,i]=j.useState(!0),[s,r]=j.useState("timeline"),[o,a]=j.useState(new Date),[l,c]=j.useState(null),[h,d]=j.useState(null),[f,m]=j.useState(l8("junebug_authenticated")==="true"),[v,x]=j.useState(null);j.useEffect(()=>{f&&E()},[f]);const E=async()=>{i(!0);try{const _=Ff(Ds,"puppy_activities"),A=tL(_,eL("activity_time","desc")),P=(await oL(A)).docs.map(C=>{const k=C.data();return{id:C.id,...k,activity_time:k.activity_time.toDate().toISOString(),end_time:k.end_time?k.end_time.toDate().toISOString():void 0,parent_activity_id:k.parent_activity_id||null}});t(P)}catch(_){console.error("Error fetching activities:",_)}finally{i(!1)}},y=async(_,A,b,P)=>{if(_.includes("med")&&Array.isArray(A)){const Y=oT(Ds);A.forEach(ut=>{const et=zc(Ff(Ds,"puppy_activities")),U={activity_type:"med",activity_time:mt.fromDate(new Date(ut)),notes:b,created_at:mt.now()};Y.set(et,U)}),await Y.commit(),await E(),r("timeline");return}const C=e.find(Y=>Y.activity_type==="walk"&&!Y.end_time),k=new Date(A),it=async(Y=!1)=>{const ut=oT(Ds);let et;if(C&&!Y){const H=zc(Ds,"puppy_activities",C.id);ut.update(H,{end_time:mt.fromDate(k)})}const U=[..._].sort((H,K)=>H==="walk"?-1:K==="walk"?1:0);for(const H of U){const K=zc(Ff(Ds,"puppy_activities")),rt={activity_type:H,activity_time:mt.fromDate(k),notes:b,created_at:mt.now()};(H==="walk"||H==="sleep")&&P&&(rt.end_time=mt.fromDate(new Date(P))),H==="walk"&&(et=K.id),Y&&C?rt.parent_activity_id=C.id:H!=="walk"&&et&&(rt.parent_activity_id=et),ut.set(K,rt)}await ut.commit(),await E(),r("timeline")};C&&_.every(Y=>Y!=="sleep")?x({message:"An activity is already in progress. Do you want to end the current walk?",onConfirm:()=>{it(!1),x(null)},onCancel:()=>{it(!0),x(null)}}):C&&_.includes("sleep")?await it(!1):await it()},w=async _=>{try{const A=zc(Ds,"puppy_activities",_);await aL(A),await E()}catch(A){console.error("Error deleting activity:",A)}},S=_=>{c(_),r("timeline")},D=_=>{d(_),r("add")},M=()=>{m(!0)};if(!f)return R.jsx(o8,{onAuthenticated:M});const V=l?e.filter(_=>new Date(_.activity_time).toDateString()===l.toDateString()):e,T=()=>R.jsx(Qa,{mode:"wait",children:R.jsx(ai.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2},children:(()=>{switch(s){case"timeline":return R.jsx(Fx,{activities:V,onDelete:w,timelineDate:l,onClearTimelineDate:()=>c(null)});case"add":return R.jsx(h9,{onSubmit:y,onBack:()=>{r(h?"calendar":"timeline"),d(null)},date:h});case"stats":return R.jsx(r8,{activities:e});case"calendar":return R.jsx("div",{className:"pb-24",children:R.jsx(dP,{selectedDate:o,onDateSelect:a,activityDates:new Set(e.map(_=>new Date(_.activity_time).toDateString())),onViewDay:S,onAddActivityForDate:D})});default:return R.jsx(Fx,{activities:e,onDelete:w,timelineDate:null,onClearTimelineDate:()=>c(null)})}})()},s)});return n&&f?R.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:R.jsx("div",{className:"text-center",children:R.jsx("p",{className:"text-gray-600",children:"Loading June's diary..."})})}):R.jsxs("div",{className:"min-h-screen bg-pink-50 font-sans",children:[R.jsx("header",{className:"bg-white shadow-sm sticky top-0 z-10",children:R.jsx("div",{className:"max-w-md mx-auto px-4 py-4 flex justify-center",children:R.jsxs("div",{className:"flex items-center gap-2",children:[R.jsx("img",{src:"/june.png",alt:"June",className:"w-10 h-10 rounded-full"}),R.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"The June-bug Diaries "})]})})}),R.jsx("main",{className:"max-w-md mx-auto px-4 py-6",children:T()}),s==="timeline"&&R.jsx(ai.button,{initial:{scale:0,y:100},animate:{scale:1,y:0},exit:{scale:0,y:100},onClick:()=>{d(null),r("add")},className:"fixed bottom-24 right-8 bg-pink-600 text-white rounded-full p-4 shadow-lg z-20",children:R.jsx(EF,{size:28})}),R.jsx("nav",{className:"fixed bottom-0 inset-x-0 bg-white border-t z-10 pb-4 pt-2",children:R.jsxs("div",{className:"max-w-md mx-auto flex justify-around relative",children:[R.jsx(mp,{label:"Calendar",icon:R.jsx(hF,{size:24}),activeView:s,view:"calendar",setView:r}),R.jsx(mp,{label:"Timeline",icon:R.jsx(TF,{size:24}),activeView:s,view:"timeline",setView:r}),R.jsx(mp,{label:"Stats",icon:R.jsx(wF,{size:24}),activeView:s,view:"stats",setView:r})]})}),v&&R.jsx(a8,{message:v.message,onConfirm:v.onConfirm,onCancel:v.onCancel})]})}const mp=j.memo(({label:e,icon:t,activeView:n,view:i,setView:s})=>{const r=n===i;return R.jsxs("button",{onClick:()=>s(i),className:`flex flex-col items-center justify-center h-16 w-20 relative transition-colors duration-300 ${r?"text-pink-600":"text-gray-500 hover:text-pink-500"}`,children:[r&&R.jsx(ai.div,{layoutId:"active-nav-highlight",className:"absolute inset-0 bg-pink-100 rounded-lg",style:{borderRadius:16},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}}),R.jsx("div",{className:"relative z-10",children:t}),R.jsx("span",{className:"text-xs relative z-10",children:e})]})});cI(document.getElementById("root")).render(R.jsx(j.StrictMode,{children:R.jsx(c8,{})}));
