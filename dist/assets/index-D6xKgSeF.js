var yR=Object.defineProperty;var _R=(e,t,n)=>t in e?yR(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Z=(e,t,n)=>_R(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();var R1={exports:{}},hd={},D1={exports:{}},at={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ru=Symbol.for("react.element"),vR=Symbol.for("react.portal"),wR=Symbol.for("react.fragment"),TR=Symbol.for("react.strict_mode"),xR=Symbol.for("react.profiler"),ER=Symbol.for("react.provider"),SR=Symbol.for("react.context"),bR=Symbol.for("react.forward_ref"),IR=Symbol.for("react.suspense"),AR=Symbol.for("react.memo"),kR=Symbol.for("react.lazy"),d0=Symbol.iterator;function PR(e){return e===null||typeof e!="object"?null:(e=d0&&e[d0]||e["@@iterator"],typeof e=="function"?e:null)}var M1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N1=Object.assign,O1={};function zo(e,t,n){this.props=e,this.context=t,this.refs=O1,this.updater=n||M1}zo.prototype.isReactComponent={};zo.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};zo.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function V1(){}V1.prototype=zo.prototype;function Rg(e,t,n){this.props=e,this.context=t,this.refs=O1,this.updater=n||M1}var Dg=Rg.prototype=new V1;Dg.constructor=Rg;N1(Dg,zo.prototype);Dg.isPureReactComponent=!0;var f0=Array.isArray,L1=Object.prototype.hasOwnProperty,Mg={current:null},F1={key:!0,ref:!0,__self:!0,__source:!0};function j1(e,t,n){var i,s={},r=null,o=null;if(t!=null)for(i in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(r=""+t.key),t)L1.call(t,i)&&!F1.hasOwnProperty(i)&&(s[i]=t[i]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(e&&e.defaultProps)for(i in a=e.defaultProps,a)s[i]===void 0&&(s[i]=a[i]);return{$$typeof:ru,type:e,key:r,ref:o,props:s,_owner:Mg.current}}function CR(e,t){return{$$typeof:ru,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Ng(e){return typeof e=="object"&&e!==null&&e.$$typeof===ru}function RR(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var p0=/\/+/g;function xf(e,t){return typeof e=="object"&&e!==null&&e.key!=null?RR(""+e.key):t.toString(36)}function Cc(e,t,n,i,s){var r=typeof e;(r==="undefined"||r==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(r){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case ru:case vR:o=!0}}if(o)return o=e,s=s(o),e=i===""?"."+xf(o,0):i,f0(s)?(n="",e!=null&&(n=e.replace(p0,"$&/")+"/"),Cc(s,t,n,"",function(u){return u})):s!=null&&(Ng(s)&&(s=CR(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(p0,"$&/")+"/")+e)),t.push(s)),1;if(o=0,i=i===""?".":i+":",f0(e))for(var a=0;a<e.length;a++){r=e[a];var l=i+xf(r,a);o+=Cc(r,t,n,l,s)}else if(l=PR(e),typeof l=="function")for(e=l.call(e),a=0;!(r=e.next()).done;)r=r.value,l=i+xf(r,a++),o+=Cc(r,t,n,l,s);else if(r==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Bu(e,t,n){if(e==null)return e;var i=[],s=0;return Cc(e,i,"","",function(r){return t.call(n,r,s++)}),i}function DR(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Oe={current:null},Rc={transition:null},MR={ReactCurrentDispatcher:Oe,ReactCurrentBatchConfig:Rc,ReactCurrentOwner:Mg};function B1(){throw Error("act(...) is not supported in production builds of React.")}at.Children={map:Bu,forEach:function(e,t,n){Bu(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Bu(e,function(){t++}),t},toArray:function(e){return Bu(e,function(t){return t})||[]},only:function(e){if(!Ng(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};at.Component=zo;at.Fragment=wR;at.Profiler=xR;at.PureComponent=Rg;at.StrictMode=TR;at.Suspense=IR;at.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=MR;at.act=B1;at.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=N1({},e.props),s=e.key,r=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(r=t.ref,o=Mg.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)L1.call(t,l)&&!F1.hasOwnProperty(l)&&(i[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}return{$$typeof:ru,type:e.type,key:s,ref:r,props:i,_owner:o}};at.createContext=function(e){return e={$$typeof:SR,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:ER,_context:e},e.Consumer=e};at.createElement=j1;at.createFactory=function(e){var t=j1.bind(null,e);return t.type=e,t};at.createRef=function(){return{current:null}};at.forwardRef=function(e){return{$$typeof:bR,render:e}};at.isValidElement=Ng;at.lazy=function(e){return{$$typeof:kR,_payload:{_status:-1,_result:e},_init:DR}};at.memo=function(e,t){return{$$typeof:AR,type:e,compare:t===void 0?null:t}};at.startTransition=function(e){var t=Rc.transition;Rc.transition={};try{e()}finally{Rc.transition=t}};at.unstable_act=B1;at.useCallback=function(e,t){return Oe.current.useCallback(e,t)};at.useContext=function(e){return Oe.current.useContext(e)};at.useDebugValue=function(){};at.useDeferredValue=function(e){return Oe.current.useDeferredValue(e)};at.useEffect=function(e,t){return Oe.current.useEffect(e,t)};at.useId=function(){return Oe.current.useId()};at.useImperativeHandle=function(e,t,n){return Oe.current.useImperativeHandle(e,t,n)};at.useInsertionEffect=function(e,t){return Oe.current.useInsertionEffect(e,t)};at.useLayoutEffect=function(e,t){return Oe.current.useLayoutEffect(e,t)};at.useMemo=function(e,t){return Oe.current.useMemo(e,t)};at.useReducer=function(e,t,n){return Oe.current.useReducer(e,t,n)};at.useRef=function(e){return Oe.current.useRef(e)};at.useState=function(e){return Oe.current.useState(e)};at.useSyncExternalStore=function(e,t,n){return Oe.current.useSyncExternalStore(e,t,n)};at.useTransition=function(){return Oe.current.useTransition()};at.version="18.3.1";D1.exports=at;var F=D1.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NR=F,OR=Symbol.for("react.element"),VR=Symbol.for("react.fragment"),LR=Object.prototype.hasOwnProperty,FR=NR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,jR={key:!0,ref:!0,__self:!0,__source:!0};function U1(e,t,n){var i,s={},r=null,o=null;n!==void 0&&(r=""+n),t.key!==void 0&&(r=""+t.key),t.ref!==void 0&&(o=t.ref);for(i in t)LR.call(t,i)&&!jR.hasOwnProperty(i)&&(s[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)s[i]===void 0&&(s[i]=t[i]);return{$$typeof:OR,type:e,key:r,ref:o,props:s,_owner:FR.current}}hd.Fragment=VR;hd.jsx=U1;hd.jsxs=U1;R1.exports=hd;var M=R1.exports,z1={exports:{}},nn={},$1={exports:{}},W1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(B,q){var K=B.length;B.push(q);t:for(;0<K;){var dt=K-1>>>1,st=B[dt];if(0<s(st,q))B[dt]=q,B[K]=st,K=dt;else break t}}function n(B){return B.length===0?null:B[0]}function i(B){if(B.length===0)return null;var q=B[0],K=B.pop();if(K!==q){B[0]=K;t:for(var dt=0,st=B.length,ee=st>>>1;dt<ee;){var bt=2*(dt+1)-1,Ke=B[bt],Yt=bt+1,Ii=B[Yt];if(0>s(Ke,K))Yt<st&&0>s(Ii,Ke)?(B[dt]=Ii,B[Yt]=K,dt=Yt):(B[dt]=Ke,B[bt]=K,dt=bt);else if(Yt<st&&0>s(Ii,K))B[dt]=Ii,B[Yt]=K,dt=Yt;else break t}}return q}function s(B,q){var K=B.sortIndex-q.sortIndex;return K!==0?K:B.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;e.unstable_now=function(){return r.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,d=null,f=3,m=!1,y=!1,_=!1,E=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(B){for(var q=n(u);q!==null;){if(q.callback===null)i(u);else if(q.startTime<=B)i(u),q.sortIndex=q.expirationTime,t(l,q);else break;q=n(u)}}function R(B){if(_=!1,b(B),!y)if(n(l)!==null)y=!0,lt(D);else{var q=n(u);q!==null&&it(R,q.startTime-B)}}function D(B,q){y=!1,_&&(_=!1,v(w),w=-1),m=!0;var K=f;try{for(b(q),d=n(l);d!==null&&(!(d.expirationTime>q)||B&&!A());){var dt=d.callback;if(typeof dt=="function"){d.callback=null,f=d.priorityLevel;var st=dt(d.expirationTime<=q);q=e.unstable_now(),typeof st=="function"?d.callback=st:d===n(l)&&i(l),b(q)}else i(l);d=n(l)}if(d!==null)var ee=!0;else{var bt=n(u);bt!==null&&it(R,bt.startTime-q),ee=!1}return ee}finally{d=null,f=K,m=!1}}var N=!1,S=null,w=-1,x=5,k=-1;function A(){return!(e.unstable_now()-k<x)}function C(){if(S!==null){var B=e.unstable_now();k=B;var q=!0;try{q=S(!0,B)}finally{q?P():(N=!1,S=null)}}else N=!1}var P;if(typeof T=="function")P=function(){T(C)};else if(typeof MessageChannel<"u"){var nt=new MessageChannel,X=nt.port2;nt.port1.onmessage=C,P=function(){X.postMessage(null)}}else P=function(){E(C,0)};function lt(B){S=B,N||(N=!0,P())}function it(B,q){w=E(function(){B(e.unstable_now())},q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(B){B.callback=null},e.unstable_continueExecution=function(){y||m||(y=!0,lt(D))},e.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<B?Math.floor(1e3/B):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(B){switch(f){case 1:case 2:case 3:var q=3;break;default:q=f}var K=f;f=q;try{return B()}finally{f=K}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(B,q){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var K=f;f=B;try{return q()}finally{f=K}},e.unstable_scheduleCallback=function(B,q,K){var dt=e.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?dt+K:dt):K=dt,B){case 1:var st=-1;break;case 2:st=250;break;case 5:st=1073741823;break;case 4:st=1e4;break;default:st=5e3}return st=K+st,B={id:c++,callback:q,priorityLevel:B,startTime:K,expirationTime:st,sortIndex:-1},K>dt?(B.sortIndex=K,t(u,B),n(l)===null&&B===n(u)&&(_?(v(w),w=-1):_=!0,it(R,K-dt))):(B.sortIndex=st,t(l,B),y||m||(y=!0,lt(D))),B},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(B){var q=f;return function(){var K=f;f=q;try{return B.apply(this,arguments)}finally{f=K}}}})(W1);$1.exports=W1;var BR=$1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UR=F,en=BR;function U(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var H1=new Set,vl={};function xr(e,t){wo(e,t),wo(e+"Capture",t)}function wo(e,t){for(vl[e]=t,e=0;e<t.length;e++)H1.add(t[e])}var fi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Op=Object.prototype.hasOwnProperty,zR=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m0={},g0={};function $R(e){return Op.call(g0,e)?!0:Op.call(m0,e)?!1:zR.test(e)?g0[e]=!0:(m0[e]=!0,!1)}function WR(e,t,n,i){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function HR(e,t,n,i){if(t===null||typeof t>"u"||WR(e,t,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ve(e,t,n,i,s,r,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=r,this.removeEmptyString=o}var pe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){pe[e]=new Ve(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];pe[t]=new Ve(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){pe[e]=new Ve(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){pe[e]=new Ve(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){pe[e]=new Ve(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){pe[e]=new Ve(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){pe[e]=new Ve(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){pe[e]=new Ve(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){pe[e]=new Ve(e,5,!1,e.toLowerCase(),null,!1,!1)});var Og=/[\-:]([a-z])/g;function Vg(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Og,Vg);pe[t]=new Ve(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Og,Vg);pe[t]=new Ve(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Og,Vg);pe[t]=new Ve(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){pe[e]=new Ve(e,1,!1,e.toLowerCase(),null,!1,!1)});pe.xlinkHref=new Ve("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){pe[e]=new Ve(e,1,!1,e.toLowerCase(),null,!0,!0)});function Lg(e,t,n,i){var s=pe.hasOwnProperty(t)?pe[t]:null;(s!==null?s.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(HR(t,n,s,i)&&(n=null),i||s===null?$R(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,i=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}var Si=UR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Uu=Symbol.for("react.element"),jr=Symbol.for("react.portal"),Br=Symbol.for("react.fragment"),Fg=Symbol.for("react.strict_mode"),Vp=Symbol.for("react.profiler"),q1=Symbol.for("react.provider"),K1=Symbol.for("react.context"),jg=Symbol.for("react.forward_ref"),Lp=Symbol.for("react.suspense"),Fp=Symbol.for("react.suspense_list"),Bg=Symbol.for("react.memo"),Bi=Symbol.for("react.lazy"),G1=Symbol.for("react.offscreen"),y0=Symbol.iterator;function va(e){return e===null||typeof e!="object"?null:(e=y0&&e[y0]||e["@@iterator"],typeof e=="function"?e:null)}var Ot=Object.assign,Ef;function Va(e){if(Ef===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ef=t&&t[1]||""}return`
`+Ef+e}var Sf=!1;function bf(e,t){if(!e||Sf)return"";Sf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var i=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){i=u}e.call(t.prototype)}else{try{throw Error()}catch(u){i=u}e()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),r=i.stack.split(`
`),o=s.length-1,a=r.length-1;1<=o&&0<=a&&s[o]!==r[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==r[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==r[a]){var l=`
`+s[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=a);break}}}finally{Sf=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Va(e):""}function qR(e){switch(e.tag){case 5:return Va(e.type);case 16:return Va("Lazy");case 13:return Va("Suspense");case 19:return Va("SuspenseList");case 0:case 2:case 15:return e=bf(e.type,!1),e;case 11:return e=bf(e.type.render,!1),e;case 1:return e=bf(e.type,!0),e;default:return""}}function jp(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Br:return"Fragment";case jr:return"Portal";case Vp:return"Profiler";case Fg:return"StrictMode";case Lp:return"Suspense";case Fp:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case K1:return(e.displayName||"Context")+".Consumer";case q1:return(e._context.displayName||"Context")+".Provider";case jg:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Bg:return t=e.displayName||null,t!==null?t:jp(e.type)||"Memo";case Bi:t=e._payload,e=e._init;try{return jp(e(t))}catch{}}return null}function KR(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return jp(t);case 8:return t===Fg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ms(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Y1(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function GR(e){var t=Y1(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,r=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){i=""+o,r.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function zu(e){e._valueTracker||(e._valueTracker=GR(e))}function Q1(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=Y1(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function uh(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Bp(e,t){var n=t.checked;return Ot({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function _0(e,t){var n=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;n=ms(t.value!=null?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function X1(e,t){t=t.checked,t!=null&&Lg(e,"checked",t,!1)}function Up(e,t){X1(e,t);var n=ms(t.value),i=t.type;if(n!=null)i==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?zp(e,t.type,n):t.hasOwnProperty("defaultValue")&&zp(e,t.type,ms(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function v0(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function zp(e,t,n){(t!=="number"||uh(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var La=Array.isArray;function io(e,t,n,i){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&i&&(e[n].defaultSelected=!0)}else{for(n=""+ms(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,i&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function $p(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(U(91));return Ot({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function w0(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(U(92));if(La(n)){if(1<n.length)throw Error(U(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:ms(n)}}function J1(e,t){var n=ms(t.value),i=ms(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),i!=null&&(e.defaultValue=""+i)}function T0(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Z1(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Wp(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Z1(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var $u,tS=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,i,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,i,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for($u=$u||document.createElement("div"),$u.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=$u.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function wl(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Ya={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},YR=["Webkit","ms","Moz","O"];Object.keys(Ya).forEach(function(e){YR.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ya[t]=Ya[e]})});function eS(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Ya.hasOwnProperty(e)&&Ya[e]?(""+t).trim():t+"px"}function nS(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var i=n.indexOf("--")===0,s=eS(n,t[n],i);n==="float"&&(n="cssFloat"),i?e.setProperty(n,s):e[n]=s}}var QR=Ot({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Hp(e,t){if(t){if(QR[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(U(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(U(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(U(61))}if(t.style!=null&&typeof t.style!="object")throw Error(U(62))}}function qp(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kp=null;function Ug(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Gp=null,so=null,ro=null;function x0(e){if(e=lu(e)){if(typeof Gp!="function")throw Error(U(280));var t=e.stateNode;t&&(t=gd(t),Gp(e.stateNode,e.type,t))}}function iS(e){so?ro?ro.push(e):ro=[e]:so=e}function sS(){if(so){var e=so,t=ro;if(ro=so=null,x0(e),t)for(e=0;e<t.length;e++)x0(t[e])}}function rS(e,t){return e(t)}function oS(){}var If=!1;function aS(e,t,n){if(If)return e(t,n);If=!0;try{return rS(e,t,n)}finally{If=!1,(so!==null||ro!==null)&&(oS(),sS())}}function Tl(e,t){var n=e.stateNode;if(n===null)return null;var i=gd(n);if(i===null)return null;n=i[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break t;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(U(231,t,typeof n));return n}var Yp=!1;if(fi)try{var wa={};Object.defineProperty(wa,"passive",{get:function(){Yp=!0}}),window.addEventListener("test",wa,wa),window.removeEventListener("test",wa,wa)}catch{Yp=!1}function XR(e,t,n,i,s,r,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Qa=!1,ch=null,hh=!1,Qp=null,JR={onError:function(e){Qa=!0,ch=e}};function ZR(e,t,n,i,s,r,o,a,l){Qa=!1,ch=null,XR.apply(JR,arguments)}function tD(e,t,n,i,s,r,o,a,l){if(ZR.apply(this,arguments),Qa){if(Qa){var u=ch;Qa=!1,ch=null}else throw Error(U(198));hh||(hh=!0,Qp=u)}}function Er(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function lS(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function E0(e){if(Er(e)!==e)throw Error(U(188))}function eD(e){var t=e.alternate;if(!t){if(t=Er(e),t===null)throw Error(U(188));return t!==e?null:e}for(var n=e,i=t;;){var s=n.return;if(s===null)break;var r=s.alternate;if(r===null){if(i=s.return,i!==null){n=i;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===n)return E0(s),e;if(r===i)return E0(s),t;r=r.sibling}throw Error(U(188))}if(n.return!==i.return)n=s,i=r;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o){for(a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==i)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?e:t}function uS(e){return e=eD(e),e!==null?cS(e):null}function cS(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=cS(e);if(t!==null)return t;e=e.sibling}return null}var hS=en.unstable_scheduleCallback,S0=en.unstable_cancelCallback,nD=en.unstable_shouldYield,iD=en.unstable_requestPaint,zt=en.unstable_now,sD=en.unstable_getCurrentPriorityLevel,zg=en.unstable_ImmediatePriority,dS=en.unstable_UserBlockingPriority,dh=en.unstable_NormalPriority,rD=en.unstable_LowPriority,fS=en.unstable_IdlePriority,dd=null,$n=null;function oD(e){if($n&&typeof $n.onCommitFiberRoot=="function")try{$n.onCommitFiberRoot(dd,e,void 0,(e.current.flags&128)===128)}catch{}}var An=Math.clz32?Math.clz32:uD,aD=Math.log,lD=Math.LN2;function uD(e){return e>>>=0,e===0?32:31-(aD(e)/lD|0)|0}var Wu=64,Hu=4194304;function Fa(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function fh(e,t){var n=e.pendingLanes;if(n===0)return 0;var i=0,s=e.suspendedLanes,r=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?i=Fa(a):(r&=o,r!==0&&(i=Fa(r)))}else o=n&~s,o!==0?i=Fa(o):r!==0&&(i=Fa(r));if(i===0)return 0;if(t!==0&&t!==i&&!(t&s)&&(s=i&-i,r=t&-t,s>=r||s===16&&(r&4194240)!==0))return t;if(i&4&&(i|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)n=31-An(t),s=1<<n,i|=e[n],t&=~s;return i}function cD(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hD(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,s=e.expirationTimes,r=e.pendingLanes;0<r;){var o=31-An(r),a=1<<o,l=s[o];l===-1?(!(a&n)||a&i)&&(s[o]=cD(a,t)):l<=t&&(e.expiredLanes|=a),r&=~a}}function Xp(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function pS(){var e=Wu;return Wu<<=1,!(Wu&4194240)&&(Wu=64),e}function Af(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ou(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-An(t),e[t]=n}function dD(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-An(n),r=1<<s;t[s]=0,i[s]=-1,e[s]=-1,n&=~r}}function $g(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-An(n),s=1<<i;s&t|e[i]&t&&(e[i]|=t),n&=~s}}var Tt=0;function mS(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var gS,Wg,yS,_S,vS,Jp=!1,qu=[],ts=null,es=null,ns=null,xl=new Map,El=new Map,zi=[],fD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function b0(e,t){switch(e){case"focusin":case"focusout":ts=null;break;case"dragenter":case"dragleave":es=null;break;case"mouseover":case"mouseout":ns=null;break;case"pointerover":case"pointerout":xl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":El.delete(t.pointerId)}}function Ta(e,t,n,i,s,r){return e===null||e.nativeEvent!==r?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:r,targetContainers:[s]},t!==null&&(t=lu(t),t!==null&&Wg(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function pD(e,t,n,i,s){switch(t){case"focusin":return ts=Ta(ts,e,t,n,i,s),!0;case"dragenter":return es=Ta(es,e,t,n,i,s),!0;case"mouseover":return ns=Ta(ns,e,t,n,i,s),!0;case"pointerover":var r=s.pointerId;return xl.set(r,Ta(xl.get(r)||null,e,t,n,i,s)),!0;case"gotpointercapture":return r=s.pointerId,El.set(r,Ta(El.get(r)||null,e,t,n,i,s)),!0}return!1}function wS(e){var t=Ys(e.target);if(t!==null){var n=Er(t);if(n!==null){if(t=n.tag,t===13){if(t=lS(n),t!==null){e.blockedOn=t,vS(e.priority,function(){yS(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Dc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Zp(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);Kp=i,n.target.dispatchEvent(i),Kp=null}else return t=lu(n),t!==null&&Wg(t),e.blockedOn=n,!1;t.shift()}return!0}function I0(e,t,n){Dc(e)&&n.delete(t)}function mD(){Jp=!1,ts!==null&&Dc(ts)&&(ts=null),es!==null&&Dc(es)&&(es=null),ns!==null&&Dc(ns)&&(ns=null),xl.forEach(I0),El.forEach(I0)}function xa(e,t){e.blockedOn===t&&(e.blockedOn=null,Jp||(Jp=!0,en.unstable_scheduleCallback(en.unstable_NormalPriority,mD)))}function Sl(e){function t(s){return xa(s,e)}if(0<qu.length){xa(qu[0],e);for(var n=1;n<qu.length;n++){var i=qu[n];i.blockedOn===e&&(i.blockedOn=null)}}for(ts!==null&&xa(ts,e),es!==null&&xa(es,e),ns!==null&&xa(ns,e),xl.forEach(t),El.forEach(t),n=0;n<zi.length;n++)i=zi[n],i.blockedOn===e&&(i.blockedOn=null);for(;0<zi.length&&(n=zi[0],n.blockedOn===null);)wS(n),n.blockedOn===null&&zi.shift()}var oo=Si.ReactCurrentBatchConfig,ph=!0;function gD(e,t,n,i){var s=Tt,r=oo.transition;oo.transition=null;try{Tt=1,Hg(e,t,n,i)}finally{Tt=s,oo.transition=r}}function yD(e,t,n,i){var s=Tt,r=oo.transition;oo.transition=null;try{Tt=4,Hg(e,t,n,i)}finally{Tt=s,oo.transition=r}}function Hg(e,t,n,i){if(ph){var s=Zp(e,t,n,i);if(s===null)Lf(e,t,i,mh,n),b0(e,i);else if(pD(s,e,t,n,i))i.stopPropagation();else if(b0(e,i),t&4&&-1<fD.indexOf(e)){for(;s!==null;){var r=lu(s);if(r!==null&&gS(r),r=Zp(e,t,n,i),r===null&&Lf(e,t,i,mh,n),r===s)break;s=r}s!==null&&i.stopPropagation()}else Lf(e,t,i,null,n)}}var mh=null;function Zp(e,t,n,i){if(mh=null,e=Ug(i),e=Ys(e),e!==null)if(t=Er(e),t===null)e=null;else if(n=t.tag,n===13){if(e=lS(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return mh=e,null}function TS(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(sD()){case zg:return 1;case dS:return 4;case dh:case rD:return 16;case fS:return 536870912;default:return 16}default:return 16}}var Gi=null,qg=null,Mc=null;function xS(){if(Mc)return Mc;var e,t=qg,n=t.length,i,s="value"in Gi?Gi.value:Gi.textContent,r=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(i=1;i<=o&&t[n-i]===s[r-i];i++);return Mc=s.slice(e,1<i?1-i:void 0)}function Nc(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ku(){return!0}function A0(){return!1}function sn(e){function t(n,i,s,r,o){this._reactName=n,this._targetInst=s,this.type=i,this.nativeEvent=r,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(r):r[a]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?Ku:A0,this.isPropagationStopped=A0,this}return Ot(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ku)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ku)},persist:function(){},isPersistent:Ku}),t}var $o={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kg=sn($o),au=Ot({},$o,{view:0,detail:0}),_D=sn(au),kf,Pf,Ea,fd=Ot({},au,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gg,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ea&&(Ea&&e.type==="mousemove"?(kf=e.screenX-Ea.screenX,Pf=e.screenY-Ea.screenY):Pf=kf=0,Ea=e),kf)},movementY:function(e){return"movementY"in e?e.movementY:Pf}}),k0=sn(fd),vD=Ot({},fd,{dataTransfer:0}),wD=sn(vD),TD=Ot({},au,{relatedTarget:0}),Cf=sn(TD),xD=Ot({},$o,{animationName:0,elapsedTime:0,pseudoElement:0}),ED=sn(xD),SD=Ot({},$o,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bD=sn(SD),ID=Ot({},$o,{data:0}),P0=sn(ID),AD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},PD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function CD(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=PD[e])?!!t[e]:!1}function Gg(){return CD}var RD=Ot({},au,{key:function(e){if(e.key){var t=AD[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Nc(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?kD[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gg,charCode:function(e){return e.type==="keypress"?Nc(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Nc(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),DD=sn(RD),MD=Ot({},fd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),C0=sn(MD),ND=Ot({},au,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gg}),OD=sn(ND),VD=Ot({},$o,{propertyName:0,elapsedTime:0,pseudoElement:0}),LD=sn(VD),FD=Ot({},fd,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),jD=sn(FD),BD=[9,13,27,32],Yg=fi&&"CompositionEvent"in window,Xa=null;fi&&"documentMode"in document&&(Xa=document.documentMode);var UD=fi&&"TextEvent"in window&&!Xa,ES=fi&&(!Yg||Xa&&8<Xa&&11>=Xa),R0=" ",D0=!1;function SS(e,t){switch(e){case"keyup":return BD.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bS(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ur=!1;function zD(e,t){switch(e){case"compositionend":return bS(t);case"keypress":return t.which!==32?null:(D0=!0,R0);case"textInput":return e=t.data,e===R0&&D0?null:e;default:return null}}function $D(e,t){if(Ur)return e==="compositionend"||!Yg&&SS(e,t)?(e=xS(),Mc=qg=Gi=null,Ur=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ES&&t.locale!=="ko"?null:t.data;default:return null}}var WD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function M0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!WD[e.type]:t==="textarea"}function IS(e,t,n,i){iS(i),t=gh(t,"onChange"),0<t.length&&(n=new Kg("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Ja=null,bl=null;function HD(e){LS(e,0)}function pd(e){var t=Wr(e);if(Q1(t))return e}function qD(e,t){if(e==="change")return t}var AS=!1;if(fi){var Rf;if(fi){var Df="oninput"in document;if(!Df){var N0=document.createElement("div");N0.setAttribute("oninput","return;"),Df=typeof N0.oninput=="function"}Rf=Df}else Rf=!1;AS=Rf&&(!document.documentMode||9<document.documentMode)}function O0(){Ja&&(Ja.detachEvent("onpropertychange",kS),bl=Ja=null)}function kS(e){if(e.propertyName==="value"&&pd(bl)){var t=[];IS(t,bl,e,Ug(e)),aS(HD,t)}}function KD(e,t,n){e==="focusin"?(O0(),Ja=t,bl=n,Ja.attachEvent("onpropertychange",kS)):e==="focusout"&&O0()}function GD(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return pd(bl)}function YD(e,t){if(e==="click")return pd(t)}function QD(e,t){if(e==="input"||e==="change")return pd(t)}function XD(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Pn=typeof Object.is=="function"?Object.is:XD;function Il(e,t){if(Pn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!Op.call(t,s)||!Pn(e[s],t[s]))return!1}return!0}function V0(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function L0(e,t){var n=V0(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}t:{for(;n;){if(n.nextSibling){n=n.nextSibling;break t}n=n.parentNode}n=void 0}n=V0(n)}}function PS(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?PS(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function CS(){for(var e=window,t=uh();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=uh(e.document)}return t}function Qg(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function JD(e){var t=CS(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&PS(n.ownerDocument.documentElement,n)){if(i!==null&&Qg(n)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,r=Math.min(i.start,s);i=i.end===void 0?r:Math.min(i.end,s),!e.extend&&r>i&&(s=i,i=r,r=s),s=L0(n,r);var o=L0(n,i);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),r>i?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ZD=fi&&"documentMode"in document&&11>=document.documentMode,zr=null,tm=null,Za=null,em=!1;function F0(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;em||zr==null||zr!==uh(i)||(i=zr,"selectionStart"in i&&Qg(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Za&&Il(Za,i)||(Za=i,i=gh(tm,"onSelect"),0<i.length&&(t=new Kg("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=zr)))}function Gu(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var $r={animationend:Gu("Animation","AnimationEnd"),animationiteration:Gu("Animation","AnimationIteration"),animationstart:Gu("Animation","AnimationStart"),transitionend:Gu("Transition","TransitionEnd")},Mf={},RS={};fi&&(RS=document.createElement("div").style,"AnimationEvent"in window||(delete $r.animationend.animation,delete $r.animationiteration.animation,delete $r.animationstart.animation),"TransitionEvent"in window||delete $r.transitionend.transition);function md(e){if(Mf[e])return Mf[e];if(!$r[e])return e;var t=$r[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in RS)return Mf[e]=t[n];return e}var DS=md("animationend"),MS=md("animationiteration"),NS=md("animationstart"),OS=md("transitionend"),VS=new Map,j0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Is(e,t){VS.set(e,t),xr(t,[e])}for(var Nf=0;Nf<j0.length;Nf++){var Of=j0[Nf],t2=Of.toLowerCase(),e2=Of[0].toUpperCase()+Of.slice(1);Is(t2,"on"+e2)}Is(DS,"onAnimationEnd");Is(MS,"onAnimationIteration");Is(NS,"onAnimationStart");Is("dblclick","onDoubleClick");Is("focusin","onFocus");Is("focusout","onBlur");Is(OS,"onTransitionEnd");wo("onMouseEnter",["mouseout","mouseover"]);wo("onMouseLeave",["mouseout","mouseover"]);wo("onPointerEnter",["pointerout","pointerover"]);wo("onPointerLeave",["pointerout","pointerover"]);xr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));xr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));xr("onBeforeInput",["compositionend","keypress","textInput","paste"]);xr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));xr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));xr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ja="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),n2=new Set("cancel close invalid load scroll toggle".split(" ").concat(ja));function B0(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,tD(i,t,void 0,e),e.currentTarget=null}function LS(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],s=i.event;i=i.listeners;t:{var r=void 0;if(t)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==r&&s.isPropagationStopped())break t;B0(s,a,u),r=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==r&&s.isPropagationStopped())break t;B0(s,a,u),r=l}}}if(hh)throw e=Qp,hh=!1,Qp=null,e}function At(e,t){var n=t[om];n===void 0&&(n=t[om]=new Set);var i=e+"__bubble";n.has(i)||(FS(t,e,2,!1),n.add(i))}function Vf(e,t,n){var i=0;t&&(i|=4),FS(n,e,i,t)}var Yu="_reactListening"+Math.random().toString(36).slice(2);function Al(e){if(!e[Yu]){e[Yu]=!0,H1.forEach(function(n){n!=="selectionchange"&&(n2.has(n)||Vf(n,!1,e),Vf(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Yu]||(t[Yu]=!0,Vf("selectionchange",!1,t))}}function FS(e,t,n,i){switch(TS(t)){case 1:var s=gD;break;case 4:s=yD;break;default:s=Hg}n=s.bind(null,t,n,e),s=void 0,!Yp||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),i?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Lf(e,t,n,i,s){var r=i;if(!(t&1)&&!(t&2)&&i!==null)t:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Ys(a),o===null)return;if(l=o.tag,l===5||l===6){i=r=o;continue t}a=a.parentNode}}i=i.return}aS(function(){var u=r,c=Ug(n),d=[];t:{var f=VS.get(e);if(f!==void 0){var m=Kg,y=e;switch(e){case"keypress":if(Nc(n)===0)break t;case"keydown":case"keyup":m=DD;break;case"focusin":y="focus",m=Cf;break;case"focusout":y="blur",m=Cf;break;case"beforeblur":case"afterblur":m=Cf;break;case"click":if(n.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=k0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=wD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=OD;break;case DS:case MS:case NS:m=ED;break;case OS:m=LD;break;case"scroll":m=_D;break;case"wheel":m=jD;break;case"copy":case"cut":case"paste":m=bD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=C0}var _=(t&4)!==0,E=!_&&e==="scroll",v=_?f!==null?f+"Capture":null:f;_=[];for(var T=u,b;T!==null;){b=T;var R=b.stateNode;if(b.tag===5&&R!==null&&(b=R,v!==null&&(R=Tl(T,v),R!=null&&_.push(kl(T,R,b)))),E)break;T=T.return}0<_.length&&(f=new m(f,y,null,n,c),d.push({event:f,listeners:_}))}}if(!(t&7)){t:{if(f=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",f&&n!==Kp&&(y=n.relatedTarget||n.fromElement)&&(Ys(y)||y[pi]))break t;if((m||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,m?(y=n.relatedTarget||n.toElement,m=u,y=y?Ys(y):null,y!==null&&(E=Er(y),y!==E||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=u),m!==y)){if(_=k0,R="onMouseLeave",v="onMouseEnter",T="mouse",(e==="pointerout"||e==="pointerover")&&(_=C0,R="onPointerLeave",v="onPointerEnter",T="pointer"),E=m==null?f:Wr(m),b=y==null?f:Wr(y),f=new _(R,T+"leave",m,n,c),f.target=E,f.relatedTarget=b,R=null,Ys(c)===u&&(_=new _(v,T+"enter",y,n,c),_.target=b,_.relatedTarget=E,R=_),E=R,m&&y)e:{for(_=m,v=y,T=0,b=_;b;b=Rr(b))T++;for(b=0,R=v;R;R=Rr(R))b++;for(;0<T-b;)_=Rr(_),T--;for(;0<b-T;)v=Rr(v),b--;for(;T--;){if(_===v||v!==null&&_===v.alternate)break e;_=Rr(_),v=Rr(v)}_=null}else _=null;m!==null&&U0(d,f,m,_,!1),y!==null&&E!==null&&U0(d,E,y,_,!0)}}t:{if(f=u?Wr(u):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var D=qD;else if(M0(f))if(AS)D=QD;else{D=GD;var N=KD}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(D=YD);if(D&&(D=D(e,u))){IS(d,D,n,c);break t}N&&N(e,f,u),e==="focusout"&&(N=f._wrapperState)&&N.controlled&&f.type==="number"&&zp(f,"number",f.value)}switch(N=u?Wr(u):window,e){case"focusin":(M0(N)||N.contentEditable==="true")&&(zr=N,tm=u,Za=null);break;case"focusout":Za=tm=zr=null;break;case"mousedown":em=!0;break;case"contextmenu":case"mouseup":case"dragend":em=!1,F0(d,n,c);break;case"selectionchange":if(ZD)break;case"keydown":case"keyup":F0(d,n,c)}var S;if(Yg)t:{switch(e){case"compositionstart":var w="onCompositionStart";break t;case"compositionend":w="onCompositionEnd";break t;case"compositionupdate":w="onCompositionUpdate";break t}w=void 0}else Ur?SS(e,n)&&(w="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(w="onCompositionStart");w&&(ES&&n.locale!=="ko"&&(Ur||w!=="onCompositionStart"?w==="onCompositionEnd"&&Ur&&(S=xS()):(Gi=c,qg="value"in Gi?Gi.value:Gi.textContent,Ur=!0)),N=gh(u,w),0<N.length&&(w=new P0(w,e,null,n,c),d.push({event:w,listeners:N}),S?w.data=S:(S=bS(n),S!==null&&(w.data=S)))),(S=UD?zD(e,n):$D(e,n))&&(u=gh(u,"onBeforeInput"),0<u.length&&(c=new P0("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=S))}LS(d,t)})}function kl(e,t,n){return{instance:e,listener:t,currentTarget:n}}function gh(e,t){for(var n=t+"Capture",i=[];e!==null;){var s=e,r=s.stateNode;s.tag===5&&r!==null&&(s=r,r=Tl(e,n),r!=null&&i.unshift(kl(e,r,s)),r=Tl(e,t),r!=null&&i.push(kl(e,r,s))),e=e.return}return i}function Rr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function U0(e,t,n,i,s){for(var r=t._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&u!==null&&(a=u,s?(l=Tl(n,r),l!=null&&o.unshift(kl(n,l,a))):s||(l=Tl(n,r),l!=null&&o.push(kl(n,l,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var i2=/\r\n?/g,s2=/\u0000|\uFFFD/g;function z0(e){return(typeof e=="string"?e:""+e).replace(i2,`
`).replace(s2,"")}function Qu(e,t,n){if(t=z0(t),z0(e)!==t&&n)throw Error(U(425))}function yh(){}var nm=null,im=null;function sm(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var rm=typeof setTimeout=="function"?setTimeout:void 0,r2=typeof clearTimeout=="function"?clearTimeout:void 0,$0=typeof Promise=="function"?Promise:void 0,o2=typeof queueMicrotask=="function"?queueMicrotask:typeof $0<"u"?function(e){return $0.resolve(null).then(e).catch(a2)}:rm;function a2(e){setTimeout(function(){throw e})}function Ff(e,t){var n=t,i=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(i===0){e.removeChild(s),Sl(t);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=s}while(n);Sl(t)}function is(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function W0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Wo=Math.random().toString(36).slice(2),Bn="__reactFiber$"+Wo,Pl="__reactProps$"+Wo,pi="__reactContainer$"+Wo,om="__reactEvents$"+Wo,l2="__reactListeners$"+Wo,u2="__reactHandles$"+Wo;function Ys(e){var t=e[Bn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[Bn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=W0(e);e!==null;){if(n=e[Bn])return n;e=W0(e)}return t}e=n,n=e.parentNode}return null}function lu(e){return e=e[Bn]||e[pi],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Wr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(U(33))}function gd(e){return e[Pl]||null}var am=[],Hr=-1;function As(e){return{current:e}}function Pt(e){0>Hr||(e.current=am[Hr],am[Hr]=null,Hr--)}function St(e,t){Hr++,am[Hr]=e.current,e.current=t}var gs={},Ie=As(gs),We=As(!1),cr=gs;function To(e,t){var n=e.type.contextTypes;if(!n)return gs;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var s={},r;for(r in n)s[r]=t[r];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function He(e){return e=e.childContextTypes,e!=null}function _h(){Pt(We),Pt(Ie)}function H0(e,t,n){if(Ie.current!==gs)throw Error(U(168));St(Ie,t),St(We,n)}function jS(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var s in i)if(!(s in t))throw Error(U(108,KR(e)||"Unknown",s));return Ot({},n,i)}function vh(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||gs,cr=Ie.current,St(Ie,e),St(We,We.current),!0}function q0(e,t,n){var i=e.stateNode;if(!i)throw Error(U(169));n?(e=jS(e,t,cr),i.__reactInternalMemoizedMergedChildContext=e,Pt(We),Pt(Ie),St(Ie,e)):Pt(We),St(We,n)}var oi=null,yd=!1,jf=!1;function BS(e){oi===null?oi=[e]:oi.push(e)}function c2(e){yd=!0,BS(e)}function ks(){if(!jf&&oi!==null){jf=!0;var e=0,t=Tt;try{var n=oi;for(Tt=1;e<n.length;e++){var i=n[e];do i=i(!0);while(i!==null)}oi=null,yd=!1}catch(s){throw oi!==null&&(oi=oi.slice(e+1)),hS(zg,ks),s}finally{Tt=t,jf=!1}}return null}var qr=[],Kr=0,wh=null,Th=0,ln=[],un=0,hr=null,li=1,ui="";function zs(e,t){qr[Kr++]=Th,qr[Kr++]=wh,wh=e,Th=t}function US(e,t,n){ln[un++]=li,ln[un++]=ui,ln[un++]=hr,hr=e;var i=li;e=ui;var s=32-An(i)-1;i&=~(1<<s),n+=1;var r=32-An(t)+s;if(30<r){var o=s-s%5;r=(i&(1<<o)-1).toString(32),i>>=o,s-=o,li=1<<32-An(t)+s|n<<s|i,ui=r+e}else li=1<<r|n<<s|i,ui=e}function Xg(e){e.return!==null&&(zs(e,1),US(e,1,0))}function Jg(e){for(;e===wh;)wh=qr[--Kr],qr[Kr]=null,Th=qr[--Kr],qr[Kr]=null;for(;e===hr;)hr=ln[--un],ln[un]=null,ui=ln[--un],ln[un]=null,li=ln[--un],ln[un]=null}var Ze=null,Qe=null,Ct=!1,Sn=null;function zS(e,t){var n=hn(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function K0(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ze=e,Qe=is(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ze=e,Qe=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=hr!==null?{id:li,overflow:ui}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=hn(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ze=e,Qe=null,!0):!1;default:return!1}}function lm(e){return(e.mode&1)!==0&&(e.flags&128)===0}function um(e){if(Ct){var t=Qe;if(t){var n=t;if(!K0(e,t)){if(lm(e))throw Error(U(418));t=is(n.nextSibling);var i=Ze;t&&K0(e,t)?zS(i,n):(e.flags=e.flags&-4097|2,Ct=!1,Ze=e)}}else{if(lm(e))throw Error(U(418));e.flags=e.flags&-4097|2,Ct=!1,Ze=e}}}function G0(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ze=e}function Xu(e){if(e!==Ze)return!1;if(!Ct)return G0(e),Ct=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!sm(e.type,e.memoizedProps)),t&&(t=Qe)){if(lm(e))throw $S(),Error(U(418));for(;t;)zS(e,t),t=is(t.nextSibling)}if(G0(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(U(317));t:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Qe=is(e.nextSibling);break t}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Qe=null}}else Qe=Ze?is(e.stateNode.nextSibling):null;return!0}function $S(){for(var e=Qe;e;)e=is(e.nextSibling)}function xo(){Qe=Ze=null,Ct=!1}function Zg(e){Sn===null?Sn=[e]:Sn.push(e)}var h2=Si.ReactCurrentBatchConfig;function Sa(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var i=n.stateNode}if(!i)throw Error(U(147,e));var s=i,r=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===r?t.ref:(t=function(o){var a=s.refs;o===null?delete a[r]:a[r]=o},t._stringRef=r,t)}if(typeof e!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,e))}return e}function Ju(e,t){throw e=Object.prototype.toString.call(t),Error(U(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Y0(e){var t=e._init;return t(e._payload)}function WS(e){function t(v,T){if(e){var b=v.deletions;b===null?(v.deletions=[T],v.flags|=16):b.push(T)}}function n(v,T){if(!e)return null;for(;T!==null;)t(v,T),T=T.sibling;return null}function i(v,T){for(v=new Map;T!==null;)T.key!==null?v.set(T.key,T):v.set(T.index,T),T=T.sibling;return v}function s(v,T){return v=as(v,T),v.index=0,v.sibling=null,v}function r(v,T,b){return v.index=b,e?(b=v.alternate,b!==null?(b=b.index,b<T?(v.flags|=2,T):b):(v.flags|=2,T)):(v.flags|=1048576,T)}function o(v){return e&&v.alternate===null&&(v.flags|=2),v}function a(v,T,b,R){return T===null||T.tag!==6?(T=qf(b,v.mode,R),T.return=v,T):(T=s(T,b),T.return=v,T)}function l(v,T,b,R){var D=b.type;return D===Br?c(v,T,b.props.children,R,b.key):T!==null&&(T.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Bi&&Y0(D)===T.type)?(R=s(T,b.props),R.ref=Sa(v,T,b),R.return=v,R):(R=Uc(b.type,b.key,b.props,null,v.mode,R),R.ref=Sa(v,T,b),R.return=v,R)}function u(v,T,b,R){return T===null||T.tag!==4||T.stateNode.containerInfo!==b.containerInfo||T.stateNode.implementation!==b.implementation?(T=Kf(b,v.mode,R),T.return=v,T):(T=s(T,b.children||[]),T.return=v,T)}function c(v,T,b,R,D){return T===null||T.tag!==7?(T=rr(b,v.mode,R,D),T.return=v,T):(T=s(T,b),T.return=v,T)}function d(v,T,b){if(typeof T=="string"&&T!==""||typeof T=="number")return T=qf(""+T,v.mode,b),T.return=v,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Uu:return b=Uc(T.type,T.key,T.props,null,v.mode,b),b.ref=Sa(v,null,T),b.return=v,b;case jr:return T=Kf(T,v.mode,b),T.return=v,T;case Bi:var R=T._init;return d(v,R(T._payload),b)}if(La(T)||va(T))return T=rr(T,v.mode,b,null),T.return=v,T;Ju(v,T)}return null}function f(v,T,b,R){var D=T!==null?T.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return D!==null?null:a(v,T,""+b,R);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Uu:return b.key===D?l(v,T,b,R):null;case jr:return b.key===D?u(v,T,b,R):null;case Bi:return D=b._init,f(v,T,D(b._payload),R)}if(La(b)||va(b))return D!==null?null:c(v,T,b,R,null);Ju(v,b)}return null}function m(v,T,b,R,D){if(typeof R=="string"&&R!==""||typeof R=="number")return v=v.get(b)||null,a(T,v,""+R,D);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Uu:return v=v.get(R.key===null?b:R.key)||null,l(T,v,R,D);case jr:return v=v.get(R.key===null?b:R.key)||null,u(T,v,R,D);case Bi:var N=R._init;return m(v,T,b,N(R._payload),D)}if(La(R)||va(R))return v=v.get(b)||null,c(T,v,R,D,null);Ju(T,R)}return null}function y(v,T,b,R){for(var D=null,N=null,S=T,w=T=0,x=null;S!==null&&w<b.length;w++){S.index>w?(x=S,S=null):x=S.sibling;var k=f(v,S,b[w],R);if(k===null){S===null&&(S=x);break}e&&S&&k.alternate===null&&t(v,S),T=r(k,T,w),N===null?D=k:N.sibling=k,N=k,S=x}if(w===b.length)return n(v,S),Ct&&zs(v,w),D;if(S===null){for(;w<b.length;w++)S=d(v,b[w],R),S!==null&&(T=r(S,T,w),N===null?D=S:N.sibling=S,N=S);return Ct&&zs(v,w),D}for(S=i(v,S);w<b.length;w++)x=m(S,v,w,b[w],R),x!==null&&(e&&x.alternate!==null&&S.delete(x.key===null?w:x.key),T=r(x,T,w),N===null?D=x:N.sibling=x,N=x);return e&&S.forEach(function(A){return t(v,A)}),Ct&&zs(v,w),D}function _(v,T,b,R){var D=va(b);if(typeof D!="function")throw Error(U(150));if(b=D.call(b),b==null)throw Error(U(151));for(var N=D=null,S=T,w=T=0,x=null,k=b.next();S!==null&&!k.done;w++,k=b.next()){S.index>w?(x=S,S=null):x=S.sibling;var A=f(v,S,k.value,R);if(A===null){S===null&&(S=x);break}e&&S&&A.alternate===null&&t(v,S),T=r(A,T,w),N===null?D=A:N.sibling=A,N=A,S=x}if(k.done)return n(v,S),Ct&&zs(v,w),D;if(S===null){for(;!k.done;w++,k=b.next())k=d(v,k.value,R),k!==null&&(T=r(k,T,w),N===null?D=k:N.sibling=k,N=k);return Ct&&zs(v,w),D}for(S=i(v,S);!k.done;w++,k=b.next())k=m(S,v,w,k.value,R),k!==null&&(e&&k.alternate!==null&&S.delete(k.key===null?w:k.key),T=r(k,T,w),N===null?D=k:N.sibling=k,N=k);return e&&S.forEach(function(C){return t(v,C)}),Ct&&zs(v,w),D}function E(v,T,b,R){if(typeof b=="object"&&b!==null&&b.type===Br&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Uu:t:{for(var D=b.key,N=T;N!==null;){if(N.key===D){if(D=b.type,D===Br){if(N.tag===7){n(v,N.sibling),T=s(N,b.props.children),T.return=v,v=T;break t}}else if(N.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Bi&&Y0(D)===N.type){n(v,N.sibling),T=s(N,b.props),T.ref=Sa(v,N,b),T.return=v,v=T;break t}n(v,N);break}else t(v,N);N=N.sibling}b.type===Br?(T=rr(b.props.children,v.mode,R,b.key),T.return=v,v=T):(R=Uc(b.type,b.key,b.props,null,v.mode,R),R.ref=Sa(v,T,b),R.return=v,v=R)}return o(v);case jr:t:{for(N=b.key;T!==null;){if(T.key===N)if(T.tag===4&&T.stateNode.containerInfo===b.containerInfo&&T.stateNode.implementation===b.implementation){n(v,T.sibling),T=s(T,b.children||[]),T.return=v,v=T;break t}else{n(v,T);break}else t(v,T);T=T.sibling}T=Kf(b,v.mode,R),T.return=v,v=T}return o(v);case Bi:return N=b._init,E(v,T,N(b._payload),R)}if(La(b))return y(v,T,b,R);if(va(b))return _(v,T,b,R);Ju(v,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,T!==null&&T.tag===6?(n(v,T.sibling),T=s(T,b),T.return=v,v=T):(n(v,T),T=qf(b,v.mode,R),T.return=v,v=T),o(v)):n(v,T)}return E}var Eo=WS(!0),HS=WS(!1),xh=As(null),Eh=null,Gr=null,ty=null;function ey(){ty=Gr=Eh=null}function ny(e){var t=xh.current;Pt(xh),e._currentValue=t}function cm(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function ao(e,t){Eh=e,ty=Gr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ze=!0),e.firstContext=null)}function gn(e){var t=e._currentValue;if(ty!==e)if(e={context:e,memoizedValue:t,next:null},Gr===null){if(Eh===null)throw Error(U(308));Gr=e,Eh.dependencies={lanes:0,firstContext:e}}else Gr=Gr.next=e;return t}var Qs=null;function iy(e){Qs===null?Qs=[e]:Qs.push(e)}function qS(e,t,n,i){var s=t.interleaved;return s===null?(n.next=n,iy(t)):(n.next=s.next,s.next=n),t.interleaved=n,mi(e,i)}function mi(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Ui=!1;function sy(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function KS(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function di(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ss(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,mt&2){var s=i.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),i.pending=t,mi(e,n)}return s=i.interleaved,s===null?(t.next=t,iy(i)):(t.next=s.next,s.next=t),i.interleaved=t,mi(e,n)}function Oc(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,$g(e,n)}}function Q0(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var s=null,r=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};r===null?s=r=o:r=r.next=o,n=n.next}while(n!==null);r===null?s=r=t:r=r.next=t}else s=r=t;n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:i.shared,effects:i.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Sh(e,t,n,i){var s=e.updateQueue;Ui=!1;var r=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?r=u:o.next=u,o=l;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(r!==null){var d=s.baseState;o=0,c=u=l=null,a=r;do{var f=a.lane,m=a.eventTime;if((i&f)===f){c!==null&&(c=c.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});t:{var y=e,_=a;switch(f=t,m=n,_.tag){case 1:if(y=_.payload,typeof y=="function"){d=y.call(m,d,f);break t}d=y;break t;case 3:y.flags=y.flags&-65537|128;case 0:if(y=_.payload,f=typeof y=="function"?y.call(m,d,f):y,f==null)break t;d=Ot({},d,f);break t;case 2:Ui=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else m={eventTime:m,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=m,l=d):c=c.next=m,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(c===null&&(l=d),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=c,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else r===null&&(s.shared.lanes=0);fr|=o,e.lanes=o,e.memoizedState=d}}function X0(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],s=i.callback;if(s!==null){if(i.callback=null,i=n,typeof s!="function")throw Error(U(191,s));s.call(i)}}}var uu={},Wn=As(uu),Cl=As(uu),Rl=As(uu);function Xs(e){if(e===uu)throw Error(U(174));return e}function ry(e,t){switch(St(Rl,t),St(Cl,e),St(Wn,uu),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Wp(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Wp(t,e)}Pt(Wn),St(Wn,t)}function So(){Pt(Wn),Pt(Cl),Pt(Rl)}function GS(e){Xs(Rl.current);var t=Xs(Wn.current),n=Wp(t,e.type);t!==n&&(St(Cl,e),St(Wn,n))}function oy(e){Cl.current===e&&(Pt(Wn),Pt(Cl))}var Dt=As(0);function bh(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Bf=[];function ay(){for(var e=0;e<Bf.length;e++)Bf[e]._workInProgressVersionPrimary=null;Bf.length=0}var Vc=Si.ReactCurrentDispatcher,Uf=Si.ReactCurrentBatchConfig,dr=0,Nt=null,Xt=null,se=null,Ih=!1,tl=!1,Dl=0,d2=0;function ye(){throw Error(U(321))}function ly(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Pn(e[n],t[n]))return!1;return!0}function uy(e,t,n,i,s,r){if(dr=r,Nt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Vc.current=e===null||e.memoizedState===null?g2:y2,e=n(i,s),tl){r=0;do{if(tl=!1,Dl=0,25<=r)throw Error(U(301));r+=1,se=Xt=null,t.updateQueue=null,Vc.current=_2,e=n(i,s)}while(tl)}if(Vc.current=Ah,t=Xt!==null&&Xt.next!==null,dr=0,se=Xt=Nt=null,Ih=!1,t)throw Error(U(300));return e}function cy(){var e=Dl!==0;return Dl=0,e}function Ln(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return se===null?Nt.memoizedState=se=e:se=se.next=e,se}function yn(){if(Xt===null){var e=Nt.alternate;e=e!==null?e.memoizedState:null}else e=Xt.next;var t=se===null?Nt.memoizedState:se.next;if(t!==null)se=t,Xt=e;else{if(e===null)throw Error(U(310));Xt=e,e={memoizedState:Xt.memoizedState,baseState:Xt.baseState,baseQueue:Xt.baseQueue,queue:Xt.queue,next:null},se===null?Nt.memoizedState=se=e:se=se.next=e}return se}function Ml(e,t){return typeof t=="function"?t(e):t}function zf(e){var t=yn(),n=t.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=e;var i=Xt,s=i.baseQueue,r=n.pending;if(r!==null){if(s!==null){var o=s.next;s.next=r.next,r.next=o}i.baseQueue=s=r,n.pending=null}if(s!==null){r=s.next,i=i.baseState;var a=o=null,l=null,u=r;do{var c=u.lane;if((dr&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:e(i,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=i):l=l.next=d,Nt.lanes|=c,fr|=c}u=u.next}while(u!==null&&u!==r);l===null?o=i:l.next=a,Pn(i,t.memoizedState)||(ze=!0),t.memoizedState=i,t.baseState=o,t.baseQueue=l,n.lastRenderedState=i}if(e=n.interleaved,e!==null){s=e;do r=s.lane,Nt.lanes|=r,fr|=r,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function $f(e){var t=yn(),n=t.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=e;var i=n.dispatch,s=n.pending,r=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do r=e(r,o.action),o=o.next;while(o!==s);Pn(r,t.memoizedState)||(ze=!0),t.memoizedState=r,t.baseQueue===null&&(t.baseState=r),n.lastRenderedState=r}return[r,i]}function YS(){}function QS(e,t){var n=Nt,i=yn(),s=t(),r=!Pn(i.memoizedState,s);if(r&&(i.memoizedState=s,ze=!0),i=i.queue,hy(ZS.bind(null,n,i,e),[e]),i.getSnapshot!==t||r||se!==null&&se.memoizedState.tag&1){if(n.flags|=2048,Nl(9,JS.bind(null,n,i,s,t),void 0,null),oe===null)throw Error(U(349));dr&30||XS(n,t,s)}return s}function XS(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Nt.updateQueue,t===null?(t={lastEffect:null,stores:null},Nt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function JS(e,t,n,i){t.value=n,t.getSnapshot=i,tb(t)&&eb(e)}function ZS(e,t,n){return n(function(){tb(t)&&eb(e)})}function tb(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Pn(e,n)}catch{return!0}}function eb(e){var t=mi(e,1);t!==null&&kn(t,e,1,-1)}function J0(e){var t=Ln();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ml,lastRenderedState:e},t.queue=e,e=e.dispatch=m2.bind(null,Nt,e),[t.memoizedState,e]}function Nl(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},t=Nt.updateQueue,t===null?(t={lastEffect:null,stores:null},Nt.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e)),e}function nb(){return yn().memoizedState}function Lc(e,t,n,i){var s=Ln();Nt.flags|=e,s.memoizedState=Nl(1|t,n,void 0,i===void 0?null:i)}function _d(e,t,n,i){var s=yn();i=i===void 0?null:i;var r=void 0;if(Xt!==null){var o=Xt.memoizedState;if(r=o.destroy,i!==null&&ly(i,o.deps)){s.memoizedState=Nl(t,n,r,i);return}}Nt.flags|=e,s.memoizedState=Nl(1|t,n,r,i)}function Z0(e,t){return Lc(8390656,8,e,t)}function hy(e,t){return _d(2048,8,e,t)}function ib(e,t){return _d(4,2,e,t)}function sb(e,t){return _d(4,4,e,t)}function rb(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function ob(e,t,n){return n=n!=null?n.concat([e]):null,_d(4,4,rb.bind(null,t,e),n)}function dy(){}function ab(e,t){var n=yn();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&ly(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function lb(e,t){var n=yn();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&ly(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function ub(e,t,n){return dr&21?(Pn(n,t)||(n=pS(),Nt.lanes|=n,fr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ze=!0),e.memoizedState=n)}function f2(e,t){var n=Tt;Tt=n!==0&&4>n?n:4,e(!0);var i=Uf.transition;Uf.transition={};try{e(!1),t()}finally{Tt=n,Uf.transition=i}}function cb(){return yn().memoizedState}function p2(e,t,n){var i=os(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},hb(e))db(t,n);else if(n=qS(e,t,n,i),n!==null){var s=Ne();kn(n,e,i,s),fb(n,t,i)}}function m2(e,t,n){var i=os(e),s={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(hb(e))db(t,s);else{var r=e.alternate;if(e.lanes===0&&(r===null||r.lanes===0)&&(r=t.lastRenderedReducer,r!==null))try{var o=t.lastRenderedState,a=r(o,n);if(s.hasEagerState=!0,s.eagerState=a,Pn(a,o)){var l=t.interleaved;l===null?(s.next=s,iy(t)):(s.next=l.next,l.next=s),t.interleaved=s;return}}catch{}finally{}n=qS(e,t,s,i),n!==null&&(s=Ne(),kn(n,e,i,s),fb(n,t,i))}}function hb(e){var t=e.alternate;return e===Nt||t!==null&&t===Nt}function db(e,t){tl=Ih=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function fb(e,t,n){if(n&4194240){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,$g(e,n)}}var Ah={readContext:gn,useCallback:ye,useContext:ye,useEffect:ye,useImperativeHandle:ye,useInsertionEffect:ye,useLayoutEffect:ye,useMemo:ye,useReducer:ye,useRef:ye,useState:ye,useDebugValue:ye,useDeferredValue:ye,useTransition:ye,useMutableSource:ye,useSyncExternalStore:ye,useId:ye,unstable_isNewReconciler:!1},g2={readContext:gn,useCallback:function(e,t){return Ln().memoizedState=[e,t===void 0?null:t],e},useContext:gn,useEffect:Z0,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Lc(4194308,4,rb.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Lc(4194308,4,e,t)},useInsertionEffect:function(e,t){return Lc(4,2,e,t)},useMemo:function(e,t){var n=Ln();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=Ln();return t=n!==void 0?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=p2.bind(null,Nt,e),[i.memoizedState,e]},useRef:function(e){var t=Ln();return e={current:e},t.memoizedState=e},useState:J0,useDebugValue:dy,useDeferredValue:function(e){return Ln().memoizedState=e},useTransition:function(){var e=J0(!1),t=e[0];return e=f2.bind(null,e[1]),Ln().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=Nt,s=Ln();if(Ct){if(n===void 0)throw Error(U(407));n=n()}else{if(n=t(),oe===null)throw Error(U(349));dr&30||XS(i,t,n)}s.memoizedState=n;var r={value:n,getSnapshot:t};return s.queue=r,Z0(ZS.bind(null,i,r,e),[e]),i.flags|=2048,Nl(9,JS.bind(null,i,r,n,t),void 0,null),n},useId:function(){var e=Ln(),t=oe.identifierPrefix;if(Ct){var n=ui,i=li;n=(i&~(1<<32-An(i)-1)).toString(32)+n,t=":"+t+"R"+n,n=Dl++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=d2++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},y2={readContext:gn,useCallback:ab,useContext:gn,useEffect:hy,useImperativeHandle:ob,useInsertionEffect:ib,useLayoutEffect:sb,useMemo:lb,useReducer:zf,useRef:nb,useState:function(){return zf(Ml)},useDebugValue:dy,useDeferredValue:function(e){var t=yn();return ub(t,Xt.memoizedState,e)},useTransition:function(){var e=zf(Ml)[0],t=yn().memoizedState;return[e,t]},useMutableSource:YS,useSyncExternalStore:QS,useId:cb,unstable_isNewReconciler:!1},_2={readContext:gn,useCallback:ab,useContext:gn,useEffect:hy,useImperativeHandle:ob,useInsertionEffect:ib,useLayoutEffect:sb,useMemo:lb,useReducer:$f,useRef:nb,useState:function(){return $f(Ml)},useDebugValue:dy,useDeferredValue:function(e){var t=yn();return Xt===null?t.memoizedState=e:ub(t,Xt.memoizedState,e)},useTransition:function(){var e=$f(Ml)[0],t=yn().memoizedState;return[e,t]},useMutableSource:YS,useSyncExternalStore:QS,useId:cb,unstable_isNewReconciler:!1};function xn(e,t){if(e&&e.defaultProps){t=Ot({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function hm(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:Ot({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var vd={isMounted:function(e){return(e=e._reactInternals)?Er(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=Ne(),s=os(e),r=di(i,s);r.payload=t,n!=null&&(r.callback=n),t=ss(e,r,s),t!==null&&(kn(t,e,s,i),Oc(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=Ne(),s=os(e),r=di(i,s);r.tag=1,r.payload=t,n!=null&&(r.callback=n),t=ss(e,r,s),t!==null&&(kn(t,e,s,i),Oc(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ne(),i=os(e),s=di(n,i);s.tag=2,t!=null&&(s.callback=t),t=ss(e,s,i),t!==null&&(kn(t,e,i,n),Oc(t,e,i))}};function tw(e,t,n,i,s,r,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,r,o):t.prototype&&t.prototype.isPureReactComponent?!Il(n,i)||!Il(s,r):!0}function pb(e,t,n){var i=!1,s=gs,r=t.contextType;return typeof r=="object"&&r!==null?r=gn(r):(s=He(t)?cr:Ie.current,i=t.contextTypes,r=(i=i!=null)?To(e,s):gs),t=new t(n,r),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=vd,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=r),t}function ew(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&vd.enqueueReplaceState(t,t.state,null)}function dm(e,t,n,i){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},sy(e);var r=t.contextType;typeof r=="object"&&r!==null?s.context=gn(r):(r=He(t)?cr:Ie.current,s.context=To(e,r)),s.state=e.memoizedState,r=t.getDerivedStateFromProps,typeof r=="function"&&(hm(e,t,r,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&vd.enqueueReplaceState(s,s.state,null),Sh(e,n,s,i),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function bo(e,t){try{var n="",i=t;do n+=qR(i),i=i.return;while(i);var s=n}catch(r){s=`
Error generating stack: `+r.message+`
`+r.stack}return{value:e,source:t,stack:s,digest:null}}function Wf(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function fm(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var v2=typeof WeakMap=="function"?WeakMap:Map;function mb(e,t,n){n=di(-1,n),n.tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){Ph||(Ph=!0,Em=i),fm(e,t)},n}function gb(e,t,n){n=di(-1,n),n.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var s=t.value;n.payload=function(){return i(s)},n.callback=function(){fm(e,t)}}var r=e.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(n.callback=function(){fm(e,t),typeof i!="function"&&(rs===null?rs=new Set([this]):rs.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function nw(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new v2;var s=new Set;i.set(t,s)}else s=i.get(t),s===void 0&&(s=new Set,i.set(t,s));s.has(n)||(s.add(n),e=M2.bind(null,e,t,n),t.then(e,e))}function iw(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function sw(e,t,n,i,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=di(-1,1),t.tag=2,ss(n,t,1))),n.lanes|=1),e)}var w2=Si.ReactCurrentOwner,ze=!1;function De(e,t,n,i){t.child=e===null?HS(t,null,n,i):Eo(t,e.child,n,i)}function rw(e,t,n,i,s){n=n.render;var r=t.ref;return ao(t,s),i=uy(e,t,n,i,r,s),n=cy(),e!==null&&!ze?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,gi(e,t,s)):(Ct&&n&&Xg(t),t.flags|=1,De(e,t,i,s),t.child)}function ow(e,t,n,i,s){if(e===null){var r=n.type;return typeof r=="function"&&!wy(r)&&r.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=r,yb(e,t,r,i,s)):(e=Uc(n.type,null,i,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(r=e.child,!(e.lanes&s)){var o=r.memoizedProps;if(n=n.compare,n=n!==null?n:Il,n(o,i)&&e.ref===t.ref)return gi(e,t,s)}return t.flags|=1,e=as(r,i),e.ref=t.ref,e.return=t,t.child=e}function yb(e,t,n,i,s){if(e!==null){var r=e.memoizedProps;if(Il(r,i)&&e.ref===t.ref)if(ze=!1,t.pendingProps=i=r,(e.lanes&s)!==0)e.flags&131072&&(ze=!0);else return t.lanes=e.lanes,gi(e,t,s)}return pm(e,t,n,i,s)}function _b(e,t,n){var i=t.pendingProps,s=i.children,r=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},St(Qr,Ye),Ye|=n;else{if(!(n&1073741824))return e=r!==null?r.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,St(Qr,Ye),Ye|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=r!==null?r.baseLanes:n,St(Qr,Ye),Ye|=i}else r!==null?(i=r.baseLanes|n,t.memoizedState=null):i=n,St(Qr,Ye),Ye|=i;return De(e,t,s,n),t.child}function vb(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function pm(e,t,n,i,s){var r=He(n)?cr:Ie.current;return r=To(t,r),ao(t,s),n=uy(e,t,n,i,r,s),i=cy(),e!==null&&!ze?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,gi(e,t,s)):(Ct&&i&&Xg(t),t.flags|=1,De(e,t,n,s),t.child)}function aw(e,t,n,i,s){if(He(n)){var r=!0;vh(t)}else r=!1;if(ao(t,s),t.stateNode===null)Fc(e,t),pb(t,n,i),dm(t,n,i,s),i=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=gn(u):(u=He(n)?cr:Ie.current,u=To(t,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==u)&&ew(t,o,i,u),Ui=!1;var f=t.memoizedState;o.state=f,Sh(t,i,o,s),l=t.memoizedState,a!==i||f!==l||We.current||Ui?(typeof c=="function"&&(hm(t,n,c,i),l=t.memoizedState),(a=Ui||tw(t,n,a,i,f,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),o.props=i,o.state=l,o.context=u,i=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{o=t.stateNode,KS(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:xn(t.type,a),o.props=u,d=t.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=gn(l):(l=He(n)?cr:Ie.current,l=To(t,l));var m=n.getDerivedStateFromProps;(c=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&ew(t,o,i,l),Ui=!1,f=t.memoizedState,o.state=f,Sh(t,i,o,s);var y=t.memoizedState;a!==d||f!==y||We.current||Ui?(typeof m=="function"&&(hm(t,n,m,i),y=t.memoizedState),(u=Ui||tw(t,n,u,i,f,y,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,y,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=y),o.props=i,o.state=y,o.context=l,i=u):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),i=!1)}return mm(e,t,n,i,r,s)}function mm(e,t,n,i,s,r){vb(e,t);var o=(t.flags&128)!==0;if(!i&&!o)return s&&q0(t,n,!1),gi(e,t,r);i=t.stateNode,w2.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&o?(t.child=Eo(t,e.child,null,r),t.child=Eo(t,null,a,r)):De(e,t,a,r),t.memoizedState=i.state,s&&q0(t,n,!0),t.child}function wb(e){var t=e.stateNode;t.pendingContext?H0(e,t.pendingContext,t.pendingContext!==t.context):t.context&&H0(e,t.context,!1),ry(e,t.containerInfo)}function lw(e,t,n,i,s){return xo(),Zg(s),t.flags|=256,De(e,t,n,i),t.child}var gm={dehydrated:null,treeContext:null,retryLane:0};function ym(e){return{baseLanes:e,cachePool:null,transitions:null}}function Tb(e,t,n){var i=t.pendingProps,s=Dt.current,r=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(s&2)!==0),a?(r=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),St(Dt,s&1),e===null)return um(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=i.children,e=i.fallback,r?(i=t.mode,r=t.child,o={mode:"hidden",children:o},!(i&1)&&r!==null?(r.childLanes=0,r.pendingProps=o):r=xd(o,i,0,null),e=rr(e,i,n,null),r.return=t,e.return=t,r.sibling=e,t.child=r,t.child.memoizedState=ym(n),t.memoizedState=gm,e):fy(t,o));if(s=e.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return T2(e,t,o,i,a,s,n);if(r){r=i.fallback,o=t.mode,s=e.child,a=s.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&t.child!==s?(i=t.child,i.childLanes=0,i.pendingProps=l,t.deletions=null):(i=as(s,l),i.subtreeFlags=s.subtreeFlags&14680064),a!==null?r=as(a,r):(r=rr(r,o,n,null),r.flags|=2),r.return=t,i.return=t,i.sibling=r,t.child=i,i=r,r=t.child,o=e.child.memoizedState,o=o===null?ym(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},r.memoizedState=o,r.childLanes=e.childLanes&~n,t.memoizedState=gm,i}return r=e.child,e=r.sibling,i=as(r,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=n),i.return=t,i.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function fy(e,t){return t=xd({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Zu(e,t,n,i){return i!==null&&Zg(i),Eo(t,e.child,null,n),e=fy(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function T2(e,t,n,i,s,r,o){if(n)return t.flags&256?(t.flags&=-257,i=Wf(Error(U(422))),Zu(e,t,o,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(r=i.fallback,s=t.mode,i=xd({mode:"visible",children:i.children},s,0,null),r=rr(r,s,o,null),r.flags|=2,i.return=t,r.return=t,i.sibling=r,t.child=i,t.mode&1&&Eo(t,e.child,null,o),t.child.memoizedState=ym(o),t.memoizedState=gm,r);if(!(t.mode&1))return Zu(e,t,o,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var a=i.dgst;return i=a,r=Error(U(419)),i=Wf(r,i,void 0),Zu(e,t,o,i)}if(a=(o&e.childLanes)!==0,ze||a){if(i=oe,i!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|o)?0:s,s!==0&&s!==r.retryLane&&(r.retryLane=s,mi(e,s),kn(i,e,s,-1))}return vy(),i=Wf(Error(U(421))),Zu(e,t,o,i)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=N2.bind(null,e),s._reactRetry=t,null):(e=r.treeContext,Qe=is(s.nextSibling),Ze=t,Ct=!0,Sn=null,e!==null&&(ln[un++]=li,ln[un++]=ui,ln[un++]=hr,li=e.id,ui=e.overflow,hr=t),t=fy(t,i.children),t.flags|=4096,t)}function uw(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),cm(e.return,t,n)}function Hf(e,t,n,i,s){var r=e.memoizedState;r===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=n,r.tailMode=s)}function xb(e,t,n){var i=t.pendingProps,s=i.revealOrder,r=i.tail;if(De(e,t,i.children,n),i=Dt.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)t:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&uw(e,n,t);else if(e.tag===19)uw(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(St(Dt,i),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&bh(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Hf(t,!1,s,n,r);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&bh(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Hf(t,!0,n,null,r);break;case"together":Hf(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Fc(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function gi(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),fr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(U(153));if(t.child!==null){for(e=t.child,n=as(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=as(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function x2(e,t,n){switch(t.tag){case 3:wb(t),xo();break;case 5:GS(t);break;case 1:He(t.type)&&vh(t);break;case 4:ry(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,s=t.memoizedProps.value;St(xh,i._currentValue),i._currentValue=s;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(St(Dt,Dt.current&1),t.flags|=128,null):n&t.child.childLanes?Tb(e,t,n):(St(Dt,Dt.current&1),e=gi(e,t,n),e!==null?e.sibling:null);St(Dt,Dt.current&1);break;case 19:if(i=(n&t.childLanes)!==0,e.flags&128){if(i)return xb(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),St(Dt,Dt.current),i)break;return null;case 22:case 23:return t.lanes=0,_b(e,t,n)}return gi(e,t,n)}var Eb,_m,Sb,bb;Eb=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};_m=function(){};Sb=function(e,t,n,i){var s=e.memoizedProps;if(s!==i){e=t.stateNode,Xs(Wn.current);var r=null;switch(n){case"input":s=Bp(e,s),i=Bp(e,i),r=[];break;case"select":s=Ot({},s,{value:void 0}),i=Ot({},i,{value:void 0}),r=[];break;case"textarea":s=$p(e,s),i=$p(e,i),r=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=yh)}Hp(n,i);var o;n=null;for(u in s)if(!i.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(vl.hasOwnProperty(u)?r||(r=[]):(r=r||[]).push(u,null));for(u in i){var l=i[u];if(a=s!=null?s[u]:void 0,i.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(r||(r=[]),r.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(r=r||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(r=r||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(vl.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&At("scroll",e),r||a===l||(r=[])):(r=r||[]).push(u,l))}n&&(r=r||[]).push("style",n);var u=r;(t.updateQueue=u)&&(t.flags|=4)}};bb=function(e,t,n,i){n!==i&&(t.flags|=4)};function ba(e,t){if(!Ct)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function _e(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function E2(e,t,n){var i=t.pendingProps;switch(Jg(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _e(t),null;case 1:return He(t.type)&&_h(),_e(t),null;case 3:return i=t.stateNode,So(),Pt(We),Pt(Ie),ay(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(Xu(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Sn!==null&&(Im(Sn),Sn=null))),_m(e,t),_e(t),null;case 5:oy(t);var s=Xs(Rl.current);if(n=t.type,e!==null&&t.stateNode!=null)Sb(e,t,n,i,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(U(166));return _e(t),null}if(e=Xs(Wn.current),Xu(t)){i=t.stateNode,n=t.type;var r=t.memoizedProps;switch(i[Bn]=t,i[Pl]=r,e=(t.mode&1)!==0,n){case"dialog":At("cancel",i),At("close",i);break;case"iframe":case"object":case"embed":At("load",i);break;case"video":case"audio":for(s=0;s<ja.length;s++)At(ja[s],i);break;case"source":At("error",i);break;case"img":case"image":case"link":At("error",i),At("load",i);break;case"details":At("toggle",i);break;case"input":_0(i,r),At("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!r.multiple},At("invalid",i);break;case"textarea":w0(i,r),At("invalid",i)}Hp(n,r),s=null;for(var o in r)if(r.hasOwnProperty(o)){var a=r[o];o==="children"?typeof a=="string"?i.textContent!==a&&(r.suppressHydrationWarning!==!0&&Qu(i.textContent,a,e),s=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(r.suppressHydrationWarning!==!0&&Qu(i.textContent,a,e),s=["children",""+a]):vl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&At("scroll",i)}switch(n){case"input":zu(i),v0(i,r,!0);break;case"textarea":zu(i),T0(i);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(i.onclick=yh)}i=s,t.updateQueue=i,i!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Z1(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=o.createElement(n,{is:i.is}):(e=o.createElement(n),n==="select"&&(o=e,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):e=o.createElementNS(e,n),e[Bn]=t,e[Pl]=i,Eb(e,t,!1,!1),t.stateNode=e;t:{switch(o=qp(n,i),n){case"dialog":At("cancel",e),At("close",e),s=i;break;case"iframe":case"object":case"embed":At("load",e),s=i;break;case"video":case"audio":for(s=0;s<ja.length;s++)At(ja[s],e);s=i;break;case"source":At("error",e),s=i;break;case"img":case"image":case"link":At("error",e),At("load",e),s=i;break;case"details":At("toggle",e),s=i;break;case"input":_0(e,i),s=Bp(e,i),At("invalid",e);break;case"option":s=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},s=Ot({},i,{value:void 0}),At("invalid",e);break;case"textarea":w0(e,i),s=$p(e,i),At("invalid",e);break;default:s=i}Hp(n,s),a=s;for(r in a)if(a.hasOwnProperty(r)){var l=a[r];r==="style"?nS(e,l):r==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&tS(e,l)):r==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&wl(e,l):typeof l=="number"&&wl(e,""+l):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(vl.hasOwnProperty(r)?l!=null&&r==="onScroll"&&At("scroll",e):l!=null&&Lg(e,r,l,o))}switch(n){case"input":zu(e),v0(e,i,!1);break;case"textarea":zu(e),T0(e);break;case"option":i.value!=null&&e.setAttribute("value",""+ms(i.value));break;case"select":e.multiple=!!i.multiple,r=i.value,r!=null?io(e,!!i.multiple,r,!1):i.defaultValue!=null&&io(e,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=yh)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break t;case"img":i=!0;break t;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return _e(t),null;case 6:if(e&&t.stateNode!=null)bb(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(U(166));if(n=Xs(Rl.current),Xs(Wn.current),Xu(t)){if(i=t.stateNode,n=t.memoizedProps,i[Bn]=t,(r=i.nodeValue!==n)&&(e=Ze,e!==null))switch(e.tag){case 3:Qu(i.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Qu(i.nodeValue,n,(e.mode&1)!==0)}r&&(t.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Bn]=t,t.stateNode=i}return _e(t),null;case 13:if(Pt(Dt),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ct&&Qe!==null&&t.mode&1&&!(t.flags&128))$S(),xo(),t.flags|=98560,r=!1;else if(r=Xu(t),i!==null&&i.dehydrated!==null){if(e===null){if(!r)throw Error(U(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(U(317));r[Bn]=t}else xo(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;_e(t),r=!1}else Sn!==null&&(Im(Sn),Sn=null),r=!0;if(!r)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(e===null||Dt.current&1?Zt===0&&(Zt=3):vy())),t.updateQueue!==null&&(t.flags|=4),_e(t),null);case 4:return So(),_m(e,t),e===null&&Al(t.stateNode.containerInfo),_e(t),null;case 10:return ny(t.type._context),_e(t),null;case 17:return He(t.type)&&_h(),_e(t),null;case 19:if(Pt(Dt),r=t.memoizedState,r===null)return _e(t),null;if(i=(t.flags&128)!==0,o=r.rendering,o===null)if(i)ba(r,!1);else{if(Zt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=bh(e),o!==null){for(t.flags|=128,ba(r,!1),i=o.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;n!==null;)r=n,e=i,r.flags&=14680066,o=r.alternate,o===null?(r.childLanes=0,r.lanes=e,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,e=o.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return St(Dt,Dt.current&1|2),t.child}e=e.sibling}r.tail!==null&&zt()>Io&&(t.flags|=128,i=!0,ba(r,!1),t.lanes=4194304)}else{if(!i)if(e=bh(o),e!==null){if(t.flags|=128,i=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),ba(r,!0),r.tail===null&&r.tailMode==="hidden"&&!o.alternate&&!Ct)return _e(t),null}else 2*zt()-r.renderingStartTime>Io&&n!==1073741824&&(t.flags|=128,i=!0,ba(r,!1),t.lanes=4194304);r.isBackwards?(o.sibling=t.child,t.child=o):(n=r.last,n!==null?n.sibling=o:t.child=o,r.last=o)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=zt(),t.sibling=null,n=Dt.current,St(Dt,i?n&1|2:n&1),t):(_e(t),null);case 22:case 23:return _y(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?Ye&1073741824&&(_e(t),t.subtreeFlags&6&&(t.flags|=8192)):_e(t),null;case 24:return null;case 25:return null}throw Error(U(156,t.tag))}function S2(e,t){switch(Jg(t),t.tag){case 1:return He(t.type)&&_h(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return So(),Pt(We),Pt(Ie),ay(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return oy(t),null;case 13:if(Pt(Dt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(U(340));xo()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Pt(Dt),null;case 4:return So(),null;case 10:return ny(t.type._context),null;case 22:case 23:return _y(),null;case 24:return null;default:return null}}var tc=!1,xe=!1,b2=typeof WeakSet=="function"?WeakSet:Set,H=null;function Yr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){jt(e,t,i)}else n.current=null}function vm(e,t,n){try{n()}catch(i){jt(e,t,i)}}var cw=!1;function I2(e,t){if(nm=ph,e=CS(),Qg(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else t:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var s=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{n.nodeType,r.nodeType}catch{n=null;break t}var o=0,a=-1,l=-1,u=0,c=0,d=e,f=null;e:for(;;){for(var m;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==r||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)f=d,d=m;for(;;){if(d===e)break e;if(f===n&&++u===s&&(a=o),f===r&&++c===i&&(l=o),(m=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(im={focusedElem:e,selectionRange:n},ph=!1,H=t;H!==null;)if(t=H,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,H=e;else for(;H!==null;){t=H;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var _=y.memoizedProps,E=y.memoizedState,v=t.stateNode,T=v.getSnapshotBeforeUpdate(t.elementType===t.type?_:xn(t.type,_),E);v.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(R){jt(t,t.return,R)}if(e=t.sibling,e!==null){e.return=t.return,H=e;break}H=t.return}return y=cw,cw=!1,y}function el(e,t,n){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&e)===e){var r=s.destroy;s.destroy=void 0,r!==void 0&&vm(t,n,r)}s=s.next}while(s!==i)}}function wd(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function wm(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Ib(e){var t=e.alternate;t!==null&&(e.alternate=null,Ib(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Bn],delete t[Pl],delete t[om],delete t[l2],delete t[u2])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Ab(e){return e.tag===5||e.tag===3||e.tag===4}function hw(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||Ab(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Tm(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=yh));else if(i!==4&&(e=e.child,e!==null))for(Tm(e,t,n),e=e.sibling;e!==null;)Tm(e,t,n),e=e.sibling}function xm(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(xm(e,t,n),e=e.sibling;e!==null;)xm(e,t,n),e=e.sibling}var ue=null,En=!1;function Mi(e,t,n){for(n=n.child;n!==null;)kb(e,t,n),n=n.sibling}function kb(e,t,n){if($n&&typeof $n.onCommitFiberUnmount=="function")try{$n.onCommitFiberUnmount(dd,n)}catch{}switch(n.tag){case 5:xe||Yr(n,t);case 6:var i=ue,s=En;ue=null,Mi(e,t,n),ue=i,En=s,ue!==null&&(En?(e=ue,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):ue.removeChild(n.stateNode));break;case 18:ue!==null&&(En?(e=ue,n=n.stateNode,e.nodeType===8?Ff(e.parentNode,n):e.nodeType===1&&Ff(e,n),Sl(e)):Ff(ue,n.stateNode));break;case 4:i=ue,s=En,ue=n.stateNode.containerInfo,En=!0,Mi(e,t,n),ue=i,En=s;break;case 0:case 11:case 14:case 15:if(!xe&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var r=s,o=r.destroy;r=r.tag,o!==void 0&&(r&2||r&4)&&vm(n,t,o),s=s.next}while(s!==i)}Mi(e,t,n);break;case 1:if(!xe&&(Yr(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){jt(n,t,a)}Mi(e,t,n);break;case 21:Mi(e,t,n);break;case 22:n.mode&1?(xe=(i=xe)||n.memoizedState!==null,Mi(e,t,n),xe=i):Mi(e,t,n);break;default:Mi(e,t,n)}}function dw(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new b2),t.forEach(function(i){var s=O2.bind(null,e,i);n.has(i)||(n.add(i),i.then(s,s))})}}function wn(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i];try{var r=e,o=t,a=o;t:for(;a!==null;){switch(a.tag){case 5:ue=a.stateNode,En=!1;break t;case 3:ue=a.stateNode.containerInfo,En=!0;break t;case 4:ue=a.stateNode.containerInfo,En=!0;break t}a=a.return}if(ue===null)throw Error(U(160));kb(r,o,s),ue=null,En=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){jt(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Pb(t,e),t=t.sibling}function Pb(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(wn(t,e),Nn(e),i&4){try{el(3,e,e.return),wd(3,e)}catch(_){jt(e,e.return,_)}try{el(5,e,e.return)}catch(_){jt(e,e.return,_)}}break;case 1:wn(t,e),Nn(e),i&512&&n!==null&&Yr(n,n.return);break;case 5:if(wn(t,e),Nn(e),i&512&&n!==null&&Yr(n,n.return),e.flags&32){var s=e.stateNode;try{wl(s,"")}catch(_){jt(e,e.return,_)}}if(i&4&&(s=e.stateNode,s!=null)){var r=e.memoizedProps,o=n!==null?n.memoizedProps:r,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&r.type==="radio"&&r.name!=null&&X1(s,r),qp(a,o);var u=qp(a,r);for(o=0;o<l.length;o+=2){var c=l[o],d=l[o+1];c==="style"?nS(s,d):c==="dangerouslySetInnerHTML"?tS(s,d):c==="children"?wl(s,d):Lg(s,c,d,u)}switch(a){case"input":Up(s,r);break;case"textarea":J1(s,r);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!r.multiple;var m=r.value;m!=null?io(s,!!r.multiple,m,!1):f!==!!r.multiple&&(r.defaultValue!=null?io(s,!!r.multiple,r.defaultValue,!0):io(s,!!r.multiple,r.multiple?[]:"",!1))}s[Pl]=r}catch(_){jt(e,e.return,_)}}break;case 6:if(wn(t,e),Nn(e),i&4){if(e.stateNode===null)throw Error(U(162));s=e.stateNode,r=e.memoizedProps;try{s.nodeValue=r}catch(_){jt(e,e.return,_)}}break;case 3:if(wn(t,e),Nn(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Sl(t.containerInfo)}catch(_){jt(e,e.return,_)}break;case 4:wn(t,e),Nn(e);break;case 13:wn(t,e),Nn(e),s=e.child,s.flags&8192&&(r=s.memoizedState!==null,s.stateNode.isHidden=r,!r||s.alternate!==null&&s.alternate.memoizedState!==null||(gy=zt())),i&4&&dw(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(xe=(u=xe)||c,wn(t,e),xe=u):wn(t,e),Nn(e),i&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&e.mode&1)for(H=e,c=e.child;c!==null;){for(d=H=c;H!==null;){switch(f=H,m=f.child,f.tag){case 0:case 11:case 14:case 15:el(4,f,f.return);break;case 1:Yr(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){i=f,n=f.return;try{t=i,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(_){jt(i,n,_)}}break;case 5:Yr(f,f.return);break;case 22:if(f.memoizedState!==null){pw(d);continue}}m!==null?(m.return=f,H=m):pw(d)}c=c.sibling}t:for(c=null,d=e;;){if(d.tag===5){if(c===null){c=d;try{s=d.stateNode,u?(r=s.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=eS("display",o))}catch(_){jt(e,e.return,_)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(_){jt(e,e.return,_)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break t;for(;d.sibling===null;){if(d.return===null||d.return===e)break t;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:wn(t,e),Nn(e),i&4&&dw(e);break;case 21:break;default:wn(t,e),Nn(e)}}function Nn(e){var t=e.flags;if(t&2){try{t:{for(var n=e.return;n!==null;){if(Ab(n)){var i=n;break t}n=n.return}throw Error(U(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(wl(s,""),i.flags&=-33);var r=hw(e);xm(e,r,s);break;case 3:case 4:var o=i.stateNode.containerInfo,a=hw(e);Tm(e,a,o);break;default:throw Error(U(161))}}catch(l){jt(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function A2(e,t,n){H=e,Cb(e)}function Cb(e,t,n){for(var i=(e.mode&1)!==0;H!==null;){var s=H,r=s.child;if(s.tag===22&&i){var o=s.memoizedState!==null||tc;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||xe;a=tc;var u=xe;if(tc=o,(xe=l)&&!u)for(H=s;H!==null;)o=H,l=o.child,o.tag===22&&o.memoizedState!==null?mw(s):l!==null?(l.return=o,H=l):mw(s);for(;r!==null;)H=r,Cb(r),r=r.sibling;H=s,tc=a,xe=u}fw(e)}else s.subtreeFlags&8772&&r!==null?(r.return=s,H=r):fw(e)}}function fw(e){for(;H!==null;){var t=H;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:xe||wd(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!xe)if(n===null)i.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:xn(t.type,n.memoizedProps);i.componentDidUpdate(s,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var r=t.updateQueue;r!==null&&X0(t,r,i);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}X0(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&Sl(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}xe||t.flags&512&&wm(t)}catch(f){jt(t,t.return,f)}}if(t===e){H=null;break}if(n=t.sibling,n!==null){n.return=t.return,H=n;break}H=t.return}}function pw(e){for(;H!==null;){var t=H;if(t===e){H=null;break}var n=t.sibling;if(n!==null){n.return=t.return,H=n;break}H=t.return}}function mw(e){for(;H!==null;){var t=H;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{wd(4,t)}catch(l){jt(t,n,l)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var s=t.return;try{i.componentDidMount()}catch(l){jt(t,s,l)}}var r=t.return;try{wm(t)}catch(l){jt(t,r,l)}break;case 5:var o=t.return;try{wm(t)}catch(l){jt(t,o,l)}}}catch(l){jt(t,t.return,l)}if(t===e){H=null;break}var a=t.sibling;if(a!==null){a.return=t.return,H=a;break}H=t.return}}var k2=Math.ceil,kh=Si.ReactCurrentDispatcher,py=Si.ReactCurrentOwner,pn=Si.ReactCurrentBatchConfig,mt=0,oe=null,qt=null,fe=0,Ye=0,Qr=As(0),Zt=0,Ol=null,fr=0,Td=0,my=0,nl=null,je=null,gy=0,Io=1/0,ri=null,Ph=!1,Em=null,rs=null,ec=!1,Yi=null,Ch=0,il=0,Sm=null,jc=-1,Bc=0;function Ne(){return mt&6?zt():jc!==-1?jc:jc=zt()}function os(e){return e.mode&1?mt&2&&fe!==0?fe&-fe:h2.transition!==null?(Bc===0&&(Bc=pS()),Bc):(e=Tt,e!==0||(e=window.event,e=e===void 0?16:TS(e.type)),e):1}function kn(e,t,n,i){if(50<il)throw il=0,Sm=null,Error(U(185));ou(e,n,i),(!(mt&2)||e!==oe)&&(e===oe&&(!(mt&2)&&(Td|=n),Zt===4&&$i(e,fe)),qe(e,i),n===1&&mt===0&&!(t.mode&1)&&(Io=zt()+500,yd&&ks()))}function qe(e,t){var n=e.callbackNode;hD(e,t);var i=fh(e,e===oe?fe:0);if(i===0)n!==null&&S0(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(n!=null&&S0(n),t===1)e.tag===0?c2(gw.bind(null,e)):BS(gw.bind(null,e)),o2(function(){!(mt&6)&&ks()}),n=null;else{switch(mS(i)){case 1:n=zg;break;case 4:n=dS;break;case 16:n=dh;break;case 536870912:n=fS;break;default:n=dh}n=Fb(n,Rb.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Rb(e,t){if(jc=-1,Bc=0,mt&6)throw Error(U(327));var n=e.callbackNode;if(lo()&&e.callbackNode!==n)return null;var i=fh(e,e===oe?fe:0);if(i===0)return null;if(i&30||i&e.expiredLanes||t)t=Rh(e,i);else{t=i;var s=mt;mt|=2;var r=Mb();(oe!==e||fe!==t)&&(ri=null,Io=zt()+500,sr(e,t));do try{R2();break}catch(a){Db(e,a)}while(!0);ey(),kh.current=r,mt=s,qt!==null?t=0:(oe=null,fe=0,t=Zt)}if(t!==0){if(t===2&&(s=Xp(e),s!==0&&(i=s,t=bm(e,s))),t===1)throw n=Ol,sr(e,0),$i(e,i),qe(e,zt()),n;if(t===6)$i(e,i);else{if(s=e.current.alternate,!(i&30)&&!P2(s)&&(t=Rh(e,i),t===2&&(r=Xp(e),r!==0&&(i=r,t=bm(e,r))),t===1))throw n=Ol,sr(e,0),$i(e,i),qe(e,zt()),n;switch(e.finishedWork=s,e.finishedLanes=i,t){case 0:case 1:throw Error(U(345));case 2:$s(e,je,ri);break;case 3:if($i(e,i),(i&130023424)===i&&(t=gy+500-zt(),10<t)){if(fh(e,0)!==0)break;if(s=e.suspendedLanes,(s&i)!==i){Ne(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=rm($s.bind(null,e,je,ri),t);break}$s(e,je,ri);break;case 4:if($i(e,i),(i&4194240)===i)break;for(t=e.eventTimes,s=-1;0<i;){var o=31-An(i);r=1<<o,o=t[o],o>s&&(s=o),i&=~r}if(i=s,i=zt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*k2(i/1960))-i,10<i){e.timeoutHandle=rm($s.bind(null,e,je,ri),i);break}$s(e,je,ri);break;case 5:$s(e,je,ri);break;default:throw Error(U(329))}}}return qe(e,zt()),e.callbackNode===n?Rb.bind(null,e):null}function bm(e,t){var n=nl;return e.current.memoizedState.isDehydrated&&(sr(e,t).flags|=256),e=Rh(e,t),e!==2&&(t=je,je=n,t!==null&&Im(t)),e}function Im(e){je===null?je=e:je.push.apply(je,e)}function P2(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var s=n[i],r=s.getSnapshot;s=s.value;try{if(!Pn(r(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function $i(e,t){for(t&=~my,t&=~Td,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-An(t),i=1<<n;e[n]=-1,t&=~i}}function gw(e){if(mt&6)throw Error(U(327));lo();var t=fh(e,0);if(!(t&1))return qe(e,zt()),null;var n=Rh(e,t);if(e.tag!==0&&n===2){var i=Xp(e);i!==0&&(t=i,n=bm(e,i))}if(n===1)throw n=Ol,sr(e,0),$i(e,t),qe(e,zt()),n;if(n===6)throw Error(U(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,$s(e,je,ri),qe(e,zt()),null}function yy(e,t){var n=mt;mt|=1;try{return e(t)}finally{mt=n,mt===0&&(Io=zt()+500,yd&&ks())}}function pr(e){Yi!==null&&Yi.tag===0&&!(mt&6)&&lo();var t=mt;mt|=1;var n=pn.transition,i=Tt;try{if(pn.transition=null,Tt=1,e)return e()}finally{Tt=i,pn.transition=n,mt=t,!(mt&6)&&ks()}}function _y(){Ye=Qr.current,Pt(Qr)}function sr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,r2(n)),qt!==null)for(n=qt.return;n!==null;){var i=n;switch(Jg(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&_h();break;case 3:So(),Pt(We),Pt(Ie),ay();break;case 5:oy(i);break;case 4:So();break;case 13:Pt(Dt);break;case 19:Pt(Dt);break;case 10:ny(i.type._context);break;case 22:case 23:_y()}n=n.return}if(oe=e,qt=e=as(e.current,null),fe=Ye=t,Zt=0,Ol=null,my=Td=fr=0,je=nl=null,Qs!==null){for(t=0;t<Qs.length;t++)if(n=Qs[t],i=n.interleaved,i!==null){n.interleaved=null;var s=i.next,r=n.pending;if(r!==null){var o=r.next;r.next=s,i.next=o}n.pending=i}Qs=null}return e}function Db(e,t){do{var n=qt;try{if(ey(),Vc.current=Ah,Ih){for(var i=Nt.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Ih=!1}if(dr=0,se=Xt=Nt=null,tl=!1,Dl=0,py.current=null,n===null||n.return===null){Zt=1,Ol=t,qt=null;break}t:{var r=e,o=n.return,a=n,l=t;if(t=fe,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var m=iw(o);if(m!==null){m.flags&=-257,sw(m,o,a,r,t),m.mode&1&&nw(r,u,t),t=m,l=u;var y=t.updateQueue;if(y===null){var _=new Set;_.add(l),t.updateQueue=_}else y.add(l);break t}else{if(!(t&1)){nw(r,u,t),vy();break t}l=Error(U(426))}}else if(Ct&&a.mode&1){var E=iw(o);if(E!==null){!(E.flags&65536)&&(E.flags|=256),sw(E,o,a,r,t),Zg(bo(l,a));break t}}r=l=bo(l,a),Zt!==4&&(Zt=2),nl===null?nl=[r]:nl.push(r),r=o;do{switch(r.tag){case 3:r.flags|=65536,t&=-t,r.lanes|=t;var v=mb(r,l,t);Q0(r,v);break t;case 1:a=l;var T=r.type,b=r.stateNode;if(!(r.flags&128)&&(typeof T.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(rs===null||!rs.has(b)))){r.flags|=65536,t&=-t,r.lanes|=t;var R=gb(r,a,t);Q0(r,R);break t}}r=r.return}while(r!==null)}Ob(n)}catch(D){t=D,qt===n&&n!==null&&(qt=n=n.return);continue}break}while(!0)}function Mb(){var e=kh.current;return kh.current=Ah,e===null?Ah:e}function vy(){(Zt===0||Zt===3||Zt===2)&&(Zt=4),oe===null||!(fr&268435455)&&!(Td&268435455)||$i(oe,fe)}function Rh(e,t){var n=mt;mt|=2;var i=Mb();(oe!==e||fe!==t)&&(ri=null,sr(e,t));do try{C2();break}catch(s){Db(e,s)}while(!0);if(ey(),mt=n,kh.current=i,qt!==null)throw Error(U(261));return oe=null,fe=0,Zt}function C2(){for(;qt!==null;)Nb(qt)}function R2(){for(;qt!==null&&!nD();)Nb(qt)}function Nb(e){var t=Lb(e.alternate,e,Ye);e.memoizedProps=e.pendingProps,t===null?Ob(e):qt=t,py.current=null}function Ob(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=S2(n,t),n!==null){n.flags&=32767,qt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Zt=6,qt=null;return}}else if(n=E2(n,t,Ye),n!==null){qt=n;return}if(t=t.sibling,t!==null){qt=t;return}qt=t=e}while(t!==null);Zt===0&&(Zt=5)}function $s(e,t,n){var i=Tt,s=pn.transition;try{pn.transition=null,Tt=1,D2(e,t,n,i)}finally{pn.transition=s,Tt=i}return null}function D2(e,t,n,i){do lo();while(Yi!==null);if(mt&6)throw Error(U(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(U(177));e.callbackNode=null,e.callbackPriority=0;var r=n.lanes|n.childLanes;if(dD(e,r),e===oe&&(qt=oe=null,fe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ec||(ec=!0,Fb(dh,function(){return lo(),null})),r=(n.flags&15990)!==0,n.subtreeFlags&15990||r){r=pn.transition,pn.transition=null;var o=Tt;Tt=1;var a=mt;mt|=4,py.current=null,I2(e,n),Pb(n,e),JD(im),ph=!!nm,im=nm=null,e.current=n,A2(n),iD(),mt=a,Tt=o,pn.transition=r}else e.current=n;if(ec&&(ec=!1,Yi=e,Ch=s),r=e.pendingLanes,r===0&&(rs=null),oD(n.stateNode),qe(e,zt()),t!==null)for(i=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],i(s.value,{componentStack:s.stack,digest:s.digest});if(Ph)throw Ph=!1,e=Em,Em=null,e;return Ch&1&&e.tag!==0&&lo(),r=e.pendingLanes,r&1?e===Sm?il++:(il=0,Sm=e):il=0,ks(),null}function lo(){if(Yi!==null){var e=mS(Ch),t=pn.transition,n=Tt;try{if(pn.transition=null,Tt=16>e?16:e,Yi===null)var i=!1;else{if(e=Yi,Yi=null,Ch=0,mt&6)throw Error(U(331));var s=mt;for(mt|=4,H=e.current;H!==null;){var r=H,o=r.child;if(H.flags&16){var a=r.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(H=u;H!==null;){var c=H;switch(c.tag){case 0:case 11:case 15:el(8,c,r)}var d=c.child;if(d!==null)d.return=c,H=d;else for(;H!==null;){c=H;var f=c.sibling,m=c.return;if(Ib(c),c===u){H=null;break}if(f!==null){f.return=m,H=f;break}H=m}}}var y=r.alternate;if(y!==null){var _=y.child;if(_!==null){y.child=null;do{var E=_.sibling;_.sibling=null,_=E}while(_!==null)}}H=r}}if(r.subtreeFlags&2064&&o!==null)o.return=r,H=o;else t:for(;H!==null;){if(r=H,r.flags&2048)switch(r.tag){case 0:case 11:case 15:el(9,r,r.return)}var v=r.sibling;if(v!==null){v.return=r.return,H=v;break t}H=r.return}}var T=e.current;for(H=T;H!==null;){o=H;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,H=b;else t:for(o=T;H!==null;){if(a=H,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:wd(9,a)}}catch(D){jt(a,a.return,D)}if(a===o){H=null;break t}var R=a.sibling;if(R!==null){R.return=a.return,H=R;break t}H=a.return}}if(mt=s,ks(),$n&&typeof $n.onPostCommitFiberRoot=="function")try{$n.onPostCommitFiberRoot(dd,e)}catch{}i=!0}return i}finally{Tt=n,pn.transition=t}}return!1}function yw(e,t,n){t=bo(n,t),t=mb(e,t,1),e=ss(e,t,1),t=Ne(),e!==null&&(ou(e,1,t),qe(e,t))}function jt(e,t,n){if(e.tag===3)yw(e,e,n);else for(;t!==null;){if(t.tag===3){yw(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(rs===null||!rs.has(i))){e=bo(n,e),e=gb(t,e,1),t=ss(t,e,1),e=Ne(),t!==null&&(ou(t,1,e),qe(t,e));break}}t=t.return}}function M2(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),t=Ne(),e.pingedLanes|=e.suspendedLanes&n,oe===e&&(fe&n)===n&&(Zt===4||Zt===3&&(fe&130023424)===fe&&500>zt()-gy?sr(e,0):my|=n),qe(e,t)}function Vb(e,t){t===0&&(e.mode&1?(t=Hu,Hu<<=1,!(Hu&130023424)&&(Hu=4194304)):t=1);var n=Ne();e=mi(e,t),e!==null&&(ou(e,t,n),qe(e,n))}function N2(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Vb(e,n)}function O2(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(U(314))}i!==null&&i.delete(t),Vb(e,n)}var Lb;Lb=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||We.current)ze=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return ze=!1,x2(e,t,n);ze=!!(e.flags&131072)}else ze=!1,Ct&&t.flags&1048576&&US(t,Th,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Fc(e,t),e=t.pendingProps;var s=To(t,Ie.current);ao(t,n),s=uy(null,t,i,e,s,n);var r=cy();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,He(i)?(r=!0,vh(t)):r=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,sy(t),s.updater=vd,t.stateNode=s,s._reactInternals=t,dm(t,i,e,n),t=mm(null,t,i,!0,r,n)):(t.tag=0,Ct&&r&&Xg(t),De(null,t,s,n),t=t.child),t;case 16:i=t.elementType;t:{switch(Fc(e,t),e=t.pendingProps,s=i._init,i=s(i._payload),t.type=i,s=t.tag=L2(i),e=xn(i,e),s){case 0:t=pm(null,t,i,e,n);break t;case 1:t=aw(null,t,i,e,n);break t;case 11:t=rw(null,t,i,e,n);break t;case 14:t=ow(null,t,i,xn(i.type,e),n);break t}throw Error(U(306,i,""))}return t;case 0:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:xn(i,s),pm(e,t,i,s,n);case 1:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:xn(i,s),aw(e,t,i,s,n);case 3:t:{if(wb(t),e===null)throw Error(U(387));i=t.pendingProps,r=t.memoizedState,s=r.element,KS(e,t),Sh(t,i,null,n);var o=t.memoizedState;if(i=o.element,r.isDehydrated)if(r={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=r,t.memoizedState=r,t.flags&256){s=bo(Error(U(423)),t),t=lw(e,t,i,n,s);break t}else if(i!==s){s=bo(Error(U(424)),t),t=lw(e,t,i,n,s);break t}else for(Qe=is(t.stateNode.containerInfo.firstChild),Ze=t,Ct=!0,Sn=null,n=HS(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(xo(),i===s){t=gi(e,t,n);break t}De(e,t,i,n)}t=t.child}return t;case 5:return GS(t),e===null&&um(t),i=t.type,s=t.pendingProps,r=e!==null?e.memoizedProps:null,o=s.children,sm(i,s)?o=null:r!==null&&sm(i,r)&&(t.flags|=32),vb(e,t),De(e,t,o,n),t.child;case 6:return e===null&&um(t),null;case 13:return Tb(e,t,n);case 4:return ry(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Eo(t,null,i,n):De(e,t,i,n),t.child;case 11:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:xn(i,s),rw(e,t,i,s,n);case 7:return De(e,t,t.pendingProps,n),t.child;case 8:return De(e,t,t.pendingProps.children,n),t.child;case 12:return De(e,t,t.pendingProps.children,n),t.child;case 10:t:{if(i=t.type._context,s=t.pendingProps,r=t.memoizedProps,o=s.value,St(xh,i._currentValue),i._currentValue=o,r!==null)if(Pn(r.value,o)){if(r.children===s.children&&!We.current){t=gi(e,t,n);break t}}else for(r=t.child,r!==null&&(r.return=t);r!==null;){var a=r.dependencies;if(a!==null){o=r.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(r.tag===1){l=di(-1,n&-n),l.tag=2;var u=r.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}r.lanes|=n,l=r.alternate,l!==null&&(l.lanes|=n),cm(r.return,n,t),a.lanes|=n;break}l=l.next}}else if(r.tag===10)o=r.type===t.type?null:r.child;else if(r.tag===18){if(o=r.return,o===null)throw Error(U(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),cm(o,n,t),o=r.sibling}else o=r.child;if(o!==null)o.return=r;else for(o=r;o!==null;){if(o===t){o=null;break}if(r=o.sibling,r!==null){r.return=o.return,o=r;break}o=o.return}r=o}De(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,i=t.pendingProps.children,ao(t,n),s=gn(s),i=i(s),t.flags|=1,De(e,t,i,n),t.child;case 14:return i=t.type,s=xn(i,t.pendingProps),s=xn(i.type,s),ow(e,t,i,s,n);case 15:return yb(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:xn(i,s),Fc(e,t),t.tag=1,He(i)?(e=!0,vh(t)):e=!1,ao(t,n),pb(t,i,s),dm(t,i,s,n),mm(null,t,i,!0,e,n);case 19:return xb(e,t,n);case 22:return _b(e,t,n)}throw Error(U(156,t.tag))};function Fb(e,t){return hS(e,t)}function V2(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hn(e,t,n,i){return new V2(e,t,n,i)}function wy(e){return e=e.prototype,!(!e||!e.isReactComponent)}function L2(e){if(typeof e=="function")return wy(e)?1:0;if(e!=null){if(e=e.$$typeof,e===jg)return 11;if(e===Bg)return 14}return 2}function as(e,t){var n=e.alternate;return n===null?(n=hn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Uc(e,t,n,i,s,r){var o=2;if(i=e,typeof e=="function")wy(e)&&(o=1);else if(typeof e=="string")o=5;else t:switch(e){case Br:return rr(n.children,s,r,t);case Fg:o=8,s|=8;break;case Vp:return e=hn(12,n,t,s|2),e.elementType=Vp,e.lanes=r,e;case Lp:return e=hn(13,n,t,s),e.elementType=Lp,e.lanes=r,e;case Fp:return e=hn(19,n,t,s),e.elementType=Fp,e.lanes=r,e;case G1:return xd(n,s,r,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case q1:o=10;break t;case K1:o=9;break t;case jg:o=11;break t;case Bg:o=14;break t;case Bi:o=16,i=null;break t}throw Error(U(130,e==null?e:typeof e,""))}return t=hn(o,n,t,s),t.elementType=e,t.type=i,t.lanes=r,t}function rr(e,t,n,i){return e=hn(7,e,i,t),e.lanes=n,e}function xd(e,t,n,i){return e=hn(22,e,i,t),e.elementType=G1,e.lanes=n,e.stateNode={isHidden:!1},e}function qf(e,t,n){return e=hn(6,e,null,t),e.lanes=n,e}function Kf(e,t,n){return t=hn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function F2(e,t,n,i,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Af(0),this.expirationTimes=Af(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Af(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Ty(e,t,n,i,s,r,o,a,l){return e=new F2(e,t,n,a,l),t===1?(t=1,r===!0&&(t|=8)):t=0,r=hn(3,null,null,t),e.current=r,r.stateNode=e,r.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},sy(r),e}function j2(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:jr,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}function jb(e){if(!e)return gs;e=e._reactInternals;t:{if(Er(e)!==e||e.tag!==1)throw Error(U(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break t;case 1:if(He(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break t}}t=t.return}while(t!==null);throw Error(U(171))}if(e.tag===1){var n=e.type;if(He(n))return jS(e,n,t)}return t}function Bb(e,t,n,i,s,r,o,a,l){return e=Ty(n,i,!0,e,s,r,o,a,l),e.context=jb(null),n=e.current,i=Ne(),s=os(n),r=di(i,s),r.callback=t??null,ss(n,r,s),e.current.lanes=s,ou(e,s,i),qe(e,i),e}function Ed(e,t,n,i){var s=t.current,r=Ne(),o=os(s);return n=jb(n),t.context===null?t.context=n:t.pendingContext=n,t=di(r,o),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=ss(s,t,o),e!==null&&(kn(e,s,o,r),Oc(e,s,o)),o}function Dh(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function _w(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function xy(e,t){_w(e,t),(e=e.alternate)&&_w(e,t)}function B2(){return null}var Ub=typeof reportError=="function"?reportError:function(e){console.error(e)};function Ey(e){this._internalRoot=e}Sd.prototype.render=Ey.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(U(409));Ed(e,t,null,null)};Sd.prototype.unmount=Ey.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;pr(function(){Ed(null,e,null,null)}),t[pi]=null}};function Sd(e){this._internalRoot=e}Sd.prototype.unstable_scheduleHydration=function(e){if(e){var t=_S();e={blockedOn:null,target:e,priority:t};for(var n=0;n<zi.length&&t!==0&&t<zi[n].priority;n++);zi.splice(n,0,e),n===0&&wS(e)}};function Sy(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function bd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function vw(){}function U2(e,t,n,i,s){if(s){if(typeof i=="function"){var r=i;i=function(){var u=Dh(o);r.call(u)}}var o=Bb(t,i,e,0,null,!1,!1,"",vw);return e._reactRootContainer=o,e[pi]=o.current,Al(e.nodeType===8?e.parentNode:e),pr(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof i=="function"){var a=i;i=function(){var u=Dh(l);a.call(u)}}var l=Ty(e,0,!1,null,null,!1,!1,"",vw);return e._reactRootContainer=l,e[pi]=l.current,Al(e.nodeType===8?e.parentNode:e),pr(function(){Ed(t,l,n,i)}),l}function Id(e,t,n,i,s){var r=n._reactRootContainer;if(r){var o=r;if(typeof s=="function"){var a=s;s=function(){var l=Dh(o);a.call(l)}}Ed(t,o,e,s)}else o=U2(n,t,e,s,i);return Dh(o)}gS=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Fa(t.pendingLanes);n!==0&&($g(t,n|1),qe(t,zt()),!(mt&6)&&(Io=zt()+500,ks()))}break;case 13:pr(function(){var i=mi(e,1);if(i!==null){var s=Ne();kn(i,e,1,s)}}),xy(e,1)}};Wg=function(e){if(e.tag===13){var t=mi(e,134217728);if(t!==null){var n=Ne();kn(t,e,134217728,n)}xy(e,134217728)}};yS=function(e){if(e.tag===13){var t=os(e),n=mi(e,t);if(n!==null){var i=Ne();kn(n,e,t,i)}xy(e,t)}};_S=function(){return Tt};vS=function(e,t){var n=Tt;try{return Tt=e,t()}finally{Tt=n}};Gp=function(e,t,n){switch(t){case"input":if(Up(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var s=gd(i);if(!s)throw Error(U(90));Q1(i),Up(i,s)}}}break;case"textarea":J1(e,n);break;case"select":t=n.value,t!=null&&io(e,!!n.multiple,t,!1)}};rS=yy;oS=pr;var z2={usingClientEntryPoint:!1,Events:[lu,Wr,gd,iS,sS,yy]},Ia={findFiberByHostInstance:Ys,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$2={bundleType:Ia.bundleType,version:Ia.version,rendererPackageName:Ia.rendererPackageName,rendererConfig:Ia.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Si.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=uS(e),e===null?null:e.stateNode},findFiberByHostInstance:Ia.findFiberByHostInstance||B2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nc.isDisabled&&nc.supportsFiber)try{dd=nc.inject($2),$n=nc}catch{}}nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=z2;nn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Sy(t))throw Error(U(200));return j2(e,t,null,n)};nn.createRoot=function(e,t){if(!Sy(e))throw Error(U(299));var n=!1,i="",s=Ub;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Ty(e,1,!1,null,null,n,!1,i,s),e[pi]=t.current,Al(e.nodeType===8?e.parentNode:e),new Ey(t)};nn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(U(188)):(e=Object.keys(e).join(","),Error(U(268,e)));return e=uS(t),e=e===null?null:e.stateNode,e};nn.flushSync=function(e){return pr(e)};nn.hydrate=function(e,t,n){if(!bd(t))throw Error(U(200));return Id(null,e,t,!0,n)};nn.hydrateRoot=function(e,t,n){if(!Sy(e))throw Error(U(405));var i=n!=null&&n.hydratedSources||null,s=!1,r="",o=Ub;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=Bb(t,null,e,1,n??null,s,!1,r,o),e[pi]=t.current,Al(e),i)for(e=0;e<i.length;e++)n=i[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Sd(t)};nn.render=function(e,t,n){if(!bd(t))throw Error(U(200));return Id(null,e,t,!1,n)};nn.unmountComponentAtNode=function(e){if(!bd(e))throw Error(U(40));return e._reactRootContainer?(pr(function(){Id(null,null,e,!1,function(){e._reactRootContainer=null,e[pi]=null})}),!0):!1};nn.unstable_batchedUpdates=yy;nn.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!bd(n))throw Error(U(200));if(e==null||e._reactInternals===void 0)throw Error(U(38));return Id(e,t,n,!1,i)};nn.version="18.3.1-next-f1338f8080-20240426";function zb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(zb)}catch(e){console.error(e)}}zb(),z1.exports=nn;var W2=z1.exports,$b,ww=W2;$b=ww.createRoot,ww.hydrateRoot;const H2=()=>{};var Tw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wb=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let s=e.charCodeAt(i);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=s&63|128):(s&64512)===55296&&i+1<e.length&&(e.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(e.charCodeAt(++i)&1023),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=s&63|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=s&63|128)}return t},q2=function(e){const t=[];let n=0,i=0;for(;n<e.length;){const s=e[n++];if(s<128)t[i++]=String.fromCharCode(s);else if(s>191&&s<224){const r=e[n++];t[i++]=String.fromCharCode((s&31)<<6|r&63)}else if(s>239&&s<365){const r=e[n++],o=e[n++],a=e[n++],l=((s&7)<<18|(r&63)<<12|(o&63)<<6|a&63)-65536;t[i++]=String.fromCharCode(55296+(l>>10)),t[i++]=String.fromCharCode(56320+(l&1023))}else{const r=e[n++],o=e[n++];t[i++]=String.fromCharCode((s&15)<<12|(r&63)<<6|o&63)}}return t.join("")},Hb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<e.length;s+=3){const r=e[s],o=s+1<e.length,a=o?e[s+1]:0,l=s+2<e.length,u=l?e[s+2]:0,c=r>>2,d=(r&3)<<4|a>>4;let f=(a&15)<<2|u>>6,m=u&63;l||(m=64,o||(f=64)),i.push(n[c],n[d],n[f],n[m])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Wb(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):q2(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<e.length;){const r=n[e.charAt(s++)],a=s<e.length?n[e.charAt(s)]:0;++s;const u=s<e.length?n[e.charAt(s)]:64;++s;const d=s<e.length?n[e.charAt(s)]:64;if(++s,r==null||a==null||u==null||d==null)throw new K2;const f=r<<2|a>>4;if(i.push(f),u!==64){const m=a<<4&240|u>>2;if(i.push(m),d!==64){const y=u<<6&192|d;i.push(y)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class K2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const G2=function(e){const t=Wb(e);return Hb.encodeByteArray(t,!0)},Mh=function(e){return G2(e).replace(/\./g,"")},qb=function(e){try{return Hb.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q2=()=>Y2().__FIREBASE_DEFAULTS__,X2=()=>{if(typeof process>"u"||typeof Tw>"u")return;const e=Tw.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},J2=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&qb(e[1]);return t&&JSON.parse(t)},Ad=()=>{try{return H2()||Q2()||X2()||J2()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},Kb=e=>{var t,n;return(n=(t=Ad())==null?void 0:t.emulatorHosts)==null?void 0:n[e]},Z2=e=>{const t=Kb(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),i]:[t.substring(0,n),i]},Gb=()=>{var e;return(e=Ad())==null?void 0:e.config},Yb=e=>{var t;return(t=Ad())==null?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tM{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ho(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Qb(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eM(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=t||"demo-project",s=e.iat||0,r=e.sub||e.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}},...e};return[Mh(JSON.stringify(n)),Mh(JSON.stringify(o)),""].join(".")}const sl={};function nM(){const e={prod:[],emulator:[]};for(const t of Object.keys(sl))sl[t]?e.emulator.push(t):e.prod.push(t);return e}function iM(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let xw=!1;function Xb(e,t){if(typeof window>"u"||typeof document>"u"||!Ho(window.location.host)||sl[e]===t||sl[e]||xw)return;sl[e]=t;function n(f){return`__firebase__banner__${f}`}const i="__firebase__banner",r=nM().prod.length>0;function o(){const f=document.getElementById(i);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,m){f.setAttribute("width","24"),f.setAttribute("id",m),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function u(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{xw=!0,o()},f}function c(f,m){f.setAttribute("id",m),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function d(){const f=iM(i),m=n("text"),y=document.getElementById(m)||document.createElement("span"),_=n("learnmore"),E=document.getElementById(_)||document.createElement("a"),v=n("preprendIcon"),T=document.getElementById(v)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const b=f.element;a(b),c(E,_);const R=u();l(T,v),b.append(T,y,E,R),document.body.appendChild(b)}r?(y.innerText="Preview backend disconnected.",T.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(T.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,y.innerText="Preview backend running in this workspace."),y.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function sM(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ae())}function rM(){var t;const e=(t=Ad())==null?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function oM(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function aM(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function lM(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function uM(){const e=Ae();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function cM(){return!rM()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function hM(){try{return typeof indexedDB=="object"}catch{return!1}}function dM(){return new Promise((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var r;t(((r=s.error)==null?void 0:r.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fM="FirebaseError";class bi extends Error{constructor(t,n,i){super(n),this.code=t,this.customData=i,this.name=fM,Object.setPrototypeOf(this,bi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cu.prototype.create)}}class cu{constructor(t,n,i){this.service=t,this.serviceName=n,this.errors=i}create(t,...n){const i=n[0]||{},s=`${this.service}/${t}`,r=this.errors[t],o=r?pM(r,i):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new bi(s,a,i)}}function pM(e,t){return e.replace(mM,(n,i)=>{const s=t[i];return s!=null?String(s):`<${i}?>`})}const mM=/\{\$([^}]+)}/g;function gM(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function mr(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const s of n){if(!i.includes(s))return!1;const r=e[s],o=t[s];if(Ew(r)&&Ew(o)){if(!mr(r,o))return!1}else if(r!==o)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function Ew(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hu(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach(s=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function yM(e,t){const n=new _M(e,t);return n.subscribe.bind(n)}class _M{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,i){let s;if(t===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");vM(t,["next","error","complete"])?s=t:s={next:t,error:n,complete:i},s.next===void 0&&(s.next=Gf),s.error===void 0&&(s.error=Gf),s.complete===void 0&&(s.complete=Gf);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),r}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function vM(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function Gf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ke(e){return e&&e._delegate?e._delegate:e}class gr{constructor(t,n,i){this.name=t,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ws="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wM{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const i=new tM;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(t==null?void 0:t.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(xM(t))try{this.getOrInitializeService({instanceIdentifier:Ws})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const r=this.getOrInitializeService({instanceIdentifier:s});i.resolve(r)}catch{}}}}clearInstance(t=Ws){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Ws){return this.instances.has(t)}getOptions(t=Ws){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[r,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);i===a&&o.resolve(s)}return s}onInit(t,n){const i=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(i)??new Set;s.add(t),this.onInitCallbacks.set(i,s);const r=this.instances.get(i);return r&&t(r,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:TM(t),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=Ws){return this.component?this.component.multipleInstances?t:Ws:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function TM(e){return e===Ws?void 0:e}function xM(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EM{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new wM(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ut;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(ut||(ut={}));const SM={debug:ut.DEBUG,verbose:ut.VERBOSE,info:ut.INFO,warn:ut.WARN,error:ut.ERROR,silent:ut.SILENT},bM=ut.INFO,IM={[ut.DEBUG]:"log",[ut.VERBOSE]:"log",[ut.INFO]:"info",[ut.WARN]:"warn",[ut.ERROR]:"error"},AM=(e,t,...n)=>{if(t<e.logLevel)return;const i=new Date().toISOString(),s=IM[t];if(s)console[s](`[${i}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class by{constructor(t){this.name=t,this._logLevel=bM,this._logHandler=AM,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ut))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?SM[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ut.DEBUG,...t),this._logHandler(this,ut.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ut.VERBOSE,...t),this._logHandler(this,ut.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ut.INFO,...t),this._logHandler(this,ut.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ut.WARN,...t),this._logHandler(this,ut.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ut.ERROR,...t),this._logHandler(this,ut.ERROR,...t)}}const kM=(e,t)=>t.some(n=>e instanceof n);let Sw,bw;function PM(){return Sw||(Sw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function CM(){return bw||(bw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Jb=new WeakMap,Am=new WeakMap,Zb=new WeakMap,Yf=new WeakMap,Iy=new WeakMap;function RM(e){const t=new Promise((n,i)=>{const s=()=>{e.removeEventListener("success",r),e.removeEventListener("error",o)},r=()=>{n(ls(e.result)),s()},o=()=>{i(e.error),s()};e.addEventListener("success",r),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&Jb.set(n,e)}).catch(()=>{}),Iy.set(t,e),t}function DM(e){if(Am.has(e))return;const t=new Promise((n,i)=>{const s=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",o),e.removeEventListener("abort",o)},r=()=>{n(),s()},o=()=>{i(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",r),e.addEventListener("error",o),e.addEventListener("abort",o)});Am.set(e,t)}let km={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Am.get(e);if(t==="objectStoreNames")return e.objectStoreNames||Zb.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ls(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function MM(e){km=e(km)}function NM(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const i=e.call(Qf(this),t,...n);return Zb.set(i,t.sort?t.sort():[t]),ls(i)}:CM().includes(e)?function(...t){return e.apply(Qf(this),t),ls(Jb.get(this))}:function(...t){return ls(e.apply(Qf(this),t))}}function OM(e){return typeof e=="function"?NM(e):(e instanceof IDBTransaction&&DM(e),kM(e,PM())?new Proxy(e,km):e)}function ls(e){if(e instanceof IDBRequest)return RM(e);if(Yf.has(e))return Yf.get(e);const t=OM(e);return t!==e&&(Yf.set(e,t),Iy.set(t,e)),t}const Qf=e=>Iy.get(e);function VM(e,t,{blocked:n,upgrade:i,blocking:s,terminated:r}={}){const o=indexedDB.open(e,t),a=ls(o);return i&&o.addEventListener("upgradeneeded",l=>{i(ls(o.result),l.oldVersion,l.newVersion,ls(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{r&&l.addEventListener("close",()=>r()),s&&l.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const LM=["get","getKey","getAll","getAllKeys","count"],FM=["put","add","delete","clear"],Xf=new Map;function Iw(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Xf.get(t))return Xf.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,s=FM.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||LM.includes(n)))return;const r=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let u=l.store;return i&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),s&&l.done]))[0]};return Xf.set(t,r),r}MM(e=>({...e,get:(t,n,i)=>Iw(t,n)||e.get(t,n,i),has:(t,n)=>!!Iw(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jM{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(BM(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function BM(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Pm="@firebase/app",Aw="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yi=new by("@firebase/app"),UM="@firebase/app-compat",zM="@firebase/analytics-compat",$M="@firebase/analytics",WM="@firebase/app-check-compat",HM="@firebase/app-check",qM="@firebase/auth",KM="@firebase/auth-compat",GM="@firebase/database",YM="@firebase/data-connect",QM="@firebase/database-compat",XM="@firebase/functions",JM="@firebase/functions-compat",ZM="@firebase/installations",tN="@firebase/installations-compat",eN="@firebase/messaging",nN="@firebase/messaging-compat",iN="@firebase/performance",sN="@firebase/performance-compat",rN="@firebase/remote-config",oN="@firebase/remote-config-compat",aN="@firebase/storage",lN="@firebase/storage-compat",uN="@firebase/firestore",cN="@firebase/ai",hN="@firebase/firestore-compat",dN="firebase",fN="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cm="[DEFAULT]",pN={[Pm]:"fire-core",[UM]:"fire-core-compat",[$M]:"fire-analytics",[zM]:"fire-analytics-compat",[HM]:"fire-app-check",[WM]:"fire-app-check-compat",[qM]:"fire-auth",[KM]:"fire-auth-compat",[GM]:"fire-rtdb",[YM]:"fire-data-connect",[QM]:"fire-rtdb-compat",[XM]:"fire-fn",[JM]:"fire-fn-compat",[ZM]:"fire-iid",[tN]:"fire-iid-compat",[eN]:"fire-fcm",[nN]:"fire-fcm-compat",[iN]:"fire-perf",[sN]:"fire-perf-compat",[rN]:"fire-rc",[oN]:"fire-rc-compat",[aN]:"fire-gcs",[lN]:"fire-gcs-compat",[uN]:"fire-fst",[hN]:"fire-fst-compat",[cN]:"fire-vertex","fire-js":"fire-js",[dN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nh=new Map,mN=new Map,Rm=new Map;function kw(e,t){try{e.container.addComponent(t)}catch(n){yi.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Ao(e){const t=e.name;if(Rm.has(t))return yi.debug(`There were multiple attempts to register component ${t}.`),!1;Rm.set(t,e);for(const n of Nh.values())kw(n,e);for(const n of mN.values())kw(n,e);return!0}function Ay(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Un(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},us=new cu("app","Firebase",gN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(t,n,i){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new gr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw us.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qo=fN;function tI(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const i={name:Cm,automaticDataCollectionEnabled:!0,...t},s=i.name;if(typeof s!="string"||!s)throw us.create("bad-app-name",{appName:String(s)});if(n||(n=Gb()),!n)throw us.create("no-options");const r=Nh.get(s);if(r){if(mr(n,r.options)&&mr(i,r.config))return r;throw us.create("duplicate-app",{appName:s})}const o=new EM(s);for(const l of Rm.values())o.addComponent(l);const a=new yN(n,i,o);return Nh.set(s,a),a}function eI(e=Cm){const t=Nh.get(e);if(!t&&e===Cm&&Gb())return tI();if(!t)throw us.create("no-app",{appName:e});return t}function cs(e,t,n){let i=pN[e]??e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),r=t.match(/\s|\//);if(s||r){const o=[`Unable to register library "${i}" with version "${t}":`];s&&o.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&r&&o.push("and"),r&&o.push(`version name "${t}" contains illegal characters (whitespace or "/")`),yi.warn(o.join(" "));return}Ao(new gr(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _N="firebase-heartbeat-database",vN=1,Vl="firebase-heartbeat-store";let Jf=null;function nI(){return Jf||(Jf=VM(_N,vN,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Vl)}catch(n){console.warn(n)}}}}).catch(e=>{throw us.create("idb-open",{originalErrorMessage:e.message})})),Jf}async function wN(e){try{const n=(await nI()).transaction(Vl),i=await n.objectStore(Vl).get(iI(e));return await n.done,i}catch(t){if(t instanceof bi)yi.warn(t.message);else{const n=us.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});yi.warn(n.message)}}}async function Pw(e,t){try{const i=(await nI()).transaction(Vl,"readwrite");await i.objectStore(Vl).put(t,iI(e)),await i.done}catch(n){if(n instanceof bi)yi.warn(n.message);else{const i=us.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});yi.warn(i.message)}}}function iI(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TN=1024,xN=30;class EN{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new bN(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Cw();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:s}),this._heartbeatsCache.heartbeats.length>xN){const o=IN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){yi.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Cw(),{heartbeatsToSend:i,unsentEntries:s}=SN(this._heartbeatsCache.heartbeats),r=Mh(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(n){return yi.warn(n),""}}}function Cw(){return new Date().toISOString().substring(0,10)}function SN(e,t=TN){const n=[];let i=e.slice();for(const s of e){const r=n.find(o=>o.agent===s.agent);if(r){if(r.dates.push(s.date),Rw(n)>t){r.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Rw(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class bN{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return hM()?dM().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await wN(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return Pw(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return Pw(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function Rw(e){return Mh(JSON.stringify({version:2,heartbeats:e})).length}function IN(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let i=1;i<e.length;i++)e[i].date<n&&(n=e[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AN(e){Ao(new gr("platform-logger",t=>new jM(t),"PRIVATE")),Ao(new gr("heartbeat",t=>new EN(t),"PRIVATE")),cs(Pm,Aw,e),cs(Pm,Aw,"esm2020"),cs("fire-js","")}AN("");var kN="firebase",PN="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cs(kN,PN,"app");var Dw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hs,sI;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(S,w){function x(){}x.prototype=w.prototype,S.F=w.prototype,S.prototype=new x,S.prototype.constructor=S,S.D=function(k,A,C){for(var P=Array(arguments.length-2),nt=2;nt<arguments.length;nt++)P[nt-2]=arguments[nt];return w.prototype[A].apply(k,P)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(S,w,x){x||(x=0);const k=Array(16);if(typeof w=="string")for(var A=0;A<16;++A)k[A]=w.charCodeAt(x++)|w.charCodeAt(x++)<<8|w.charCodeAt(x++)<<16|w.charCodeAt(x++)<<24;else for(A=0;A<16;++A)k[A]=w[x++]|w[x++]<<8|w[x++]<<16|w[x++]<<24;w=S.g[0],x=S.g[1],A=S.g[2];let C=S.g[3],P;P=w+(C^x&(A^C))+k[0]+3614090360&4294967295,w=x+(P<<7&4294967295|P>>>25),P=C+(A^w&(x^A))+k[1]+3905402710&4294967295,C=w+(P<<12&4294967295|P>>>20),P=A+(x^C&(w^x))+k[2]+606105819&4294967295,A=C+(P<<17&4294967295|P>>>15),P=x+(w^A&(C^w))+k[3]+3250441966&4294967295,x=A+(P<<22&4294967295|P>>>10),P=w+(C^x&(A^C))+k[4]+4118548399&4294967295,w=x+(P<<7&4294967295|P>>>25),P=C+(A^w&(x^A))+k[5]+1200080426&4294967295,C=w+(P<<12&4294967295|P>>>20),P=A+(x^C&(w^x))+k[6]+2821735955&4294967295,A=C+(P<<17&4294967295|P>>>15),P=x+(w^A&(C^w))+k[7]+4249261313&4294967295,x=A+(P<<22&4294967295|P>>>10),P=w+(C^x&(A^C))+k[8]+1770035416&4294967295,w=x+(P<<7&4294967295|P>>>25),P=C+(A^w&(x^A))+k[9]+2336552879&4294967295,C=w+(P<<12&4294967295|P>>>20),P=A+(x^C&(w^x))+k[10]+4294925233&4294967295,A=C+(P<<17&4294967295|P>>>15),P=x+(w^A&(C^w))+k[11]+2304563134&4294967295,x=A+(P<<22&4294967295|P>>>10),P=w+(C^x&(A^C))+k[12]+1804603682&4294967295,w=x+(P<<7&4294967295|P>>>25),P=C+(A^w&(x^A))+k[13]+4254626195&4294967295,C=w+(P<<12&4294967295|P>>>20),P=A+(x^C&(w^x))+k[14]+2792965006&4294967295,A=C+(P<<17&4294967295|P>>>15),P=x+(w^A&(C^w))+k[15]+1236535329&4294967295,x=A+(P<<22&4294967295|P>>>10),P=w+(A^C&(x^A))+k[1]+4129170786&4294967295,w=x+(P<<5&4294967295|P>>>27),P=C+(x^A&(w^x))+k[6]+3225465664&4294967295,C=w+(P<<9&4294967295|P>>>23),P=A+(w^x&(C^w))+k[11]+643717713&4294967295,A=C+(P<<14&4294967295|P>>>18),P=x+(C^w&(A^C))+k[0]+3921069994&4294967295,x=A+(P<<20&4294967295|P>>>12),P=w+(A^C&(x^A))+k[5]+3593408605&4294967295,w=x+(P<<5&4294967295|P>>>27),P=C+(x^A&(w^x))+k[10]+38016083&4294967295,C=w+(P<<9&4294967295|P>>>23),P=A+(w^x&(C^w))+k[15]+3634488961&4294967295,A=C+(P<<14&4294967295|P>>>18),P=x+(C^w&(A^C))+k[4]+3889429448&4294967295,x=A+(P<<20&4294967295|P>>>12),P=w+(A^C&(x^A))+k[9]+568446438&4294967295,w=x+(P<<5&4294967295|P>>>27),P=C+(x^A&(w^x))+k[14]+3275163606&4294967295,C=w+(P<<9&4294967295|P>>>23),P=A+(w^x&(C^w))+k[3]+4107603335&4294967295,A=C+(P<<14&4294967295|P>>>18),P=x+(C^w&(A^C))+k[8]+1163531501&4294967295,x=A+(P<<20&4294967295|P>>>12),P=w+(A^C&(x^A))+k[13]+2850285829&4294967295,w=x+(P<<5&4294967295|P>>>27),P=C+(x^A&(w^x))+k[2]+4243563512&4294967295,C=w+(P<<9&4294967295|P>>>23),P=A+(w^x&(C^w))+k[7]+1735328473&4294967295,A=C+(P<<14&4294967295|P>>>18),P=x+(C^w&(A^C))+k[12]+2368359562&4294967295,x=A+(P<<20&4294967295|P>>>12),P=w+(x^A^C)+k[5]+4294588738&4294967295,w=x+(P<<4&4294967295|P>>>28),P=C+(w^x^A)+k[8]+2272392833&4294967295,C=w+(P<<11&4294967295|P>>>21),P=A+(C^w^x)+k[11]+1839030562&4294967295,A=C+(P<<16&4294967295|P>>>16),P=x+(A^C^w)+k[14]+4259657740&4294967295,x=A+(P<<23&4294967295|P>>>9),P=w+(x^A^C)+k[1]+2763975236&4294967295,w=x+(P<<4&4294967295|P>>>28),P=C+(w^x^A)+k[4]+1272893353&4294967295,C=w+(P<<11&4294967295|P>>>21),P=A+(C^w^x)+k[7]+4139469664&4294967295,A=C+(P<<16&4294967295|P>>>16),P=x+(A^C^w)+k[10]+3200236656&4294967295,x=A+(P<<23&4294967295|P>>>9),P=w+(x^A^C)+k[13]+681279174&4294967295,w=x+(P<<4&4294967295|P>>>28),P=C+(w^x^A)+k[0]+3936430074&4294967295,C=w+(P<<11&4294967295|P>>>21),P=A+(C^w^x)+k[3]+3572445317&4294967295,A=C+(P<<16&4294967295|P>>>16),P=x+(A^C^w)+k[6]+76029189&4294967295,x=A+(P<<23&4294967295|P>>>9),P=w+(x^A^C)+k[9]+3654602809&4294967295,w=x+(P<<4&4294967295|P>>>28),P=C+(w^x^A)+k[12]+3873151461&4294967295,C=w+(P<<11&4294967295|P>>>21),P=A+(C^w^x)+k[15]+530742520&4294967295,A=C+(P<<16&4294967295|P>>>16),P=x+(A^C^w)+k[2]+3299628645&4294967295,x=A+(P<<23&4294967295|P>>>9),P=w+(A^(x|~C))+k[0]+4096336452&4294967295,w=x+(P<<6&4294967295|P>>>26),P=C+(x^(w|~A))+k[7]+1126891415&4294967295,C=w+(P<<10&4294967295|P>>>22),P=A+(w^(C|~x))+k[14]+2878612391&4294967295,A=C+(P<<15&4294967295|P>>>17),P=x+(C^(A|~w))+k[5]+4237533241&4294967295,x=A+(P<<21&4294967295|P>>>11),P=w+(A^(x|~C))+k[12]+1700485571&4294967295,w=x+(P<<6&4294967295|P>>>26),P=C+(x^(w|~A))+k[3]+2399980690&4294967295,C=w+(P<<10&4294967295|P>>>22),P=A+(w^(C|~x))+k[10]+4293915773&4294967295,A=C+(P<<15&4294967295|P>>>17),P=x+(C^(A|~w))+k[1]+2240044497&4294967295,x=A+(P<<21&4294967295|P>>>11),P=w+(A^(x|~C))+k[8]+1873313359&4294967295,w=x+(P<<6&4294967295|P>>>26),P=C+(x^(w|~A))+k[15]+4264355552&4294967295,C=w+(P<<10&4294967295|P>>>22),P=A+(w^(C|~x))+k[6]+2734768916&4294967295,A=C+(P<<15&4294967295|P>>>17),P=x+(C^(A|~w))+k[13]+1309151649&4294967295,x=A+(P<<21&4294967295|P>>>11),P=w+(A^(x|~C))+k[4]+4149444226&4294967295,w=x+(P<<6&4294967295|P>>>26),P=C+(x^(w|~A))+k[11]+3174756917&4294967295,C=w+(P<<10&4294967295|P>>>22),P=A+(w^(C|~x))+k[2]+718787259&4294967295,A=C+(P<<15&4294967295|P>>>17),P=x+(C^(A|~w))+k[9]+3951481745&4294967295,S.g[0]=S.g[0]+w&4294967295,S.g[1]=S.g[1]+(A+(P<<21&4294967295|P>>>11))&4294967295,S.g[2]=S.g[2]+A&4294967295,S.g[3]=S.g[3]+C&4294967295}i.prototype.v=function(S,w){w===void 0&&(w=S.length);const x=w-this.blockSize,k=this.C;let A=this.h,C=0;for(;C<w;){if(A==0)for(;C<=x;)s(this,S,C),C+=this.blockSize;if(typeof S=="string"){for(;C<w;)if(k[A++]=S.charCodeAt(C++),A==this.blockSize){s(this,k),A=0;break}}else for(;C<w;)if(k[A++]=S[C++],A==this.blockSize){s(this,k),A=0;break}}this.h=A,this.o+=w},i.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var w=1;w<S.length-8;++w)S[w]=0;w=this.o*8;for(var x=S.length-8;x<S.length;++x)S[x]=w&255,w/=256;for(this.v(S),S=Array(16),w=0,x=0;x<4;++x)for(let k=0;k<32;k+=8)S[w++]=this.g[x]>>>k&255;return S};function r(S,w){var x=a;return Object.prototype.hasOwnProperty.call(x,S)?x[S]:x[S]=w(S)}function o(S,w){this.h=w;const x=[];let k=!0;for(let A=S.length-1;A>=0;A--){const C=S[A]|0;k&&C==w||(x[A]=C,k=!1)}this.g=x}var a={};function l(S){return-128<=S&&S<128?r(S,function(w){return new o([w|0],w<0?-1:0)}):new o([S|0],S<0?-1:0)}function u(S){if(isNaN(S)||!isFinite(S))return d;if(S<0)return E(u(-S));const w=[];let x=1;for(let k=0;S>=x;k++)w[k]=S/x|0,x*=4294967296;return new o(w,0)}function c(S,w){if(S.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(S.charAt(0)=="-")return E(c(S.substring(1),w));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const x=u(Math.pow(w,8));let k=d;for(let C=0;C<S.length;C+=8){var A=Math.min(8,S.length-C);const P=parseInt(S.substring(C,C+A),w);A<8?(A=u(Math.pow(w,A)),k=k.j(A).add(u(P))):(k=k.j(x),k=k.add(u(P)))}return k}var d=l(0),f=l(1),m=l(16777216);e=o.prototype,e.m=function(){if(_(this))return-E(this).m();let S=0,w=1;for(let x=0;x<this.g.length;x++){const k=this.i(x);S+=(k>=0?k:4294967296+k)*w,w*=4294967296}return S},e.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(y(this))return"0";if(_(this))return"-"+E(this).toString(S);const w=u(Math.pow(S,6));var x=this;let k="";for(;;){const A=R(x,w).g;x=v(x,A.j(w));let C=((x.g.length>0?x.g[0]:x.h)>>>0).toString(S);if(x=A,y(x))return C+k;for(;C.length<6;)C="0"+C;k=C+k}},e.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function y(S){if(S.h!=0)return!1;for(let w=0;w<S.g.length;w++)if(S.g[w]!=0)return!1;return!0}function _(S){return S.h==-1}e.l=function(S){return S=v(this,S),_(S)?-1:y(S)?0:1};function E(S){const w=S.g.length,x=[];for(let k=0;k<w;k++)x[k]=~S.g[k];return new o(x,~S.h).add(f)}e.abs=function(){return _(this)?E(this):this},e.add=function(S){const w=Math.max(this.g.length,S.g.length),x=[];let k=0;for(let A=0;A<=w;A++){let C=k+(this.i(A)&65535)+(S.i(A)&65535),P=(C>>>16)+(this.i(A)>>>16)+(S.i(A)>>>16);k=P>>>16,C&=65535,P&=65535,x[A]=P<<16|C}return new o(x,x[x.length-1]&-2147483648?-1:0)};function v(S,w){return S.add(E(w))}e.j=function(S){if(y(this)||y(S))return d;if(_(this))return _(S)?E(this).j(E(S)):E(E(this).j(S));if(_(S))return E(this.j(E(S)));if(this.l(m)<0&&S.l(m)<0)return u(this.m()*S.m());const w=this.g.length+S.g.length,x=[];for(var k=0;k<2*w;k++)x[k]=0;for(k=0;k<this.g.length;k++)for(let A=0;A<S.g.length;A++){const C=this.i(k)>>>16,P=this.i(k)&65535,nt=S.i(A)>>>16,X=S.i(A)&65535;x[2*k+2*A]+=P*X,T(x,2*k+2*A),x[2*k+2*A+1]+=C*X,T(x,2*k+2*A+1),x[2*k+2*A+1]+=P*nt,T(x,2*k+2*A+1),x[2*k+2*A+2]+=C*nt,T(x,2*k+2*A+2)}for(S=0;S<w;S++)x[S]=x[2*S+1]<<16|x[2*S];for(S=w;S<2*w;S++)x[S]=0;return new o(x,0)};function T(S,w){for(;(S[w]&65535)!=S[w];)S[w+1]+=S[w]>>>16,S[w]&=65535,w++}function b(S,w){this.g=S,this.h=w}function R(S,w){if(y(w))throw Error("division by zero");if(y(S))return new b(d,d);if(_(S))return w=R(E(S),w),new b(E(w.g),E(w.h));if(_(w))return w=R(S,E(w)),new b(E(w.g),w.h);if(S.g.length>30){if(_(S)||_(w))throw Error("slowDivide_ only works with positive integers.");for(var x=f,k=w;k.l(S)<=0;)x=D(x),k=D(k);var A=N(x,1),C=N(k,1);for(k=N(k,2),x=N(x,2);!y(k);){var P=C.add(k);P.l(S)<=0&&(A=A.add(x),C=P),k=N(k,1),x=N(x,1)}return w=v(S,A.j(w)),new b(A,w)}for(A=d;S.l(w)>=0;){for(x=Math.max(1,Math.floor(S.m()/w.m())),k=Math.ceil(Math.log(x)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),C=u(x),P=C.j(w);_(P)||P.l(S)>0;)x-=k,C=u(x),P=C.j(w);y(C)&&(C=f),A=A.add(C),S=v(S,P)}return new b(A,S)}e.B=function(S){return R(this,S).h},e.and=function(S){const w=Math.max(this.g.length,S.g.length),x=[];for(let k=0;k<w;k++)x[k]=this.i(k)&S.i(k);return new o(x,this.h&S.h)},e.or=function(S){const w=Math.max(this.g.length,S.g.length),x=[];for(let k=0;k<w;k++)x[k]=this.i(k)|S.i(k);return new o(x,this.h|S.h)},e.xor=function(S){const w=Math.max(this.g.length,S.g.length),x=[];for(let k=0;k<w;k++)x[k]=this.i(k)^S.i(k);return new o(x,this.h^S.h)};function D(S){const w=S.g.length+1,x=[];for(let k=0;k<w;k++)x[k]=S.i(k)<<1|S.i(k-1)>>>31;return new o(x,S.h)}function N(S,w){const x=w>>5;w%=32;const k=S.g.length-x,A=[];for(let C=0;C<k;C++)A[C]=w>0?S.i(C+x)>>>w|S.i(C+x+1)<<32-w:S.i(C+x);return new o(A,S.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,sI=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=c,hs=o}).apply(typeof Dw<"u"?Dw:typeof self<"u"?self:typeof window<"u"?window:{});var ic=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var rI,Ba,oI,zc,Dm,aI,lI,uI;(function(){var e,t=Object.defineProperty;function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof ic=="object"&&ic];for(var p=0;p<h.length;++p){var g=h[p];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var i=n(this);function s(h,p){if(p)t:{var g=i;h=h.split(".");for(var I=0;I<h.length-1;I++){var O=h[I];if(!(O in g))break t;g=g[O]}h=h[h.length-1],I=g[h],p=p(I),p!=I&&p!=null&&t(g,h,{configurable:!0,writable:!0,value:p})}}s("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(h){return h||function(p){var g=[],I;for(I in p)Object.prototype.hasOwnProperty.call(p,I)&&g.push([I,p[I]]);return g}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var r=r||{},o=this||self;function a(h){var p=typeof h;return p=="object"&&h!=null||p=="function"}function l(h,p,g){return h.call.apply(h.bind,arguments)}function u(h,p,g){return u=l,u.apply(null,arguments)}function c(h,p){var g=Array.prototype.slice.call(arguments,1);return function(){var I=g.slice();return I.push.apply(I,arguments),h.apply(this,I)}}function d(h,p){function g(){}g.prototype=p.prototype,h.Z=p.prototype,h.prototype=new g,h.prototype.constructor=h,h.Ob=function(I,O,V){for(var z=Array(arguments.length-2),rt=2;rt<arguments.length;rt++)z[rt-2]=arguments[rt];return p.prototype[O].apply(I,z)}}var f=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function m(h){const p=h.length;if(p>0){const g=Array(p);for(let I=0;I<p;I++)g[I]=h[I];return g}return[]}function y(h,p){for(let I=1;I<arguments.length;I++){const O=arguments[I];var g=typeof O;if(g=g!="object"?g:O?Array.isArray(O)?"array":g:"null",g=="array"||g=="object"&&typeof O.length=="number"){g=h.length||0;const V=O.length||0;h.length=g+V;for(let z=0;z<V;z++)h[g+z]=O[z]}else h.push(O)}}class _{constructor(p,g){this.i=p,this.j=g,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function E(h){o.setTimeout(()=>{throw h},0)}function v(){var h=S;let p=null;return h.g&&(p=h.g,h.g=h.g.next,h.g||(h.h=null),p.next=null),p}class T{constructor(){this.h=this.g=null}add(p,g){const I=b.get();I.set(p,g),this.h?this.h.next=I:this.g=I,this.h=I}}var b=new _(()=>new R,h=>h.reset());class R{constructor(){this.next=this.g=this.h=null}set(p,g){this.h=p,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let D,N=!1,S=new T,w=()=>{const h=Promise.resolve(void 0);D=()=>{h.then(x)}};function x(){for(var h;h=v();){try{h.h.call(h.g)}catch(g){E(g)}var p=b;p.j(h),p.h<100&&(p.h++,h.next=p.g,p.g=h)}N=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function A(h,p){this.type=h,this.g=this.target=p,this.defaultPrevented=!1}A.prototype.h=function(){this.defaultPrevented=!0};var C=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var h=!1,p=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const g=()=>{};o.addEventListener("test",g,p),o.removeEventListener("test",g,p)}catch{}return h}();function P(h){return/^[\s\xa0]*$/.test(h)}function nt(h,p){A.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,p)}d(nt,A),nt.prototype.init=function(h,p){const g=this.type=h.type,I=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=p,p=h.relatedTarget,p||(g=="mouseover"?p=h.fromElement:g=="mouseout"&&(p=h.toElement)),this.relatedTarget=p,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&nt.Z.h.call(this)},nt.prototype.h=function(){nt.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var X="closure_listenable_"+(Math.random()*1e6|0),lt=0;function it(h,p,g,I,O){this.listener=h,this.proxy=null,this.src=p,this.type=g,this.capture=!!I,this.ha=O,this.key=++lt,this.da=this.fa=!1}function B(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function q(h,p,g){for(const I in h)p.call(g,h[I],I,h)}function K(h,p){for(const g in h)p.call(void 0,h[g],g,h)}function dt(h){const p={};for(const g in h)p[g]=h[g];return p}const st="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ee(h,p){let g,I;for(let O=1;O<arguments.length;O++){I=arguments[O];for(g in I)h[g]=I[g];for(let V=0;V<st.length;V++)g=st[V],Object.prototype.hasOwnProperty.call(I,g)&&(h[g]=I[g])}}function bt(h){this.src=h,this.g={},this.h=0}bt.prototype.add=function(h,p,g,I,O){const V=h.toString();h=this.g[V],h||(h=this.g[V]=[],this.h++);const z=Yt(h,p,I,O);return z>-1?(p=h[z],g||(p.fa=!1)):(p=new it(p,this.src,V,!!I,O),p.fa=g,h.push(p)),p};function Ke(h,p){const g=p.type;if(g in h.g){var I=h.g[g],O=Array.prototype.indexOf.call(I,p,void 0),V;(V=O>=0)&&Array.prototype.splice.call(I,O,1),V&&(B(p),h.g[g].length==0&&(delete h.g[g],h.h--))}}function Yt(h,p,g,I){for(let O=0;O<h.length;++O){const V=h[O];if(!V.da&&V.listener==p&&V.capture==!!g&&V.ha==I)return O}return-1}var Ii="closure_lm_"+(Math.random()*1e6|0),tf={};function pv(h,p,g,I,O){if(Array.isArray(p)){for(let V=0;V<p.length;V++)pv(h,p[V],g,I,O);return null}return g=yv(g),h&&h[X]?h.J(p,g,a(I)?!!I.capture:!1,O):zC(h,p,g,!1,I,O)}function zC(h,p,g,I,O,V){if(!p)throw Error("Invalid event type");const z=a(O)?!!O.capture:!!O;let rt=nf(h);if(rt||(h[Ii]=rt=new bt(h)),g=rt.add(p,g,I,z,V),g.proxy)return g;if(I=$C(),g.proxy=I,I.src=h,I.listener=g,h.addEventListener)C||(O=z),O===void 0&&(O=!1),h.addEventListener(p.toString(),I,O);else if(h.attachEvent)h.attachEvent(gv(p.toString()),I);else if(h.addListener&&h.removeListener)h.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return g}function $C(){function h(g){return p.call(h.src,h.listener,g)}const p=WC;return h}function mv(h,p,g,I,O){if(Array.isArray(p))for(var V=0;V<p.length;V++)mv(h,p[V],g,I,O);else I=a(I)?!!I.capture:!!I,g=yv(g),h&&h[X]?(h=h.i,V=String(p).toString(),V in h.g&&(p=h.g[V],g=Yt(p,g,I,O),g>-1&&(B(p[g]),Array.prototype.splice.call(p,g,1),p.length==0&&(delete h.g[V],h.h--)))):h&&(h=nf(h))&&(p=h.g[p.toString()],h=-1,p&&(h=Yt(p,g,I,O)),(g=h>-1?p[h]:null)&&ef(g))}function ef(h){if(typeof h!="number"&&h&&!h.da){var p=h.src;if(p&&p[X])Ke(p.i,h);else{var g=h.type,I=h.proxy;p.removeEventListener?p.removeEventListener(g,I,h.capture):p.detachEvent?p.detachEvent(gv(g),I):p.addListener&&p.removeListener&&p.removeListener(I),(g=nf(p))?(Ke(g,h),g.h==0&&(g.src=null,p[Ii]=null)):B(h)}}}function gv(h){return h in tf?tf[h]:tf[h]="on"+h}function WC(h,p){if(h.da)h=!0;else{p=new nt(p,this);const g=h.listener,I=h.ha||h.src;h.fa&&ef(h),h=g.call(I,p)}return h}function nf(h){return h=h[Ii],h instanceof bt?h:null}var sf="__closure_events_fn_"+(Math.random()*1e9>>>0);function yv(h){return typeof h=="function"?h:(h[sf]||(h[sf]=function(p){return h.handleEvent(p)}),h[sf])}function ge(){k.call(this),this.i=new bt(this),this.M=this,this.G=null}d(ge,k),ge.prototype[X]=!0,ge.prototype.removeEventListener=function(h,p,g,I){mv(this,h,p,g,I)};function Ce(h,p){var g,I=h.G;if(I)for(g=[];I;I=I.G)g.push(I);if(h=h.M,I=p.type||p,typeof p=="string")p=new A(p,h);else if(p instanceof A)p.target=p.target||h;else{var O=p;p=new A(I,h),ee(p,O)}O=!0;let V,z;if(g)for(z=g.length-1;z>=0;z--)V=p.g=g[z],O=ku(V,I,!0,p)&&O;if(V=p.g=h,O=ku(V,I,!0,p)&&O,O=ku(V,I,!1,p)&&O,g)for(z=0;z<g.length;z++)V=p.g=g[z],O=ku(V,I,!1,p)&&O}ge.prototype.N=function(){if(ge.Z.N.call(this),this.i){var h=this.i;for(const p in h.g){const g=h.g[p];for(let I=0;I<g.length;I++)B(g[I]);delete h.g[p],h.h--}}this.G=null},ge.prototype.J=function(h,p,g,I){return this.i.add(String(h),p,!1,g,I)},ge.prototype.K=function(h,p,g,I){return this.i.add(String(h),p,!0,g,I)};function ku(h,p,g,I){if(p=h.i.g[String(p)],!p)return!0;p=p.concat();let O=!0;for(let V=0;V<p.length;++V){const z=p[V];if(z&&!z.da&&z.capture==g){const rt=z.listener,Qt=z.ha||z.src;z.fa&&Ke(h.i,z),O=rt.call(Qt,I)!==!1&&O}}return O&&!I.defaultPrevented}function HC(h,p){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=u(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:o.setTimeout(h,p||0)}function _v(h){h.g=HC(()=>{h.g=null,h.i&&(h.i=!1,_v(h))},h.l);const p=h.h;h.h=null,h.m.apply(null,p)}class qC extends k{constructor(p,g){super(),this.m=p,this.l=g,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:_v(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ia(h){k.call(this),this.h=h,this.g={}}d(ia,k);var vv=[];function wv(h){q(h.g,function(p,g){this.g.hasOwnProperty(g)&&ef(p)},h),h.g={}}ia.prototype.N=function(){ia.Z.N.call(this),wv(this)},ia.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var rf=o.JSON.stringify,KC=o.JSON.parse,GC=class{stringify(h){return o.JSON.stringify(h,void 0)}parse(h){return o.JSON.parse(h,void 0)}};function Tv(){}function xv(){}var sa={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function of(){A.call(this,"d")}d(of,A);function af(){A.call(this,"c")}d(af,A);var Ms={},Ev=null;function Pu(){return Ev=Ev||new ge}Ms.Ia="serverreachability";function Sv(h){A.call(this,Ms.Ia,h)}d(Sv,A);function ra(h){const p=Pu();Ce(p,new Sv(p))}Ms.STAT_EVENT="statevent";function bv(h,p){A.call(this,Ms.STAT_EVENT,h),this.stat=p}d(bv,A);function Re(h){const p=Pu();Ce(p,new bv(p,h))}Ms.Ja="timingevent";function Iv(h,p){A.call(this,Ms.Ja,h),this.size=p}d(Iv,A);function oa(h,p){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){h()},p)}function aa(){this.g=!0}aa.prototype.ua=function(){this.g=!1};function YC(h,p,g,I,O,V){h.info(function(){if(h.g)if(V){var z="",rt=V.split("&");for(let xt=0;xt<rt.length;xt++){var Qt=rt[xt].split("=");if(Qt.length>1){const ne=Qt[0];Qt=Qt[1];const Mn=ne.split("_");z=Mn.length>=2&&Mn[1]=="type"?z+(ne+"="+Qt+"&"):z+(ne+"=redacted&")}}}else z=null;else z=V;return"XMLHTTP REQ ("+I+") [attempt "+O+"]: "+p+`
`+g+`
`+z})}function QC(h,p,g,I,O,V,z){h.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+O+"]: "+p+`
`+g+`
`+V+" "+z})}function kr(h,p,g,I){h.info(function(){return"XMLHTTP TEXT ("+p+"): "+JC(h,g)+(I?" "+I:"")})}function XC(h,p){h.info(function(){return"TIMEOUT: "+p})}aa.prototype.info=function(){};function JC(h,p){if(!h.g)return p;if(!p)return null;try{const V=JSON.parse(p);if(V){for(h=0;h<V.length;h++)if(Array.isArray(V[h])){var g=V[h];if(!(g.length<2)){var I=g[1];if(Array.isArray(I)&&!(I.length<1)){var O=I[0];if(O!="noop"&&O!="stop"&&O!="close")for(let z=1;z<I.length;z++)I[z]=""}}}}return rf(V)}catch{return p}}var Cu={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Av={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},kv;function lf(){}d(lf,Tv),lf.prototype.g=function(){return new XMLHttpRequest},kv=new lf;function la(h){return encodeURIComponent(String(h))}function ZC(h){var p=1;h=h.split(":");const g=[];for(;p>0&&h.length;)g.push(h.shift()),p--;return h.length&&g.push(h.join(":")),g}function Ai(h,p,g,I){this.j=h,this.i=p,this.l=g,this.S=I||1,this.V=new ia(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Pv}function Pv(){this.i=null,this.g="",this.h=!1}var Cv={},uf={};function cf(h,p,g){h.M=1,h.A=Du(Dn(p)),h.u=g,h.R=!0,Rv(h,null)}function Rv(h,p){h.F=Date.now(),Ru(h),h.B=Dn(h.A);var g=h.B,I=h.S;Array.isArray(I)||(I=[String(I)]),Wv(g.i,"t",I),h.C=0,g=h.j.L,h.h=new Pv,h.g=l0(h.j,g?p:null,!h.u),h.P>0&&(h.O=new qC(u(h.Y,h,h.g),h.P)),p=h.V,g=h.g,I=h.ba;var O="readystatechange";Array.isArray(O)||(O&&(vv[0]=O.toString()),O=vv);for(let V=0;V<O.length;V++){const z=pv(g,O[V],I||p.handleEvent,!1,p.h||p);if(!z)break;p.g[z.key]=z}p=h.J?dt(h.J):{},h.u?(h.v||(h.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,p)):(h.v="GET",h.g.ea(h.B,h.v,null,p)),ra(),YC(h.i,h.v,h.B,h.l,h.S,h.u)}Ai.prototype.ba=function(h){h=h.target;const p=this.O;p&&Ci(h)==3?p.j():this.Y(h)},Ai.prototype.Y=function(h){try{if(h==this.g)t:{const rt=Ci(this.g),Qt=this.g.ya(),xt=this.g.ca();if(!(rt<3)&&(rt!=3||this.g&&(this.h.h||this.g.la()||Xv(this.g)))){this.K||rt!=4||Qt==7||(Qt==8||xt<=0?ra(3):ra(2)),hf(this);var p=this.g.ca();this.X=p;var g=tR(this);if(this.o=p==200,QC(this.i,this.v,this.B,this.l,this.S,rt,p),this.o){if(this.U&&!this.L){e:{if(this.g){var I,O=this.g;if((I=O.g?O.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(I)){var V=I;break e}}V=null}if(h=V)kr(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,df(this,h);else{this.o=!1,this.m=3,Re(12),Ns(this),ua(this);break t}}if(this.R){h=!0;let ne;for(;!this.K&&this.C<g.length;)if(ne=eR(this,g),ne==uf){rt==4&&(this.m=4,Re(14),h=!1),kr(this.i,this.l,null,"[Incomplete Response]");break}else if(ne==Cv){this.m=4,Re(15),kr(this.i,this.l,g,"[Invalid Chunk]"),h=!1;break}else kr(this.i,this.l,ne,null),df(this,ne);if(Dv(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),rt!=4||g.length!=0||this.h.h||(this.m=1,Re(16),h=!1),this.o=this.o&&h,!h)kr(this.i,this.l,g,"[Invalid Chunked Response]"),Ns(this),ua(this);else if(g.length>0&&!this.W){this.W=!0;var z=this.j;z.g==this&&z.aa&&!z.P&&(z.j.info("Great, no buffering proxy detected. Bytes received: "+g.length),wf(z),z.P=!0,Re(11))}}else kr(this.i,this.l,g,null),df(this,g);rt==4&&Ns(this),this.o&&!this.K&&(rt==4?s0(this.j,this):(this.o=!1,Ru(this)))}else mR(this.g),p==400&&g.indexOf("Unknown SID")>0?(this.m=3,Re(12)):(this.m=0,Re(13)),Ns(this),ua(this)}}}catch{}finally{}};function tR(h){if(!Dv(h))return h.g.la();const p=Xv(h.g);if(p==="")return"";let g="";const I=p.length,O=Ci(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Ns(h),ua(h),"";h.h.i=new o.TextDecoder}for(let V=0;V<I;V++)h.h.h=!0,g+=h.h.i.decode(p[V],{stream:!(O&&V==I-1)});return p.length=0,h.h.g+=g,h.C=0,h.h.g}function Dv(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function eR(h,p){var g=h.C,I=p.indexOf(`
`,g);return I==-1?uf:(g=Number(p.substring(g,I)),isNaN(g)?Cv:(I+=1,I+g>p.length?uf:(p=p.slice(I,I+g),h.C=I+g,p)))}Ai.prototype.cancel=function(){this.K=!0,Ns(this)};function Ru(h){h.T=Date.now()+h.H,Mv(h,h.H)}function Mv(h,p){if(h.D!=null)throw Error("WatchDog timer not null");h.D=oa(u(h.aa,h),p)}function hf(h){h.D&&(o.clearTimeout(h.D),h.D=null)}Ai.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(XC(this.i,this.B),this.M!=2&&(ra(),Re(17)),Ns(this),this.m=2,ua(this)):Mv(this,this.T-h)};function ua(h){h.j.I==0||h.K||s0(h.j,h)}function Ns(h){hf(h);var p=h.O;p&&typeof p.dispose=="function"&&p.dispose(),h.O=null,wv(h.V),h.g&&(p=h.g,h.g=null,p.abort(),p.dispose())}function df(h,p){try{var g=h.j;if(g.I!=0&&(g.g==h||ff(g.h,h))){if(!h.L&&ff(g.h,h)&&g.I==3){try{var I=g.Ba.g.parse(p)}catch{I=null}if(Array.isArray(I)&&I.length==3){var O=I;if(O[0]==0){t:if(!g.v){if(g.g)if(g.g.F+3e3<h.F)Lu(g),Ou(g);else break t;vf(g),Re(18)}}else g.xa=O[1],0<g.xa-g.K&&O[2]<37500&&g.F&&g.A==0&&!g.C&&(g.C=oa(u(g.Va,g),6e3));Vv(g.h)<=1&&g.ta&&(g.ta=void 0)}else Vs(g,11)}else if((h.L||g.g==h)&&Lu(g),!P(p))for(O=g.Ba.g.parse(p),p=0;p<O.length;p++){let xt=O[p];const ne=xt[0];if(!(ne<=g.K))if(g.K=ne,xt=xt[1],g.I==2)if(xt[0]=="c"){g.M=xt[1],g.ba=xt[2];const Mn=xt[3];Mn!=null&&(g.ka=Mn,g.j.info("VER="+g.ka));const Ls=xt[4];Ls!=null&&(g.za=Ls,g.j.info("SVER="+g.za));const Ri=xt[5];Ri!=null&&typeof Ri=="number"&&Ri>0&&(I=1.5*Ri,g.O=I,g.j.info("backChannelRequestTimeoutMs_="+I)),I=g;const Di=h.g;if(Di){const ju=Di.g?Di.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ju){var V=I.h;V.g||ju.indexOf("spdy")==-1&&ju.indexOf("quic")==-1&&ju.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(pf(V,V.h),V.h=null))}if(I.G){const Tf=Di.g?Di.g.getResponseHeader("X-HTTP-Session-Id"):null;Tf&&(I.wa=Tf,It(I.J,I.G,Tf))}}g.I=3,g.l&&g.l.ra(),g.aa&&(g.T=Date.now()-h.F,g.j.info("Handshake RTT: "+g.T+"ms")),I=g;var z=h;if(I.na=a0(I,I.L?I.ba:null,I.W),z.L){Lv(I.h,z);var rt=z,Qt=I.O;Qt&&(rt.H=Qt),rt.D&&(hf(rt),Ru(rt)),I.g=z}else n0(I);g.i.length>0&&Vu(g)}else xt[0]!="stop"&&xt[0]!="close"||Vs(g,7);else g.I==3&&(xt[0]=="stop"||xt[0]=="close"?xt[0]=="stop"?Vs(g,7):_f(g):xt[0]!="noop"&&g.l&&g.l.qa(xt),g.A=0)}}ra(4)}catch{}}var nR=class{constructor(h,p){this.g=h,this.map=p}};function Nv(h){this.l=h||10,o.PerformanceNavigationTiming?(h=o.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ov(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Vv(h){return h.h?1:h.g?h.g.size:0}function ff(h,p){return h.h?h.h==p:h.g?h.g.has(p):!1}function pf(h,p){h.g?h.g.add(p):h.h=p}function Lv(h,p){h.h&&h.h==p?h.h=null:h.g&&h.g.has(p)&&h.g.delete(p)}Nv.prototype.cancel=function(){if(this.i=Fv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Fv(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let p=h.i;for(const g of h.g.values())p=p.concat(g.G);return p}return m(h.i)}var jv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function iR(h,p){if(h){h=h.split("&");for(let g=0;g<h.length;g++){const I=h[g].indexOf("=");let O,V=null;I>=0?(O=h[g].substring(0,I),V=h[g].substring(I+1)):O=h[g],p(O,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function ki(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;h instanceof ki?(this.l=h.l,ca(this,h.j),this.o=h.o,this.g=h.g,ha(this,h.u),this.h=h.h,mf(this,Hv(h.i)),this.m=h.m):h&&(p=String(h).match(jv))?(this.l=!1,ca(this,p[1]||"",!0),this.o=da(p[2]||""),this.g=da(p[3]||"",!0),ha(this,p[4]),this.h=da(p[5]||"",!0),mf(this,p[6]||"",!0),this.m=da(p[7]||"")):(this.l=!1,this.i=new pa(null,this.l))}ki.prototype.toString=function(){const h=[];var p=this.j;p&&h.push(fa(p,Bv,!0),":");var g=this.g;return(g||p=="file")&&(h.push("//"),(p=this.o)&&h.push(fa(p,Bv,!0),"@"),h.push(la(g).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.u,g!=null&&h.push(":",String(g))),(g=this.h)&&(this.g&&g.charAt(0)!="/"&&h.push("/"),h.push(fa(g,g.charAt(0)=="/"?oR:rR,!0))),(g=this.i.toString())&&h.push("?",g),(g=this.m)&&h.push("#",fa(g,lR)),h.join("")},ki.prototype.resolve=function(h){const p=Dn(this);let g=!!h.j;g?ca(p,h.j):g=!!h.o,g?p.o=h.o:g=!!h.g,g?p.g=h.g:g=h.u!=null;var I=h.h;if(g)ha(p,h.u);else if(g=!!h.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var O=p.h.lastIndexOf("/");O!=-1&&(I=p.h.slice(0,O+1)+I)}if(O=I,O==".."||O==".")I="";else if(O.indexOf("./")!=-1||O.indexOf("/.")!=-1){I=O.lastIndexOf("/",0)==0,O=O.split("/");const V=[];for(let z=0;z<O.length;){const rt=O[z++];rt=="."?I&&z==O.length&&V.push(""):rt==".."?((V.length>1||V.length==1&&V[0]!="")&&V.pop(),I&&z==O.length&&V.push("")):(V.push(rt),I=!0)}I=V.join("/")}else I=O}return g?p.h=I:g=h.i.toString()!=="",g?mf(p,Hv(h.i)):g=!!h.m,g&&(p.m=h.m),p};function Dn(h){return new ki(h)}function ca(h,p,g){h.j=g?da(p,!0):p,h.j&&(h.j=h.j.replace(/:$/,""))}function ha(h,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);h.u=p}else h.u=null}function mf(h,p,g){p instanceof pa?(h.i=p,uR(h.i,h.l)):(g||(p=fa(p,aR)),h.i=new pa(p,h.l))}function It(h,p,g){h.i.set(p,g)}function Du(h){return It(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function da(h,p){return h?p?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function fa(h,p,g){return typeof h=="string"?(h=encodeURI(h).replace(p,sR),g&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function sR(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Bv=/[#\/\?@]/g,rR=/[#\?:]/g,oR=/[#\?]/g,aR=/[#\?@]/g,lR=/#/g;function pa(h,p){this.h=this.g=null,this.i=h||null,this.j=!!p}function Os(h){h.g||(h.g=new Map,h.h=0,h.i&&iR(h.i,function(p,g){h.add(decodeURIComponent(p.replace(/\+/g," ")),g)}))}e=pa.prototype,e.add=function(h,p){Os(this),this.i=null,h=Pr(this,h);let g=this.g.get(h);return g||this.g.set(h,g=[]),g.push(p),this.h+=1,this};function Uv(h,p){Os(h),p=Pr(h,p),h.g.has(p)&&(h.i=null,h.h-=h.g.get(p).length,h.g.delete(p))}function zv(h,p){return Os(h),p=Pr(h,p),h.g.has(p)}e.forEach=function(h,p){Os(this),this.g.forEach(function(g,I){g.forEach(function(O){h.call(p,O,I,this)},this)},this)};function $v(h,p){Os(h);let g=[];if(typeof p=="string")zv(h,p)&&(g=g.concat(h.g.get(Pr(h,p))));else for(h=Array.from(h.g.values()),p=0;p<h.length;p++)g=g.concat(h[p]);return g}e.set=function(h,p){return Os(this),this.i=null,h=Pr(this,h),zv(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[p]),this.h+=1,this},e.get=function(h,p){return h?(h=$v(this,h),h.length>0?String(h[0]):p):p};function Wv(h,p,g){Uv(h,p),g.length>0&&(h.i=null,h.g.set(Pr(h,p),m(g)),h.h+=g.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],p=Array.from(this.g.keys());for(let I=0;I<p.length;I++){var g=p[I];const O=la(g);g=$v(this,g);for(let V=0;V<g.length;V++){let z=O;g[V]!==""&&(z+="="+la(g[V])),h.push(z)}}return this.i=h.join("&")};function Hv(h){const p=new pa;return p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),p}function Pr(h,p){return p=String(p),h.j&&(p=p.toLowerCase()),p}function uR(h,p){p&&!h.j&&(Os(h),h.i=null,h.g.forEach(function(g,I){const O=I.toLowerCase();I!=O&&(Uv(this,I),Wv(this,O,g))},h)),h.j=p}function cR(h,p){const g=new aa;if(o.Image){const I=new Image;I.onload=c(Pi,g,"TestLoadImage: loaded",!0,p,I),I.onerror=c(Pi,g,"TestLoadImage: error",!1,p,I),I.onabort=c(Pi,g,"TestLoadImage: abort",!1,p,I),I.ontimeout=c(Pi,g,"TestLoadImage: timeout",!1,p,I),o.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=h}else p(!1)}function hR(h,p){const g=new aa,I=new AbortController,O=setTimeout(()=>{I.abort(),Pi(g,"TestPingServer: timeout",!1,p)},1e4);fetch(h,{signal:I.signal}).then(V=>{clearTimeout(O),V.ok?Pi(g,"TestPingServer: ok",!0,p):Pi(g,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(O),Pi(g,"TestPingServer: error",!1,p)})}function Pi(h,p,g,I,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),I(g)}catch{}}function dR(){this.g=new GC}function gf(h){this.i=h.Sb||null,this.h=h.ab||!1}d(gf,Tv),gf.prototype.g=function(){return new Mu(this.i,this.h)};function Mu(h,p){ge.call(this),this.H=h,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(Mu,ge),e=Mu.prototype,e.open=function(h,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=p,this.readyState=1,ga(this)},e.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(p.body=h),(this.H||o).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ma(this)),this.readyState=0},e.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,ga(this)),this.g&&(this.readyState=3,ga(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;qv(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function qv(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}e.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var p=h.value?h.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!h.done}))&&(this.response=this.responseText+=p)}h.done?ma(this):ga(this),this.readyState==3&&qv(this)}},e.Oa=function(h){this.g&&(this.response=this.responseText=h,ma(this))},e.Na=function(h){this.g&&(this.response=h,ma(this))},e.ga=function(){this.g&&ma(this)};function ma(h){h.readyState=4,h.l=null,h.j=null,h.B=null,ga(h)}e.setRequestHeader=function(h,p){this.A.append(h,p)},e.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],p=this.h.entries();for(var g=p.next();!g.done;)g=g.value,h.push(g[0]+": "+g[1]),g=p.next();return h.join(`\r
`)};function ga(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Mu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Kv(h){let p="";return q(h,function(g,I){p+=I,p+=":",p+=g,p+=`\r
`}),p}function yf(h,p,g){t:{for(I in g){var I=!1;break t}I=!0}I||(g=Kv(g),typeof h=="string"?g!=null&&la(g):It(h,p,g))}function Lt(h){ge.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}d(Lt,ge);var fR=/^https?$/i,pR=["POST","PUT"];e=Lt.prototype,e.Fa=function(h){this.H=h},e.ea=function(h,p,g,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);p=p?p.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():kv.g(),this.g.onreadystatechange=f(u(this.Ca,this));try{this.B=!0,this.g.open(p,String(h),!0),this.B=!1}catch(V){Gv(this,V);return}if(h=g||"",g=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var O in I)g.set(O,I[O]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const V of I.keys())g.set(V,I.get(V));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(g.keys()).find(V=>V.toLowerCase()=="content-type"),O=o.FormData&&h instanceof o.FormData,!(Array.prototype.indexOf.call(pR,p,void 0)>=0)||I||O||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,z]of g)this.g.setRequestHeader(V,z);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(V){Gv(this,V)}};function Gv(h,p){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=p,h.o=5,Yv(h),Nu(h)}function Yv(h){h.A||(h.A=!0,Ce(h,"complete"),Ce(h,"error"))}e.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Ce(this,"complete"),Ce(this,"abort"),Nu(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Nu(this,!0)),Lt.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?Qv(this):this.Xa())},e.Xa=function(){Qv(this)};function Qv(h){if(h.h&&typeof r<"u"){if(h.v&&Ci(h)==4)setTimeout(h.Ca.bind(h),0);else if(Ce(h,"readystatechange"),Ci(h)==4){h.h=!1;try{const V=h.ca();t:switch(V){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break t;default:p=!1}var g;if(!(g=p)){var I;if(I=V===0){let z=String(h.D).match(jv)[1]||null;!z&&o.self&&o.self.location&&(z=o.self.location.protocol.slice(0,-1)),I=!fR.test(z?z.toLowerCase():"")}g=I}if(g)Ce(h,"complete"),Ce(h,"success");else{h.o=6;try{var O=Ci(h)>2?h.g.statusText:""}catch{O=""}h.l=O+" ["+h.ca()+"]",Yv(h)}}finally{Nu(h)}}}}function Nu(h,p){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const g=h.g;h.g=null,p||Ce(h,"ready");try{g.onreadystatechange=null}catch{}}}e.isActive=function(){return!!this.g};function Ci(h){return h.g?h.g.readyState:0}e.ca=function(){try{return Ci(this)>2?this.g.status:-1}catch{return-1}},e.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.La=function(h){if(this.g){var p=this.g.responseText;return h&&p.indexOf(h)==0&&(p=p.substring(h.length)),KC(p)}};function Xv(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function mR(h){const p={};h=(h.g&&Ci(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<h.length;I++){if(P(h[I]))continue;var g=ZC(h[I]);const O=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const V=p[O]||[];p[O]=V,V.push(g)}K(p,function(I){return I.join(", ")})}e.ya=function(){return this.o},e.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ya(h,p,g){return g&&g.internalChannelParams&&g.internalChannelParams[h]||p}function Jv(h){this.za=0,this.i=[],this.j=new aa,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ya("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ya("baseRetryDelayMs",5e3,h),this.Za=ya("retryDelaySeedMs",1e4,h),this.Ta=ya("forwardChannelMaxRetries",2,h),this.va=ya("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Nv(h&&h.concurrentRequestLimit),this.Ba=new dR,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}e=Jv.prototype,e.ka=8,e.I=1,e.connect=function(h,p,g,I){Re(0),this.W=h,this.H=p||{},g&&I!==void 0&&(this.H.OSID=g,this.H.OAID=I),this.F=this.X,this.J=a0(this,null,this.W),Vu(this)};function _f(h){if(Zv(h),h.I==3){var p=h.V++,g=Dn(h.J);if(It(g,"SID",h.M),It(g,"RID",p),It(g,"TYPE","terminate"),_a(h,g),p=new Ai(h,h.j,p),p.M=2,p.A=Du(Dn(g)),g=!1,o.navigator&&o.navigator.sendBeacon)try{g=o.navigator.sendBeacon(p.A.toString(),"")}catch{}!g&&o.Image&&(new Image().src=p.A,g=!0),g||(p.g=l0(p.j,null),p.g.ea(p.A)),p.F=Date.now(),Ru(p)}o0(h)}function Ou(h){h.g&&(wf(h),h.g.cancel(),h.g=null)}function Zv(h){Ou(h),h.v&&(o.clearTimeout(h.v),h.v=null),Lu(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&o.clearTimeout(h.m),h.m=null)}function Vu(h){if(!Ov(h.h)&&!h.m){h.m=!0;var p=h.Ea;D||w(),N||(D(),N=!0),S.add(p,h),h.D=0}}function gR(h,p){return Vv(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=p.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=oa(u(h.Ea,h,p),r0(h,h.D)),h.D++,!0)}e.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const O=new Ai(this,this.j,h);let V=this.o;if(this.U&&(V?(V=dt(V),ee(V,this.U)):V=this.U),this.u!==null||this.R||(O.J=V,V=null),this.S)t:{for(var p=0,g=0;g<this.i.length;g++){e:{var I=this.i[g];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break e}I=void 0}if(I===void 0)break;if(p+=I,p>4096){p=g;break t}if(p===4096||g===this.i.length-1){p=g+1;break t}}p=1e3}else p=1e3;p=e0(this,O,p),g=Dn(this.J),It(g,"RID",h),It(g,"CVER",22),this.G&&It(g,"X-HTTP-Session-Id",this.G),_a(this,g),V&&(this.R?p="headers="+la(Kv(V))+"&"+p:this.u&&yf(g,this.u,V)),pf(this.h,O),this.Ra&&It(g,"TYPE","init"),this.S?(It(g,"$req",p),It(g,"SID","null"),O.U=!0,cf(O,g,null)):cf(O,g,p),this.I=2}}else this.I==3&&(h?t0(this,h):this.i.length==0||Ov(this.h)||t0(this))};function t0(h,p){var g;p?g=p.l:g=h.V++;const I=Dn(h.J);It(I,"SID",h.M),It(I,"RID",g),It(I,"AID",h.K),_a(h,I),h.u&&h.o&&yf(I,h.u,h.o),g=new Ai(h,h.j,g,h.D+1),h.u===null&&(g.J=h.o),p&&(h.i=p.G.concat(h.i)),p=e0(h,g,1e3),g.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),pf(h.h,g),cf(g,I,p)}function _a(h,p){h.H&&q(h.H,function(g,I){It(p,I,g)}),h.l&&q({},function(g,I){It(p,I,g)})}function e0(h,p,g){g=Math.min(h.i.length,g);const I=h.l?u(h.l.Ka,h.l,h):null;t:{var O=h.i;let rt=-1;for(;;){const Qt=["count="+g];rt==-1?g>0?(rt=O[0].g,Qt.push("ofs="+rt)):rt=0:Qt.push("ofs="+rt);let xt=!0;for(let ne=0;ne<g;ne++){var V=O[ne].g;const Mn=O[ne].map;if(V-=rt,V<0)rt=Math.max(0,O[ne].g-100),xt=!1;else try{V="req"+V+"_"||"";try{var z=Mn instanceof Map?Mn:Object.entries(Mn);for(const[Ls,Ri]of z){let Di=Ri;a(Ri)&&(Di=rf(Ri)),Qt.push(V+Ls+"="+encodeURIComponent(Di))}}catch(Ls){throw Qt.push(V+"type="+encodeURIComponent("_badmap")),Ls}}catch{I&&I(Mn)}}if(xt){z=Qt.join("&");break t}}z=void 0}return h=h.i.splice(0,g),p.G=h,z}function n0(h){if(!h.g&&!h.v){h.Y=1;var p=h.Da;D||w(),N||(D(),N=!0),S.add(p,h),h.A=0}}function vf(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=oa(u(h.Da,h),r0(h,h.A)),h.A++,!0)}e.Da=function(){if(this.v=null,i0(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=oa(u(this.Wa,this),h)}},e.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Re(10),Ou(this),i0(this))};function wf(h){h.B!=null&&(o.clearTimeout(h.B),h.B=null)}function i0(h){h.g=new Ai(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var p=Dn(h.na);It(p,"RID","rpc"),It(p,"SID",h.M),It(p,"AID",h.K),It(p,"CI",h.F?"0":"1"),!h.F&&h.ia&&It(p,"TO",h.ia),It(p,"TYPE","xmlhttp"),_a(h,p),h.u&&h.o&&yf(p,h.u,h.o),h.O&&(h.g.H=h.O);var g=h.g;h=h.ba,g.M=1,g.A=Du(Dn(p)),g.u=null,g.R=!0,Rv(g,h)}e.Va=function(){this.C!=null&&(this.C=null,Ou(this),vf(this),Re(19))};function Lu(h){h.C!=null&&(o.clearTimeout(h.C),h.C=null)}function s0(h,p){var g=null;if(h.g==p){Lu(h),wf(h),h.g=null;var I=2}else if(ff(h.h,p))g=p.G,Lv(h.h,p),I=1;else return;if(h.I!=0){if(p.o)if(I==1){g=p.u?p.u.length:0,p=Date.now()-p.F;var O=h.D;I=Pu(),Ce(I,new Iv(I,g)),Vu(h)}else n0(h);else if(O=p.m,O==3||O==0&&p.X>0||!(I==1&&gR(h,p)||I==2&&vf(h)))switch(g&&g.length>0&&(p=h.h,p.i=p.i.concat(g)),O){case 1:Vs(h,5);break;case 4:Vs(h,10);break;case 3:Vs(h,6);break;default:Vs(h,2)}}}function r0(h,p){let g=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(g*=2),g*p}function Vs(h,p){if(h.j.info("Error code "+p),p==2){var g=u(h.bb,h),I=h.Ua;const O=!I;I=new ki(I||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||ca(I,"https"),Du(I),O?cR(I.toString(),g):hR(I.toString(),g)}else Re(2);h.I=0,h.l&&h.l.pa(p),o0(h),Zv(h)}e.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Re(2)):(this.j.info("Failed to ping google.com"),Re(1))};function o0(h){if(h.I=0,h.ja=[],h.l){const p=Fv(h.h);(p.length!=0||h.i.length!=0)&&(y(h.ja,p),y(h.ja,h.i),h.h.i.length=0,m(h.i),h.i.length=0),h.l.oa()}}function a0(h,p,g){var I=g instanceof ki?Dn(g):new ki(g);if(I.g!="")p&&(I.g=p+"."+I.g),ha(I,I.u);else{var O=o.location;I=O.protocol,p=p?p+"."+O.hostname:O.hostname,O=+O.port;const V=new ki(null);I&&ca(V,I),p&&(V.g=p),O&&ha(V,O),g&&(V.h=g),I=V}return g=h.G,p=h.wa,g&&p&&It(I,g,p),It(I,"VER",h.ka),_a(h,I),I}function l0(h,p,g){if(p&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=h.Aa&&!h.ma?new Lt(new gf({ab:g})):new Lt(h.ma),p.Fa(h.L),p}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function u0(){}e=u0.prototype,e.ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){};function Fu(){}Fu.prototype.g=function(h,p){return new Ge(h,p)};function Ge(h,p){ge.call(this),this.g=new Jv(p),this.l=h,this.h=p&&p.messageUrlParams||null,h=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(h?h["X-WebChannel-Content-Type"]=p.messageContentType:h={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(h?h["X-WebChannel-Client-Profile"]=p.sa:h={"X-WebChannel-Client-Profile":p.sa}),this.g.U=h,(h=p&&p.Qb)&&!P(h)&&(this.g.u=h),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!P(p)&&(this.g.G=p,h=this.h,h!==null&&p in h&&(h=this.h,p in h&&delete h[p])),this.j=new Cr(this)}d(Ge,ge),Ge.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ge.prototype.close=function(){_f(this.g)},Ge.prototype.o=function(h){var p=this.g;if(typeof h=="string"){var g={};g.__data__=h,h=g}else this.v&&(g={},g.__data__=rf(h),h=g);p.i.push(new nR(p.Ya++,h)),p.I==3&&Vu(p)},Ge.prototype.N=function(){this.g.l=null,delete this.j,_f(this.g),delete this.g,Ge.Z.N.call(this)};function c0(h){of.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var p=h.__sm__;if(p){t:{for(const g in p){h=g;break t}h=void 0}(this.i=h)&&(h=this.i,p=p!==null&&h in p?p[h]:void 0),this.data=p}else this.data=h}d(c0,of);function h0(){af.call(this),this.status=1}d(h0,af);function Cr(h){this.g=h}d(Cr,u0),Cr.prototype.ra=function(){Ce(this.g,"a")},Cr.prototype.qa=function(h){Ce(this.g,new c0(h))},Cr.prototype.pa=function(h){Ce(this.g,new h0)},Cr.prototype.oa=function(){Ce(this.g,"b")},Fu.prototype.createWebChannel=Fu.prototype.g,Ge.prototype.send=Ge.prototype.o,Ge.prototype.open=Ge.prototype.m,Ge.prototype.close=Ge.prototype.close,uI=function(){return new Fu},lI=function(){return Pu()},aI=Ms,Dm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Cu.NO_ERROR=0,Cu.TIMEOUT=8,Cu.HTTP_ERROR=6,zc=Cu,Av.COMPLETE="complete",oI=Av,xv.EventType=sa,sa.OPEN="a",sa.CLOSE="b",sa.ERROR="c",sa.MESSAGE="d",ge.prototype.listen=ge.prototype.J,Ba=xv,Lt.prototype.listenOnce=Lt.prototype.K,Lt.prototype.getLastError=Lt.prototype.Ha,Lt.prototype.getLastErrorCode=Lt.prototype.ya,Lt.prototype.getStatus=Lt.prototype.ca,Lt.prototype.getResponseJson=Lt.prototype.La,Lt.prototype.getResponseText=Lt.prototype.la,Lt.prototype.send=Lt.prototype.ea,Lt.prototype.setWithCredentials=Lt.prototype.Fa,rI=Lt}).apply(typeof ic<"u"?ic:typeof self<"u"?self:typeof window<"u"?window:{});const Mw="@firebase/firestore",Nw="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Te.UNAUTHENTICATED=new Te(null),Te.GOOGLE_CREDENTIALS=new Te("google-credentials-uid"),Te.FIRST_PARTY=new Te("first-party-uid"),Te.MOCK_USER=new Te("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ko="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yr=new by("@firebase/firestore");function Or(){return yr.logLevel}function W(e,...t){if(yr.logLevel<=ut.DEBUG){const n=t.map(ky);yr.debug(`Firestore (${Ko}): ${e}`,...n)}}function _i(e,...t){if(yr.logLevel<=ut.ERROR){const n=t.map(ky);yr.error(`Firestore (${Ko}): ${e}`,...n)}}function ko(e,...t){if(yr.logLevel<=ut.WARN){const n=t.map(ky);yr.warn(`Firestore (${Ko}): ${e}`,...n)}}function ky(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y(e,t,n){let i="Unexpected state";typeof t=="string"?i=t:n=t,cI(e,i,n)}function cI(e,t,n){let i=`FIRESTORE (${Ko}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw _i(i),new Error(i)}function _t(e,t,n,i){let s="Unexpected state";typeof n=="string"?s=n:i=n,e||cI(t,s,i)}function et(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $ extends bi{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class CN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Te.UNAUTHENTICATED))}shutdown(){}}class RN{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class DN{constructor(t){this.t=t,this.currentUser=Te.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){_t(this.o===void 0,42304);let i=this.i;const s=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve();let r=new ds;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new ds,t.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=r;t.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new ds)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==t?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(_t(typeof i.accessToken=="string",31837,{l:i}),new hI(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return _t(t===null||typeof t=="string",2055,{h:t}),new Te(t)}}class MN{constructor(t,n,i){this.P=t,this.T=n,this.I=i,this.type="FirstParty",this.user=Te.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class NN{constructor(t,n,i){this.P=t,this.T=n,this.I=i}getToken(){return Promise.resolve(new MN(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(Te.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ow{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ON{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Un(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){_t(this.o===void 0,3512);const i=r=>{r.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const o=r.token!==this.m;return this.m=r.token,W("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(r.token):Promise.resolve()};this.o=r=>{t.enqueueRetryable(()=>i(r))};const s=r=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(r=>s(r)),setTimeout(()=>{if(!this.appCheck){const r=this.V.getImmediate({optional:!0});r?s(r):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Ow(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(_t(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Ow(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VN(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Py{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=VN(40);for(let r=0;r<s.length;++r)i.length<20&&s[r]<n&&(i+=t.charAt(s[r]%62))}return i}}function ct(e,t){return e<t?-1:e>t?1:0}function Mm(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const s=e.charAt(i),r=t.charAt(i);if(s!==r)return Zf(s)===Zf(r)?ct(s,r):Zf(s)?1:-1}return ct(e.length,t.length)}const LN=55296,FN=57343;function Zf(e){const t=e.charCodeAt(0);return t>=LN&&t<=FN}function Po(e,t,n){return e.length===t.length&&e.every((i,s)=>n(i,t[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vw="__name__";class jn{constructor(t,n,i){n===void 0?n=0:n>t.length&&Y(637,{offset:n,range:t.length}),i===void 0?i=t.length-n:i>t.length-n&&Y(1746,{length:i,range:t.length-n}),this.segments=t,this.offset=n,this.len=i}get length(){return this.len}isEqual(t){return jn.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof jn?t.forEach(i=>{n.push(i)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,i=this.limit();n<i;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const i=Math.min(t.length,n.length);for(let s=0;s<i;s++){const r=jn.compareSegments(t.get(s),n.get(s));if(r!==0)return r}return ct(t.length,n.length)}static compareSegments(t,n){const i=jn.isNumericId(t),s=jn.isNumericId(n);return i&&!s?-1:!i&&s?1:i&&s?jn.extractNumericId(t).compare(jn.extractNumericId(n)):Mm(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return hs.fromString(t.substring(4,t.length-2))}}class Et extends jn{construct(t,n,i){return new Et(t,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const i of t){if(i.indexOf("//")>=0)throw new $(L.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(s=>s.length>0))}return new Et(n)}static emptyPath(){return new Et([])}}const jN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class de extends jn{construct(t,n,i){return new de(t,n,i)}static isValidIdentifier(t){return jN.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),de.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Vw}static keyField(){return new de([Vw])}static fromServerFormat(t){const n=[];let i="",s=0;const r=()=>{if(i.length===0)throw new $(L.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let o=!1;for(;s<t.length;){const a=t[s];if(a==="\\"){if(s+1===t.length)throw new $(L.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new $(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(i+=a,s++):(r(),s++)}if(r(),o)throw new $(L.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new de(n)}static emptyPath(){return new de([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(t){this.path=t}static fromPath(t){return new G(Et.fromString(t))}static fromName(t){return new G(Et.fromString(t).popFirst(5))}static empty(){return new G(Et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Et.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Et.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new G(new Et(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dI(e,t,n){if(!n)throw new $(L.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function BN(e,t,n,i){if(t===!0&&i===!0)throw new $(L.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Lw(e){if(!G.isDocumentKey(e))throw new $(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Fw(e){if(G.isDocumentKey(e))throw new $(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function fI(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function kd(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Y(12329,{type:typeof e})}function Co(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new $(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=kd(e);throw new $(L.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(e,t){const n={typeString:e};return t&&(n.value=t),n}function du(e,t){if(!fI(e))throw new $(L.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in t)if(t[i]){const s=t[i].typeString,r="value"in t[i]?{value:t[i].value}:void 0;if(!(i in e)){n=`JSON missing required field: '${i}'`;break}const o=e[i];if(s&&typeof o!==s){n=`JSON field '${i}' must be a ${s}.`;break}if(r!==void 0&&o!==r.value){n=`Expected '${i}' field to equal '${r.value}'`;break}}if(n)throw new $(L.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jw=-62135596800,Bw=1e6;class pt{static now(){return pt.fromMillis(Date.now())}static fromDate(t){return pt.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),i=Math.floor((t-1e3*n)*Bw);return new pt(n,i)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new $(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new $(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<jw)throw new $(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new $(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Bw}_compareTo(t){return this.seconds===t.seconds?ct(this.nanoseconds,t.nanoseconds):ct(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:pt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(du(t,pt._jsonSchema))return new pt(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-jw;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}pt._jsonSchemaVersion="firestore/timestamp/1.0",pt._jsonSchema={type:Gt("string",pt._jsonSchemaVersion),seconds:Gt("number"),nanoseconds:Gt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{static fromTimestamp(t){return new tt(t)}static min(){return new tt(new pt(0,0))}static max(){return new tt(new pt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ll=-1;function UN(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,s=tt.fromTimestamp(i===1e9?new pt(n+1,0):new pt(n,i));return new ys(s,G.empty(),t)}function zN(e){return new ys(e.readTime,e.key,Ll)}class ys{constructor(t,n,i){this.readTime=t,this.documentKey=n,this.largestBatchId=i}static min(){return new ys(tt.min(),G.empty(),Ll)}static max(){return new ys(tt.max(),G.empty(),Ll)}}function $N(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=G.comparator(e.documentKey,t.documentKey),n!==0?n:ct(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class HN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Go(e){if(e.code!==L.FAILED_PRECONDITION||e.message!==WN)throw e;W("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Y(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new j((i,s)=>{this.nextCallback=r=>{this.wrapSuccess(t,r).next(i,s)},this.catchCallback=r=>{this.wrapFailure(n,r).next(i,s)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof j?n:j.resolve(n)}catch(n){return j.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):j.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):j.reject(n)}static resolve(t){return new j((n,i)=>{n(t)})}static reject(t){return new j((n,i)=>{i(t)})}static waitFor(t){return new j((n,i)=>{let s=0,r=0,o=!1;t.forEach(a=>{++s,a.next(()=>{++r,o&&r===s&&n()},l=>i(l))}),o=!0,r===s&&n()})}static or(t){let n=j.resolve(!1);for(const i of t)n=n.next(s=>s?j.resolve(s):i());return n}static forEach(t,n){const i=[];return t.forEach((s,r)=>{i.push(n.call(this,s,r))}),this.waitFor(i)}static mapArray(t,n){return new j((i,s)=>{const r=t.length,o=new Array(r);let a=0;for(let l=0;l<r;l++){const u=l;n(t[u]).next(c=>{o[u]=c,++a,a===r&&i(o)},c=>s(c))}})}static doWhile(t,n){return new j((i,s)=>{const r=()=>{t()===!0?n().next(()=>{r()},s):i()};r()})}}function qN(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Yo(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Pd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cy=-1;function Cd(e){return e==null}function Oh(e){return e===0&&1/e==-1/0}function KN(e){return typeof e=="number"&&Number.isInteger(e)&&!Oh(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pI="";function GN(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Uw(t)),t=YN(e.get(n),t);return Uw(t)}function YN(e,t){let n=t;const i=e.length;for(let s=0;s<i;s++){const r=e.charAt(s);switch(r){case"\0":n+="";break;case pI:n+="";break;default:n+=r}}return n}function Uw(e){return e+pI+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zw(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ps(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function mI(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(t,n){this.comparator=t,this.root=n||he.EMPTY}insert(t,n){return new Vt(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,he.BLACK,null,null))}remove(t){return new Vt(this.comparator,this.root.remove(t,this.comparator).copy(null,null,he.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(t){let n=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(t,i.key);if(s===0)return n+i.left.size;s<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,i)=>(t(n,i),!1))}toString(){const t=[];return this.inorderTraversal((n,i)=>(t.push(`${n}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new sc(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new sc(this.root,t,this.comparator,!1)}getReverseIterator(){return new sc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new sc(this.root,t,this.comparator,!0)}}class sc{constructor(t,n,i,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=n?i(t.key,n):1,n&&s&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(r===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class he{constructor(t,n,i,s,r){this.key=t,this.value=n,this.color=i??he.RED,this.left=s??he.EMPTY,this.right=r??he.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,i,s,r){return new he(t??this.key,n??this.value,i??this.color,s??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,i){let s=this;const r=i(t,s.key);return s=r<0?s.copy(null,null,null,s.left.insert(t,n,i),null):r===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(t,n,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return he.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let i,s=this;if(n(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(t,s.key)===0){if(s.right.isEmpty())return he.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,he.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,he.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Y(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Y(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Y(27949);return t+(this.isRed()?0:1)}}he.EMPTY=null,he.RED=!0,he.BLACK=!1;he.EMPTY=new class{constructor(){this.size=0}get key(){throw Y(57766)}get value(){throw Y(16141)}get color(){throw Y(16727)}get left(){throw Y(29726)}get right(){throw Y(36894)}copy(t,n,i,s,r){return this}insert(t,n,i){return new he(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(t){this.comparator=t,this.data=new Vt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,i)=>(t(n),!1))}forEachInRange(t,n){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,t[1])>=0)return;n(s.key)}}forEachWhile(t,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new $w(this.data.getIterator())}getIteratorFrom(t){return new $w(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(i=>{n=n.add(i)}),n}isEqual(t){if(!(t instanceof te)||this.size!==t.size)return!1;const n=this.data.getIterator(),i=t.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,r=i.getNext().key;if(this.comparator(s,r)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new te(this.comparator);return n.data=t,n}}class $w{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(t){this.fields=t,t.sort(de.comparator)}static empty(){return new Xe([])}unionWith(t){let n=new te(de.comparator);for(const i of this.fields)n=n.add(i);for(const i of t)n=n.add(i);return new Xe(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Po(this.fields,t.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(s){try{return atob(s)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new gI("Invalid base64 string: "+r):r}}(t);return new me(n)}static fromUint8Array(t){const n=function(s){let r="";for(let o=0;o<s.length;++o)r+=String.fromCharCode(s[o]);return r}(t);return new me(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return ct(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}me.EMPTY_BYTE_STRING=new me("");const QN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _s(e){if(_t(!!e,39018),typeof e=="string"){let t=0;const n=QN.exec(e);if(_t(!!n,46558,{timestamp:e}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),t=Number(s)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Ut(e.seconds),nanos:Ut(e.nanos)}}function Ut(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function vs(e){return typeof e=="string"?me.fromBase64String(e):me.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI="server_timestamp",_I="__type__",vI="__previous_value__",wI="__local_write_time__";function Ry(e){var n,i;return((i=(((n=e==null?void 0:e.mapValue)==null?void 0:n.fields)||{})[_I])==null?void 0:i.stringValue)===yI}function Rd(e){const t=e.mapValue.fields[vI];return Ry(t)?Rd(t):t}function Fl(e){const t=_s(e.mapValue.fields[wI].timestampValue);return new pt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(t,n,i,s,r,o,a,l,u,c){this.databaseId=t,this.appId=n,this.persistenceKey=i,this.host=s,this.ssl=r,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=c}}const Vh="(default)";class jl{constructor(t,n){this.projectId=t,this.database=n||Vh}static empty(){return new jl("","")}get isDefaultDatabase(){return this.database===Vh}isEqual(t){return t instanceof jl&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TI="__type__",JN="__max__",rc={mapValue:{}},xI="__vector__",Lh="value";function ws(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Ry(e)?4:tO(e)?9007199254740991:ZN(e)?10:11:Y(28295,{value:e})}function ei(e,t){if(e===t)return!0;const n=ws(e);if(n!==ws(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Fl(e).isEqual(Fl(t));case 3:return function(s,r){if(typeof s.timestampValue=="string"&&typeof r.timestampValue=="string"&&s.timestampValue.length===r.timestampValue.length)return s.timestampValue===r.timestampValue;const o=_s(s.timestampValue),a=_s(r.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(s,r){return vs(s.bytesValue).isEqual(vs(r.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(s,r){return Ut(s.geoPointValue.latitude)===Ut(r.geoPointValue.latitude)&&Ut(s.geoPointValue.longitude)===Ut(r.geoPointValue.longitude)}(e,t);case 2:return function(s,r){if("integerValue"in s&&"integerValue"in r)return Ut(s.integerValue)===Ut(r.integerValue);if("doubleValue"in s&&"doubleValue"in r){const o=Ut(s.doubleValue),a=Ut(r.doubleValue);return o===a?Oh(o)===Oh(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return Po(e.arrayValue.values||[],t.arrayValue.values||[],ei);case 10:case 11:return function(s,r){const o=s.mapValue.fields||{},a=r.mapValue.fields||{};if(zw(o)!==zw(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!ei(o[l],a[l])))return!1;return!0}(e,t);default:return Y(52216,{left:e})}}function Bl(e,t){return(e.values||[]).find(n=>ei(n,t))!==void 0}function Ro(e,t){if(e===t)return 0;const n=ws(e),i=ws(t);if(n!==i)return ct(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return ct(e.booleanValue,t.booleanValue);case 2:return function(r,o){const a=Ut(r.integerValue||r.doubleValue),l=Ut(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(e,t);case 3:return Ww(e.timestampValue,t.timestampValue);case 4:return Ww(Fl(e),Fl(t));case 5:return Mm(e.stringValue,t.stringValue);case 6:return function(r,o){const a=vs(r),l=vs(o);return a.compareTo(l)}(e.bytesValue,t.bytesValue);case 7:return function(r,o){const a=r.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const c=ct(a[u],l[u]);if(c!==0)return c}return ct(a.length,l.length)}(e.referenceValue,t.referenceValue);case 8:return function(r,o){const a=ct(Ut(r.latitude),Ut(o.latitude));return a!==0?a:ct(Ut(r.longitude),Ut(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Hw(e.arrayValue,t.arrayValue);case 10:return function(r,o){var f,m,y,_;const a=r.fields||{},l=o.fields||{},u=(f=a[Lh])==null?void 0:f.arrayValue,c=(m=l[Lh])==null?void 0:m.arrayValue,d=ct(((y=u==null?void 0:u.values)==null?void 0:y.length)||0,((_=c==null?void 0:c.values)==null?void 0:_.length)||0);return d!==0?d:Hw(u,c)}(e.mapValue,t.mapValue);case 11:return function(r,o){if(r===rc.mapValue&&o===rc.mapValue)return 0;if(r===rc.mapValue)return 1;if(o===rc.mapValue)return-1;const a=r.fields||{},l=Object.keys(a),u=o.fields||{},c=Object.keys(u);l.sort(),c.sort();for(let d=0;d<l.length&&d<c.length;++d){const f=Mm(l[d],c[d]);if(f!==0)return f;const m=Ro(a[l[d]],u[c[d]]);if(m!==0)return m}return ct(l.length,c.length)}(e.mapValue,t.mapValue);default:throw Y(23264,{he:n})}}function Ww(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return ct(e,t);const n=_s(e),i=_s(t),s=ct(n.seconds,i.seconds);return s!==0?s:ct(n.nanos,i.nanos)}function Hw(e,t){const n=e.values||[],i=t.values||[];for(let s=0;s<n.length&&s<i.length;++s){const r=Ro(n[s],i[s]);if(r)return r}return ct(n.length,i.length)}function Do(e){return Nm(e)}function Nm(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const i=_s(n);return`time(${i.seconds},${i.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return vs(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return G.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let i="[",s=!0;for(const r of n.values||[])s?s=!1:i+=",",i+=Nm(r);return i+"]"}(e.arrayValue):"mapValue"in e?function(n){const i=Object.keys(n.fields||{}).sort();let s="{",r=!0;for(const o of i)r?r=!1:s+=",",s+=`${o}:${Nm(n.fields[o])}`;return s+"}"}(e.mapValue):Y(61005,{value:e})}function $c(e){switch(ws(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Rd(e);return t?16+$c(t):16;case 5:return 2*e.stringValue.length;case 6:return vs(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((s,r)=>s+$c(r),0)}(e.arrayValue);case 10:case 11:return function(i){let s=0;return Ps(i.fields,(r,o)=>{s+=r.length+$c(o)}),s}(e.mapValue);default:throw Y(13486,{value:e})}}function qw(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Om(e){return!!e&&"integerValue"in e}function Dy(e){return!!e&&"arrayValue"in e}function Kw(e){return!!e&&"nullValue"in e}function Gw(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Wc(e){return!!e&&"mapValue"in e}function ZN(e){var n,i;return((i=(((n=e==null?void 0:e.mapValue)==null?void 0:n.fields)||{})[TI])==null?void 0:i.stringValue)===xI}function rl(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return Ps(e.mapValue.fields,(n,i)=>t.mapValue.fields[n]=rl(i)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=rl(e.arrayValue.values[n]);return t}return{...e}}function tO(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===JN}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(t){this.value=t}static empty(){return new Be({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let i=0;i<t.length-1;++i)if(n=(n.mapValue.fields||{})[t.get(i)],!Wc(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=rl(n)}setAll(t){let n=de.emptyPath(),i={},s=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,i,s),i={},s=[],n=a.popLast()}o?i[a.lastSegment()]=rl(o):s.push(a.lastSegment())});const r=this.getFieldsMap(n);this.applyChanges(r,i,s)}delete(t){const n=this.field(t.popLast());Wc(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return ei(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<t.length;++i){let s=n.mapValue.fields[t.get(i)];Wc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[t.get(i)]=s),n=s}return n.mapValue.fields}applyChanges(t,n,i){Ps(n,(s,r)=>t[s]=r);for(const s of i)delete t[s]}clone(){return new Be(rl(this.value))}}function EI(e){const t=[];return Ps(e.fields,(n,i)=>{const s=new de([n]);if(Wc(i)){const r=EI(i.mapValue).fields;if(r.length===0)t.push(s);else for(const o of r)t.push(s.child(o))}else t.push(s)}),new Xe(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(t,n,i,s,r,o,a){this.key=t,this.documentType=n,this.version=i,this.readTime=s,this.createTime=r,this.data=o,this.documentState=a}static newInvalidDocument(t){return new Ee(t,0,tt.min(),tt.min(),tt.min(),Be.empty(),0)}static newFoundDocument(t,n,i,s){return new Ee(t,1,n,tt.min(),i,s,0)}static newNoDocument(t,n){return new Ee(t,2,n,tt.min(),tt.min(),Be.empty(),0)}static newUnknownDocument(t,n){return new Ee(t,3,n,tt.min(),tt.min(),Be.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(tt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Be.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Be.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=tt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Ee&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Ee(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(t,n){this.position=t,this.inclusive=n}}function Yw(e,t,n){let i=0;for(let s=0;s<e.position.length;s++){const r=t[s],o=e.position[s];if(r.field.isKeyField()?i=G.comparator(G.fromName(o.referenceValue),n.key):i=Ro(o,n.data.field(r.field)),r.dir==="desc"&&(i*=-1),i!==0)break}return i}function Qw(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!ei(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(t,n="asc"){this.field=t,this.dir=n}}function eO(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{}class Kt extends SI{constructor(t,n,i){super(),this.field=t,this.op=n,this.value=i}static create(t,n,i){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,i):new iO(t,n,i):n==="array-contains"?new oO(t,i):n==="in"?new aO(t,i):n==="not-in"?new lO(t,i):n==="array-contains-any"?new uO(t,i):new Kt(t,n,i)}static createKeyFieldInFilter(t,n,i){return n==="in"?new sO(t,i):new rO(t,i)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ro(n,this.value)):n!==null&&ws(this.value)===ws(n)&&this.matchesComparison(Ro(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Y(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Cn extends SI{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new Cn(t,n)}matches(t){return bI(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function bI(e){return e.op==="and"}function II(e){return nO(e)&&bI(e)}function nO(e){for(const t of e.filters)if(t instanceof Cn)return!1;return!0}function Vm(e){if(e instanceof Kt)return e.field.canonicalString()+e.op.toString()+Do(e.value);if(II(e))return e.filters.map(t=>Vm(t)).join(",");{const t=e.filters.map(n=>Vm(n)).join(",");return`${e.op}(${t})`}}function AI(e,t){return e instanceof Kt?function(i,s){return s instanceof Kt&&i.op===s.op&&i.field.isEqual(s.field)&&ei(i.value,s.value)}(e,t):e instanceof Cn?function(i,s){return s instanceof Cn&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((r,o,a)=>r&&AI(o,s.filters[a]),!0):!1}(e,t):void Y(19439)}function kI(e){return e instanceof Kt?function(n){return`${n.field.canonicalString()} ${n.op} ${Do(n.value)}`}(e):e instanceof Cn?function(n){return n.op.toString()+" {"+n.getFilters().map(kI).join(" ,")+"}"}(e):"Filter"}class iO extends Kt{constructor(t,n,i){super(t,n,i),this.key=G.fromName(i.referenceValue)}matches(t){const n=G.comparator(t.key,this.key);return this.matchesComparison(n)}}class sO extends Kt{constructor(t,n){super(t,"in",n),this.keys=PI("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class rO extends Kt{constructor(t,n){super(t,"not-in",n),this.keys=PI("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function PI(e,t){var n;return(((n=t.arrayValue)==null?void 0:n.values)||[]).map(i=>G.fromName(i.referenceValue))}class oO extends Kt{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Dy(n)&&Bl(n.arrayValue,this.value)}}class aO extends Kt{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Bl(this.value.arrayValue,n)}}class lO extends Kt{constructor(t,n){super(t,"not-in",n)}matches(t){if(Bl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Bl(this.value.arrayValue,n)}}class uO extends Kt{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Dy(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Bl(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(t,n=null,i=[],s=[],r=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=i,this.filters=s,this.limit=r,this.startAt=o,this.endAt=a,this.Te=null}}function Xw(e,t=null,n=[],i=[],s=null,r=null,o=null){return new cO(e,t,n,i,s,r,o)}function My(e){const t=et(e);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(i=>Vm(i)).join(","),n+="|ob:",n+=t.orderBy.map(i=>function(r){return r.field.canonicalString()+r.dir}(i)).join(","),Cd(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(i=>Do(i)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(i=>Do(i)).join(",")),t.Te=n}return t.Te}function Ny(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!eO(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!AI(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Qw(e.startAt,t.startAt)&&Qw(e.endAt,t.endAt)}function Lm(e){return G.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(t,n=null,i=[],s=[],r=null,o="F",a=null,l=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=s,this.limit=r,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function hO(e,t,n,i,s,r,o,a){return new Qo(e,t,n,i,s,r,o,a)}function CI(e){return new Qo(e)}function Jw(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function RI(e){return e.collectionGroup!==null}function ol(e){const t=et(e);if(t.Ie===null){t.Ie=[];const n=new Set;for(const r of t.explicitOrderBy)t.Ie.push(r),n.add(r.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new te(de.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(t).forEach(r=>{n.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new Ul(r,i))}),n.has(de.keyField().canonicalString())||t.Ie.push(new Ul(de.keyField(),i))}return t.Ie}function Hn(e){const t=et(e);return t.Ee||(t.Ee=dO(t,ol(e))),t.Ee}function dO(e,t){if(e.limitType==="F")return Xw(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(s=>{const r=s.dir==="desc"?"asc":"desc";return new Ul(s.field,r)});const n=e.endAt?new Fh(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Fh(e.startAt.position,e.startAt.inclusive):null;return Xw(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}function Fm(e,t){const n=e.filters.concat([t]);return new Qo(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function jm(e,t,n){return new Qo(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Dd(e,t){return Ny(Hn(e),Hn(t))&&e.limitType===t.limitType}function DI(e){return`${My(Hn(e))}|lt:${e.limitType}`}function Vr(e){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(s=>kI(s)).join(", ")}]`),Cd(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(s=>Do(s)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(s=>Do(s)).join(",")),`Target(${i})`}(Hn(e))}; limitType=${e.limitType})`}function Md(e,t){return t.isFoundDocument()&&function(i,s){const r=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(r):G.isDocumentKey(i.path)?i.path.isEqual(r):i.path.isImmediateParentOf(r)}(e,t)&&function(i,s){for(const r of ol(i))if(!r.field.isKeyField()&&s.data.field(r.field)===null)return!1;return!0}(e,t)&&function(i,s){for(const r of i.filters)if(!r.matches(s))return!1;return!0}(e,t)&&function(i,s){return!(i.startAt&&!function(o,a,l){const u=Yw(o,a,l);return o.inclusive?u<=0:u<0}(i.startAt,ol(i),s)||i.endAt&&!function(o,a,l){const u=Yw(o,a,l);return o.inclusive?u>=0:u>0}(i.endAt,ol(i),s))}(e,t)}function fO(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function MI(e){return(t,n)=>{let i=!1;for(const s of ol(e)){const r=pO(s,t,n);if(r!==0)return r;i=i||s.field.isKeyField()}return 0}}function pO(e,t,n){const i=e.field.isKeyField()?G.comparator(t.key,n.key):function(r,o,a){const l=o.data.field(r),u=a.data.field(r);return l!==null&&u!==null?Ro(l,u):Y(42886)}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return Y(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i!==void 0){for(const[s,r]of i)if(this.equalsFn(s,t))return r}}has(t){return this.get(t)!==void 0}set(t,n){const i=this.mapKeyFn(t),s=this.inner[i];if(s===void 0)return this.inner[i]=[[t,n]],void this.innerSize++;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],t))return void(s[r]=[t,n]);s.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return i.length===1?delete this.inner[n]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(t){Ps(this.inner,(n,i)=>{for(const[s,r]of i)t(s,r)})}isEmpty(){return mI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mO=new Vt(G.comparator);function vi(){return mO}const NI=new Vt(G.comparator);function Ua(...e){let t=NI;for(const n of e)t=t.insert(n.key,n);return t}function OI(e){let t=NI;return e.forEach((n,i)=>t=t.insert(n,i.overlayedDocument)),t}function Js(){return al()}function VI(){return al()}function al(){return new Sr(e=>e.toString(),(e,t)=>e.isEqual(t))}const gO=new Vt(G.comparator),yO=new te(G.comparator);function ht(...e){let t=yO;for(const n of e)t=t.add(n);return t}const _O=new te(ct);function vO(){return _O}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oy(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Oh(t)?"-0":t}}function LI(e){return{integerValue:""+e}}function wO(e,t){return KN(t)?LI(t):Oy(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(){this._=void 0}}function TO(e,t,n){return e instanceof jh?function(s,r){const o={fields:{[_I]:{stringValue:yI},[wI]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return r&&Ry(r)&&(r=Rd(r)),r&&(o.fields[vI]=r),{mapValue:o}}(n,t):e instanceof zl?jI(e,t):e instanceof $l?BI(e,t):function(s,r){const o=FI(s,r),a=Zw(o)+Zw(s.Ae);return Om(o)&&Om(s.Ae)?LI(a):Oy(s.serializer,a)}(e,t)}function xO(e,t,n){return e instanceof zl?jI(e,t):e instanceof $l?BI(e,t):n}function FI(e,t){return e instanceof Bh?function(i){return Om(i)||function(r){return!!r&&"doubleValue"in r}(i)}(t)?t:{integerValue:0}:null}class jh extends Nd{}class zl extends Nd{constructor(t){super(),this.elements=t}}function jI(e,t){const n=UI(t);for(const i of e.elements)n.some(s=>ei(s,i))||n.push(i);return{arrayValue:{values:n}}}class $l extends Nd{constructor(t){super(),this.elements=t}}function BI(e,t){let n=UI(t);for(const i of e.elements)n=n.filter(s=>!ei(s,i));return{arrayValue:{values:n}}}class Bh extends Nd{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function Zw(e){return Ut(e.integerValue||e.doubleValue)}function UI(e){return Dy(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function EO(e,t){return e.field.isEqual(t.field)&&function(i,s){return i instanceof zl&&s instanceof zl||i instanceof $l&&s instanceof $l?Po(i.elements,s.elements,ei):i instanceof Bh&&s instanceof Bh?ei(i.Ae,s.Ae):i instanceof jh&&s instanceof jh}(e.transform,t.transform)}class SO{constructor(t,n){this.version=t,this.transformResults=n}}class tn{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new tn}static exists(t){return new tn(void 0,t)}static updateTime(t){return new tn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Hc(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Od{}function zI(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Vd(e.key,tn.none()):new fu(e.key,e.data,tn.none());{const n=e.data,i=Be.empty();let s=new te(de.comparator);for(let r of t.fields)if(!s.has(r)){let o=n.field(r);o===null&&r.length>1&&(r=r.popLast(),o=n.field(r)),o===null?i.delete(r):i.set(r,o),s=s.add(r)}return new Cs(e.key,i,new Xe(s.toArray()),tn.none())}}function bO(e,t,n){e instanceof fu?function(s,r,o){const a=s.value.clone(),l=eT(s.fieldTransforms,r,o.transformResults);a.setAll(l),r.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof Cs?function(s,r,o){if(!Hc(s.precondition,r))return void r.convertToUnknownDocument(o.version);const a=eT(s.fieldTransforms,r,o.transformResults),l=r.data;l.setAll($I(s)),l.setAll(a),r.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(e,t,n):function(s,r,o){r.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function ll(e,t,n,i){return e instanceof fu?function(r,o,a,l){if(!Hc(r.precondition,o))return a;const u=r.value.clone(),c=nT(r.fieldTransforms,l,o);return u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(e,t,n,i):e instanceof Cs?function(r,o,a,l){if(!Hc(r.precondition,o))return a;const u=nT(r.fieldTransforms,l,o),c=o.data;return c.setAll($I(r)),c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(d=>d.field))}(e,t,n,i):function(r,o,a){return Hc(r.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function IO(e,t){let n=null;for(const i of e.fieldTransforms){const s=t.data.field(i.field),r=FI(i.transform,s||null);r!=null&&(n===null&&(n=Be.empty()),n.set(i.field,r))}return n||null}function tT(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&Po(i,s,(r,o)=>EO(r,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class fu extends Od{constructor(t,n,i,s=[]){super(),this.key=t,this.value=n,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Cs extends Od{constructor(t,n,i,s,r=[]){super(),this.key=t,this.data=n,this.fieldMask=i,this.precondition=s,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function $I(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}}),t}function eT(e,t,n){const i=new Map;_t(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let s=0;s<n.length;s++){const r=e[s],o=r.transform,a=t.data.field(r.field);i.set(r.field,xO(o,a,n[s]))}return i}function nT(e,t,n){const i=new Map;for(const s of e){const r=s.transform,o=n.data.field(s.field);i.set(s.field,TO(r,o,t))}return i}class Vd extends Od{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class AO extends Od{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kO{constructor(t,n,i,s){this.batchId=t,this.localWriteTime=n,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(t,n){const i=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const r=this.mutations[s];r.key.isEqual(t.key)&&bO(r,t,i[s])}}applyToLocalView(t,n){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(n=ll(i,t,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(n=ll(i,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const i=VI();return this.mutations.forEach(s=>{const r=t.get(s.key),o=r.overlayedDocument;let a=this.applyToLocalView(o,r.mutatedFields);a=n.has(s.key)?null:a;const l=zI(o,a);l!==null&&i.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(tt.min())}),i}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),ht())}isEqual(t){return this.batchId===t.batchId&&Po(this.mutations,t.mutations,(n,i)=>tT(n,i))&&Po(this.baseMutations,t.baseMutations,(n,i)=>tT(n,i))}}class Vy{constructor(t,n,i,s){this.batch=t,this.commitVersion=n,this.mutationResults=i,this.docVersions=s}static from(t,n,i){_t(t.mutations.length===i.length,58842,{me:t.mutations.length,fe:i.length});let s=function(){return gO}();const r=t.mutations;for(let o=0;o<r.length;o++)s=s.insert(r[o].key,i[o].version);return new Vy(t,n,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PO{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CO{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wt,ft;function RO(e){switch(e){case L.OK:return Y(64938);case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0;default:return Y(15467,{code:e})}}function WI(e){if(e===void 0)return _i("GRPC error has no .code"),L.UNKNOWN;switch(e){case Wt.OK:return L.OK;case Wt.CANCELLED:return L.CANCELLED;case Wt.UNKNOWN:return L.UNKNOWN;case Wt.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case Wt.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case Wt.INTERNAL:return L.INTERNAL;case Wt.UNAVAILABLE:return L.UNAVAILABLE;case Wt.UNAUTHENTICATED:return L.UNAUTHENTICATED;case Wt.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case Wt.NOT_FOUND:return L.NOT_FOUND;case Wt.ALREADY_EXISTS:return L.ALREADY_EXISTS;case Wt.PERMISSION_DENIED:return L.PERMISSION_DENIED;case Wt.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case Wt.ABORTED:return L.ABORTED;case Wt.OUT_OF_RANGE:return L.OUT_OF_RANGE;case Wt.UNIMPLEMENTED:return L.UNIMPLEMENTED;case Wt.DATA_LOSS:return L.DATA_LOSS;default:return Y(39323,{code:e})}}(ft=Wt||(Wt={}))[ft.OK=0]="OK",ft[ft.CANCELLED=1]="CANCELLED",ft[ft.UNKNOWN=2]="UNKNOWN",ft[ft.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ft[ft.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ft[ft.NOT_FOUND=5]="NOT_FOUND",ft[ft.ALREADY_EXISTS=6]="ALREADY_EXISTS",ft[ft.PERMISSION_DENIED=7]="PERMISSION_DENIED",ft[ft.UNAUTHENTICATED=16]="UNAUTHENTICATED",ft[ft.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ft[ft.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ft[ft.ABORTED=10]="ABORTED",ft[ft.OUT_OF_RANGE=11]="OUT_OF_RANGE",ft[ft.UNIMPLEMENTED=12]="UNIMPLEMENTED",ft[ft.INTERNAL=13]="INTERNAL",ft[ft.UNAVAILABLE=14]="UNAVAILABLE",ft[ft.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DO(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MO=new hs([4294967295,4294967295],0);function iT(e){const t=DO().encode(e),n=new sI;return n.update(t),new Uint8Array(n.digest())}function sT(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),s=t.getUint32(8,!0),r=t.getUint32(12,!0);return[new hs([n,i],0),new hs([s,r],0)]}class Ly{constructor(t,n,i){if(this.bitmap=t,this.padding=n,this.hashCount=i,n<0||n>=8)throw new za(`Invalid padding: ${n}`);if(i<0)throw new za(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new za(`Invalid hash count: ${i}`);if(t.length===0&&n!==0)throw new za(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=hs.fromNumber(this.ge)}ye(t,n,i){let s=t.add(n.multiply(hs.fromNumber(i)));return s.compare(MO)===1&&(s=new hs([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=iT(t),[i,s]=sT(n);for(let r=0;r<this.hashCount;r++){const o=this.ye(i,s,r);if(!this.we(o))return!1}return!0}static create(t,n,i){const s=t%8==0?0:8-t%8,r=new Uint8Array(Math.ceil(t/8)),o=new Ly(r,s,n);return i.forEach(a=>o.insert(a)),o}insert(t){if(this.ge===0)return;const n=iT(t),[i,s]=sT(n);for(let r=0;r<this.hashCount;r++){const o=this.ye(i,s,r);this.Se(o)}}Se(t){const n=Math.floor(t/8),i=t%8;this.bitmap[n]|=1<<i}}class za extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(t,n,i,s,r){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(t,n,i){const s=new Map;return s.set(t,pu.createSynthesizedTargetChangeForCurrentChange(t,n,i)),new Ld(tt.min(),s,new Vt(ct),vi(),ht())}}class pu{constructor(t,n,i,s,r){this.resumeToken=t,this.current=n,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(t,n,i){return new pu(i,n,ht(),ht(),ht())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(t,n,i,s){this.be=t,this.removedTargetIds=n,this.key=i,this.De=s}}class HI{constructor(t,n){this.targetId=t,this.Ce=n}}class qI{constructor(t,n,i=me.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=n,this.resumeToken=i,this.cause=s}}class rT{constructor(){this.ve=0,this.Fe=oT(),this.Me=me.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=ht(),n=ht(),i=ht();return this.Fe.forEach((s,r)=>{switch(r){case 0:t=t.add(s);break;case 2:n=n.add(s);break;case 1:i=i.add(s);break;default:Y(38017,{changeType:r})}}),new pu(this.Me,this.xe,t,n,i)}qe(){this.Oe=!1,this.Fe=oT()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,_t(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class NO{constructor(t){this.Ge=t,this.ze=new Map,this.je=vi(),this.Je=oc(),this.He=oc(),this.Ye=new Vt(ct)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,n=>{const i=this.nt(n);switch(t.state){case 0:this.rt(n)&&i.Le(t.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(t.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(t.resumeToken));break;default:Y(56790,{state:t.state})}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach((i,s)=>{this.rt(s)&&n(s)})}st(t){const n=t.targetId,i=t.Ce.count,s=this.ot(n);if(s){const r=s.target;if(Lm(r))if(i===0){const o=new G(r.path);this.et(n,o,Ee.newNoDocument(o,tt.min()))}else _t(i===1,20013,{expectedCount:i});else{const o=this._t(n);if(o!==i){const a=this.ut(t),l=a?this.ct(a,t,o):1;if(l!==0){this.it(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:r=0}=n;let o,a;try{o=vs(i).toUint8Array()}catch(l){if(l instanceof gI)return ko("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Ly(o,s,r)}catch(l){return ko(l instanceof za?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(t,n,i){return n.Ce.count===i-this.Pt(t,n.targetId)?0:2}Pt(t,n){const i=this.Ge.getRemoteKeysForTarget(n);let s=0;return i.forEach(r=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${r.path.canonicalString()}`;t.mightContain(a)||(this.et(n,r,null),s++)}),s}Tt(t){const n=new Map;this.ze.forEach((r,o)=>{const a=this.ot(o);if(a){if(r.current&&Lm(a.target)){const l=new G(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,Ee.newNoDocument(l,t))}r.Be&&(n.set(o,r.ke()),r.qe())}});let i=ht();this.He.forEach((r,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(r))}),this.je.forEach((r,o)=>o.setReadTime(t));const s=new Ld(t,n,this.Ye,this.je,i);return this.je=vi(),this.Je=oc(),this.He=oc(),this.Ye=new Vt(ct),s}Xe(t,n){if(!this.rt(t))return;const i=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,i){if(!this.rt(t))return;const s=this.nt(t);this.Et(t,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),i&&(this.je=this.je.insert(n,i))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new rT,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new te(ct),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new te(ct),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||W("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new rT),this.Ge.getRemoteKeysForTarget(t).forEach(n=>{this.et(t,n,null)})}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function oc(){return new Vt(G.comparator)}function oT(){return new Vt(G.comparator)}const OO={asc:"ASCENDING",desc:"DESCENDING"},VO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},LO={and:"AND",or:"OR"};class FO{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function Bm(e,t){return e.useProto3Json||Cd(t)?t:{value:t}}function Uh(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function KI(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function jO(e,t){return Uh(e,t.toTimestamp())}function qn(e){return _t(!!e,49232),tt.fromTimestamp(function(n){const i=_s(n);return new pt(i.seconds,i.nanos)}(e))}function Fy(e,t){return Um(e,t).canonicalString()}function Um(e,t){const n=function(s){return new Et(["projects",s.projectId,"databases",s.database])}(e).child("documents");return t===void 0?n:n.child(t)}function GI(e){const t=Et.fromString(e);return _t(ZI(t),10190,{key:t.toString()}),t}function zm(e,t){return Fy(e.databaseId,t.path)}function tp(e,t){const n=GI(t);if(n.get(1)!==e.databaseId.projectId)throw new $(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new $(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new G(QI(n))}function YI(e,t){return Fy(e.databaseId,t)}function BO(e){const t=GI(e);return t.length===4?Et.emptyPath():QI(t)}function $m(e){return new Et(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function QI(e){return _t(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function aT(e,t,n){return{name:zm(e,t),fields:n.value.mapValue.fields}}function UO(e,t){let n;if("targetChange"in t){t.targetChange;const i=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Y(39313,{state:u})}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],r=function(u,c){return u.useProto3Json?(_t(c===void 0||typeof c=="string",58123),me.fromBase64String(c||"")):(_t(c===void 0||c instanceof Buffer||c instanceof Uint8Array,16193),me.fromUint8Array(c||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(u){const c=u.code===void 0?L.UNKNOWN:WI(u.code);return new $(c,u.message||"")}(o);n=new qI(i,s,r,a||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const s=tp(e,i.document.name),r=qn(i.document.updateTime),o=i.document.createTime?qn(i.document.createTime):tt.min(),a=new Be({mapValue:{fields:i.document.fields}}),l=Ee.newFoundDocument(s,r,o,a),u=i.targetIds||[],c=i.removedTargetIds||[];n=new qc(u,c,l.key,l)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const s=tp(e,i.document),r=i.readTime?qn(i.readTime):tt.min(),o=Ee.newNoDocument(s,r),a=i.removedTargetIds||[];n=new qc([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const s=tp(e,i.document),r=i.removedTargetIds||[];n=new qc([],r,s,null)}else{if(!("filter"in t))return Y(11601,{Rt:t});{t.filter;const i=t.filter;i.targetId;const{count:s=0,unchangedNames:r}=i,o=new CO(s,r),a=i.targetId;n=new HI(a,o)}}return n}function zO(e,t){let n;if(t instanceof fu)n={update:aT(e,t.key,t.value)};else if(t instanceof Vd)n={delete:zm(e,t.key)};else if(t instanceof Cs)n={update:aT(e,t.key,t.data),updateMask:XO(t.fieldMask)};else{if(!(t instanceof AO))return Y(16599,{Vt:t.type});n={verify:zm(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(i=>function(r,o){const a=o.transform;if(a instanceof jh)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof zl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof $l)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Bh)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw Y(20930,{transform:o.transform})}(0,i))),t.precondition.isNone||(n.currentDocument=function(s,r){return r.updateTime!==void 0?{updateTime:jO(s,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:Y(27497)}(e,t.precondition)),n}function $O(e,t){return e&&e.length>0?(_t(t!==void 0,14353),e.map(n=>function(s,r){let o=s.updateTime?qn(s.updateTime):qn(r);return o.isEqual(tt.min())&&(o=qn(r)),new SO(o,s.transformResults||[])}(n,t))):[]}function WO(e,t){return{documents:[YI(e,t.path)]}}function HO(e,t){const n={structuredQuery:{}},i=t.path;let s;t.collectionGroup!==null?(s=i,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=YI(e,s);const r=function(u){if(u.length!==0)return JI(Cn.create(u,"and"))}(t.filters);r&&(n.structuredQuery.where=r);const o=function(u){if(u.length!==0)return u.map(c=>function(f){return{field:Lr(f.field),direction:GO(f.dir)}}(c))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Bm(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(t.endAt)),{ft:n,parent:s}}function qO(e){let t=BO(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){_t(i===1,65062);const c=n.from[0];c.allDescendants?s=c.collectionId:t=t.child(c.collectionId)}let r=[];n.where&&(r=function(d){const f=XI(d);return f instanceof Cn&&II(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(f=>function(y){return new Ul(Fr(y.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,Cd(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,m=d.values||[];return new Fh(m,f)}(n.startAt));let u=null;return n.endAt&&(u=function(d){const f=!d.before,m=d.values||[];return new Fh(m,f)}(n.endAt)),hO(t,s,o,r,a,"F",l,u)}function KO(e,t){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Y(28987,{purpose:s})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function XI(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Fr(n.unaryFilter.field);return Kt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=Fr(n.unaryFilter.field);return Kt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Fr(n.unaryFilter.field);return Kt.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Fr(n.unaryFilter.field);return Kt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Y(61313);default:return Y(60726)}}(e):e.fieldFilter!==void 0?function(n){return Kt.create(Fr(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Y(58110);default:return Y(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return Cn.create(n.compositeFilter.filters.map(i=>XI(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Y(1026)}}(n.compositeFilter.op))}(e):Y(30097,{filter:e})}function GO(e){return OO[e]}function YO(e){return VO[e]}function QO(e){return LO[e]}function Lr(e){return{fieldPath:e.canonicalString()}}function Fr(e){return de.fromServerFormat(e.fieldPath)}function JI(e){return e instanceof Kt?function(n){if(n.op==="=="){if(Gw(n.value))return{unaryFilter:{field:Lr(n.field),op:"IS_NAN"}};if(Kw(n.value))return{unaryFilter:{field:Lr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Gw(n.value))return{unaryFilter:{field:Lr(n.field),op:"IS_NOT_NAN"}};if(Kw(n.value))return{unaryFilter:{field:Lr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Lr(n.field),op:YO(n.op),value:n.value}}}(e):e instanceof Cn?function(n){const i=n.getFilters().map(s=>JI(s));return i.length===1?i[0]:{compositeFilter:{op:QO(n.op),filters:i}}}(e):Y(54877,{filter:e})}function XO(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function ZI(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(t,n,i,s,r=tt.min(),o=tt.min(),a=me.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=n,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(t){return new Qi(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Qi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Qi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Qi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JO{constructor(t){this.yt=t}}function ZO(e){const t=qO({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?jm(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tV{constructor(){this.Cn=new eV}addToCollectionParentIndex(t,n){return this.Cn.add(n),j.resolve()}getCollectionParents(t,n){return j.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return j.resolve()}deleteFieldIndex(t,n){return j.resolve()}deleteAllFieldIndexes(t){return j.resolve()}createTargetIndexes(t,n){return j.resolve()}getDocumentsMatchingTarget(t,n){return j.resolve(null)}getIndexType(t,n){return j.resolve(0)}getFieldIndexes(t,n){return j.resolve([])}getNextCollectionGroupToUpdate(t){return j.resolve(null)}getMinOffset(t,n){return j.resolve(ys.min())}getMinOffsetFromCollectionGroup(t,n){return j.resolve(ys.min())}updateCollectionGroup(t,n,i){return j.resolve()}updateIndexEntries(t,n){return j.resolve()}}class eV{constructor(){this.index={}}add(t){const n=t.lastSegment(),i=t.popLast(),s=this.index[n]||new te(Et.comparator),r=!s.has(i);return this.index[n]=s.add(i),r}has(t){const n=t.lastSegment(),i=t.popLast(),s=this.index[n];return s&&s.has(i)}getEntries(t){return(this.index[t]||new te(Et.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},tA=41943040;class Fe{static withCacheSize(t){return new Fe(t,Fe.DEFAULT_COLLECTION_PERCENTILE,Fe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Fe.DEFAULT_COLLECTION_PERCENTILE=10,Fe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fe.DEFAULT=new Fe(tA,Fe.DEFAULT_COLLECTION_PERCENTILE,Fe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fe.DISABLED=new Fe(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Mo(0)}static cr(){return new Mo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT="LruGarbageCollector",nV=1048576;function cT([e,t],[n,i]){const s=ct(e,n);return s===0?ct(t,i):s}class iV{constructor(t){this.Ir=t,this.buffer=new te(cT),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();cT(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class sV{constructor(t,n,i){this.garbageCollector=t,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){W(uT,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Yo(n)?W(uT,"Ignoring IndexedDB error during garbage collection: ",n):await Go(n)}await this.Vr(3e5)})}}class rV{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next(i=>Math.floor(n/100*i))}nthSequenceNumber(t,n){if(n===0)return j.resolve(Pd.ce);const i=new iV(n);return this.mr.forEachTarget(t,s=>i.Ar(s.sequenceNumber)).next(()=>this.mr.pr(t,s=>i.Ar(s))).next(()=>i.maxValue)}removeTargets(t,n,i){return this.mr.removeTargets(t,n,i)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(W("LruGarbageCollector","Garbage collection skipped; disabled"),j.resolve(lT)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(W("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),lT):this.yr(t,n))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let i,s,r,o,a,l,u;const c=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(W("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),s=this.params.maximumSequenceNumbersToCollect):s=d,o=Date.now(),this.nthSequenceNumber(t,s))).next(d=>(i=d,a=Date.now(),this.removeTargets(t,i,n))).next(d=>(r=d,l=Date.now(),this.removeOrphanedDocuments(t,i))).next(d=>(u=Date.now(),Or()<=ut.DEBUG&&W("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-c}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${r} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(u-l)+`ms
Total Duration: ${u-c}ms`),j.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:r,documentsRemoved:d})))}}function oV(e,t){return new rV(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aV{constructor(){this.changes=new Sr(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Ee.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?j.resolve(i):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lV{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uV{constructor(t,n,i,s){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=s}getDocument(t,n){let i=null;return this.documentOverlayCache.getOverlay(t,n).next(s=>(i=s,this.remoteDocumentCache.getEntry(t,n))).next(s=>(i!==null&&ll(i.mutation,s,Xe.empty(),pt.now()),s))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.getLocalViewOfDocuments(t,i,ht()).next(()=>i))}getLocalViewOfDocuments(t,n,i=ht()){const s=Js();return this.populateOverlays(t,s,n).next(()=>this.computeViews(t,n,s,i).next(r=>{let o=Ua();return r.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const i=Js();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,ht()))}populateOverlays(t,n,i){const s=[];return i.forEach(r=>{n.has(r)||s.push(r)}),this.documentOverlayCache.getOverlays(t,s).next(r=>{r.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,i,s){let r=vi();const o=al(),a=function(){return al()}();return n.forEach((l,u)=>{const c=i.get(u.key);s.has(u.key)&&(c===void 0||c.mutation instanceof Cs)?r=r.insert(u.key,u):c!==void 0?(o.set(u.key,c.mutation.getFieldMask()),ll(c.mutation,u,c.mutation.getFieldMask(),pt.now())):o.set(u.key,Xe.empty())}),this.recalculateAndSaveOverlays(t,r).next(l=>(l.forEach((u,c)=>o.set(u,c)),n.forEach((u,c)=>a.set(u,new lV(c,o.get(u)??null))),a))}recalculateAndSaveOverlays(t,n){const i=al();let s=new Vt((o,a)=>o-a),r=ht();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let c=i.get(l)||Xe.empty();c=a.applyToLocalView(u,c),i.set(l,c);const d=(s.get(a.batchId)||ht()).add(l);s=s.insert(a.batchId,d)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,c=l.value,d=VI();c.forEach(f=>{if(!r.has(f)){const m=zI(n.get(f),i.get(f));m!==null&&d.set(f,m),r=r.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(t,u,d))}return j.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,n,i,s){return function(o){return G.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):RI(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,i,s):this.getDocumentsMatchingCollectionQuery(t,n,i,s)}getNextDocuments(t,n,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,i,s).next(r=>{const o=s-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,i.largestBatchId,s-r.size):j.resolve(Js());let a=Ll,l=r;return o.next(u=>j.forEach(u,(c,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),r.get(c)?j.resolve():this.remoteDocumentCache.getEntry(t,c).next(f=>{l=l.insert(c,f)}))).next(()=>this.populateOverlays(t,u,r)).next(()=>this.computeViews(t,l,u,ht())).next(c=>({batchId:a,changes:OI(c)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new G(n)).next(i=>{let s=Ua();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(t,n,i,s){const r=n.collectionGroup;let o=Ua();return this.indexManager.getCollectionParents(t,r).next(a=>j.forEach(a,l=>{const u=function(d,f){return new Qo(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(r));return this.getDocumentsMatchingCollectionQuery(t,u,i,s).next(c=>{c.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,i,s){let r;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,i.largestBatchId).next(o=>(r=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,i,r,s))).next(o=>{r.forEach((l,u)=>{const c=u.getKey();o.get(c)===null&&(o=o.insert(c,Ee.newInvalidDocument(c)))});let a=Ua();return o.forEach((l,u)=>{const c=r.get(l);c!==void 0&&ll(c.mutation,u,Xe.empty(),pt.now()),Md(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cV{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return j.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:qn(s.createTime)}}(n)),j.resolve()}getNamedQuery(t,n){return j.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,function(s){return{name:s.name,query:ZO(s.bundledQuery),readTime:qn(s.readTime)}}(n)),j.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hV{constructor(){this.overlays=new Vt(G.comparator),this.qr=new Map}getOverlay(t,n){return j.resolve(this.overlays.get(n))}getOverlays(t,n){const i=Js();return j.forEach(n,s=>this.getOverlay(t,s).next(r=>{r!==null&&i.set(s,r)})).next(()=>i)}saveOverlays(t,n,i){return i.forEach((s,r)=>{this.St(t,n,r)}),j.resolve()}removeOverlaysForBatchId(t,n,i){const s=this.qr.get(i);return s!==void 0&&(s.forEach(r=>this.overlays=this.overlays.remove(r)),this.qr.delete(i)),j.resolve()}getOverlaysForCollection(t,n,i){const s=Js(),r=n.length+1,o=new G(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===r&&l.largestBatchId>i&&s.set(l.getKey(),l)}return j.resolve(s)}getOverlaysForCollectionGroup(t,n,i,s){let r=new Vt((u,c)=>u-c);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>i){let c=r.get(u.largestBatchId);c===null&&(c=Js(),r=r.insert(u.largestBatchId,c)),c.set(u.getKey(),u)}}const a=Js(),l=r.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,c)=>a.set(u,c)),!(a.size()>=s)););return j.resolve(a)}St(t,n,i){const s=this.overlays.get(i.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(i.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new PO(n,i));let r=this.qr.get(n);r===void 0&&(r=ht(),this.qr.set(n,r)),this.qr.set(n,r.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dV{constructor(){this.sessionToken=me.EMPTY_BYTE_STRING}getSessionToken(t){return j.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,j.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy{constructor(){this.Qr=new te(ie.$r),this.Ur=new te(ie.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const i=new ie(t,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(t,n){t.forEach(i=>this.addReference(i,n))}removeReference(t,n){this.Gr(new ie(t,n))}zr(t,n){t.forEach(i=>this.removeReference(i,n))}jr(t){const n=new G(new Et([])),i=new ie(n,t),s=new ie(n,t+1),r=[];return this.Ur.forEachInRange([i,s],o=>{this.Gr(o),r.push(o.key)}),r}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new G(new Et([])),i=new ie(n,t),s=new ie(n,t+1);let r=ht();return this.Ur.forEachInRange([i,s],o=>{r=r.add(o.key)}),r}containsKey(t){const n=new ie(t,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&t.isEqual(i.key)}}class ie{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return G.comparator(t.key,n.key)||ct(t.Yr,n.Yr)}static Kr(t,n){return ct(t.Yr,n.Yr)||G.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fV{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new te(ie.$r)}checkEmpty(t){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,i,s){const r=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new kO(r,n,i,s);this.mutationQueue.push(o);for(const a of s)this.Zr=this.Zr.add(new ie(a.key,r)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return j.resolve(o)}lookupMutationBatch(t,n){return j.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const i=n+1,s=this.ei(i),r=s<0?0:s;return j.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?Cy:this.tr-1)}getAllMutationBatches(t){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const i=new ie(n,0),s=new ie(n,Number.POSITIVE_INFINITY),r=[];return this.Zr.forEachInRange([i,s],o=>{const a=this.Xr(o.Yr);r.push(a)}),j.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,n){let i=new te(ct);return n.forEach(s=>{const r=new ie(s,0),o=new ie(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([r,o],a=>{i=i.add(a.Yr)})}),j.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(t,n){const i=n.path,s=i.length+1;let r=i;G.isDocumentKey(r)||(r=r.child(""));const o=new ie(new G(r),0);let a=new te(ct);return this.Zr.forEachWhile(l=>{const u=l.key.path;return!!i.isPrefixOf(u)&&(u.length===s&&(a=a.add(l.Yr)),!0)},o),j.resolve(this.ti(a))}ti(t){const n=[];return t.forEach(i=>{const s=this.Xr(i);s!==null&&n.push(s)}),n}removeMutationBatch(t,n){_t(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return j.forEach(n.mutations,s=>{const r=new ie(s.key,n.batchId);return i=i.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)}).next(()=>{this.Zr=i})}ir(t){}containsKey(t,n){const i=new ie(n,0),s=this.Zr.firstAfterOrEqual(i);return j.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,j.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pV{constructor(t){this.ri=t,this.docs=function(){return new Vt(G.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const i=n.key,s=this.docs.get(i),r=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:o}),this.size+=o-r,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const i=this.docs.get(n);return j.resolve(i?i.document.mutableCopy():Ee.newInvalidDocument(n))}getEntries(t,n){let i=vi();return n.forEach(s=>{const r=this.docs.get(s);i=i.insert(s,r?r.document.mutableCopy():Ee.newInvalidDocument(s))}),j.resolve(i)}getDocumentsMatchingQuery(t,n,i,s){let r=vi();const o=n.path,a=new G(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:c}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||$N(zN(c),i)<=0||(s.has(c.key)||Md(n,c))&&(r=r.insert(c.key,c.mutableCopy()))}return j.resolve(r)}getAllFromCollectionGroup(t,n,i,s){Y(9500)}ii(t,n){return j.forEach(this.docs,i=>n(i))}newChangeBuffer(t){return new mV(this)}getSize(t){return j.resolve(this.size)}}class mV extends aV{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(t,s)):this.Nr.removeEntry(i)}),j.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gV{constructor(t){this.persistence=t,this.si=new Sr(n=>My(n),Ny),this.lastRemoteSnapshotVersion=tt.min(),this.highestTargetId=0,this.oi=0,this._i=new jy,this.targetCount=0,this.ai=Mo.ur()}forEachTarget(t,n){return this.si.forEach((i,s)=>n(s)),j.resolve()}getLastRemoteSnapshotVersion(t){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return j.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(t,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),j.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new Mo(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,j.resolve()}updateTargetData(t,n){return this.Pr(n),j.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,j.resolve()}removeTargets(t,n,i){let s=0;const r=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.si.delete(o),r.push(this.removeMatchingKeysForTargetId(t,a.targetId)),s++)}),j.waitFor(r).next(()=>s)}getTargetCount(t){return j.resolve(this.targetCount)}getTargetData(t,n){const i=this.si.get(n)||null;return j.resolve(i)}addMatchingKeys(t,n,i){return this._i.Wr(n,i),j.resolve()}removeMatchingKeys(t,n,i){this._i.zr(n,i);const s=this.persistence.referenceDelegate,r=[];return s&&n.forEach(o=>{r.push(s.markPotentiallyOrphaned(t,o))}),j.waitFor(r)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),j.resolve()}getMatchingKeysForTargetId(t,n){const i=this._i.Hr(n);return j.resolve(i)}containsKey(t,n){return j.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(t,n){this.ui={},this.overlays={},this.ci=new Pd(0),this.li=!1,this.li=!0,this.hi=new dV,this.referenceDelegate=t(this),this.Pi=new gV(this),this.indexManager=new tV,this.remoteDocumentCache=function(s){return new pV(s)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new JO(n),this.Ii=new cV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new hV,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let i=this.ui[t.toKey()];return i||(i=new fV(n,this.referenceDelegate),this.ui[t.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,i){W("MemoryPersistence","Starting transaction:",t);const s=new yV(this.ci.next());return this.referenceDelegate.Ei(),i(s).next(r=>this.referenceDelegate.di(s).next(()=>r)).toPromise().then(r=>(s.raiseOnCommittedEvent(),r))}Ai(t,n){return j.or(Object.values(this.ui).map(i=>()=>i.containsKey(t,n)))}}class yV extends HN{constructor(t){super(),this.currentSequenceNumber=t}}class By{constructor(t){this.persistence=t,this.Ri=new jy,this.Vi=null}static mi(t){return new By(t)}get fi(){if(this.Vi)return this.Vi;throw Y(60996)}addReference(t,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),j.resolve()}removeReference(t,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),j.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),j.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,n.targetId).next(s=>{s.forEach(r=>this.fi.add(r.toString()))}).next(()=>i.removeTargetData(t,n))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.fi,i=>{const s=G.fromPath(i);return this.gi(t,s).next(r=>{r||n.removeEntry(s,tt.min())})}).next(()=>(this.Vi=null,n.apply(t)))}updateLimboDocument(t,n){return this.gi(t,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(t){return 0}gi(t,n){return j.or([()=>j.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class zh{constructor(t,n){this.persistence=t,this.pi=new Sr(i=>GN(i.path),(i,s)=>i.isEqual(s)),this.garbageCollector=oV(this,n)}static mi(t,n){return new zh(t,n)}Ei(){}di(t){return j.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(i=>n.next(s=>i+s))}wr(t){let n=0;return this.pr(t,i=>{n++}).next(()=>n)}pr(t,n){return j.forEach(this.pi,(i,s)=>this.br(t,i,s).next(r=>r?j.resolve():n(s)))}removeTargets(t,n,i){return this.persistence.getTargetCache().removeTargets(t,n,i)}removeOrphanedDocuments(t,n){let i=0;const s=this.persistence.getRemoteDocumentCache(),r=s.newChangeBuffer();return s.ii(t,o=>this.br(t,o,n).next(a=>{a||(i++,r.removeEntry(o,tt.min()))})).next(()=>r.apply(t)).next(()=>i)}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),j.resolve()}removeTarget(t,n){const i=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,n,i){return this.pi.set(i,t.currentSequenceNumber),j.resolve()}removeReference(t,n,i){return this.pi.set(i,t.currentSequenceNumber),j.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),j.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=$c(t.data.value)),n}br(t,n,i){return j.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const s=this.pi.get(n);return j.resolve(s!==void 0&&s>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy{constructor(t,n,i,s){this.targetId=t,this.fromCache=n,this.Es=i,this.ds=s}static As(t,n){let i=ht(),s=ht();for(const r of n.docChanges)switch(r.type){case 0:i=i.add(r.doc.key);break;case 1:s=s.add(r.doc.key)}return new Uy(t,n.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _V{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vV{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return cM()?8:qN(Ae())>0?6:4}()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,i,s){const r={result:null};return this.ys(t,n).next(o=>{r.result=o}).next(()=>{if(!r.result)return this.ws(t,n,s,i).next(o=>{r.result=o})}).next(()=>{if(r.result)return;const o=new _V;return this.Ss(t,n,o).next(a=>{if(r.result=a,this.Vs)return this.bs(t,n,o,a.size)})}).next(()=>r.result)}bs(t,n,i,s){return i.documentReadCount<this.fs?(Or()<=ut.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",Vr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),j.resolve()):(Or()<=ut.DEBUG&&W("QueryEngine","Query:",Vr(n),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.gs*s?(Or()<=ut.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",Vr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Hn(n))):j.resolve())}ys(t,n){if(Jw(n))return j.resolve(null);let i=Hn(n);return this.indexManager.getIndexType(t,i).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=jm(n,null,"F"),i=Hn(n)),this.indexManager.getDocumentsMatchingTarget(t,i).next(r=>{const o=ht(...r);return this.ps.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,i).next(l=>{const u=this.Ds(n,a);return this.Cs(n,u,o,l.readTime)?this.ys(t,jm(n,null,"F")):this.vs(t,u,n,l)}))})))}ws(t,n,i,s){return Jw(n)||s.isEqual(tt.min())?j.resolve(null):this.ps.getDocuments(t,i).next(r=>{const o=this.Ds(n,r);return this.Cs(n,o,i,s)?j.resolve(null):(Or()<=ut.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Vr(n)),this.vs(t,o,n,UN(s,Ll)).next(a=>a))})}Ds(t,n){let i=new te(MI(t));return n.forEach((s,r)=>{Md(t,r)&&(i=i.add(r))}),i}Cs(t,n,i,s){if(t.limit===null)return!1;if(i.size!==n.size)return!0;const r=t.limitType==="F"?n.last():n.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(s)>0)}Ss(t,n,i){return Or()<=ut.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",Vr(n)),this.ps.getDocumentsMatchingQuery(t,n,ys.min(),i)}vs(t,n,i,s){return this.ps.getDocumentsMatchingQuery(t,i,s).next(r=>(n.forEach(o=>{r=r.insert(o.key,o)}),r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zy="LocalStore",wV=3e8;class TV{constructor(t,n,i,s){this.persistence=t,this.Fs=n,this.serializer=s,this.Ms=new Vt(ct),this.xs=new Sr(r=>My(r),Ny),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(i)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new uV(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.Ms))}}function xV(e,t,n,i){return new TV(e,t,n,i)}async function nA(e,t){const n=et(e);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let s;return n.mutationQueue.getAllMutationBatches(i).next(r=>(s=r,n.Bs(t),n.mutationQueue.getAllMutationBatches(i))).next(r=>{const o=[],a=[];let l=ht();for(const u of s){o.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}for(const u of r){a.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}return n.localDocuments.getDocuments(i,l).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:a}))})})}function EV(e,t){const n=et(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=t.batch.keys(),r=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,l,u,c){const d=u.batch,f=d.keys();let m=j.resolve();return f.forEach(y=>{m=m.next(()=>c.getEntry(l,y)).next(_=>{const E=u.docVersions.get(y);_t(E!==null,48541),_.version.compareTo(E)<0&&(d.applyToRemoteDocument(_,u),_.isValidDocument()&&(_.setReadTime(u.commitVersion),c.addEntry(_)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,i,t,r).next(()=>r.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,s,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let l=ht();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(t))).next(()=>n.localDocuments.getDocuments(i,s))})}function iA(e){const t=et(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Pi.getLastRemoteSnapshotVersion(n))}function SV(e,t){const n=et(e),i=t.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const a=[];t.targetChanges.forEach((c,d)=>{const f=s.get(d);if(!f)return;a.push(n.Pi.removeMatchingKeys(r,c.removedDocuments,d).next(()=>n.Pi.addMatchingKeys(r,c.addedDocuments,d)));let m=f.withSequenceNumber(r.currentSequenceNumber);t.targetMismatches.get(d)!==null?m=m.withResumeToken(me.EMPTY_BYTE_STRING,tt.min()).withLastLimboFreeSnapshotVersion(tt.min()):c.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(c.resumeToken,i)),s=s.insert(d,m),function(_,E,v){return _.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=wV?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(f,m,c)&&a.push(n.Pi.updateTargetData(r,m))});let l=vi(),u=ht();if(t.documentUpdates.forEach(c=>{t.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(r,c))}),a.push(bV(r,o,t.documentUpdates).next(c=>{l=c.ks,u=c.qs})),!i.isEqual(tt.min())){const c=n.Pi.getLastRemoteSnapshotVersion(r).next(d=>n.Pi.setTargetsMetadata(r,r.currentSequenceNumber,i));a.push(c)}return j.waitFor(a).next(()=>o.apply(r)).next(()=>n.localDocuments.getLocalViewOfDocuments(r,l,u)).next(()=>l)}).then(r=>(n.Ms=s,r))}function bV(e,t,n){let i=ht(),s=ht();return n.forEach(r=>i=i.add(r)),t.getEntries(e,i).next(r=>{let o=vi();return n.forEach((a,l)=>{const u=r.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(tt.min())?(t.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(t.addEntry(l),o=o.insert(a,l)):W(zy,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{ks:o,qs:s}})}function IV(e,t){const n=et(e);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=Cy),n.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function AV(e,t){const n=et(e);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return n.Pi.getTargetData(i,t).next(r=>r?(s=r,j.resolve(s)):n.Pi.allocateTargetId(i).next(o=>(s=new Qi(t,o,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=n.Ms.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(t,i.targetId)),i})}async function Wm(e,t,n){const i=et(e),s=i.Ms.get(t),r=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",r,o=>i.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Yo(o))throw o;W(zy,`Failed to update sequence numbers for target ${t}: ${o}`)}i.Ms=i.Ms.remove(t),i.xs.delete(s.target)}function hT(e,t,n){const i=et(e);let s=tt.min(),r=ht();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,c){const d=et(l),f=d.xs.get(c);return f!==void 0?j.resolve(d.Ms.get(f)):d.Pi.getTargetData(u,c)}(i,o,Hn(t)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{r=l})}).next(()=>i.Fs.getDocumentsMatchingQuery(o,t,n?s:tt.min(),n?r:ht())).next(a=>(kV(i,fO(t),a),{documents:a,Qs:r})))}function kV(e,t,n){let i=e.Os.get(t)||tt.min();n.forEach((s,r)=>{r.readTime.compareTo(i)>0&&(i=r.readTime)}),e.Os.set(t,i)}class dT{constructor(){this.activeTargetIds=vO()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class PV{constructor(){this.Mo=new dT,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,i){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,i){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new dT,Promise.resolve()}handleUserChange(t,n,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CV{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fT="ConnectivityMonitor";class pT{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){W(fT,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){W(fT,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ac=null;function Hm(){return ac===null?ac=function(){return 268435456+Math.round(2147483648*Math.random())}():ac++,"0x"+ac.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ep="RestConnection",RV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class DV{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${i}/databases/${s}`,this.Wo=this.databaseId.database===Vh?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Go(t,n,i,s,r){const o=Hm(),a=this.zo(t,n.toUriEncodedString());W(ep,`Sending RPC '${t}' ${o}:`,a,i);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,s,r);const{host:u}=new URL(a),c=Ho(u);return this.Jo(t,a,l,i,c).then(d=>(W(ep,`Received RPC '${t}' ${o}: `,d),d),d=>{throw ko(ep,`RPC '${t}' ${o} failed with error: `,d,"url: ",a,"request:",i),d})}Ho(t,n,i,s,r,o){return this.Go(t,n,i,s,r)}jo(t,n,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ko}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,r)=>t[r]=s),i&&i.headers.forEach((s,r)=>t[r]=s)}zo(t,n){const i=RV[t];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MV{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ve="WebChannelConnection";class NV extends DV{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,i,s,r){const o=Hm();return new Promise((a,l)=>{const u=new rI;u.setWithCredentials(!0),u.listenOnce(oI.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case zc.NO_ERROR:const d=u.getResponseJson();W(ve,`XHR for RPC '${t}' ${o} received:`,JSON.stringify(d)),a(d);break;case zc.TIMEOUT:W(ve,`RPC '${t}' ${o} timed out`),l(new $(L.DEADLINE_EXCEEDED,"Request time out"));break;case zc.HTTP_ERROR:const f=u.getStatus();if(W(ve,`RPC '${t}' ${o} failed with status:`,f,"response text:",u.getResponseText()),f>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const y=m==null?void 0:m.error;if(y&&y.status&&y.message){const _=function(v){const T=v.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(T)>=0?T:L.UNKNOWN}(y.status);l(new $(_,y.message))}else l(new $(L.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new $(L.UNAVAILABLE,"Connection failed."));break;default:Y(9055,{l_:t,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{W(ve,`RPC '${t}' ${o} completed.`)}});const c=JSON.stringify(s);W(ve,`RPC '${t}' ${o} sending request:`,s),u.send(n,"POST",c,i,15)})}T_(t,n,i){const s=Hm(),r=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=uI(),a=lI(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,i),l.encodeInitMessageHeaders=!0;const c=r.join("");W(ve,`Creating RPC '${t}' stream ${s}: ${c}`,l);const d=o.createWebChannel(c,l);this.I_(d);let f=!1,m=!1;const y=new MV({Yo:E=>{m?W(ve,`Not sending because RPC '${t}' stream ${s} is closed:`,E):(f||(W(ve,`Opening RPC '${t}' stream ${s} transport.`),d.open(),f=!0),W(ve,`RPC '${t}' stream ${s} sending:`,E),d.send(E))},Zo:()=>d.close()}),_=(E,v,T)=>{E.listen(v,b=>{try{T(b)}catch(R){setTimeout(()=>{throw R},0)}})};return _(d,Ba.EventType.OPEN,()=>{m||(W(ve,`RPC '${t}' stream ${s} transport opened.`),y.o_())}),_(d,Ba.EventType.CLOSE,()=>{m||(m=!0,W(ve,`RPC '${t}' stream ${s} transport closed`),y.a_(),this.E_(d))}),_(d,Ba.EventType.ERROR,E=>{m||(m=!0,ko(ve,`RPC '${t}' stream ${s} transport errored. Name:`,E.name,"Message:",E.message),y.a_(new $(L.UNAVAILABLE,"The operation could not be completed")))}),_(d,Ba.EventType.MESSAGE,E=>{var v;if(!m){const T=E.data[0];_t(!!T,16349);const b=T,R=(b==null?void 0:b.error)||((v=b[0])==null?void 0:v.error);if(R){W(ve,`RPC '${t}' stream ${s} received error:`,R);const D=R.status;let N=function(x){const k=Wt[x];if(k!==void 0)return WI(k)}(D),S=R.message;N===void 0&&(N=L.INTERNAL,S="Unknown error status: "+D+" with message "+R.message),m=!0,y.a_(new $(N,S)),d.close()}else W(ve,`RPC '${t}' stream ${s} received:`,T),y.u_(T)}}),_(a,aI.STAT_EVENT,E=>{E.stat===Dm.PROXY?W(ve,`RPC '${t}' stream ${s} detected buffering proxy`):E.stat===Dm.NOPROXY&&W(ve,`RPC '${t}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{y.__()},0),y}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(n=>n===t)}}function np(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fd(e){return new FO(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(t,n,i=1e3,s=1.5,r=6e4){this.Mi=t,this.timerId=n,this.d_=i,this.A_=s,this.R_=r,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-i);s>0&&W("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mT="PersistentStream";class rA{constructor(t,n,i,s,r,o,a,l){this.Mi=t,this.S_=i,this.b_=s,this.connection=r,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new sA(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===L.RESOURCE_EXHAUSTED?(_i(n.toString()),_i("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.D_===n&&this.G_(i,s)},i=>{t(()=>{const s=new $(L.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(s)})})}G_(t,n){const i=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{i(()=>this.z_(s))}),this.stream.onMessage(s=>{i(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return W(mT,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget(()=>this.D_===t?n():(W(mT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class OV extends rA{constructor(t,n,i,s,r,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s,o),this.serializer=r}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=UO(this.serializer,t),i=function(r){if(!("targetChange"in r))return tt.min();const o=r.targetChange;return o.targetIds&&o.targetIds.length?tt.min():o.readTime?qn(o.readTime):tt.min()}(t);return this.listener.H_(n,i)}Y_(t){const n={};n.database=$m(this.serializer),n.addTarget=function(r,o){let a;const l=o.target;if(a=Lm(l)?{documents:WO(r,l)}:{query:HO(r,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=KI(r,o.resumeToken);const u=Bm(r,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(tt.min())>0){a.readTime=Uh(r,o.snapshotVersion.toTimestamp());const u=Bm(r,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,t);const i=KO(this.serializer,t);i&&(n.labels=i),this.q_(n)}Z_(t){const n={};n.database=$m(this.serializer),n.removeTarget=t,this.q_(n)}}class VV extends rA{constructor(t,n,i,s,r,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,s,o),this.serializer=r}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return _t(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,_t(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){_t(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=$O(t.writeResults,t.commitTime),i=qn(t.commitTime);return this.listener.na(i,n)}ra(){const t={};t.database=$m(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map(i=>zO(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LV{}class FV extends LV{constructor(t,n,i,s){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=i,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new $(L.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,o])=>this.connection.Go(t,Um(n,i),s,r,o)).catch(r=>{throw r.name==="FirebaseError"?(r.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new $(L.UNKNOWN,r.toString())})}Ho(t,n,i,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(t,Um(n,i),s,o,a,r)).catch(o=>{throw o.name==="FirebaseError"?(o.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new $(L.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class jV{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(_i(n),this.aa=!1):W("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _r="RemoteStore";class BV{constructor(t,n,i,s,r){this.localStore=t,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=r,this.Aa.Oo(o=>{i.enqueueAndForget(async()=>{br(this)&&(W(_r,"Restarting streams for network reachability change."),await async function(l){const u=et(l);u.Ea.add(4),await mu(u),u.Ra.set("Unknown"),u.Ea.delete(4),await jd(u)}(this))})}),this.Ra=new jV(i,s)}}async function jd(e){if(br(e))for(const t of e.da)await t(!0)}async function mu(e){for(const t of e.da)await t(!1)}function oA(e,t){const n=et(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),qy(n)?Hy(n):Xo(n).O_()&&Wy(n,t))}function $y(e,t){const n=et(e),i=Xo(n);n.Ia.delete(t),i.O_()&&aA(n,t),n.Ia.size===0&&(i.O_()?i.L_():br(n)&&n.Ra.set("Unknown"))}function Wy(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(tt.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Xo(e).Y_(t)}function aA(e,t){e.Va.Ue(t),Xo(e).Z_(t)}function Hy(e){e.Va=new NO({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),Xo(e).start(),e.Ra.ua()}function qy(e){return br(e)&&!Xo(e).x_()&&e.Ia.size>0}function br(e){return et(e).Ea.size===0}function lA(e){e.Va=void 0}async function UV(e){e.Ra.set("Online")}async function zV(e){e.Ia.forEach((t,n)=>{Wy(e,t)})}async function $V(e,t){lA(e),qy(e)?(e.Ra.ha(t),Hy(e)):e.Ra.set("Unknown")}async function WV(e,t,n){if(e.Ra.set("Online"),t instanceof qI&&t.state===2&&t.cause)try{await async function(s,r){const o=r.cause;for(const a of r.targetIds)s.Ia.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Ia.delete(a),s.Va.removeTarget(a))}(e,t)}catch(i){W(_r,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await $h(e,i)}else if(t instanceof qc?e.Va.Ze(t):t instanceof HI?e.Va.st(t):e.Va.tt(t),!n.isEqual(tt.min()))try{const i=await iA(e.localStore);n.compareTo(i)>=0&&await function(r,o){const a=r.Va.Tt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const c=r.Ia.get(u);c&&r.Ia.set(u,c.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const c=r.Ia.get(l);if(!c)return;r.Ia.set(l,c.withResumeToken(me.EMPTY_BYTE_STRING,c.snapshotVersion)),aA(r,l);const d=new Qi(c.target,l,u,c.sequenceNumber);Wy(r,d)}),r.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(i){W(_r,"Failed to raise snapshot:",i),await $h(e,i)}}async function $h(e,t,n){if(!Yo(t))throw t;e.Ea.add(1),await mu(e),e.Ra.set("Offline"),n||(n=()=>iA(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{W(_r,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await jd(e)})}function uA(e,t){return t().catch(n=>$h(e,n,t))}async function Bd(e){const t=et(e),n=Ts(t);let i=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Cy;for(;HV(t);)try{const s=await IV(t.localStore,i);if(s===null){t.Ta.length===0&&n.L_();break}i=s.batchId,qV(t,s)}catch(s){await $h(t,s)}cA(t)&&hA(t)}function HV(e){return br(e)&&e.Ta.length<10}function qV(e,t){e.Ta.push(t);const n=Ts(e);n.O_()&&n.X_&&n.ea(t.mutations)}function cA(e){return br(e)&&!Ts(e).x_()&&e.Ta.length>0}function hA(e){Ts(e).start()}async function KV(e){Ts(e).ra()}async function GV(e){const t=Ts(e);for(const n of e.Ta)t.ea(n.mutations)}async function YV(e,t,n){const i=e.Ta.shift(),s=Vy.from(i,t,n);await uA(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await Bd(e)}async function QV(e,t){t&&Ts(e).X_&&await async function(i,s){if(function(o){return RO(o)&&o!==L.ABORTED}(s.code)){const r=i.Ta.shift();Ts(i).B_(),await uA(i,()=>i.remoteSyncer.rejectFailedWrite(r.batchId,s)),await Bd(i)}}(e,t),cA(e)&&hA(e)}async function gT(e,t){const n=et(e);n.asyncQueue.verifyOperationInProgress(),W(_r,"RemoteStore received new credentials");const i=br(n);n.Ea.add(3),await mu(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await jd(n)}async function XV(e,t){const n=et(e);t?(n.Ea.delete(2),await jd(n)):t||(n.Ea.add(2),await mu(n),n.Ra.set("Unknown"))}function Xo(e){return e.ma||(e.ma=function(n,i,s){const r=et(n);return r.sa(),new OV(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(e.datastore,e.asyncQueue,{Xo:UV.bind(null,e),t_:zV.bind(null,e),r_:$V.bind(null,e),H_:WV.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),qy(e)?Hy(e):e.Ra.set("Unknown")):(await e.ma.stop(),lA(e))})),e.ma}function Ts(e){return e.fa||(e.fa=function(n,i,s){const r=et(n);return r.sa(),new VV(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:KV.bind(null,e),r_:QV.bind(null,e),ta:GV.bind(null,e),na:YV.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await Bd(e)):(await e.fa.stop(),e.Ta.length>0&&(W(_r,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ky{constructor(t,n,i,s,r){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=r,this.deferred=new ds,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,i,s,r){const o=Date.now()+i,a=new Ky(t,n,o,s,r);return a.start(i),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $(L.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Gy(e,t){if(_i("AsyncQueue",`${t}: ${e}`),Yo(e))return new $(L.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{static emptySet(t){return new uo(t.comparator)}constructor(t){this.comparator=t?(n,i)=>t(n,i)||G.comparator(n.key,i.key):(n,i)=>G.comparator(n.key,i.key),this.keyedMap=Ua(),this.sortedSet=new Vt(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,i)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof uo)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,r=i.getNext().key;if(!s.isEqual(r))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const i=new uo;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(){this.ga=new Vt(G.comparator)}track(t){const n=t.doc.key,i=this.ga.get(n);i?t.type!==0&&i.type===3?this.ga=this.ga.insert(n,t):t.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.ga=this.ga.remove(n):t.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):Y(63341,{Rt:t,pa:i}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal((n,i)=>{t.push(i)}),t}}class No{constructor(t,n,i,s,r,o,a,l,u){this.query=t,this.docs=n,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=r,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(t,n,i,s,r){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new No(t,n,uo.emptySet(n),o,i,s,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Dd(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,i=t.docChanges;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==i[s].type||!n[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JV{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class ZV{constructor(){this.queries=_T(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const s=et(n),r=s.queries;s.queries=_T(),r.forEach((o,a)=>{for(const l of a.Sa)l.onError(i)})})(this,new $(L.ABORTED,"Firestore shutting down"))}}function _T(){return new Sr(e=>DI(e),Dd)}async function tL(e,t){const n=et(e);let i=3;const s=t.query;let r=n.queries.get(s);r?!r.ba()&&t.Da()&&(i=2):(r=new JV,i=t.Da()?0:1);try{switch(i){case 0:r.wa=await n.onListen(s,!0);break;case 1:r.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=Gy(o,`Initialization of query '${Vr(t.query)}' failed`);return void t.onError(a)}n.queries.set(s,r),r.Sa.push(t),t.va(n.onlineState),r.wa&&t.Fa(r.wa)&&Yy(n)}async function eL(e,t){const n=et(e),i=t.query;let s=3;const r=n.queries.get(i);if(r){const o=r.Sa.indexOf(t);o>=0&&(r.Sa.splice(o,1),r.Sa.length===0?s=t.Da()?0:1:!r.ba()&&t.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function nL(e,t){const n=et(e);let i=!1;for(const s of t){const r=s.query,o=n.queries.get(r);if(o){for(const a of o.Sa)a.Fa(s)&&(i=!0);o.wa=s}}i&&Yy(n)}function iL(e,t,n){const i=et(e),s=i.queries.get(t);if(s)for(const r of s.Sa)r.onError(n);i.queries.delete(t)}function Yy(e){e.Ca.forEach(t=>{t.next()})}var qm,vT;(vT=qm||(qm={})).Ma="default",vT.Cache="cache";class sL{constructor(t,n,i){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(t){if(!this.options.includeMetadataChanges){const i=[];for(const s of t.docChanges)s.type!==3&&i.push(s);t=new No(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=No.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==qm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(t){this.key=t}}class fA{constructor(t){this.key=t}}class rL{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ht(),this.mutatedKeys=ht(),this.eu=MI(t),this.tu=new uo(this.eu)}get nu(){return this.Ya}ru(t,n){const i=n?n.iu:new yT,s=n?n.tu:this.tu;let r=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal((c,d)=>{const f=s.get(c),m=Md(this.query,d)?d:null,y=!!f&&this.mutatedKeys.has(f.key),_=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let E=!1;f&&m?f.data.isEqual(m.data)?y!==_&&(i.track({type:3,doc:m}),E=!0):this.su(f,m)||(i.track({type:2,doc:m}),E=!0,(l&&this.eu(m,l)>0||u&&this.eu(m,u)<0)&&(a=!0)):!f&&m?(i.track({type:0,doc:m}),E=!0):f&&!m&&(i.track({type:1,doc:f}),E=!0,(l||u)&&(a=!0)),E&&(m?(o=o.add(m),r=_?r.add(c):r.delete(c)):(o=o.delete(c),r=r.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),r=r.delete(c.key),i.track({type:1,doc:c})}return{tu:o,iu:i,Cs:a,mutatedKeys:r}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,i,s){const r=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const o=t.iu.ya();o.sort((c,d)=>function(m,y){const _=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y(20277,{Rt:E})}};return _(m)-_(y)}(c.type,d.type)||this.eu(c.doc,d.doc)),this.ou(i),s=s??!1;const a=n&&!s?this._u():[],l=this.Xa.size===0&&this.current&&!s?1:0,u=l!==this.Za;return this.Za=l,o.length!==0||u?{snapshot:new No(this.query,t.tu,r,o,t.mutatedKeys,l===0,u,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new yT,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=ht(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return t.forEach(i=>{this.Xa.has(i)||n.push(new fA(i))}),this.Xa.forEach(i=>{t.has(i)||n.push(new dA(i))}),n}cu(t){this.Ya=t.Qs,this.Xa=ht();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return No.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Qy="SyncEngine";class oL{constructor(t,n,i){this.query=t,this.targetId=n,this.view=i}}class aL{constructor(t){this.key=t,this.hu=!1}}class lL{constructor(t,n,i,s,r,o){this.localStore=t,this.remoteStore=n,this.eventManager=i,this.sharedClientState=s,this.currentUser=r,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Sr(a=>DI(a),Dd),this.Iu=new Map,this.Eu=new Set,this.du=new Vt(G.comparator),this.Au=new Map,this.Ru=new jy,this.Vu={},this.mu=new Map,this.fu=Mo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function uL(e,t,n=!0){const i=vA(e);let s;const r=i.Tu.get(t);return r?(i.sharedClientState.addLocalQueryTarget(r.targetId),s=r.view.lu()):s=await pA(i,t,n,!0),s}async function cL(e,t){const n=vA(e);await pA(n,t,!0,!1)}async function pA(e,t,n,i){const s=await AV(e.localStore,Hn(t)),r=s.targetId,o=e.sharedClientState.addLocalQueryTarget(r,n);let a;return i&&(a=await hL(e,t,r,o==="current",s.resumeToken)),e.isPrimaryClient&&n&&oA(e.remoteStore,s),a}async function hL(e,t,n,i,s){e.pu=(d,f,m)=>async function(_,E,v,T){let b=E.view.ru(v);b.Cs&&(b=await hT(_.localStore,E.query,!1).then(({documents:S})=>E.view.ru(S,b)));const R=T&&T.targetChanges.get(E.targetId),D=T&&T.targetMismatches.get(E.targetId)!=null,N=E.view.applyChanges(b,_.isPrimaryClient,R,D);return TT(_,E.targetId,N.au),N.snapshot}(e,d,f,m);const r=await hT(e.localStore,t,!0),o=new rL(t,r.Qs),a=o.ru(r.documents),l=pu.createSynthesizedTargetChangeForCurrentChange(n,i&&e.onlineState!=="Offline",s),u=o.applyChanges(a,e.isPrimaryClient,l);TT(e,n,u.au);const c=new oL(t,n,o);return e.Tu.set(t,c),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),u.snapshot}async function dL(e,t,n){const i=et(e),s=i.Tu.get(t),r=i.Iu.get(s.targetId);if(r.length>1)return i.Iu.set(s.targetId,r.filter(o=>!Dd(o,t))),void i.Tu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await Wm(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),n&&$y(i.remoteStore,s.targetId),Km(i,s.targetId)}).catch(Go)):(Km(i,s.targetId),await Wm(i.localStore,s.targetId,!0))}async function fL(e,t){const n=et(e),i=n.Tu.get(t),s=n.Iu.get(i.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),$y(n.remoteStore,i.targetId))}async function pL(e,t,n){const i=TL(e);try{const s=await function(o,a){const l=et(o),u=pt.now(),c=a.reduce((m,y)=>m.add(y.key),ht());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let y=vi(),_=ht();return l.Ns.getEntries(m,c).next(E=>{y=E,y.forEach((v,T)=>{T.isValidDocument()||(_=_.add(v))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,y)).next(E=>{d=E;const v=[];for(const T of a){const b=IO(T,d.get(T.key).overlayedDocument);b!=null&&v.push(new Cs(T.key,b,EI(b.value.mapValue),tn.exists(!0)))}return l.mutationQueue.addMutationBatch(m,u,v,a)}).next(E=>{f=E;const v=E.applyToLocalDocumentSet(d,_);return l.documentOverlayCache.saveOverlays(m,E.batchId,v)})}).then(()=>({batchId:f.batchId,changes:OI(d)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let u=o.Vu[o.currentUser.toKey()];u||(u=new Vt(ct)),u=u.insert(a,l),o.Vu[o.currentUser.toKey()]=u}(i,s.batchId,n),await gu(i,s.changes),await Bd(i.remoteStore)}catch(s){const r=Gy(s,"Failed to persist write");n.reject(r)}}async function mA(e,t){const n=et(e);try{const i=await SV(n.localStore,t);t.targetChanges.forEach((s,r)=>{const o=n.Au.get(r);o&&(_t(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?_t(o.hu,14607):s.removedDocuments.size>0&&(_t(o.hu,42227),o.hu=!1))}),await gu(n,i,t)}catch(i){await Go(i)}}function wT(e,t,n){const i=et(e);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const s=[];i.Tu.forEach((r,o)=>{const a=o.view.va(t);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=et(o);l.onlineState=a;let u=!1;l.queries.forEach((c,d)=>{for(const f of d.Sa)f.va(a)&&(u=!0)}),u&&Yy(l)}(i.eventManager,t),s.length&&i.Pu.H_(s),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function mL(e,t,n){const i=et(e);i.sharedClientState.updateQueryState(t,"rejected",n);const s=i.Au.get(t),r=s&&s.key;if(r){let o=new Vt(G.comparator);o=o.insert(r,Ee.newNoDocument(r,tt.min()));const a=ht().add(r),l=new Ld(tt.min(),new Map,new Vt(ct),o,a);await mA(i,l),i.du=i.du.remove(r),i.Au.delete(t),Xy(i)}else await Wm(i.localStore,t,!1).then(()=>Km(i,t,n)).catch(Go)}async function gL(e,t){const n=et(e),i=t.batch.batchId;try{const s=await EV(n.localStore,t);yA(n,i,null),gA(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await gu(n,s)}catch(s){await Go(s)}}async function yL(e,t,n){const i=et(e);try{const s=await function(o,a){const l=et(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let c;return l.mutationQueue.lookupMutationBatch(u,a).next(d=>(_t(d!==null,37113),c=d.keys(),l.mutationQueue.removeMutationBatch(u,d))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,c,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,c)).next(()=>l.localDocuments.getDocuments(u,c))})}(i.localStore,t);yA(i,t,n),gA(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),await gu(i,s)}catch(s){await Go(s)}}function gA(e,t){(e.mu.get(t)||[]).forEach(n=>{n.resolve()}),e.mu.delete(t)}function yA(e,t,n){const i=et(e);let s=i.Vu[i.currentUser.toKey()];if(s){const r=s.get(t);r&&(n?r.reject(n):r.resolve(),s=s.remove(t)),i.Vu[i.currentUser.toKey()]=s}}function Km(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const i of e.Iu.get(t))e.Tu.delete(i),n&&e.Pu.yu(i,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(i=>{e.Ru.containsKey(i)||_A(e,i)})}function _A(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);n!==null&&($y(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),Xy(e))}function TT(e,t,n){for(const i of n)i instanceof dA?(e.Ru.addReference(i.key,t),_L(e,i)):i instanceof fA?(W(Qy,"Document no longer in limbo: "+i.key),e.Ru.removeReference(i.key,t),e.Ru.containsKey(i.key)||_A(e,i.key)):Y(19791,{wu:i})}function _L(e,t){const n=t.key,i=n.path.canonicalString();e.du.get(n)||e.Eu.has(i)||(W(Qy,"New document in limbo: "+n),e.Eu.add(i),Xy(e))}function Xy(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new G(Et.fromString(t)),i=e.fu.next();e.Au.set(i,new aL(n)),e.du=e.du.insert(n,i),oA(e.remoteStore,new Qi(Hn(CI(n.path)),i,"TargetPurposeLimboResolution",Pd.ce))}}async function gu(e,t,n){const i=et(e),s=[],r=[],o=[];i.Tu.isEmpty()||(i.Tu.forEach((a,l)=>{o.push(i.pu(l,t,n).then(u=>{var c;if((u||n)&&i.isPrimaryClient){const d=u?!u.fromCache:(c=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:c.current;i.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(u){s.push(u);const d=Uy.As(l.targetId,u);r.push(d)}}))}),await Promise.all(o),i.Pu.H_(s),await async function(l,u){const c=et(l);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>j.forEach(u,f=>j.forEach(f.Es,m=>c.persistence.referenceDelegate.addReference(d,f.targetId,m)).next(()=>j.forEach(f.ds,m=>c.persistence.referenceDelegate.removeReference(d,f.targetId,m)))))}catch(d){if(!Yo(d))throw d;W(zy,"Failed to update sequence numbers: "+d)}for(const d of u){const f=d.targetId;if(!d.fromCache){const m=c.Ms.get(f),y=m.snapshotVersion,_=m.withLastLimboFreeSnapshotVersion(y);c.Ms=c.Ms.insert(f,_)}}}(i.localStore,r))}async function vL(e,t){const n=et(e);if(!n.currentUser.isEqual(t)){W(Qy,"User change. New user:",t.toKey());const i=await nA(n.localStore,t);n.currentUser=t,function(r,o){r.mu.forEach(a=>{a.forEach(l=>{l.reject(new $(L.CANCELLED,o))})}),r.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await gu(n,i.Ls)}}function wL(e,t){const n=et(e),i=n.Au.get(t);if(i&&i.hu)return ht().add(i.key);{let s=ht();const r=n.Iu.get(t);if(!r)return s;for(const o of r){const a=n.Tu.get(o);s=s.unionWith(a.view.nu)}return s}}function vA(e){const t=et(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=mA.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=wL.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=mL.bind(null,t),t.Pu.H_=nL.bind(null,t.eventManager),t.Pu.yu=iL.bind(null,t.eventManager),t}function TL(e){const t=et(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=gL.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=yL.bind(null,t),t}class Wh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Fd(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return xV(this.persistence,new vV,t.initialUser,this.serializer)}Cu(t){return new eA(By.mi,this.serializer)}Du(t){return new PV}async terminate(){var t,n;(t=this.gcScheduler)==null||t.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Wh.provider={build:()=>new Wh};class xL extends Wh{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){_t(this.persistence.referenceDelegate instanceof zh,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new sV(i,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?Fe.withCacheSize(this.cacheSizeBytes):Fe.DEFAULT;return new eA(i=>zh.mi(i,n),this.serializer)}}class Gm{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>wT(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=vL.bind(null,this.syncEngine),await XV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new ZV}()}createDatastore(t){const n=Fd(t.databaseInfo.databaseId),i=function(r){return new NV(r)}(t.databaseInfo);return function(r,o,a,l){return new FV(r,o,a,l)}(t.authCredentials,t.appCheckCredentials,i,n)}createRemoteStore(t){return function(i,s,r,o,a){return new BV(i,s,r,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>wT(this.syncEngine,n,0),function(){return pT.v()?new pT:new CV}())}createSyncEngine(t,n){return function(s,r,o,a,l,u,c){const d=new lL(s,r,o,a,l,u);return c&&(d.gu=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(s){const r=et(s);W(_r,"RemoteStore shutting down."),r.Ea.add(5),await mu(r),r.Aa.shutdown(),r.Ra.set("Unknown")}(this.remoteStore),(t=this.datastore)==null||t.terminate(),(n=this.eventManager)==null||n.terminate()}}Gm.provider={build:()=>new Gm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EL{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):_i("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xs="FirestoreClient";class SL{constructor(t,n,i,s,r){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=s,this.user=Te.UNAUTHENTICATED,this.clientId=Py.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(i,async o=>{W(xs,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(i,o=>(W(xs,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new ds;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const i=Gy(n,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function ip(e,t){e.asyncQueue.verifyOperationInProgress(),W(xs,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener(async s=>{i.isEqual(s)||(await nA(t.localStore,s),i=s)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function xT(e,t){e.asyncQueue.verifyOperationInProgress();const n=await bL(e);W(xs,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(i=>gT(t.remoteStore,i)),e.setAppCheckTokenChangeListener((i,s)=>gT(t.remoteStore,s)),e._onlineComponents=t}async function bL(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){W(xs,"Using user provided OfflineComponentProvider");try{await ip(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(s){return s.name==="FirebaseError"?s.code===L.FAILED_PRECONDITION||s.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;ko("Error using user provided cache. Falling back to memory cache: "+n),await ip(e,new Wh)}}else W(xs,"Using default OfflineComponentProvider"),await ip(e,new xL(void 0));return e._offlineComponents}async function wA(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(W(xs,"Using user provided OnlineComponentProvider"),await xT(e,e._uninitializedComponentsProvider._online)):(W(xs,"Using default OnlineComponentProvider"),await xT(e,new Gm))),e._onlineComponents}function IL(e){return wA(e).then(t=>t.syncEngine)}async function AL(e){const t=await wA(e),n=t.eventManager;return n.onListen=uL.bind(null,t.syncEngine),n.onUnlisten=dL.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=cL.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=fL.bind(null,t.syncEngine),n}function kL(e,t,n={}){const i=new ds;return e.asyncQueue.enqueueAndForget(async()=>function(r,o,a,l,u){const c=new EL({next:f=>{c.Nu(),o.enqueueAndForget(()=>eL(r,d)),f.fromCache&&l.source==="server"?u.reject(new $(L.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(f)},error:f=>u.reject(f)}),d=new sL(a,c,{includeMetadataChanges:!0,qa:!0});return tL(r,d)}(await AL(e),e.asyncQueue,t,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TA(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xA="firestore.googleapis.com",ST=!0;class bT{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new $(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=xA,this.ssl=ST}else this.host=t.host,this.ssl=t.ssl??ST;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=tA;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<nV)throw new $(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}BN("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=TA(t.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new $(L.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new $(L.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new $(L.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Ud{constructor(t,n,i,s){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new bT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new $(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new $(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new bT(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new CN;switch(i.type){case"firstParty":return new NN(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new $(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=ET.get(n);i&&(W("ComponentProvider","Removing Datastore"),ET.delete(n),i.terminate())}(this),Promise.resolve()}}function PL(e,t,n,i={}){var u;e=Co(e,Ud);const s=Ho(t),r=e._getSettings(),o={...r,emulatorOptions:e._getEmulatorOptions()},a=`${t}:${n}`;s&&(Qb(`https://${a}`),Xb("Firestore",!0)),r.host!==xA&&r.host!==a&&ko("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...r,host:a,ssl:s,emulatorOptions:i};if(!mr(l,o)&&(e._setSettings(l),i.mockUserToken)){let c,d;if(typeof i.mockUserToken=="string")c=i.mockUserToken,d=Te.MOCK_USER;else{c=eM(i.mockUserToken,(u=e._app)==null?void 0:u.options.projectId);const f=i.mockUserToken.sub||i.mockUserToken.user_id;if(!f)throw new $(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Te(f)}e._authCredentials=new RN(new hI(c,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(t,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new Ir(this.firestore,t,this._query)}}class re{constructor(t,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fs(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new re(this.firestore,t,this._key)}toJSON(){return{type:re._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,i){if(du(n,re._jsonSchema))return new re(t,i||null,new G(Et.fromString(n.referencePath)))}}re._jsonSchemaVersion="firestore/documentReference/1.0",re._jsonSchema={type:Gt("string",re._jsonSchemaVersion),referencePath:Gt("string")};class fs extends Ir{constructor(t,n,i){super(t,n,CI(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new re(this.firestore,null,new G(t))}withConverter(t){return new fs(this.firestore,t,this._path)}}function lc(e,t,...n){if(e=ke(e),dI("collection","path",t),e instanceof Ud){const i=Et.fromString(t,...n);return Fw(i),new fs(e,null,i)}{if(!(e instanceof re||e instanceof fs))throw new $(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(Et.fromString(t,...n));return Fw(i),new fs(e.firestore,null,i)}}function $a(e,t,...n){if(e=ke(e),arguments.length===1&&(t=Py.newId()),dI("doc","path",t),e instanceof Ud){const i=Et.fromString(t,...n);return Lw(i),new re(e,null,new G(i))}{if(!(e instanceof re||e instanceof fs))throw new $(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(Et.fromString(t,...n));return Lw(i),new re(e.firestore,e instanceof fs?e.converter:null,new G(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT="AsyncQueue";class AT{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new sA(this,"async_queue_retry"),this._c=()=>{const i=np();i&&W(IT,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=t;const n=np();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=np();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const n=new ds;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!Yo(t))throw t;W(IT,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const n=this.ac.then(()=>(this.rc=!0,t().catch(i=>{throw this.nc=i,this.rc=!1,_i("INTERNAL UNHANDLED ERROR: ",kT(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(t,n,i){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const s=Ky.createAndSchedule(this,t,n,i,r=>this.hc(r));return this.tc.push(s),s}uc(){this.nc&&Y(47125,{Pc:kT(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function kT(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}class yu extends Ud{constructor(t,n,i,s){super(t,n,i,s),this.type="firestore",this._queue=new AT,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new AT(t),this._firestoreClient=void 0,await t}}}function CL(e,t){const n=typeof e=="object"?e:eI(),i=typeof e=="string"?e:Vh,s=Ay(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const r=Z2("firestore");r&&PL(s,...r)}return s}function Jy(e){if(e._terminated)throw new $(L.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||RL(e),e._firestoreClient}function RL(e){var i,s,r;const t=e._freezeSettings(),n=function(a,l,u,c){return new XN(a,l,u,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,TA(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)}(e._databaseId,((i=e._app)==null?void 0:i.options.appId)||"",e._persistenceKey,t);e._componentsProvider||(s=t.localCache)!=null&&s._offlineComponentProvider&&((r=t.localCache)!=null&&r._onlineComponentProvider)&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new SL(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(t){this._byteString=t}static fromBase64String(t){try{return new cn(me.fromBase64String(t))}catch(n){throw new $(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new cn(me.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:cn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(du(t,cn._jsonSchema))return cn.fromBase64String(t.bytes)}}cn._jsonSchemaVersion="firestore/bytes/1.0",cn._jsonSchema={type:Gt("string",cn._jsonSchemaVersion),bytes:Gt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new $(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new de(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new $(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new $(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return ct(this._lat,t._lat)||ct(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Kn._jsonSchemaVersion}}static fromJSON(t){if(du(t,Kn._jsonSchema))return new Kn(t.latitude,t.longitude)}}Kn._jsonSchemaVersion="firestore/geoPoint/1.0",Kn._jsonSchema={type:Gt("string",Kn._jsonSchemaVersion),latitude:Gt("number"),longitude:Gt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,s){if(i.length!==s.length)return!1;for(let r=0;r<i.length;++r)if(i[r]!==s[r])return!1;return!0}(this._values,t._values)}toJSON(){return{type:Gn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(du(t,Gn._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(n=>typeof n=="number"))return new Gn(t.vectorValues);throw new $(L.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Gn._jsonSchemaVersion="firestore/vectorValue/1.0",Gn._jsonSchema={type:Gt("string",Gn._jsonSchemaVersion),vectorValues:Gt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DL=/^__.*__$/;class ML{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return this.fieldMask!==null?new Cs(t,this.data,this.fieldMask,n,this.fieldTransforms):new fu(t,this.data,n,this.fieldTransforms)}}class EA{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return new Cs(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function SA(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y(40011,{Ac:e})}}class t_{constructor(t,n,i,s,r,o){this.settings=t,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=s,r===void 0&&this.Rc(),this.fieldTransforms=r||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new t_({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var s;const n=(s=this.path)==null?void 0:s.child(t),i=this.Vc({path:n,fc:!1});return i.gc(t),i}yc(t){var s;const n=(s=this.path)==null?void 0:s.child(t),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return Hh(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(SA(this.Ac)&&DL.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class NL{constructor(t,n,i){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=i||Fd(t)}Cc(t,n,i,s=!1){return new t_({Ac:t,methodName:n,Dc:i,path:de.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function e_(e){const t=e._freezeSettings(),n=Fd(e._databaseId);return new NL(e._databaseId,!!t.ignoreUndefinedProperties,n)}function bA(e,t,n,i,s,r={}){const o=e.Cc(r.merge||r.mergeFields?2:0,t,n,s);n_("Data must be an object, but it was:",o,i);const a=IA(i,o);let l,u;if(r.merge)l=new Xe(o.fieldMask),u=o.fieldTransforms;else if(r.mergeFields){const c=[];for(const d of r.mergeFields){const f=Ym(t,d,n);if(!o.contains(f))throw new $(L.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);kA(c,f)||c.push(f)}l=new Xe(c),u=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,u=o.fieldTransforms;return new ML(new Be(a),l,u)}class $d extends Zy{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof $d}}function OL(e,t,n,i){const s=e.Cc(1,t,n);n_("Data must be an object, but it was:",s,i);const r=[],o=Be.empty();Ps(i,(l,u)=>{const c=i_(t,l,n);u=ke(u);const d=s.yc(c);if(u instanceof $d)r.push(c);else{const f=_u(u,d);f!=null&&(r.push(c),o.set(c,f))}});const a=new Xe(r);return new EA(o,a,s.fieldTransforms)}function VL(e,t,n,i,s,r){const o=e.Cc(1,t,n),a=[Ym(t,i,n)],l=[s];if(r.length%2!=0)throw new $(L.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<r.length;f+=2)a.push(Ym(t,r[f])),l.push(r[f+1]);const u=[],c=Be.empty();for(let f=a.length-1;f>=0;--f)if(!kA(u,a[f])){const m=a[f];let y=l[f];y=ke(y);const _=o.yc(m);if(y instanceof $d)u.push(m);else{const E=_u(y,_);E!=null&&(u.push(m),c.set(m,E))}}const d=new Xe(u);return new EA(c,d,o.fieldTransforms)}function LL(e,t,n,i=!1){return _u(n,e.Cc(i?4:3,t))}function _u(e,t){if(AA(e=ke(e)))return n_("Unsupported field value:",t,e),IA(e,t);if(e instanceof Zy)return function(i,s){if(!SA(s.Ac))throw s.Sc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${i._methodName}() is not currently supported inside arrays`);const r=i._toFieldTransform(s);r&&s.fieldTransforms.push(r)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(i,s){const r=[];let o=0;for(const a of i){let l=_u(a,s.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),r.push(l),o++}return{arrayValue:{values:r}}}(e,t)}return function(i,s){if((i=ke(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return wO(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const r=pt.fromDate(i);return{timestampValue:Uh(s.serializer,r)}}if(i instanceof pt){const r=new pt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Uh(s.serializer,r)}}if(i instanceof Kn)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof cn)return{bytesValue:KI(s.serializer,i._byteString)};if(i instanceof re){const r=s.databaseId,o=i.firestore._databaseId;if(!o.isEqual(r))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:Fy(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof Gn)return function(o,a){return{mapValue:{fields:{[TI]:{stringValue:xI},[Lh]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Sc("VectorValues must only contain numeric values.");return Oy(a.serializer,u)})}}}}}}(i,s);throw s.Sc(`Unsupported field value: ${kd(i)}`)}(e,t)}function IA(e,t){const n={};return mI(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ps(e,(i,s)=>{const r=_u(s,t.mc(i));r!=null&&(n[i]=r)}),{mapValue:{fields:n}}}function AA(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof pt||e instanceof Kn||e instanceof cn||e instanceof re||e instanceof Zy||e instanceof Gn)}function n_(e,t,n){if(!AA(n)||!fI(n)){const i=kd(n);throw i==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+i)}}function Ym(e,t,n){if((t=ke(t))instanceof zd)return t._internalPath;if(typeof t=="string")return i_(e,t);throw Hh("Field path arguments must be of type string or ",e,!1,void 0,n)}const FL=new RegExp("[~\\*/\\[\\]]");function i_(e,t,n){if(t.search(FL)>=0)throw Hh(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new zd(...t.split("."))._internalPath}catch{throw Hh(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Hh(e,t,n,i,s){const r=i&&!i.isEmpty(),o=s!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(r||o)&&(l+=" (found",r&&(l+=` in field ${i}`),o&&(l+=` in document ${s}`),l+=")"),new $(L.INVALID_ARGUMENT,a+e+l)}function kA(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(t,n,i,s,r){this._firestore=t,this._userDataWriter=n,this._key=i,this._document=s,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new re(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new jL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(s_("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class jL extends PA{data(){return super.data()}}function s_(e,t){return typeof t=="string"?i_(e,t):t instanceof zd?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BL(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new $(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class r_{}class CA extends r_{}function UL(e,t,...n){let i=[];t instanceof r_&&i.push(t),i=i.concat(n),function(r){const o=r.filter(l=>l instanceof a_).length,a=r.filter(l=>l instanceof o_).length;if(o>1||o>0&&a>0)throw new $(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const s of i)e=s._apply(e);return e}class o_ extends CA{constructor(t,n,i){super(),this._field=t,this._op=n,this._value=i,this.type="where"}static _create(t,n,i){return new o_(t,n,i)}_apply(t){const n=this._parse(t);return RA(t._query,n),new Ir(t.firestore,t.converter,Fm(t._query,n))}_parse(t){const n=e_(t.firestore);return function(r,o,a,l,u,c,d){let f;if(u.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new $(L.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){CT(d,c);const y=[];for(const _ of d)y.push(PT(l,r,_));f={arrayValue:{values:y}}}else f=PT(l,r,d)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||CT(d,c),f=LL(a,o,d,c==="in"||c==="not-in");return Kt.create(u,c,f)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}class a_ extends r_{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new a_(t,n)}_parse(t){const n=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:Cn.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(s,r){let o=s;const a=r.getFlattenedFilters();for(const l of a)RA(o,l),o=Fm(o,l)}(t._query,n),new Ir(t.firestore,t.converter,Fm(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class l_ extends CA{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new l_(t,n)}_apply(t){const n=function(s,r,o){if(s.startAt!==null)throw new $(L.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new $(L.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ul(r,o)}(t._query,this._field,this._direction);return new Ir(t.firestore,t.converter,function(s,r){const o=s.explicitOrderBy.concat([r]);return new Qo(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(t._query,n))}}function zL(e,t="asc"){const n=t,i=s_("orderBy",e);return l_._create(i,n)}function PT(e,t,n){if(typeof(n=ke(n))=="string"){if(n==="")throw new $(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!RI(t)&&n.indexOf("/")!==-1)throw new $(L.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=t.path.child(Et.fromString(n));if(!G.isDocumentKey(i))throw new $(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return qw(e,new G(i))}if(n instanceof re)return qw(e,n._key);throw new $(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${kd(n)}.`)}function CT(e,t){if(!Array.isArray(e)||e.length===0)throw new $(L.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function RA(e,t){const n=function(s,r){for(const o of s)for(const a of o.getFlattenedFilters())if(r.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new $(L.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new $(L.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class $L{convertValue(t,n="none"){switch(ws(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ut(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(vs(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw Y(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const i={};return Ps(t,(s,r)=>{i[s]=this.convertValue(r,n)}),i}convertVectorValue(t){var i,s,r;const n=(r=(s=(i=t.fields)==null?void 0:i[Lh].arrayValue)==null?void 0:s.values)==null?void 0:r.map(o=>Ut(o.doubleValue));return new Gn(n)}convertGeoPoint(t){return new Kn(Ut(t.latitude),Ut(t.longitude))}convertArray(t,n){return(t.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(t,n){switch(n){case"previous":const i=Rd(t);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Fl(t));default:return null}}convertTimestamp(t){const n=_s(t);return new pt(n.seconds,n.nanos)}convertDocumentKey(t,n){const i=Et.fromString(t);_t(ZI(i),9688,{name:t});const s=new jl(i.get(1),i.get(3)),r=new G(i.popFirst(5));return s.isEqual(n)||_i(`Document ${r} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DA(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}class uc{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class co extends PA{constructor(t,n,i,s,r,o){super(t,n,i,s,o),this._firestore=t,this._firestoreImpl=t,this.metadata=r}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new Kc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const i=this._document.data.field(s_("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new $(L.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=co._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}co._jsonSchemaVersion="firestore/documentSnapshot/1.0",co._jsonSchema={type:Gt("string",co._jsonSchemaVersion),bundleSource:Gt("string","DocumentSnapshot"),bundleName:Gt("string"),bundle:Gt("string")};class Kc extends co{data(t={}){return super.data(t)}}class ho{constructor(t,n,i,s){this._firestore=t,this._userDataWriter=n,this._snapshot=s,this.metadata=new uc(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(i=>{t.call(n,new Kc(this._firestore,this._userDataWriter,i.key,i,new uc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new $(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,r){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new Kc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new uc(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>r||a.type!==3).map(a=>{const l=new Kc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new uc(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,c=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:WL(a.type),doc:l,oldIndex:u,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new $(L.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=ho._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Py.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],s=[];return this.docs.forEach(r=>{r._document!==null&&(n.push(r._document),i.push(this._userDataWriter.convertObjectMap(r._document.data.value.mapValue.fields,"previous")),s.push(r.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function WL(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Y(61501,{type:e})}}ho._jsonSchemaVersion="firestore/querySnapshot/1.0",ho._jsonSchema={type:Gt("string",ho._jsonSchemaVersion),bundleSource:Gt("string","QuerySnapshot"),bundleName:Gt("string"),bundle:Gt("string")};class HL extends $L{constructor(t){super(),this.firestore=t}convertBytes(t){return new cn(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new re(this.firestore,null,n)}}function qL(e){e=Co(e,Ir);const t=Co(e.firestore,yu),n=Jy(t),i=new HL(t);return BL(e._query),kL(n,e._query).then(s=>new ho(t,i,e,s))}function KL(e){return u_(Co(e.firestore,yu),[new Vd(e._key,tn.none())])}function GL(e,t){const n=Co(e.firestore,yu),i=$a(e),s=DA(e.converter,t);return u_(n,[bA(e_(e.firestore),"addDoc",i._key,s,e.converter!==null,{}).toMutation(i._key,tn.exists(!1))]).then(()=>i)}function u_(e,t){return function(i,s){const r=new ds;return i.asyncQueue.enqueueAndForget(async()=>pL(await IL(i),s,r)),r.promise}(Jy(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YL{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=e_(t)}set(t,n,i){this._verifyNotCommitted();const s=sp(t,this._firestore),r=DA(s.converter,n,i),o=bA(this._dataReader,"WriteBatch.set",s._key,r,s.converter!==null,i);return this._mutations.push(o.toMutation(s._key,tn.none())),this}update(t,n,i,...s){this._verifyNotCommitted();const r=sp(t,this._firestore);let o;return o=typeof(n=ke(n))=="string"||n instanceof zd?VL(this._dataReader,"WriteBatch.update",r._key,n,i,s):OL(this._dataReader,"WriteBatch.update",r._key,n),this._mutations.push(o.toMutation(r._key,tn.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=sp(t,this._firestore);return this._mutations=this._mutations.concat(new Vd(n._key,tn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new $(L.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function sp(e,t){if((e=ke(e)).firestore!==t)throw new $(L.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RT(e){return Jy(e=Co(e,yu)),new YL(e,t=>u_(e,t))}(function(t,n=!0){(function(s){Ko=s})(qo),Ao(new gr("firestore",(i,{instanceIdentifier:s,options:r})=>{const o=i.getProvider("app").getImmediate(),a=new yu(new DN(i.getProvider("auth-internal")),new ON(o,i.getProvider("app-check-internal")),function(u,c){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new $(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jl(u.options.projectId,c)}(o,s),o);return r={useFetchStreams:n,...r},a._setSettings(r),a},"PUBLIC").setMultipleInstances(!0)),cs(Mw,Nw,t),cs(Mw,Nw,"esm2020")})();function MA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const QL=MA,NA=new cu("auth","Firebase",MA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qh=new by("@firebase/auth");function XL(e,...t){qh.logLevel<=ut.WARN&&qh.warn(`Auth (${qo}): ${e}`,...t)}function Gc(e,...t){qh.logLevel<=ut.ERROR&&qh.error(`Auth (${qo}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wi(e,...t){throw c_(e,...t)}function Yn(e,...t){return c_(e,...t)}function OA(e,t,n){const i={...QL(),[t]:n};return new cu("auth","Firebase",i).create(t,{appName:e.name})}function or(e){return OA(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function c_(e,...t){if(typeof e!="string"){const n=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(n,...i)}return NA.create(e,...t)}function J(e,t,...n){if(!e)throw c_(t,...n)}function ci(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Gc(t),new Error(t)}function Ti(e,t){e||ci(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qm(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.href)||""}function JL(){return DT()==="http:"||DT()==="https:"}function DT(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(JL()||aM()||"connection"in navigator)?navigator.onLine:!0}function tF(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(t,n){this.shortDelay=t,this.longDelay=n,Ti(n>t,"Short delay should be less than long delay!"),this.isMobile=sM()||lM()}get(){return ZL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h_(e,t){Ti(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{static initialize(t,n,i){this.fetchImpl=t,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ci("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ci("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ci("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eF={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nF=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],iF=new vu(3e4,6e4);function d_(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function Jo(e,t,n,i,s={}){return LA(e,s,async()=>{let r={},o={};i&&(t==="GET"?o=i:r={body:JSON.stringify(i)});const a=hu({key:e.config.apiKey,...o}).slice(1),l=await e._getAdditionalHeaders();l["Content-Type"]="application/json",e.languageCode&&(l["X-Firebase-Locale"]=e.languageCode);const u={method:t,headers:l,...r};return oM()||(u.referrerPolicy="no-referrer"),e.emulatorConfig&&Ho(e.emulatorConfig.host)&&(u.credentials="include"),VA.fetch()(await FA(e,e.config.apiHost,n,a),u)})}async function LA(e,t,n){e._canInitEmulator=!1;const i={...eF,...t};try{const s=new rF(e),r=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await r.json();if("needConfirmation"in o)throw cc(e,"account-exists-with-different-credential",o);if(r.ok&&!("errorMessage"in o))return o;{const a=r.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw cc(e,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw cc(e,"email-already-in-use",o);if(l==="USER_DISABLED")throw cc(e,"user-disabled",o);const c=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw OA(e,c,u);wi(e,c)}}catch(s){if(s instanceof bi)throw s;wi(e,"network-request-failed",{message:String(s)})}}async function sF(e,t,n,i,s={}){const r=await Jo(e,t,n,i,s);return"mfaPendingCredential"in r&&wi(e,"multi-factor-auth-required",{_serverResponse:r}),r}async function FA(e,t,n,i){const s=`${t}${n}?${i}`,r=e,o=r.config.emulator?h_(e.config,s):`${e.config.apiScheme}://${s}`;return nF.includes(n)&&(await r._persistenceManagerAvailable,r._getPersistenceType()==="COOKIE")?r._getPersistence()._getFinalTarget(o).toString():o}class rF{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Yn(this.auth,"network-request-failed")),iF.get())})}}function cc(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=Yn(e,t,i);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oF(e,t){return Jo(e,"POST","/v1/accounts:delete",t)}async function Kh(e,t){return Jo(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ul(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function aF(e,t=!1){const n=ke(e),i=await n.getIdToken(t),s=f_(i);J(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const r=typeof s.firebase=="object"?s.firebase:void 0,o=r==null?void 0:r.sign_in_provider;return{claims:s,token:i,authTime:ul(rp(s.auth_time)),issuedAtTime:ul(rp(s.iat)),expirationTime:ul(rp(s.exp)),signInProvider:o||null,signInSecondFactor:(r==null?void 0:r.sign_in_second_factor)||null}}function rp(e){return Number(e)*1e3}function f_(e){const[t,n,i]=e.split(".");if(t===void 0||n===void 0||i===void 0)return Gc("JWT malformed, contained fewer than 3 sections"),null;try{const s=qb(n);return s?JSON.parse(s):(Gc("Failed to decode base64 JWT payload"),null)}catch(s){return Gc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function MT(e){const t=f_(e);return J(t,"internal-error"),J(typeof t.exp<"u","internal-error"),J(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wl(e,t,n=!1){if(n)return t;try{return await t}catch(i){throw i instanceof bi&&lF(i)&&e.auth.currentUser===e&&await e.auth.signOut(),i}}function lF({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uF{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ul(this.lastLoginAt),this.creationTime=ul(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gh(e){var d;const t=e.auth,n=await e.getIdToken(),i=await Wl(e,Kh(t,{idToken:n}));J(i==null?void 0:i.users.length,t,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const r=(d=s.providerUserInfo)!=null&&d.length?jA(s.providerUserInfo):[],o=hF(e.providerData,r),a=e.isAnonymous,l=!(e.email&&s.passwordHash)&&!(o!=null&&o.length),u=a?l:!1,c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Xm(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(e,c)}async function cF(e){const t=ke(e);await Gh(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function hF(e,t){return[...e.filter(i=>!t.some(s=>s.providerId===i.providerId)),...t]}function jA(e){return e.map(({providerId:t,...n})=>({providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dF(e,t){const n=await LA(e,{},async()=>{const i=hu({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:s,apiKey:r}=e.config,o=await FA(e,s,"/v1/token",`key=${r}`),a=await e._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:i};return e.emulatorConfig&&Ho(e.emulatorConfig.host)&&(l.credentials="include"),VA.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function fF(e,t){return Jo(e,"POST","/v2/accounts:revokeToken",d_(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){J(t.idToken,"internal-error"),J(typeof t.idToken<"u","internal-error"),J(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):MT(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){J(t.length!==0,"internal-error");const n=MT(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(J(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:i,refreshToken:s,expiresIn:r}=await dF(t,n);this.updateTokensAndExpiration(i,s,Number(r))}updateTokensAndExpiration(t,n,i){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,n){const{refreshToken:i,accessToken:s,expirationTime:r}=n,o=new fo;return i&&(J(typeof i=="string","internal-error",{appName:t}),o.refreshToken=i),s&&(J(typeof s=="string","internal-error",{appName:t}),o.accessToken=s),r&&(J(typeof r=="number","internal-error",{appName:t}),o.expirationTime=r),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new fo,this.toJSON())}_performRefresh(){return ci("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ni(e,t){J(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class bn{constructor({uid:t,auth:n,stsTokenManager:i,...s}){this.providerId="firebase",this.proactiveRefresh=new uF(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Xm(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await Wl(this,this.stsTokenManager.getToken(this.auth,t));return J(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return aF(this,t)}reload(){return cF(this)}_assign(t){this!==t&&(J(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>({...n})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new bn({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(t){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),n&&await Gh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Un(this.auth.app))return Promise.reject(or(this.auth));const t=await this.getIdToken();return await Wl(this,oF(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){const i=n.displayName??void 0,s=n.email??void 0,r=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,u=n.createdAt??void 0,c=n.lastLoginAt??void 0,{uid:d,emailVerified:f,isAnonymous:m,providerData:y,stsTokenManager:_}=n;J(d&&_,t,"internal-error");const E=fo.fromJSON(this.name,_);J(typeof d=="string",t,"internal-error"),Ni(i,t.name),Ni(s,t.name),J(typeof f=="boolean",t,"internal-error"),J(typeof m=="boolean",t,"internal-error"),Ni(r,t.name),Ni(o,t.name),Ni(a,t.name),Ni(l,t.name),Ni(u,t.name),Ni(c,t.name);const v=new bn({uid:d,auth:t,email:s,emailVerified:f,displayName:i,isAnonymous:m,photoURL:o,phoneNumber:r,tenantId:a,stsTokenManager:E,createdAt:u,lastLoginAt:c});return y&&Array.isArray(y)&&(v.providerData=y.map(T=>({...T}))),l&&(v._redirectEventId=l),v}static async _fromIdTokenResponse(t,n,i=!1){const s=new fo;s.updateFromServerResponse(n);const r=new bn({uid:n.localId,auth:t,stsTokenManager:s,isAnonymous:i});return await Gh(r),r}static async _fromGetAccountInfoResponse(t,n,i){const s=n.users[0];J(s.localId!==void 0,"internal-error");const r=s.providerUserInfo!==void 0?jA(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(r!=null&&r.length),a=new fo;a.updateFromIdToken(i);const l=new bn({uid:s.localId,auth:t,stsTokenManager:a,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:r,metadata:new Xm(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(r!=null&&r.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NT=new Map;function hi(e){Ti(e instanceof Function,"Expected a class definition");let t=NT.get(e);return t?(Ti(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,NT.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}BA.type="NONE";const OT=BA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yc(e,t,n){return`firebase:${e}:${t}:${n}`}class po{constructor(t,n,i){this.persistence=t,this.auth=n,this.userKey=i;const{config:s,name:r}=this.auth;this.fullUserKey=Yc(this.userKey,s.apiKey,r),this.fullPersistenceKey=Yc("persistence",s.apiKey,r),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await Kh(this.auth,{idToken:t}).catch(()=>{});return n?bn._fromGetAccountInfoResponse(this.auth,n,t):null}return bn._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,i="authUser"){if(!n.length)return new po(hi(OT),t,i);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let r=s[0]||hi(OT);const o=Yc(i,t.config.apiKey,t.name);let a=null;for(const u of n)try{const c=await u._get(o);if(c){let d;if(typeof c=="string"){const f=await Kh(t,{idToken:c}).catch(()=>{});if(!f)break;d=await bn._fromGetAccountInfoResponse(t,f,c)}else d=bn._fromJSON(t,c);u!==r&&(a=d),r=u;break}}catch{}const l=s.filter(u=>u._shouldAllowMigration);return!r._shouldAllowMigration||!l.length?new po(r,t,i):(r=l[0],a&&await r._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==r)try{await u._remove(o)}catch{}})),new po(r,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VT(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(WA(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(UA(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(qA(t))return"Blackberry";if(KA(t))return"Webos";if(zA(t))return"Safari";if((t.includes("chrome/")||$A(t))&&!t.includes("edge/"))return"Chrome";if(HA(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=e.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function UA(e=Ae()){return/firefox\//i.test(e)}function zA(e=Ae()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function $A(e=Ae()){return/crios\//i.test(e)}function WA(e=Ae()){return/iemobile/i.test(e)}function HA(e=Ae()){return/android/i.test(e)}function qA(e=Ae()){return/blackberry/i.test(e)}function KA(e=Ae()){return/webos/i.test(e)}function p_(e=Ae()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function pF(e=Ae()){var t;return p_(e)&&!!((t=window.navigator)!=null&&t.standalone)}function mF(){return uM()&&document.documentMode===10}function GA(e=Ae()){return p_(e)||HA(e)||KA(e)||qA(e)||/windows phone/i.test(e)||WA(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YA(e,t=[]){let n;switch(e){case"Browser":n=VT(Ae());break;case"Worker":n=`${VT(Ae())}-${e}`;break;default:n=e}const i=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${qo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gF{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const i=r=>new Promise((o,a)=>{try{const l=t(r);o(l)}catch(l){a(l)}});i.onAbort=n,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const i of this.queue)await i(t),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yF(e,t={}){return Jo(e,"GET","/v2/passwordPolicy",d_(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _F=6;class vF{constructor(t){var i;const n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??_F,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=t.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=t.length>=i),s&&(n.meetsMaxPasswordLength=t.length<=s)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let s=0;s<t.length;s++)i=t.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,n,i,s,r){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wF{constructor(t,n,i,s){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new LT(this),this.idTokenSubscription=new LT(this),this.beforeStateQueue=new gF(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=NA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(r=>this._resolvePersistenceManagerAvailable=r)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=hi(n)),this._initializationPromise=this.queue(async()=>{var i,s,r;if(!this._deleted&&(this.persistenceManager=await po.create(this,t),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)==null?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await Kh(this,{idToken:t}),i=await bn._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var r;if(Un(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(r=this.redirectUser)==null?void 0:r._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(t);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return J(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await Gh(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=tF()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Un(this.app))return Promise.reject(or(this));const n=t?ke(t):null;return n&&J(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&J(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Un(this.app)?Promise.reject(or(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Un(this.app)?Promise.reject(or(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(hi(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await yF(this),n=new vF(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new cu("auth","Firebase",t())}onAuthStateChanged(t,n,i){return this.registerStateListener(this.authStateSubscription,t,n,i)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,i){return this.registerStateListener(this.idTokenSubscription,t,n,i)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await fF(this,i)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,n){const i=await this.getOrInitRedirectPersistenceManager(n);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&hi(t)||this._popupRedirectResolver;J(n,this,"argument-error"),this.redirectPersistenceManager=await po.create(this,[hi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===t?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,i,s){if(this._deleted)return()=>{};const r=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(J(a,this,"internal-error"),a.then(()=>{o||r(this.currentUser)}),typeof n=="function"){const l=t.addObserver(n,i,s);return()=>{o=!0,l()}}else{const l=t.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=YA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var n;if(Un(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return t!=null&&t.error&&XL(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function m_(e){return ke(e)}class LT{constructor(t){this.auth=t,this.observer=null,this.addObserver=yM(n=>this.observer=n)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let g_={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function TF(e){g_=e}function xF(e){return g_.loadJS(e)}function EF(){return g_.gapiScript}function SF(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bF(e,t){const n=Ay(e,"auth");if(n.isInitialized()){const s=n.getImmediate(),r=n.getOptions();if(mr(r,t??{}))return s;wi(s,"already-initialized")}return n.initialize({options:t})}function IF(e,t){const n=(t==null?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(hi);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,t==null?void 0:t.popupRedirectResolver)}function AF(e,t,n){const i=m_(e);J(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const s=!1,r=QA(t),{host:o,port:a}=kF(t),l=a===null?"":`:${a}`,u={url:`${r}//${o}${l}/`},c=Object.freeze({host:o,port:a,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){J(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),J(mr(u,i.config.emulator)&&mr(c,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=u,i.emulatorConfig=c,i.settings.appVerificationDisabledForTesting=!0,Ho(o)?(Qb(`${r}//${o}${l}`),Xb("Auth",!0)):PF()}function QA(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function kF(e){const t=QA(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const r=s[1];return{host:r,port:FT(i.substr(r.length+1))}}else{const[r,o]=i.split(":");return{host:r,port:FT(o)}}}function FT(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function PF(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return ci("not implemented")}_getIdTokenResponse(t){return ci("not implemented")}_linkToIdToken(t,n){return ci("not implemented")}_getReauthenticationResolver(t){return ci("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mo(e,t){return sF(e,"POST","/v1/accounts:signInWithIdp",d_(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CF="http://localhost";class vr extends XA{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new vr(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):wi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:s,...r}=n;if(!i||!s)return null;const o=new vr(i,s);return o.idToken=r.idToken||void 0,o.accessToken=r.accessToken||void 0,o.secret=r.secret,o.nonce=r.nonce,o.pendingToken=r.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return mo(t,n)}_linkToIdToken(t,n){const i=this.buildRequest();return i.idToken=n,mo(t,i)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,mo(t,n)}buildRequest(){const t={requestUri:CF,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=hu(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu extends JA{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi extends wu{constructor(){super("facebook.com")}static credential(t){return vr._fromParams({providerId:Wi.PROVIDER_ID,signInMethod:Wi.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Wi.credentialFromTaggedObject(t)}static credentialFromError(t){return Wi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Wi.credential(t.oauthAccessToken)}catch{return null}}}Wi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Wi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi extends wu{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return vr._fromParams({providerId:Hi.PROVIDER_ID,signInMethod:Hi.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Hi.credentialFromTaggedObject(t)}static credentialFromError(t){return Hi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:i}=t;if(!n&&!i)return null;try{return Hi.credential(n,i)}catch{return null}}}Hi.GOOGLE_SIGN_IN_METHOD="google.com";Hi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi extends wu{constructor(){super("github.com")}static credential(t){return vr._fromParams({providerId:qi.PROVIDER_ID,signInMethod:qi.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return qi.credentialFromTaggedObject(t)}static credentialFromError(t){return qi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return qi.credential(t.oauthAccessToken)}catch{return null}}}qi.GITHUB_SIGN_IN_METHOD="github.com";qi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki extends wu{constructor(){super("twitter.com")}static credential(t,n){return vr._fromParams({providerId:Ki.PROVIDER_ID,signInMethod:Ki.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Ki.credentialFromTaggedObject(t)}static credentialFromError(t){return Ki.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=t;if(!n||!i)return null;try{return Ki.credential(n,i)}catch{return null}}}Ki.TWITTER_SIGN_IN_METHOD="twitter.com";Ki.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,i,s=!1){const r=await bn._fromIdTokenResponse(t,i,s),o=jT(i);return new Oo({user:r,providerId:o,_tokenResponse:i,operationType:n})}static async _forOperation(t,n,i){await t._updateTokensIfNecessary(i,!0);const s=jT(i);return new Oo({user:t,providerId:s,_tokenResponse:i,operationType:n})}}function jT(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh extends bi{constructor(t,n,i,s){super(n.code,n.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,Yh.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,n,i,s){return new Yh(t,n,i,s)}}function ZA(e,t,n,i){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?Yh._fromErrorAndOperation(e,r,t,i):r})}async function RF(e,t,n=!1){const i=await Wl(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Oo._forOperation(e,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DF(e,t,n=!1){const{auth:i}=e;if(Un(i.app))return Promise.reject(or(i));const s="reauthenticate";try{const r=await Wl(e,ZA(i,s,t,e),n);J(r.idToken,i,"internal-error");const o=f_(r.idToken);J(o,i,"internal-error");const{sub:a}=o;return J(e.uid===a,i,"user-mismatch"),Oo._forOperation(e,s,r)}catch(r){throw(r==null?void 0:r.code)==="auth/user-not-found"&&wi(i,"user-mismatch"),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MF(e,t,n=!1){if(Un(e.app))return Promise.reject(or(e));const i="signIn",s=await ZA(e,i,t),r=await Oo._fromIdTokenResponse(e,i,s);return n||await e._updateCurrentUser(r.user),r}function NF(e,t,n,i){return ke(e).onIdTokenChanged(t,n,i)}function OF(e,t,n){return ke(e).beforeAuthStateChanged(t,n)}const Qh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Qh,"1"),this.storage.removeItem(Qh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VF=1e3,LF=10;class ek extends tk{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=GA(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),s=this.localCache[n];i!==s&&t(n,s,i)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const i=t.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(i);!n&&this.localCache[i]===o||this.notifyListeners(i,o)},r=this.storage.getItem(i);mF()&&r!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,LF):s()}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:i}),!0)})},VF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}ek.type="LOCAL";const FF=ek;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk extends tk{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}nk.type="SESSION";const ik=nk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jF(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(s=>s.isListeningto(t));if(n)return n;const i=new Wd(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:i,eventType:s,data:r}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const a=Array.from(o).map(async u=>u(n.origin,r)),l=await jF(a);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Wd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y_(e="",t=10){let n="";for(let i=0;i<t;i++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BF{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let r,o;return new Promise((a,l)=>{const u=y_("",20);s.port1.start();const c=setTimeout(()=>{l(new Error("unsupported_event"))},i);o={messageChannel:s,onMessage(d){const f=d;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(c),r=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),a(f.data.response);break;default:clearTimeout(c),clearTimeout(r),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qn(){return window}function UF(e){Qn().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sk(){return typeof Qn().WorkerGlobalScope<"u"&&typeof Qn().importScripts=="function"}async function zF(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function $F(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)==null?void 0:e.controller)||null}function WF(){return sk()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rk="firebaseLocalStorageDb",HF=1,Xh="firebaseLocalStorage",ok="fbase_key";class Tu{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Hd(e,t){return e.transaction([Xh],t?"readwrite":"readonly").objectStore(Xh)}function qF(){const e=indexedDB.deleteDatabase(rk);return new Tu(e).toPromise()}function Jm(){const e=indexedDB.open(rk,HF);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const i=e.result;try{i.createObjectStore(Xh,{keyPath:ok})}catch(s){n(s)}}),e.addEventListener("success",async()=>{const i=e.result;i.objectStoreNames.contains(Xh)?t(i):(i.close(),await qF(),t(await Jm()))})})}async function BT(e,t,n){const i=Hd(e,!0).put({[ok]:t,value:n});return new Tu(i).toPromise()}async function KF(e,t){const n=Hd(e,!1).get(t),i=await new Tu(n).toPromise();return i===void 0?null:i.value}function UT(e,t){const n=Hd(e,!0).delete(t);return new Tu(n).toPromise()}const GF=800,YF=3;class ak{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Jm(),this.db)}async _withRetries(t){let n=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(n++>YF)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return sk()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Wd._getInstance(WF()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await zF(),!this.activeServiceWorker)return;this.sender=new BF(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(n=t[0])!=null&&n.fulfilled&&(i=t[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||$F()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Jm();return await BT(t,Qh,"1"),await UT(t,Qh),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>BT(i,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(i=>KF(i,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>UT(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(s=>{const r=Hd(s,!1).getAll();return new Tu(r).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(t.length!==0)for(const{fbase_key:s,value:r}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(r)&&(this.notifyListeners(s,r),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),GF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ak.type="LOCAL";const QF=ak;new vu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XF(e,t){return t?hi(t):(J(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __ extends XA{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return mo(t,this._buildIdpRequest())}_linkToIdToken(t,n){return mo(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return mo(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function JF(e){return MF(e.auth,new __(e),e.bypassAuthState)}function ZF(e){const{auth:t,user:n}=e;return J(n,t,"internal-error"),DF(n,new __(e),e.bypassAuthState)}async function t4(e){const{auth:t,user:n}=e;return J(n,t,"internal-error"),RF(n,new __(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(t,n,i,s,r=!1){this.auth=t,this.resolver=i,this.user=s,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:i,postBody:s,tenantId:r,error:o,type:a}=t;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:i,tenantId:r||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return JF;case"linkViaPopup":case"linkViaRedirect":return t4;case"reauthViaPopup":case"reauthViaRedirect":return ZF;default:wi(this.auth,"internal-error")}}resolve(t){Ti(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Ti(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e4=new vu(2e3,1e4);class Xr extends lk{constructor(t,n,i,s,r){super(t,n,s,r),this.provider=i,this.authWindow=null,this.pollId=null,Xr.currentPopupAction&&Xr.currentPopupAction.cancel(),Xr.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return J(t,this.auth,"internal-error"),t}async onExecution(){Ti(this.filter.length===1,"Popup operations only handle one event");const t=y_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Yn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(Yn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Xr.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Yn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,e4.get())};t()}}Xr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n4="pendingRedirect",Qc=new Map;class i4 extends lk{constructor(t,n,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let t=Qc.get(this.auth._key());if(!t){try{const i=await s4(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(n){t=()=>Promise.reject(n)}Qc.set(this.auth._key(),t)}return this.bypassAuthState||Qc.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function s4(e,t){const n=a4(t),i=o4(e);if(!await i._isAvailable())return!1;const s=await i._get(n)==="true";return await i._remove(n),s}function r4(e,t){Qc.set(e._key(),t)}function o4(e){return hi(e._redirectPersistence)}function a4(e){return Yc(n4,e.config.apiKey,e.name)}async function l4(e,t,n=!1){if(Un(e.app))return Promise.reject(or(e));const i=m_(e),s=XF(i,t),o=await new i4(i,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u4=10*60*1e3;class c4{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(n=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!h4(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var i;if(t.error&&!uk(t)){const s=((i=t.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(Yn(this.auth,s))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const i=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=u4&&this.cachedEventUids.clear(),this.cachedEventUids.has(zT(t))}saveEventToCache(t){this.cachedEventUids.add(zT(t)),this.lastProcessedEventTime=Date.now()}}function zT(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function uk({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function h4(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return uk(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d4(e,t={}){return Jo(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,p4=/^https?/;async function m4(e){if(e.config.emulator)return;const{authorizedDomains:t}=await d4(e);for(const n of t)try{if(g4(n))return}catch{}wi(e,"unauthorized-domain")}function g4(e){const t=Qm(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&i===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===i}if(!p4.test(n))return!1;if(f4.test(e))return i===e;const s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y4=new vu(3e4,6e4);function $T(){const e=Qn().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function _4(e){return new Promise((t,n)=>{var s,r,o;function i(){$T(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{$T(),n(Yn(e,"network-request-failed"))},timeout:y4.get()})}if((r=(s=Qn().gapi)==null?void 0:s.iframes)!=null&&r.Iframe)t(gapi.iframes.getContext());else if((o=Qn().gapi)!=null&&o.load)i();else{const a=SF("iframefcb");return Qn()[a]=()=>{gapi.load?i():n(Yn(e,"network-request-failed"))},xF(`${EF()}?onload=${a}`).catch(l=>n(l))}}).catch(t=>{throw Xc=null,t})}let Xc=null;function v4(e){return Xc=Xc||_4(e),Xc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w4=new vu(5e3,15e3),T4="__/auth/iframe",x4="emulator/auth/iframe",E4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},S4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function b4(e){const t=e.config;J(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?h_(t,x4):`https://${e.config.authDomain}/${T4}`,i={apiKey:t.apiKey,appName:e.name,v:qo},s=S4.get(e.config.apiHost);s&&(i.eid=s);const r=e._getFrameworks();return r.length&&(i.fw=r.join(",")),`${n}?${hu(i).slice(1)}`}async function I4(e){const t=await v4(e),n=Qn().gapi;return J(n,e,"internal-error"),t.open({where:document.body,url:b4(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:E4,dontclear:!0},i=>new Promise(async(s,r)=>{await i.restyle({setHideOnLeave:!1});const o=Yn(e,"network-request-failed"),a=Qn().setTimeout(()=>{r(o)},w4.get());function l(){Qn().clearTimeout(a),s(i)}i.ping(l).then(l,()=>{r(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},k4=500,P4=600,C4="_blank",R4="http://localhost";class WT{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function D4(e,t,n,i=k4,s=P4){const r=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l={...A4,width:i.toString(),height:s.toString(),top:r,left:o},u=Ae().toLowerCase();n&&(a=$A(u)?C4:n),UA(u)&&(t=t||R4,l.scrollbars="yes");const c=Object.entries(l).reduce((f,[m,y])=>`${f}${m}=${y},`,"");if(pF(u)&&a!=="_self")return M4(t||"",a),new WT(null);const d=window.open(t||"",a,c);J(d,e,"popup-blocked");try{d.focus()}catch{}return new WT(d)}function M4(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N4="__/auth/handler",O4="emulator/auth/handler",V4=encodeURIComponent("fac");async function HT(e,t,n,i,s,r){J(e.config.authDomain,e,"auth-domain-config-required"),J(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:qo,eventId:s};if(t instanceof JA){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",gM(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[c,d]of Object.entries({}))o[c]=d}if(t instanceof wu){const c=t.getScopes().filter(d=>d!=="");c.length>0&&(o.scopes=c.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const l=await e._getAppCheckToken(),u=l?`#${V4}=${encodeURIComponent(l)}`:"";return`${L4(e)}?${hu(a).slice(1)}${u}`}function L4({config:e}){return e.emulator?h_(e,O4):`https://${e.authDomain}/${N4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const op="webStorageSupport";class F4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ik,this._completeRedirectFn=l4,this._overrideRedirectResult=r4}async _openPopup(t,n,i,s){var o;Ti((o=this.eventManagers[t._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const r=await HT(t,n,i,Qm(),s);return D4(t,r,y_())}async _openRedirect(t,n,i,s){await this._originValidation(t);const r=await HT(t,n,i,Qm(),s);return UF(r),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:s,promise:r}=this.eventManagers[n];return s?Promise.resolve(s):(Ti(r,"If manager is not set, promise should be"),r)}const i=this.initAndGetManager(t);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(t){const n=await I4(t),i=new c4(t);return n.register("authEvent",s=>(J(s==null?void 0:s.authEvent,t,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=n,i}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(op,{type:op},s=>{var o;const r=(o=s==null?void 0:s[0])==null?void 0:o[op];r!==void 0&&n(!!r),wi(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=m4(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return GA()||zA()||p_()}}const j4=F4;var qT="@firebase/auth",KT="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(i=>{t((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U4(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function z4(e){Ao(new gr("auth",(t,{options:n})=>{const i=t.getProvider("app").getImmediate(),s=t.getProvider("heartbeat"),r=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;J(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:YA(e)},u=new wF(i,s,r,l);return IF(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,i)=>{t.getProvider("auth-internal").initialize()})),Ao(new gr("auth-internal",t=>{const n=m_(t.getProvider("auth").getImmediate());return(i=>new B4(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),cs(qT,KT,U4(e)),cs(qT,KT,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $4=5*60,W4=Yb("authIdTokenMaxAge")||$4;let GT=null;const H4=e=>async t=>{const n=t&&await t.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>W4)return;const s=n==null?void 0:n.token;GT!==s&&(GT=s,await fetch(e,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function q4(e=eI()){const t=Ay(e,"auth");if(t.isInitialized())return t.getImmediate();const n=bF(e,{popupRedirectResolver:j4,persistence:[QF,FF,ik]}),i=Yb("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const r=new URL(i,location.origin);if(location.origin===r.origin){const o=H4(r.toString());OF(n,o,()=>o(n.currentUser)),NF(n,a=>o(a))}}const s=Kb("auth");return s&&AF(n,`http://${s}`),n}function K4(){var e;return((e=document.getElementsByTagName("head"))==null?void 0:e[0])??document}TF({loadJS(e){return new Promise((t,n)=>{const i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=s=>{const r=Yn("internal-error");r.customData=s,n(r)},i.type="text/javascript",i.charset="UTF-8",K4().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});z4("Browser");var Dr={VITE_FIREBASE_API_KEY:"AIzaSyDJwSFwmMZx4-8-rUOqzkxR46E6E_qBa9Q",VITE_FIREBASE_AUTH_DOMAIN:"junebug-app.firebaseapp.com",VITE_FIREBASE_PROJECT_ID:"junebug-app",VITE_FIREBASE_STORAGE_BUCKET:"junebug-app.appspot.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"647178015669",VITE_FIREBASE_APP_ID:"1:647178015669:web:49096b364944b29850bffc"};const G4={apiKey:Dr.VITE_FIREBASE_API_KEY,authDomain:Dr.VITE_FIREBASE_AUTH_DOMAIN,projectId:Dr.VITE_FIREBASE_PROJECT_ID,storageBucket:Dr.VITE_FIREBASE_STORAGE_BUCKET,messagingSenderId:Dr.VITE_FIREBASE_MESSAGING_SENDER_ID,appId:Dr.VITE_FIREBASE_APP_ID},ck=tI(G4),Oi=CL(ck);q4(ck);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Y4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q4=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Pe=(e,t)=>{const n=F.forwardRef(({color:i="currentColor",size:s=24,strokeWidth:r=2,absoluteStrokeWidth:o,className:a="",children:l,...u},c)=>F.createElement("svg",{ref:c,...Y4,width:s,height:s,stroke:i,strokeWidth:o?Number(r)*24/Number(s):r,className:["lucide",`lucide-${Q4(e)}`,a].join(" "),...u},[...t.map(([d,f])=>F.createElement(d,f)),...Array.isArray(l)?l:[l]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X4=Pe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J4=Pe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z4=Pe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t3=Pe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3=Pe("Droplet",[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n3=Pe("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i3=Pe("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=Pe("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r3=Pe("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o3=Pe("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a3=Pe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3=Pe("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u3=Pe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c3=Pe("Soup",[["path",{d:"M12 21a9 9 0 0 0 9-9H3a9 9 0 0 0 9 9Z",key:"4rw317"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M19.5 12 22 6",key:"shfsr5"}],["path",{d:"M16.25 3c.27.1.8.53.75 1.36-.06.83-.93 1.2-1 2.02-.05.78.34 1.24.73 1.62",key:"rpc6vp"}],["path",{d:"M11.25 3c.27.1.8.53.74 1.36-.05.83-.93 1.2-.98 2.02-.06.78.33 1.24.72 1.62",key:"1lf63m"}],["path",{d:"M6.25 3c.27.1.8.53.75 1.36-.06.83-.93 1.2-1 2.02-.05.78.34 1.24.74 1.62",key:"97tijn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h3=Pe("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3=Pe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),v_=F.createContext({});function w_(e){const t=F.useRef(null);return t.current===null&&(t.current=e()),t.current}const T_=typeof window<"u",hk=T_?F.useLayoutEffect:F.useEffect,qd=F.createContext(null);function x_(e,t){e.indexOf(t)===-1&&e.push(t)}function E_(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const xi=(e,t,n)=>n>t?t:n<e?e:n;let S_=()=>{};const Ei={},dk=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function fk(e){return typeof e=="object"&&e!==null}const pk=e=>/^0[^.\s]+$/u.test(e);function b_(e){let t;return()=>(t===void 0&&(t=e()),t)}const mn=e=>e,f3=(e,t)=>n=>t(e(n)),xu=(...e)=>e.reduce(f3),Hl=(e,t,n)=>{const i=t-e;return i===0?1:(n-e)/i};class I_{constructor(){this.subscriptions=[]}add(t){return x_(this.subscriptions,t),()=>E_(this.subscriptions,t)}notify(t,n,i){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,n,i);else for(let r=0;r<s;r++){const o=this.subscriptions[r];o&&o(t,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Xn=e=>e*1e3,dn=e=>e/1e3;function mk(e,t){return t?e*(1e3/t):0}const gk=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,p3=1e-7,m3=12;function g3(e,t,n,i,s){let r,o,a=0;do o=t+(n-t)/2,r=gk(o,i,s)-e,r>0?n=o:t=o;while(Math.abs(r)>p3&&++a<m3);return o}function Eu(e,t,n,i){if(e===t&&n===i)return mn;const s=r=>g3(r,0,1,e,n);return r=>r===0||r===1?r:gk(s(r),t,i)}const yk=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,_k=e=>t=>1-e(1-t),vk=Eu(.33,1.53,.69,.99),A_=_k(vk),wk=yk(A_),Tk=e=>(e*=2)<1?.5*A_(e):.5*(2-Math.pow(2,-10*(e-1))),k_=e=>1-Math.sin(Math.acos(e)),xk=_k(k_),Ek=yk(k_),y3=Eu(.42,0,1,1),_3=Eu(0,0,.58,1),Sk=Eu(.42,0,.58,1),v3=e=>Array.isArray(e)&&typeof e[0]!="number",bk=e=>Array.isArray(e)&&typeof e[0]=="number",w3={linear:mn,easeIn:y3,easeInOut:Sk,easeOut:_3,circIn:k_,circInOut:Ek,circOut:xk,backIn:A_,backInOut:wk,backOut:vk,anticipate:Tk},T3=e=>typeof e=="string",YT=e=>{if(bk(e)){S_(e.length===4);const[t,n,i,s]=e;return Eu(t,n,i,s)}else if(T3(e))return w3[e];return e},hc=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function x3(e,t){let n=new Set,i=new Set,s=!1,r=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function l(c){o.has(c)&&(u.schedule(c),e()),c(a)}const u={schedule:(c,d=!1,f=!1)=>{const y=f&&s?n:i;return d&&o.add(c),y.has(c)||y.add(c),c},cancel:c=>{i.delete(c),o.delete(c)},process:c=>{if(a=c,s){r=!0;return}s=!0,[n,i]=[i,n],n.forEach(l),n.clear(),s=!1,r&&(r=!1,u.process(c))}};return u}const E3=40;function Ik(e,t){let n=!1,i=!0;const s={delta:0,timestamp:0,isProcessing:!1},r=()=>n=!0,o=hc.reduce((b,R)=>(b[R]=x3(r),b),{}),{setup:a,read:l,resolveKeyframes:u,preUpdate:c,update:d,preRender:f,render:m,postRender:y}=o,_=()=>{const b=Ei.useManualTiming?s.timestamp:performance.now();n=!1,Ei.useManualTiming||(s.delta=i?1e3/60:Math.max(Math.min(b-s.timestamp,E3),1)),s.timestamp=b,s.isProcessing=!0,a.process(s),l.process(s),u.process(s),c.process(s),d.process(s),f.process(s),m.process(s),y.process(s),s.isProcessing=!1,n&&t&&(i=!1,e(_))},E=()=>{n=!0,i=!0,s.isProcessing||e(_)};return{schedule:hc.reduce((b,R)=>{const D=o[R];return b[R]=(N,S=!1,w=!1)=>(n||E(),D.schedule(N,S,w)),b},{}),cancel:b=>{for(let R=0;R<hc.length;R++)o[hc[R]].cancel(b)},state:s,steps:o}}const{schedule:Rt,cancel:Es,state:ce,steps:ap}=Ik(typeof requestAnimationFrame<"u"?requestAnimationFrame:mn,!0);let Jc;function S3(){Jc=void 0}const $e={now:()=>(Jc===void 0&&$e.set(ce.isProcessing||Ei.useManualTiming?ce.timestamp:performance.now()),Jc),set:e=>{Jc=e,queueMicrotask(S3)}},Ak=e=>t=>typeof t=="string"&&t.startsWith(e),P_=Ak("--"),b3=Ak("var(--"),C_=e=>b3(e)?I3.test(e.split("/*")[0].trim()):!1,I3=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Zo={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},ql={...Zo,transform:e=>xi(0,1,e)},dc={...Zo,default:1},cl=e=>Math.round(e*1e5)/1e5,R_=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function A3(e){return e==null}const k3=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,D_=(e,t)=>n=>!!(typeof n=="string"&&k3.test(n)&&n.startsWith(e)||t&&!A3(n)&&Object.prototype.hasOwnProperty.call(n,t)),kk=(e,t,n)=>i=>{if(typeof i!="string")return i;const[s,r,o,a]=i.match(R_);return{[e]:parseFloat(s),[t]:parseFloat(r),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},P3=e=>xi(0,255,e),lp={...Zo,transform:e=>Math.round(P3(e))},Zs={test:D_("rgb","red"),parse:kk("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:i=1})=>"rgba("+lp.transform(e)+", "+lp.transform(t)+", "+lp.transform(n)+", "+cl(ql.transform(i))+")"};function C3(e){let t="",n="",i="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),i=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),i=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,i+=i,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:s?parseInt(s,16)/255:1}}const Zm={test:D_("#"),parse:C3,transform:Zs.transform},Su=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Fi=Su("deg"),Jn=Su("%"),Q=Su("px"),R3=Su("vh"),D3=Su("vw"),QT={...Jn,parse:e=>Jn.parse(e)/100,transform:e=>Jn.transform(e*100)},Jr={test:D_("hsl","hue"),parse:kk("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:i=1})=>"hsla("+Math.round(e)+", "+Jn.transform(cl(t))+", "+Jn.transform(cl(n))+", "+cl(ql.transform(i))+")"},Ht={test:e=>Zs.test(e)||Zm.test(e)||Jr.test(e),parse:e=>Zs.test(e)?Zs.parse(e):Jr.test(e)?Jr.parse(e):Zm.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Zs.transform(e):Jr.transform(e),getAnimatableNone:e=>{const t=Ht.parse(e);return t.alpha=0,Ht.transform(t)}},M3=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function N3(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(R_))==null?void 0:t.length)||0)+(((n=e.match(M3))==null?void 0:n.length)||0)>0}const Pk="number",Ck="color",O3="var",V3="var(",XT="${}",L3=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Kl(e){const t=e.toString(),n=[],i={color:[],number:[],var:[]},s=[];let r=0;const a=t.replace(L3,l=>(Ht.test(l)?(i.color.push(r),s.push(Ck),n.push(Ht.parse(l))):l.startsWith(V3)?(i.var.push(r),s.push(O3),n.push(l)):(i.number.push(r),s.push(Pk),n.push(parseFloat(l))),++r,XT)).split(XT);return{values:n,split:a,indexes:i,types:s}}function Rk(e){return Kl(e).values}function Dk(e){const{split:t,types:n}=Kl(e),i=t.length;return s=>{let r="";for(let o=0;o<i;o++)if(r+=t[o],s[o]!==void 0){const a=n[o];a===Pk?r+=cl(s[o]):a===Ck?r+=Ht.transform(s[o]):r+=s[o]}return r}}const F3=e=>typeof e=="number"?0:Ht.test(e)?Ht.getAnimatableNone(e):e;function j3(e){const t=Rk(e);return Dk(e)(t.map(F3))}const Ss={test:N3,parse:Rk,createTransformer:Dk,getAnimatableNone:j3};function up(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function B3({hue:e,saturation:t,lightness:n,alpha:i}){e/=360,t/=100,n/=100;let s=0,r=0,o=0;if(!t)s=r=o=n;else{const a=n<.5?n*(1+t):n+t-n*t,l=2*n-a;s=up(l,a,e+1/3),r=up(l,a,e),o=up(l,a,e-1/3)}return{red:Math.round(s*255),green:Math.round(r*255),blue:Math.round(o*255),alpha:i}}function Jh(e,t){return n=>n>0?t:e}const Mt=(e,t,n)=>e+(t-e)*n,cp=(e,t,n)=>{const i=e*e,s=n*(t*t-i)+i;return s<0?0:Math.sqrt(s)},U3=[Zm,Zs,Jr],z3=e=>U3.find(t=>t.test(e));function JT(e){const t=z3(e);if(!t)return!1;let n=t.parse(e);return t===Jr&&(n=B3(n)),n}const ZT=(e,t)=>{const n=JT(e),i=JT(t);if(!n||!i)return Jh(e,t);const s={...n};return r=>(s.red=cp(n.red,i.red,r),s.green=cp(n.green,i.green,r),s.blue=cp(n.blue,i.blue,r),s.alpha=Mt(n.alpha,i.alpha,r),Zs.transform(s))},tg=new Set(["none","hidden"]);function $3(e,t){return tg.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function W3(e,t){return n=>Mt(e,t,n)}function M_(e){return typeof e=="number"?W3:typeof e=="string"?C_(e)?Jh:Ht.test(e)?ZT:K3:Array.isArray(e)?Mk:typeof e=="object"?Ht.test(e)?ZT:H3:Jh}function Mk(e,t){const n=[...e],i=n.length,s=e.map((r,o)=>M_(r)(r,t[o]));return r=>{for(let o=0;o<i;o++)n[o]=s[o](r);return n}}function H3(e,t){const n={...e,...t},i={};for(const s in n)e[s]!==void 0&&t[s]!==void 0&&(i[s]=M_(e[s])(e[s],t[s]));return s=>{for(const r in i)n[r]=i[r](s);return n}}function q3(e,t){const n=[],i={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const r=t.types[s],o=e.indexes[r][i[r]],a=e.values[o]??0;n[s]=a,i[r]++}return n}const K3=(e,t)=>{const n=Ss.createTransformer(t),i=Kl(e),s=Kl(t);return i.indexes.var.length===s.indexes.var.length&&i.indexes.color.length===s.indexes.color.length&&i.indexes.number.length>=s.indexes.number.length?tg.has(e)&&!s.values.length||tg.has(t)&&!i.values.length?$3(e,t):xu(Mk(q3(i,s),s.values),n):Jh(e,t)};function Nk(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?Mt(e,t,n):M_(e)(e,t)}const G3=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>Rt.update(t,n),stop:()=>Es(t),now:()=>ce.isProcessing?ce.timestamp:$e.now()}},Ok=(e,t,n=10)=>{let i="";const s=Math.max(Math.round(t/n),2);for(let r=0;r<s;r++)i+=Math.round(e(r/(s-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},Zh=2e4;function N_(e){let t=0;const n=50;let i=e.next(t);for(;!i.done&&t<Zh;)t+=n,i=e.next(t);return t>=Zh?1/0:t}function Y3(e,t=100,n){const i=n({...e,keyframes:[0,t]}),s=Math.min(N_(i),Zh);return{type:"keyframes",ease:r=>i.next(s*r).value/t,duration:dn(s)}}const Q3=5;function Vk(e,t,n){const i=Math.max(t-Q3,0);return mk(n-e(i),t-i)}const Ft={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},hp=.001;function X3({duration:e=Ft.duration,bounce:t=Ft.bounce,velocity:n=Ft.velocity,mass:i=Ft.mass}){let s,r,o=1-t;o=xi(Ft.minDamping,Ft.maxDamping,o),e=xi(Ft.minDuration,Ft.maxDuration,dn(e)),o<1?(s=u=>{const c=u*o,d=c*e,f=c-n,m=eg(u,o),y=Math.exp(-d);return hp-f/m*y},r=u=>{const d=u*o*e,f=d*n+n,m=Math.pow(o,2)*Math.pow(u,2)*e,y=Math.exp(-d),_=eg(Math.pow(u,2),o);return(-s(u)+hp>0?-1:1)*((f-m)*y)/_}):(s=u=>{const c=Math.exp(-u*e),d=(u-n)*e+1;return-hp+c*d},r=u=>{const c=Math.exp(-u*e),d=(n-u)*(e*e);return c*d});const a=5/e,l=Z3(s,r,a);if(e=Xn(e),isNaN(l))return{stiffness:Ft.stiffness,damping:Ft.damping,duration:e};{const u=Math.pow(l,2)*i;return{stiffness:u,damping:o*2*Math.sqrt(i*u),duration:e}}}const J3=12;function Z3(e,t,n){let i=n;for(let s=1;s<J3;s++)i=i-e(i)/t(i);return i}function eg(e,t){return e*Math.sqrt(1-t*t)}const tj=["duration","bounce"],ej=["stiffness","damping","mass"];function tx(e,t){return t.some(n=>e[n]!==void 0)}function nj(e){let t={velocity:Ft.velocity,stiffness:Ft.stiffness,damping:Ft.damping,mass:Ft.mass,isResolvedFromDuration:!1,...e};if(!tx(e,ej)&&tx(e,tj))if(e.visualDuration){const n=e.visualDuration,i=2*Math.PI/(n*1.2),s=i*i,r=2*xi(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:Ft.mass,stiffness:s,damping:r}}else{const n=X3(e);t={...t,...n,mass:Ft.mass},t.isResolvedFromDuration=!0}return t}function td(e=Ft.visualDuration,t=Ft.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:i,restDelta:s}=n;const r=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:r},{stiffness:l,damping:u,mass:c,duration:d,velocity:f,isResolvedFromDuration:m}=nj({...n,velocity:-dn(n.velocity||0)}),y=f||0,_=u/(2*Math.sqrt(l*c)),E=o-r,v=dn(Math.sqrt(l/c)),T=Math.abs(E)<5;i||(i=T?Ft.restSpeed.granular:Ft.restSpeed.default),s||(s=T?Ft.restDelta.granular:Ft.restDelta.default);let b;if(_<1){const D=eg(v,_);b=N=>{const S=Math.exp(-_*v*N);return o-S*((y+_*v*E)/D*Math.sin(D*N)+E*Math.cos(D*N))}}else if(_===1)b=D=>o-Math.exp(-v*D)*(E+(y+v*E)*D);else{const D=v*Math.sqrt(_*_-1);b=N=>{const S=Math.exp(-_*v*N),w=Math.min(D*N,300);return o-S*((y+_*v*E)*Math.sinh(w)+D*E*Math.cosh(w))/D}}const R={calculatedDuration:m&&d||null,next:D=>{const N=b(D);if(m)a.done=D>=d;else{let S=D===0?y:0;_<1&&(S=D===0?Xn(y):Vk(b,D,N));const w=Math.abs(S)<=i,x=Math.abs(o-N)<=s;a.done=w&&x}return a.value=a.done?o:N,a},toString:()=>{const D=Math.min(N_(R),Zh),N=Ok(S=>R.next(D*S).value,D,30);return D+"ms "+N},toTransition:()=>{}};return R}td.applyToOptions=e=>{const t=Y3(e,100,td);return e.ease=t.ease,e.duration=Xn(t.duration),e.type="keyframes",e};function ng({keyframes:e,velocity:t=0,power:n=.8,timeConstant:i=325,bounceDamping:s=10,bounceStiffness:r=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:c}){const d=e[0],f={done:!1,value:d},m=w=>a!==void 0&&w<a||l!==void 0&&w>l,y=w=>a===void 0?l:l===void 0||Math.abs(a-w)<Math.abs(l-w)?a:l;let _=n*t;const E=d+_,v=o===void 0?E:o(E);v!==E&&(_=v-d);const T=w=>-_*Math.exp(-w/i),b=w=>v+T(w),R=w=>{const x=T(w),k=b(w);f.done=Math.abs(x)<=u,f.value=f.done?v:k};let D,N;const S=w=>{m(f.value)&&(D=w,N=td({keyframes:[f.value,y(f.value)],velocity:Vk(b,w,f.value),damping:s,stiffness:r,restDelta:u,restSpeed:c}))};return S(0),{calculatedDuration:null,next:w=>{let x=!1;return!N&&D===void 0&&(x=!0,R(w),S(w)),D!==void 0&&w>=D?N.next(w-D):(!x&&R(w),f)}}}function ij(e,t,n){const i=[],s=n||Ei.mix||Nk,r=e.length-1;for(let o=0;o<r;o++){let a=s(e[o],e[o+1]);if(t){const l=Array.isArray(t)?t[o]||mn:t;a=xu(l,a)}i.push(a)}return i}function sj(e,t,{clamp:n=!0,ease:i,mixer:s}={}){const r=e.length;if(S_(r===t.length),r===1)return()=>t[0];if(r===2&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[r-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=ij(t,i,s),l=a.length,u=c=>{if(o&&c<e[0])return t[0];let d=0;if(l>1)for(;d<e.length-2&&!(c<e[d+1]);d++);const f=Hl(e[d],e[d+1],c);return a[d](f)};return n?c=>u(xi(e[0],e[r-1],c)):u}function rj(e,t){const n=e[e.length-1];for(let i=1;i<=t;i++){const s=Hl(0,t,i);e.push(Mt(n,1,s))}}function oj(e){const t=[0];return rj(t,e.length-1),t}function aj(e,t){return e.map(n=>n*t)}function lj(e,t){return e.map(()=>t||Sk).splice(0,e.length-1)}function hl({duration:e=300,keyframes:t,times:n,ease:i="easeInOut"}){const s=v3(i)?i.map(YT):YT(i),r={done:!1,value:t[0]},o=aj(n&&n.length===t.length?n:oj(t),e),a=sj(o,t,{ease:Array.isArray(s)?s:lj(t,s)});return{calculatedDuration:e,next:l=>(r.value=a(l),r.done=l>=e,r)}}const uj=e=>e!==null;function O_(e,{repeat:t,repeatType:n="loop"},i,s=1){const r=e.filter(uj),a=s<0||t&&n!=="loop"&&t%2===1?0:r.length-1;return!a||i===void 0?r[a]:i}const cj={decay:ng,inertia:ng,tween:hl,keyframes:hl,spring:td};function Lk(e){typeof e.type=="string"&&(e.type=cj[e.type])}class V_{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const hj=e=>e/100;class L_ extends V_{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var i,s;const{motionValue:n}=this.options;n&&n.updatedAt!==$e.now()&&this.tick($e.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(i=this.options).onStop)==null||s.call(i))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;Lk(t);const{type:n=hl,repeat:i=0,repeatDelay:s=0,repeatType:r,velocity:o=0}=t;let{keyframes:a}=t;const l=n||hl;l!==hl&&typeof a[0]!="number"&&(this.mixKeyframes=xu(hj,Nk(a[0],a[1])),a=[0,100]);const u=l({...t,keyframes:a});r==="mirror"&&(this.mirroredGenerator=l({...t,keyframes:[...a].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=N_(u));const{calculatedDuration:c}=u;this.calculatedDuration=c,this.resolvedDuration=c+s,this.totalDuration=this.resolvedDuration*(i+1)-s,this.generator=u}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:i,totalDuration:s,mixKeyframes:r,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return i.next(0);const{delay:u=0,keyframes:c,repeat:d,repeatType:f,repeatDelay:m,type:y,onUpdate:_,finalKeyframe:E}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-s/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const v=this.currentTime-u*(this.playbackSpeed>=0?1:-1),T=this.playbackSpeed>=0?v<0:v>s;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let b=this.currentTime,R=i;if(d){const w=Math.min(this.currentTime,s)/a;let x=Math.floor(w),k=w%1;!k&&w>=1&&(k=1),k===1&&x--,x=Math.min(x,d+1),!!(x%2)&&(f==="reverse"?(k=1-k,m&&(k-=m/a)):f==="mirror"&&(R=o)),b=xi(0,1,k)*a}const D=T?{done:!1,value:c[0]}:R.next(b);r&&(D.value=r(D.value));let{done:N}=D;!T&&l!==null&&(N=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const S=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&N);return S&&y!==ng&&(D.value=O_(c,this.options,E,this.speed)),_&&_(D.value),S&&this.finish(),D}then(t,n){return this.finished.then(t,n)}get duration(){return dn(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+dn(t)}get time(){return dn(this.currentTime)}set time(t){var n;t=Xn(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime($e.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=dn(this.currentTime))}play(){var s,r;if(this.isStopped)return;const{driver:t=G3,startTime:n}=this.options;this.driver||(this.driver=t(o=>this.tick(o))),(r=(s=this.options).onPlay)==null||r.call(s);const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=n??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime($e.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(t=this.options).onComplete)==null||n.call(t)}cancel(){var t,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(t=this.options).onCancel)==null||n.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),t.observe(this)}}function dj(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const tr=e=>e*180/Math.PI,ig=e=>{const t=tr(Math.atan2(e[1],e[0]));return sg(t)},fj={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:ig,rotateZ:ig,skewX:e=>tr(Math.atan(e[1])),skewY:e=>tr(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},sg=e=>(e=e%360,e<0&&(e+=360),e),ex=ig,nx=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),ix=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),pj={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:nx,scaleY:ix,scale:e=>(nx(e)+ix(e))/2,rotateX:e=>sg(tr(Math.atan2(e[6],e[5]))),rotateY:e=>sg(tr(Math.atan2(-e[2],e[0]))),rotateZ:ex,rotate:ex,skewX:e=>tr(Math.atan(e[4])),skewY:e=>tr(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function rg(e){return e.includes("scale")?1:0}function og(e,t){if(!e||e==="none")return rg(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,s;if(n)i=pj,s=n;else{const a=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=fj,s=a}if(!s)return rg(t);const r=i[t],o=s[1].split(",").map(gj);return typeof r=="function"?r(o):o[r]}const mj=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return og(n,t)};function gj(e){return parseFloat(e.trim())}const ta=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ea=new Set(ta),sx=e=>e===Zo||e===Q,yj=new Set(["x","y","z"]),_j=ta.filter(e=>!yj.has(e));function vj(e){const t=[];return _j.forEach(n=>{const i=e.getValue(n);i!==void 0&&(t.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),t}const ar={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>og(t,"x"),y:(e,{transform:t})=>og(t,"y")};ar.translateX=ar.x;ar.translateY=ar.y;const lr=new Set;let ag=!1,lg=!1,ug=!1;function Fk(){if(lg){const e=Array.from(lr).filter(i=>i.needsMeasurement),t=new Set(e.map(i=>i.element)),n=new Map;t.forEach(i=>{const s=vj(i);s.length&&(n.set(i,s),i.render())}),e.forEach(i=>i.measureInitialState()),t.forEach(i=>{i.render();const s=n.get(i);s&&s.forEach(([r,o])=>{var a;(a=i.getValue(r))==null||a.set(o)})}),e.forEach(i=>i.measureEndState()),e.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}lg=!1,ag=!1,lr.forEach(e=>e.complete(ug)),lr.clear()}function jk(){lr.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(lg=!0)})}function wj(){ug=!0,jk(),Fk(),ug=!1}class F_{constructor(t,n,i,s,r,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=i,this.motionValue=s,this.element=r,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(lr.add(this),ag||(ag=!0,Rt.read(jk),Rt.resolveKeyframes(Fk))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:i,motionValue:s}=this;if(t[0]===null){const r=s==null?void 0:s.get(),o=t[t.length-1];if(r!==void 0)t[0]=r;else if(i&&n){const a=i.readValue(n,o);a!=null&&(t[0]=a)}t[0]===void 0&&(t[0]=o),s&&r===void 0&&s.set(t[0])}dj(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),lr.delete(this)}cancel(){this.state==="scheduled"&&(lr.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Tj=e=>e.startsWith("--");function xj(e,t,n){Tj(t)?e.style.setProperty(t,n):e.style[t]=n}const Ej=b_(()=>window.ScrollTimeline!==void 0),Sj={};function bj(e,t){const n=b_(e);return()=>Sj[t]??n()}const Bk=bj(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Wa=([e,t,n,i])=>`cubic-bezier(${e}, ${t}, ${n}, ${i})`,rx={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Wa([0,.65,.55,1]),circOut:Wa([.55,0,1,.45]),backIn:Wa([.31,.01,.66,-.59]),backOut:Wa([.33,1.53,.69,.99])};function Uk(e,t){if(e)return typeof e=="function"?Bk()?Ok(e,t):"ease-out":bk(e)?Wa(e):Array.isArray(e)?e.map(n=>Uk(n,t)||rx.easeOut):rx[e]}function Ij(e,t,n,{delay:i=0,duration:s=300,repeat:r=0,repeatType:o="loop",ease:a="easeOut",times:l}={},u=void 0){const c={[t]:n};l&&(c.offset=l);const d=Uk(a,s);Array.isArray(d)&&(c.easing=d);const f={delay:i,duration:s,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:r+1,direction:o==="reverse"?"alternate":"normal"};return u&&(f.pseudoElement=u),e.animate(c,f)}function zk(e){return typeof e=="function"&&"applyToOptions"in e}function Aj({type:e,...t}){return zk(e)&&Bk()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class kj extends V_{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:i,keyframes:s,pseudoElement:r,allowFlatten:o=!1,finalKeyframe:a,onComplete:l}=t;this.isPseudoElement=!!r,this.allowFlatten=o,this.options=t,S_(typeof t.type!="string");const u=Aj(t);this.animation=Ij(n,i,s,u,r),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!r){const c=O_(s,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(c):xj(n,i,c),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,n;(n=(t=this.animation).finish)==null||n.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,n;this.isPseudoElement||(n=(t=this.animation).commitStyles)==null||n.call(t)}get duration(){var n,i;const t=((i=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:i.call(n).duration)||0;return dn(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+dn(t)}get time(){return dn(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Xn(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){var i;return this.allowFlatten&&((i=this.animation.effect)==null||i.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&Ej()?(this.animation.timeline=t,mn):n(this)}}const $k={anticipate:Tk,backInOut:wk,circInOut:Ek};function Pj(e){return e in $k}function Cj(e){typeof e.ease=="string"&&Pj(e.ease)&&(e.ease=$k[e.ease])}const ox=10;class Rj extends kj{constructor(t){Cj(t),Lk(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:i,onComplete:s,element:r,...o}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const a=new L_({...o,autoplay:!1}),l=Xn(this.finishedTime??this.time);n.setWithVelocity(a.sample(l-ox).value,a.sample(l).value,ox),a.stop()}}const ax=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Ss.test(e)||e==="0")&&!e.startsWith("url("));function Dj(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function Mj(e,t,n,i){const s=e[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const r=e[e.length-1],o=ax(s,t),a=ax(r,t);return!o||!a?!1:Dj(e)||(n==="spring"||zk(n))&&i}function cg(e){e.duration=0,e.type="keyframes"}const Nj=new Set(["opacity","clipPath","filter","transform"]),Oj=b_(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Vj(e){var c;const{motionValue:t,name:n,repeatDelay:i,repeatType:s,damping:r,type:o}=e;if(!(((c=t==null?void 0:t.owner)==null?void 0:c.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=t.owner.getProps();return Oj()&&n&&Nj.has(n)&&(n!=="transform"||!u)&&!l&&!i&&s!=="mirror"&&r!==0&&o!=="inertia"}const Lj=40;class Fj extends V_{constructor({autoplay:t=!0,delay:n=0,type:i="keyframes",repeat:s=0,repeatDelay:r=0,repeatType:o="loop",keyframes:a,name:l,motionValue:u,element:c,...d}){var y;super(),this.stop=()=>{var _,E;this._animation&&(this._animation.stop(),(_=this.stopTimeline)==null||_.call(this)),(E=this.keyframeResolver)==null||E.cancel()},this.createdAt=$e.now();const f={autoplay:t,delay:n,type:i,repeat:s,repeatDelay:r,repeatType:o,name:l,motionValue:u,element:c,...d},m=(c==null?void 0:c.KeyframeResolver)||F_;this.keyframeResolver=new m(a,(_,E,v)=>this.onKeyframesResolved(_,E,f,!v),l,u,c),(y=this.keyframeResolver)==null||y.scheduleResolve()}onKeyframesResolved(t,n,i,s){this.keyframeResolver=void 0;const{name:r,type:o,velocity:a,delay:l,isHandoff:u,onUpdate:c}=i;this.resolvedAt=$e.now(),Mj(t,r,o,a)||((Ei.instantAnimations||!l)&&(c==null||c(O_(t,i,n))),t[0]=t[t.length-1],cg(i),i.repeat=0);const f={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>Lj?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...i,keyframes:t},m=!u&&Vj(f)?new Rj({...f,element:f.motionValue.owner.current}):new L_(f);m.finished.then(()=>this.notifyFinished()).catch(mn),this.pendingTimeline&&(this.stopTimeline=m.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=m}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),wj()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const jj=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Bj(e){const t=jj.exec(e);if(!t)return[,];const[,n,i,s]=t;return[`--${n??i}`,s]}function Wk(e,t,n=1){const[i,s]=Bj(e);if(!i)return;const r=window.getComputedStyle(t).getPropertyValue(i);if(r){const o=r.trim();return dk(o)?parseFloat(o):o}return C_(s)?Wk(s,t,n+1):s}function j_(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const Hk=new Set(["width","height","top","left","right","bottom",...ta]),Uj={test:e=>e==="auto",parse:e=>e},qk=e=>t=>t.test(e),Kk=[Zo,Q,Jn,Fi,D3,R3,Uj],lx=e=>Kk.find(qk(e));function zj(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||pk(e):!0}const $j=new Set(["brightness","contrast","saturate","opacity"]);function Wj(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[i]=n.match(R_)||[];if(!i)return e;const s=n.replace(i,"");let r=$j.has(t)?1:0;return i!==n&&(r*=100),t+"("+r+s+")"}const Hj=/\b([a-z-]*)\(.*?\)/gu,hg={...Ss,getAnimatableNone:e=>{const t=e.match(Hj);return t?t.map(Wj).join(" "):e}},ux={...Zo,transform:Math.round},qj={rotate:Fi,rotateX:Fi,rotateY:Fi,rotateZ:Fi,scale:dc,scaleX:dc,scaleY:dc,scaleZ:dc,skew:Fi,skewX:Fi,skewY:Fi,distance:Q,translateX:Q,translateY:Q,translateZ:Q,x:Q,y:Q,z:Q,perspective:Q,transformPerspective:Q,opacity:ql,originX:QT,originY:QT,originZ:Q},B_={borderWidth:Q,borderTopWidth:Q,borderRightWidth:Q,borderBottomWidth:Q,borderLeftWidth:Q,borderRadius:Q,radius:Q,borderTopLeftRadius:Q,borderTopRightRadius:Q,borderBottomRightRadius:Q,borderBottomLeftRadius:Q,width:Q,maxWidth:Q,height:Q,maxHeight:Q,top:Q,right:Q,bottom:Q,left:Q,padding:Q,paddingTop:Q,paddingRight:Q,paddingBottom:Q,paddingLeft:Q,margin:Q,marginTop:Q,marginRight:Q,marginBottom:Q,marginLeft:Q,backgroundPositionX:Q,backgroundPositionY:Q,...qj,zIndex:ux,fillOpacity:ql,strokeOpacity:ql,numOctaves:ux},Kj={...B_,color:Ht,backgroundColor:Ht,outlineColor:Ht,fill:Ht,stroke:Ht,borderColor:Ht,borderTopColor:Ht,borderRightColor:Ht,borderBottomColor:Ht,borderLeftColor:Ht,filter:hg,WebkitFilter:hg},Gk=e=>Kj[e];function Yk(e,t){let n=Gk(e);return n!==hg&&(n=Ss),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const Gj=new Set(["auto","none","0"]);function Yj(e,t,n){let i=0,s;for(;i<e.length&&!s;){const r=e[i];typeof r=="string"&&!Gj.has(r)&&Kl(r).values.length&&(s=e[i]),i++}if(s&&n)for(const r of t)e[r]=Yk(n,s)}class Qj extends F_{constructor(t,n,i,s,r){super(t,n,i,s,r,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let u=t[l];if(typeof u=="string"&&(u=u.trim(),C_(u))){const c=Wk(u,n.current);c!==void 0&&(t[l]=c),l===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!Hk.has(i)||t.length!==2)return;const[s,r]=t,o=lx(s),a=lx(r);if(o!==a)if(sx(o)&&sx(a))for(let l=0;l<t.length;l++){const u=t[l];typeof u=="string"&&(t[l]=parseFloat(u))}else ar[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,i=[];for(let s=0;s<t.length;s++)(t[s]===null||zj(t[s]))&&i.push(s);i.length&&Yj(t,i,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:i}=this;if(!t||!t.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ar[i](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&t.getValue(i,s).jump(s,!1)}measureEndState(){var a;const{element:t,name:n,unresolvedKeyframes:i}=this;if(!t||!t.current)return;const s=t.getValue(n);s&&s.jump(this.measuredOrigin,!1);const r=i.length-1,o=i[r];i[r]=ar[n](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([l,u])=>{t.getValue(l).set(u)}),this.resolveNoneKeyframes()}}function Xj(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let i=document;const s=(n==null?void 0:n[e])??i.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}const Qk=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function Xk(e){return fk(e)&&"offsetHeight"in e}const cx=30,Jj=e=>!isNaN(parseFloat(e));class Zj{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{var r;const s=$e.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&((r=this.events.change)==null||r.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=$e.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=Jj(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new I_);const i=this.events[t].add(n);return t==="change"?()=>{i(),Rt.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-i}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=$e.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>cx)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,cx);return mk(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,n;(t=this.dependents)==null||t.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Vo(e,t){return new Zj(e,t)}const{schedule:U_}=Ik(queueMicrotask,!1),Tn={x:!1,y:!1};function Jk(){return Tn.x||Tn.y}function t5(e){return e==="x"||e==="y"?Tn[e]?null:(Tn[e]=!0,()=>{Tn[e]=!1}):Tn.x||Tn.y?null:(Tn.x=Tn.y=!0,()=>{Tn.x=Tn.y=!1})}function Zk(e,t){const n=Xj(e),i=new AbortController,s={passive:!0,...t,signal:i.signal};return[n,s,()=>i.abort()]}function hx(e){return!(e.pointerType==="touch"||Jk())}function e5(e,t,n={}){const[i,s,r]=Zk(e,n),o=a=>{if(!hx(a))return;const{target:l}=a,u=t(l,a);if(typeof u!="function"||!l)return;const c=d=>{hx(d)&&(u(d),l.removeEventListener("pointerleave",c))};l.addEventListener("pointerleave",c,s)};return i.forEach(a=>{a.addEventListener("pointerenter",o,s)}),r}const tP=(e,t)=>t?e===t?!0:tP(e,t.parentElement):!1,z_=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,n5=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function i5(e){return n5.has(e.tagName)||e.tabIndex!==-1}const Zc=new WeakSet;function dx(e){return t=>{t.key==="Enter"&&e(t)}}function dp(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const s5=(e,t)=>{const n=e.currentTarget;if(!n)return;const i=dx(()=>{if(Zc.has(n))return;dp(n,"down");const s=dx(()=>{dp(n,"up")}),r=()=>dp(n,"cancel");n.addEventListener("keyup",s,t),n.addEventListener("blur",r,t)});n.addEventListener("keydown",i,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),t)};function fx(e){return z_(e)&&!Jk()}function r5(e,t,n={}){const[i,s,r]=Zk(e,n),o=a=>{const l=a.currentTarget;if(!fx(a))return;Zc.add(l);const u=t(l,a),c=(m,y)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",f),Zc.has(l)&&Zc.delete(l),fx(m)&&typeof u=="function"&&u(m,{success:y})},d=m=>{c(m,l===window||l===document||n.useGlobalTarget||tP(l,m.target))},f=m=>{c(m,!1)};window.addEventListener("pointerup",d,s),window.addEventListener("pointercancel",f,s)};return i.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,s),Xk(a)&&(a.addEventListener("focus",u=>s5(u,s)),!i5(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),r}function eP(e){return fk(e)&&"ownerSVGElement"in e}function o5(e){return eP(e)&&e.tagName==="svg"}const Se=e=>!!(e&&e.getVelocity),a5=[...Kk,Ht,Ss],l5=e=>a5.find(qk(e)),$_=F.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function px(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function u5(...e){return t=>{let n=!1;const i=e.map(s=>{const r=px(s,t);return!n&&typeof r=="function"&&(n=!0),r});if(n)return()=>{for(let s=0;s<i.length;s++){const r=i[s];typeof r=="function"?r():px(e[s],null)}}}}function c5(...e){return F.useCallback(u5(...e),e)}class h5 extends F.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const i=n.offsetParent,s=Xk(i)&&i.offsetWidth||0,r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft,r.right=s-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function d5({children:e,isPresent:t,anchorX:n,root:i}){const s=F.useId(),r=F.useRef(null),o=F.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=F.useContext($_),l=c5(r,e==null?void 0:e.ref);return F.useInsertionEffect(()=>{const{width:u,height:c,top:d,left:f,right:m}=o.current;if(t||!r.current||!u||!c)return;const y=n==="left"?`left: ${f}`:`right: ${m}`;r.current.dataset.motionPopId=s;const _=document.createElement("style");a&&(_.nonce=a);const E=i??document.head;return E.appendChild(_),_.sheet&&_.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${c}px !important;
            ${y}px !important;
            top: ${d}px !important;
          }
        `),()=>{E.contains(_)&&E.removeChild(_)}},[t]),M.jsx(h5,{isPresent:t,childRef:r,sizeRef:o,children:F.cloneElement(e,{ref:l})})}const f5=({children:e,initial:t,isPresent:n,onExitComplete:i,custom:s,presenceAffectsLayout:r,mode:o,anchorX:a,root:l})=>{const u=w_(p5),c=F.useId();let d=!0,f=F.useMemo(()=>(d=!1,{id:c,initial:t,isPresent:n,custom:s,onExitComplete:m=>{u.set(m,!0);for(const y of u.values())if(!y)return;i&&i()},register:m=>(u.set(m,!1),()=>u.delete(m))}),[n,u,i]);return r&&d&&(f={...f}),F.useMemo(()=>{u.forEach((m,y)=>u.set(y,!1))},[n]),F.useEffect(()=>{!n&&!u.size&&i&&i()},[n]),o==="popLayout"&&(e=M.jsx(d5,{isPresent:n,anchorX:a,root:l,children:e})),M.jsx(qd.Provider,{value:f,children:e})};function p5(){return new Map}function nP(e=!0){const t=F.useContext(qd);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:i,register:s}=t,r=F.useId();F.useEffect(()=>{if(e)return s(r)},[e]);const o=F.useCallback(()=>e&&i&&i(r),[r,i,e]);return!n&&i?[!1,o]:[!0]}const fc=e=>e.key||"";function mx(e){const t=[];return F.Children.forEach(e,n=>{F.isValidElement(n)&&t.push(n)}),t}const th=({children:e,custom:t,initial:n=!0,onExitComplete:i,presenceAffectsLayout:s=!0,mode:r="sync",propagate:o=!1,anchorX:a="left",root:l})=>{const[u,c]=nP(o),d=F.useMemo(()=>mx(e),[e]),f=o&&!u?[]:d.map(fc),m=F.useRef(!0),y=F.useRef(d),_=w_(()=>new Map),[E,v]=F.useState(d),[T,b]=F.useState(d);hk(()=>{m.current=!1,y.current=d;for(let N=0;N<T.length;N++){const S=fc(T[N]);f.includes(S)?_.delete(S):_.get(S)!==!0&&_.set(S,!1)}},[T,f.length,f.join("-")]);const R=[];if(d!==E){let N=[...d];for(let S=0;S<T.length;S++){const w=T[S],x=fc(w);f.includes(x)||(N.splice(S,0,w),R.push(w))}return r==="wait"&&R.length&&(N=R),b(mx(N)),v(d),null}const{forceRender:D}=F.useContext(v_);return M.jsx(M.Fragment,{children:T.map(N=>{const S=fc(N),w=o&&!u?!1:d===T||f.includes(S),x=()=>{if(_.has(S))_.set(S,!0);else return;let k=!0;_.forEach(A=>{A||(k=!1)}),k&&(D==null||D(),b(y.current),o&&(c==null||c()),i&&i())};return M.jsx(f5,{isPresent:w,initial:!m.current||n?void 0:!1,custom:t,presenceAffectsLayout:s,mode:r,root:l,onExitComplete:w?void 0:x,anchorX:a,children:N},S)})})},iP=F.createContext({strict:!1}),gx={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Lo={};for(const e in gx)Lo[e]={isEnabled:t=>gx[e].some(n=>!!t[n])};function m5(e){for(const t in e)Lo[t]={...Lo[t],...e[t]}}const g5=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ed(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||g5.has(e)}let sP=e=>!ed(e);function y5(e){typeof e=="function"&&(sP=t=>t.startsWith("on")?!ed(t):e(t))}try{y5(require("@emotion/is-prop-valid").default)}catch{}function _5(e,t,n){const i={};for(const s in e)s==="values"&&typeof e.values=="object"||(sP(s)||n===!0&&ed(s)||!t&&!ed(s)||e.draggable&&s.startsWith("onDrag"))&&(i[s]=e[s]);return i}const Kd=F.createContext({});function Gd(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Gl(e){return typeof e=="string"||Array.isArray(e)}const W_=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],H_=["initial",...W_];function Yd(e){return Gd(e.animate)||H_.some(t=>Gl(e[t]))}function rP(e){return!!(Yd(e)||e.variants)}function v5(e,t){if(Yd(e)){const{initial:n,animate:i}=e;return{initial:n===!1||Gl(n)?n:void 0,animate:Gl(i)?i:void 0}}return e.inherit!==!1?t:{}}function w5(e){const{initial:t,animate:n}=v5(e,F.useContext(Kd));return F.useMemo(()=>({initial:t,animate:n}),[yx(t),yx(n)])}function yx(e){return Array.isArray(e)?e.join(" "):e}const Yl={};function T5(e){for(const t in e)Yl[t]=e[t],P_(t)&&(Yl[t].isCSSVariable=!0)}function oP(e,{layout:t,layoutId:n}){return ea.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Yl[e]||e==="opacity")}const x5={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},E5=ta.length;function S5(e,t,n){let i="",s=!0;for(let r=0;r<E5;r++){const o=ta[r],a=e[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const u=Qk(a,B_[o]);if(!l){s=!1;const c=x5[o]||o;i+=`${c}(${u}) `}n&&(t[o]=u)}}return i=i.trim(),n?i=n(t,s?"":i):s&&(i="none"),i}function q_(e,t,n){const{style:i,vars:s,transformOrigin:r}=e;let o=!1,a=!1;for(const l in t){const u=t[l];if(ea.has(l)){o=!0;continue}else if(P_(l)){s[l]=u;continue}else{const c=Qk(u,B_[l]);l.startsWith("origin")?(a=!0,r[l]=c):i[l]=c}}if(t.transform||(o||n?i.transform=S5(t,e.transform,n):i.transform&&(i.transform="none")),a){const{originX:l="50%",originY:u="50%",originZ:c=0}=r;i.transformOrigin=`${l} ${u} ${c}`}}const K_=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function aP(e,t,n){for(const i in t)!Se(t[i])&&!oP(i,n)&&(e[i]=t[i])}function b5({transformTemplate:e},t){return F.useMemo(()=>{const n=K_();return q_(n,t,e),Object.assign({},n.vars,n.style)},[t])}function I5(e,t){const n=e.style||{},i={};return aP(i,n,e),Object.assign(i,b5(e,t)),i}function A5(e,t){const n={},i=I5(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=i,n}const k5={offset:"stroke-dashoffset",array:"stroke-dasharray"},P5={offset:"strokeDashoffset",array:"strokeDasharray"};function C5(e,t,n=1,i=0,s=!0){e.pathLength=1;const r=s?k5:P5;e[r.offset]=Q.transform(-i);const o=Q.transform(t),a=Q.transform(n);e[r.array]=`${o} ${a}`}function lP(e,{attrX:t,attrY:n,attrScale:i,pathLength:s,pathSpacing:r=1,pathOffset:o=0,...a},l,u,c){if(q_(e,a,u),l){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:d,style:f}=e;d.transform&&(f.transform=d.transform,delete d.transform),(f.transform||d.transformOrigin)&&(f.transformOrigin=d.transformOrigin??"50% 50%",delete d.transformOrigin),f.transform&&(f.transformBox=(c==null?void 0:c.transformBox)??"fill-box",delete d.transformBox),t!==void 0&&(d.x=t),n!==void 0&&(d.y=n),i!==void 0&&(d.scale=i),s!==void 0&&C5(d,s,r,o,!1)}const uP=()=>({...K_(),attrs:{}}),cP=e=>typeof e=="string"&&e.toLowerCase()==="svg";function R5(e,t,n,i){const s=F.useMemo(()=>{const r=uP();return lP(r,t,cP(i),e.transformTemplate,e.style),{...r.attrs,style:{...r.style}}},[t]);if(e.style){const r={};aP(r,e.style,e),s.style={...r,...s.style}}return s}const D5=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function G_(e){return typeof e!="string"||e.includes("-")?!1:!!(D5.indexOf(e)>-1||/[A-Z]/u.test(e))}function M5(e,t,n,{latestValues:i},s,r=!1){const a=(G_(e)?R5:A5)(t,i,s,e),l=_5(t,typeof e=="string",r),u=e!==F.Fragment?{...l,...a,ref:n}:{},{children:c}=t,d=F.useMemo(()=>Se(c)?c.get():c,[c]);return F.createElement(e,{...u,children:d})}function _x(e){const t=[{},{}];return e==null||e.values.forEach((n,i)=>{t[0][i]=n.get(),t[1][i]=n.getVelocity()}),t}function Y_(e,t,n,i){if(typeof t=="function"){const[s,r]=_x(i);t=t(n!==void 0?n:e.custom,s,r)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[s,r]=_x(i);t=t(n!==void 0?n:e.custom,s,r)}return t}function eh(e){return Se(e)?e.get():e}function N5({scrapeMotionValuesFromProps:e,createRenderState:t},n,i,s){return{latestValues:O5(n,i,s,e),renderState:t()}}function O5(e,t,n,i){const s={},r=i(e,{});for(const f in r)s[f]=eh(r[f]);let{initial:o,animate:a}=e;const l=Yd(e),u=rP(e);t&&u&&!l&&e.inherit!==!1&&(o===void 0&&(o=t.initial),a===void 0&&(a=t.animate));let c=n?n.initial===!1:!1;c=c||o===!1;const d=c?a:o;if(d&&typeof d!="boolean"&&!Gd(d)){const f=Array.isArray(d)?d:[d];for(let m=0;m<f.length;m++){const y=Y_(e,f[m]);if(y){const{transitionEnd:_,transition:E,...v}=y;for(const T in v){let b=v[T];if(Array.isArray(b)){const R=c?b.length-1:0;b=b[R]}b!==null&&(s[T]=b)}for(const T in _)s[T]=_[T]}}}return s}const hP=e=>(t,n)=>{const i=F.useContext(Kd),s=F.useContext(qd),r=()=>N5(e,t,i,s);return n?r():w_(r)};function Q_(e,t,n){var r;const{style:i}=e,s={};for(const o in i)(Se(i[o])||t.style&&Se(t.style[o])||oP(o,e)||((r=n==null?void 0:n.getValue(o))==null?void 0:r.liveStyle)!==void 0)&&(s[o]=i[o]);return s}const V5=hP({scrapeMotionValuesFromProps:Q_,createRenderState:K_});function dP(e,t,n){const i=Q_(e,t,n);for(const s in e)if(Se(e[s])||Se(t[s])){const r=ta.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;i[r]=e[s]}return i}const L5=hP({scrapeMotionValuesFromProps:dP,createRenderState:uP}),F5=Symbol.for("motionComponentSymbol");function Zr(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function j5(e,t,n){return F.useCallback(i=>{i&&e.onMount&&e.onMount(i),t&&(i?t.mount(i):t.unmount()),n&&(typeof n=="function"?n(i):Zr(n)&&(n.current=i))},[t])}const X_=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),B5="framerAppearId",fP="data-"+X_(B5),pP=F.createContext({});function U5(e,t,n,i,s){var _,E;const{visualElement:r}=F.useContext(Kd),o=F.useContext(iP),a=F.useContext(qd),l=F.useContext($_).reducedMotion,u=F.useRef(null);i=i||o.renderer,!u.current&&i&&(u.current=i(e,{visualState:t,parent:r,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const c=u.current,d=F.useContext(pP);c&&!c.projection&&s&&(c.type==="html"||c.type==="svg")&&z5(u.current,n,s,d);const f=F.useRef(!1);F.useInsertionEffect(()=>{c&&f.current&&c.update(n,a)});const m=n[fP],y=F.useRef(!!m&&!((_=window.MotionHandoffIsComplete)!=null&&_.call(window,m))&&((E=window.MotionHasOptimisedAnimation)==null?void 0:E.call(window,m)));return hk(()=>{c&&(f.current=!0,window.MotionIsMounted=!0,c.updateFeatures(),c.scheduleRenderMicrotask(),y.current&&c.animationState&&c.animationState.animateChanges())}),F.useEffect(()=>{c&&(!y.current&&c.animationState&&c.animationState.animateChanges(),y.current&&(queueMicrotask(()=>{var v;(v=window.MotionHandoffMarkAsComplete)==null||v.call(window,m)}),y.current=!1),c.enteringChildren=void 0)}),c}function z5(e,t,n,i){const{layoutId:s,layout:r,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:u,layoutCrossfade:c}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:mP(e.parent)),e.projection.setOptions({layoutId:s,layout:r,alwaysMeasureLayout:!!o||a&&Zr(a),visualElement:e,animationType:typeof r=="string"?r:"both",initialPromotionConfig:i,crossfade:c,layoutScroll:l,layoutRoot:u})}function mP(e){if(e)return e.options.allowProjection!==!1?e.projection:mP(e.parent)}function fp(e,{forwardMotionProps:t=!1}={},n,i){n&&m5(n);const s=G_(e)?L5:V5;function r(a,l){let u;const c={...F.useContext($_),...a,layoutId:$5(a)},{isStatic:d}=c,f=w5(a),m=s(a,d);if(!d&&T_){W5();const y=H5(c);u=y.MeasureLayout,f.visualElement=U5(e,m,c,i,y.ProjectionNode)}return M.jsxs(Kd.Provider,{value:f,children:[u&&f.visualElement?M.jsx(u,{visualElement:f.visualElement,...c}):null,M5(e,a,j5(m,f.visualElement,l),m,d,t)]})}r.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const o=F.forwardRef(r);return o[F5]=e,o}function $5({layoutId:e}){const t=F.useContext(v_).id;return t&&e!==void 0?t+"-"+e:e}function W5(e,t){F.useContext(iP).strict}function H5(e){const{drag:t,layout:n}=Lo;if(!t&&!n)return{};const i={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function q5(e,t){if(typeof Proxy>"u")return fp;const n=new Map,i=(r,o)=>fp(r,o,e,t),s=(r,o)=>i(r,o);return new Proxy(s,{get:(r,o)=>o==="create"?i:(n.has(o)||n.set(o,fp(o,void 0,e,t)),n.get(o))})}function gP({top:e,left:t,right:n,bottom:i}){return{x:{min:t,max:n},y:{min:e,max:i}}}function K5({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function G5(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),i=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function pp(e){return e===void 0||e===1}function dg({scale:e,scaleX:t,scaleY:n}){return!pp(e)||!pp(t)||!pp(n)}function Hs(e){return dg(e)||yP(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function yP(e){return vx(e.x)||vx(e.y)}function vx(e){return e&&e!=="0%"}function nd(e,t,n){const i=e-n,s=t*i;return n+s}function wx(e,t,n,i,s){return s!==void 0&&(e=nd(e,s,i)),nd(e,n,i)+t}function fg(e,t=0,n=1,i,s){e.min=wx(e.min,t,n,i,s),e.max=wx(e.max,t,n,i,s)}function _P(e,{x:t,y:n}){fg(e.x,t.translate,t.scale,t.originPoint),fg(e.y,n.translate,n.scale,n.originPoint)}const Tx=.999999999999,xx=1.0000000000001;function Y5(e,t,n,i=!1){const s=n.length;if(!s)return;t.x=t.y=1;let r,o;for(let a=0;a<s;a++){r=n[a],o=r.projectionDelta;const{visualElement:l}=r.options;l&&l.props.style&&l.props.style.display==="contents"||(i&&r.options.layoutScroll&&r.scroll&&r!==r.root&&eo(e,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,_P(e,o)),i&&Hs(r.latestValues)&&eo(e,r.latestValues))}t.x<xx&&t.x>Tx&&(t.x=1),t.y<xx&&t.y>Tx&&(t.y=1)}function to(e,t){e.min=e.min+t,e.max=e.max+t}function Ex(e,t,n,i,s=.5){const r=Mt(e.min,e.max,s);fg(e,t,n,r,i)}function eo(e,t){Ex(e.x,t.x,t.scaleX,t.scale,t.originX),Ex(e.y,t.y,t.scaleY,t.scale,t.originY)}function vP(e,t){return gP(G5(e.getBoundingClientRect(),t))}function Q5(e,t,n){const i=vP(e,n),{scroll:s}=t;return s&&(to(i.x,s.offset.x),to(i.y,s.offset.y)),i}const Sx=()=>({translate:0,scale:1,origin:0,originPoint:0}),no=()=>({x:Sx(),y:Sx()}),bx=()=>({min:0,max:0}),Bt=()=>({x:bx(),y:bx()}),pg={current:null},wP={current:!1};function X5(){if(wP.current=!0,!!T_)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>pg.current=e.matches;e.addEventListener("change",t),t()}else pg.current=!1}const J5=new WeakMap;function Z5(e,t,n){for(const i in t){const s=t[i],r=n[i];if(Se(s))e.addValue(i,s);else if(Se(r))e.addValue(i,Vo(s,{owner:e}));else if(r!==s)if(e.hasValue(i)){const o=e.getValue(i);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=e.getStaticValue(i);e.addValue(i,Vo(o!==void 0?o:s,{owner:e}))}}for(const i in n)t[i]===void 0&&e.removeValue(i);return t}const Ix=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class t6{scrapeMotionValuesFromProps(t,n,i){return{}}constructor({parent:t,props:n,presenceContext:i,reducedMotionConfig:s,blockInitialAnimation:r,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=F_,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=$e.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,Rt.render(this.render,!1,!0))};const{latestValues:l,renderState:u}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=u,this.parent=t,this.props=n,this.presenceContext=i,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.blockInitialAnimation=!!r,this.isControllingVariants=Yd(n),this.isVariantNode=rP(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:c,...d}=this.scrapeMotionValuesFromProps(n,{},this);for(const f in d){const m=d[f];l[f]!==void 0&&Se(m)&&m.set(l[f])}}mount(t){var n;this.current=t,J5.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((i,s)=>this.bindToMotionValue(s,i)),wP.current||X5(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:pg.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),Es(this.notifyUpdate),Es(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const i=this.features[n];i&&(i.unmount(),i.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const i=ea.has(t);i&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&Rt.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let r;window.MotionCheckAppearSync&&(r=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{s(),r&&r(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Lo){const n=Lo[t];if(!n)continue;const{isEnabled:i,Feature:s}=n;if(!this.features[t]&&s&&i(this.props)&&(this.features[t]=new s(this)),this.features[t]){const r=this.features[t];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Bt()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<Ix.length;i++){const s=Ix[i];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const r="on"+s,o=t[r];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=Z5(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const i=this.values.get(t);n!==i&&(i&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let i=this.values.get(t);return i===void 0&&n!==void 0&&(i=Vo(n===null?void 0:n,{owner:this}),this.addValue(t,i)),i}readValue(t,n){let i=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return i!=null&&(typeof i=="string"&&(dk(i)||pk(i))?i=parseFloat(i):!l5(i)&&Ss.test(n)&&(i=Yk(t,n)),this.setBaseTarget(t,Se(i)?i.get():i)),Se(i)?i.get():i}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var r;const{initial:n}=this.props;let i;if(typeof n=="string"||typeof n=="object"){const o=Y_(this.props,n,(r=this.presenceContext)==null?void 0:r.custom);o&&(i=o[t])}if(n&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!Se(s)?s:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new I_),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){U_.render(this.render)}}class TP extends t6{constructor(){super(...arguments),this.KeyframeResolver=Qj}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:i}){delete n[t],delete i[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Se(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function xP(e,{style:t,vars:n},i,s){const r=e.style;let o;for(o in t)r[o]=t[o];s==null||s.applyProjectionStyles(r,i);for(o in n)r.setProperty(o,n[o])}function e6(e){return window.getComputedStyle(e)}class n6 extends TP{constructor(){super(...arguments),this.type="html",this.renderInstance=xP}readValueFromInstance(t,n){var i;if(ea.has(n))return(i=this.projection)!=null&&i.isProjecting?rg(n):mj(t,n);{const s=e6(t),r=(P_(n)?s.getPropertyValue(n):s[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(t,{transformPagePoint:n}){return vP(t,n)}build(t,n,i){q_(t,n,i.transformTemplate)}scrapeMotionValuesFromProps(t,n,i){return Q_(t,n,i)}}const EP=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function i6(e,t,n,i){xP(e,t,void 0,i);for(const s in t.attrs)e.setAttribute(EP.has(s)?s:X_(s),t.attrs[s])}class s6 extends TP{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Bt}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(ea.has(n)){const i=Gk(n);return i&&i.default||0}return n=EP.has(n)?n:X_(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,i){return dP(t,n,i)}build(t,n,i){lP(t,n,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(t,n,i,s){i6(t,n,i,s)}mount(t){this.isSVGTag=cP(t.tagName),super.mount(t)}}const r6=(e,t)=>G_(e)?new s6(t):new n6(t,{allowProjection:e!==F.Fragment});function go(e,t,n){const i=e.getProps();return Y_(i,t,n!==void 0?n:i.custom,e)}const mg=e=>Array.isArray(e);function o6(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Vo(n))}function a6(e){return mg(e)?e[e.length-1]||0:e}function l6(e,t){const n=go(e,t);let{transitionEnd:i={},transition:s={},...r}=n||{};r={...r,...i};for(const o in r){const a=a6(r[o]);o6(e,o,a)}}function u6(e){return!!(Se(e)&&e.add)}function gg(e,t){const n=e.getValue("willChange");if(u6(n))return n.add(t);if(!n&&Ei.WillChange){const i=new Ei.WillChange("auto");e.addValue("willChange",i),i.add(t)}}function SP(e){return e.props[fP]}const c6=e=>e!==null;function h6(e,{repeat:t,repeatType:n="loop"},i){const s=e.filter(c6),r=t&&n!=="loop"&&t%2===1?0:s.length-1;return s[r]}const d6={type:"spring",stiffness:500,damping:25,restSpeed:10},f6=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),p6={type:"keyframes",duration:.8},m6={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},g6=(e,{keyframes:t})=>t.length>2?p6:ea.has(e)?e.startsWith("scale")?f6(t[1]):d6:m6;function y6({when:e,delay:t,delayChildren:n,staggerChildren:i,staggerDirection:s,repeat:r,repeatType:o,repeatDelay:a,from:l,elapsed:u,...c}){return!!Object.keys(c).length}const J_=(e,t,n,i={},s,r)=>o=>{const a=j_(i,e)||{},l=a.delay||i.delay||0;let{elapsed:u=0}=i;u=u-Xn(l);const c={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...a,delay:-u,onUpdate:f=>{t.set(f),a.onUpdate&&a.onUpdate(f)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:e,motionValue:t,element:r?void 0:s};y6(a)||Object.assign(c,g6(e,c)),c.duration&&(c.duration=Xn(c.duration)),c.repeatDelay&&(c.repeatDelay=Xn(c.repeatDelay)),c.from!==void 0&&(c.keyframes[0]=c.from);let d=!1;if((c.type===!1||c.duration===0&&!c.repeatDelay)&&(cg(c),c.delay===0&&(d=!0)),(Ei.instantAnimations||Ei.skipAnimations)&&(d=!0,cg(c),c.delay=0),c.allowFlatten=!a.type&&!a.ease,d&&!r&&t.get()!==void 0){const f=h6(c.keyframes,a);if(f!==void 0){Rt.update(()=>{c.onUpdate(f),c.onComplete()});return}}return a.isSync?new L_(c):new Fj(c)};function _6({protectedKeys:e,needsAnimating:t},n){const i=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,i}function bP(e,t,{delay:n=0,transitionOverride:i,type:s}={}){let{transition:r=e.getDefaultTransition(),transitionEnd:o,...a}=t;i&&(r=i);const l=[],u=s&&e.animationState&&e.animationState.getState()[s];for(const c in a){const d=e.getValue(c,e.latestValues[c]??null),f=a[c];if(f===void 0||u&&_6(u,c))continue;const m={delay:n,...j_(r||{},c)},y=d.get();if(y!==void 0&&!d.isAnimating&&!Array.isArray(f)&&f===y&&!m.velocity)continue;let _=!1;if(window.MotionHandoffAnimation){const v=SP(e);if(v){const T=window.MotionHandoffAnimation(v,c,Rt);T!==null&&(m.startTime=T,_=!0)}}gg(e,c),d.start(J_(c,d,f,e.shouldReduceMotion&&Hk.has(c)?{type:!1}:m,e,_));const E=d.animation;E&&l.push(E)}return o&&Promise.all(l).then(()=>{Rt.update(()=>{o&&l6(e,o)})}),l}function IP(e,t,n,i=0,s=1){const r=Array.from(e).sort((u,c)=>u.sortNodePosition(c)).indexOf(t),o=e.size,a=(o-1)*i;return typeof n=="function"?n(r,o):s===1?r*i:a-r*i}function yg(e,t,n={}){var l;const i=go(e,t,n.type==="exit"?(l=e.presenceContext)==null?void 0:l.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const r=i?()=>Promise.all(bP(e,i,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:c=0,staggerChildren:d,staggerDirection:f}=s;return v6(e,t,u,c,d,f,n)}:()=>Promise.resolve(),{when:a}=s;if(a){const[u,c]=a==="beforeChildren"?[r,o]:[o,r];return u().then(()=>c())}else return Promise.all([r(),o(n.delay)])}function v6(e,t,n=0,i=0,s=0,r=1,o){const a=[];for(const l of e.variantChildren)l.notify("AnimationStart",t),a.push(yg(l,t,{...o,delay:n+(typeof i=="function"?0:i)+IP(e.variantChildren,l,i,s,r)}).then(()=>l.notify("AnimationComplete",t)));return Promise.all(a)}function w6(e,t,n={}){e.notify("AnimationStart",t);let i;if(Array.isArray(t)){const s=t.map(r=>yg(e,r,n));i=Promise.all(s)}else if(typeof t=="string")i=yg(e,t,n);else{const s=typeof t=="function"?go(e,t,n.custom):t;i=Promise.all(bP(e,s,n))}return i.then(()=>{e.notify("AnimationComplete",t)})}function AP(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}const T6=H_.length;function kP(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?kP(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<T6;n++){const i=H_[n],s=e.props[i];(Gl(s)||s===!1)&&(t[i]=s)}return t}const x6=[...W_].reverse(),E6=W_.length;function S6(e){return t=>Promise.all(t.map(({animation:n,options:i})=>w6(e,n,i)))}function b6(e){let t=S6(e),n=Ax(),i=!0;const s=l=>(u,c)=>{var f;const d=go(e,c,l==="exit"?(f=e.presenceContext)==null?void 0:f.custom:void 0);if(d){const{transition:m,transitionEnd:y,..._}=d;u={...u,..._,...y}}return u};function r(l){t=l(e)}function o(l){const{props:u}=e,c=kP(e.parent)||{},d=[],f=new Set;let m={},y=1/0;for(let E=0;E<E6;E++){const v=x6[E],T=n[v],b=u[v]!==void 0?u[v]:c[v],R=Gl(b),D=v===l?T.isActive:null;D===!1&&(y=E);let N=b===c[v]&&b!==u[v]&&R;if(N&&i&&e.manuallyAnimateOnMount&&(N=!1),T.protectedKeys={...m},!T.isActive&&D===null||!b&&!T.prevProp||Gd(b)||typeof b=="boolean")continue;const S=I6(T.prevProp,b);let w=S||v===l&&T.isActive&&!N&&R||E>y&&R,x=!1;const k=Array.isArray(b)?b:[b];let A=k.reduce(s(v),{});D===!1&&(A={});const{prevResolvedValues:C={}}=T,P={...C,...A},nt=it=>{w=!0,f.has(it)&&(x=!0,f.delete(it)),T.needsAnimating[it]=!0;const B=e.getValue(it);B&&(B.liveStyle=!1)};for(const it in P){const B=A[it],q=C[it];if(m.hasOwnProperty(it))continue;let K=!1;mg(B)&&mg(q)?K=!AP(B,q):K=B!==q,K?B!=null?nt(it):f.add(it):B!==void 0&&f.has(it)?nt(it):T.protectedKeys[it]=!0}T.prevProp=b,T.prevResolvedValues=A,T.isActive&&(m={...m,...A}),i&&e.blockInitialAnimation&&(w=!1);const X=N&&S;w&&(!X||x)&&d.push(...k.map(it=>{const B={type:v};if(typeof it=="string"&&i&&!X&&e.manuallyAnimateOnMount&&e.parent){const{parent:q}=e,K=go(q,it);if(q.enteringChildren&&K){const{delayChildren:dt}=K.transition||{};B.delay=IP(q.enteringChildren,e,dt)}}return{animation:it,options:B}}))}if(f.size){const E={};if(typeof u.initial!="boolean"){const v=go(e,Array.isArray(u.initial)?u.initial[0]:u.initial);v&&v.transition&&(E.transition=v.transition)}f.forEach(v=>{const T=e.getBaseTarget(v),b=e.getValue(v);b&&(b.liveStyle=!0),E[v]=T??null}),d.push({animation:E})}let _=!!d.length;return i&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(_=!1),i=!1,_?t(d):Promise.resolve()}function a(l,u){var d;if(n[l].isActive===u)return Promise.resolve();(d=e.variantChildren)==null||d.forEach(f=>{var m;return(m=f.animationState)==null?void 0:m.setActive(l,u)}),n[l].isActive=u;const c=o(l);for(const f in n)n[f].protectedKeys={};return c}return{animateChanges:o,setActive:a,setAnimateFunction:r,getState:()=>n,reset:()=>{n=Ax()}}}function I6(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!AP(t,e):!1}function Fs(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Ax(){return{animate:Fs(!0),whileInView:Fs(),whileHover:Fs(),whileTap:Fs(),whileDrag:Fs(),whileFocus:Fs(),exit:Fs()}}class Rs{constructor(t){this.isMounted=!1,this.node=t}update(){}}class A6 extends Rs{constructor(t){super(t),t.animationState||(t.animationState=b6(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Gd(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let k6=0;class P6 extends Rs{constructor(){super(...arguments),this.id=k6++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===i)return;const s=this.node.animationState.setActive("exit",!t);n&&!t&&s.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const C6={animation:{Feature:A6},exit:{Feature:P6}};function Ql(e,t,n,i={passive:!0}){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n)}function bu(e){return{point:{x:e.pageX,y:e.pageY}}}const R6=e=>t=>z_(t)&&e(t,bu(t));function dl(e,t,n,i){return Ql(e,t,R6(n),i)}const PP=1e-4,D6=1-PP,M6=1+PP,CP=.01,N6=0-CP,O6=0+CP;function Me(e){return e.max-e.min}function V6(e,t,n){return Math.abs(e-t)<=n}function kx(e,t,n,i=.5){e.origin=i,e.originPoint=Mt(t.min,t.max,e.origin),e.scale=Me(n)/Me(t),e.translate=Mt(n.min,n.max,e.origin)-e.originPoint,(e.scale>=D6&&e.scale<=M6||isNaN(e.scale))&&(e.scale=1),(e.translate>=N6&&e.translate<=O6||isNaN(e.translate))&&(e.translate=0)}function fl(e,t,n,i){kx(e.x,t.x,n.x,i?i.originX:void 0),kx(e.y,t.y,n.y,i?i.originY:void 0)}function Px(e,t,n){e.min=n.min+t.min,e.max=e.min+Me(t)}function L6(e,t,n){Px(e.x,t.x,n.x),Px(e.y,t.y,n.y)}function Cx(e,t,n){e.min=t.min-n.min,e.max=e.min+Me(t)}function pl(e,t,n){Cx(e.x,t.x,n.x),Cx(e.y,t.y,n.y)}function an(e){return[e("x"),e("y")]}const RP=({current:e})=>e?e.ownerDocument.defaultView:null,Rx=(e,t)=>Math.abs(e-t);function F6(e,t){const n=Rx(e.x,t.x),i=Rx(e.y,t.y);return Math.sqrt(n**2+i**2)}class DP{constructor(t,n,{transformPagePoint:i,contextWindow:s=window,dragSnapToOrigin:r=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=gp(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,y=F6(f.offset,{x:0,y:0})>=this.distanceThreshold;if(!m&&!y)return;const{point:_}=f,{timestamp:E}=ce;this.history.push({..._,timestamp:E});const{onStart:v,onMove:T}=this.handlers;m||(v&&v(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),T&&T(this.lastMoveEvent,f)},this.handlePointerMove=(f,m)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=mp(m,this.transformPagePoint),Rt.update(this.updatePoint,!0)},this.handlePointerUp=(f,m)=>{this.end();const{onEnd:y,onSessionEnd:_,resumeAnimation:E}=this.handlers;if(this.dragSnapToOrigin&&E&&E(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=gp(f.type==="pointercancel"?this.lastMoveEventInfo:mp(m,this.transformPagePoint),this.history);this.startEvent&&y&&y(f,v),_&&_(f,v)},!z_(t))return;this.dragSnapToOrigin=r,this.handlers=n,this.transformPagePoint=i,this.distanceThreshold=o,this.contextWindow=s||window;const a=bu(t),l=mp(a,this.transformPagePoint),{point:u}=l,{timestamp:c}=ce;this.history=[{...u,timestamp:c}];const{onSessionStart:d}=n;d&&d(t,gp(l,this.history)),this.removeListeners=xu(dl(this.contextWindow,"pointermove",this.handlePointerMove),dl(this.contextWindow,"pointerup",this.handlePointerUp),dl(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Es(this.updatePoint)}}function mp(e,t){return t?{point:t(e.point)}:e}function Dx(e,t){return{x:e.x-t.x,y:e.y-t.y}}function gp({point:e},t){return{point:e,delta:Dx(e,MP(t)),offset:Dx(e,j6(t)),velocity:B6(t,.1)}}function j6(e){return e[0]}function MP(e){return e[e.length-1]}function B6(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,i=null;const s=MP(e);for(;n>=0&&(i=e[n],!(s.timestamp-i.timestamp>Xn(t)));)n--;if(!i)return{x:0,y:0};const r=dn(s.timestamp-i.timestamp);if(r===0)return{x:0,y:0};const o={x:(s.x-i.x)/r,y:(s.y-i.y)/r};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function U6(e,{min:t,max:n},i){return t!==void 0&&e<t?e=i?Mt(t,e,i.min):Math.max(e,t):n!==void 0&&e>n&&(e=i?Mt(n,e,i.max):Math.min(e,n)),e}function Mx(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function z6(e,{top:t,left:n,bottom:i,right:s}){return{x:Mx(e.x,n,s),y:Mx(e.y,t,i)}}function Nx(e,t){let n=t.min-e.min,i=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,i]=[i,n]),{min:n,max:i}}function $6(e,t){return{x:Nx(e.x,t.x),y:Nx(e.y,t.y)}}function W6(e,t){let n=.5;const i=Me(e),s=Me(t);return s>i?n=Hl(t.min,t.max-i,e.min):i>s&&(n=Hl(e.min,e.max-s,t.min)),xi(0,1,n)}function H6(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const _g=.35;function q6(e=_g){return e===!1?e=0:e===!0&&(e=_g),{x:Ox(e,"left","right"),y:Ox(e,"top","bottom")}}function Ox(e,t,n){return{min:Vx(e,t),max:Vx(e,n)}}function Vx(e,t){return typeof e=="number"?e:e[t]||0}const K6=new WeakMap;class G6{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Bt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:i}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const r=d=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(bu(d).point)},o=(d,f)=>{const{drag:m,dragPropagation:y,onDragStart:_}=this.getProps();if(m&&!y&&(this.openDragLock&&this.openDragLock(),this.openDragLock=t5(m),!this.openDragLock))return;this.latestPointerEvent=d,this.latestPanInfo=f,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),an(v=>{let T=this.getAxisMotionValue(v).get()||0;if(Jn.test(T)){const{projection:b}=this.visualElement;if(b&&b.layout){const R=b.layout.layoutBox[v];R&&(T=Me(R)*(parseFloat(T)/100))}}this.originPoint[v]=T}),_&&Rt.postRender(()=>_(d,f)),gg(this.visualElement,"transform");const{animationState:E}=this.visualElement;E&&E.setActive("whileDrag",!0)},a=(d,f)=>{this.latestPointerEvent=d,this.latestPanInfo=f;const{dragPropagation:m,dragDirectionLock:y,onDirectionLock:_,onDrag:E}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:v}=f;if(y&&this.currentDirection===null){this.currentDirection=Y6(v),this.currentDirection!==null&&_&&_(this.currentDirection);return}this.updateAxis("x",f.point,v),this.updateAxis("y",f.point,v),this.visualElement.render(),E&&E(d,f)},l=(d,f)=>{this.latestPointerEvent=d,this.latestPanInfo=f,this.stop(d,f),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>an(d=>{var f;return this.getAnimationState(d)==="paused"&&((f=this.getAxisMotionValue(d).animation)==null?void 0:f.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new DP(t,{onSessionStart:r,onStart:o,onMove:a,onSessionEnd:l,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,distanceThreshold:i,contextWindow:RP(this.visualElement)})}stop(t,n){const i=t||this.latestPointerEvent,s=n||this.latestPanInfo,r=this.isDragging;if(this.cancel(),!r||!s||!i)return;const{velocity:o}=s;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&Rt.postRender(()=>a(i,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,i){const{drag:s}=this.getProps();if(!i||!pc(t,s,this.currentDirection))return;const r=this.getAxisMotionValue(t);let o=this.originPoint[t]+i[t];this.constraints&&this.constraints[t]&&(o=U6(o,this.constraints[t],this.elastic[t])),r.set(o)}resolveConstraints(){var r;const{dragConstraints:t,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(r=this.visualElement.projection)==null?void 0:r.layout,s=this.constraints;t&&Zr(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=z6(i.layoutBox,t):this.constraints=!1,this.elastic=q6(n),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&an(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=H6(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Zr(t))return!1;const i=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const r=Q5(i,s.root,this.visualElement.getTransformPagePoint());let o=$6(s.layout.layoutBox,r);if(n){const a=n(K5(o));this.hasMutatedConstraints=!!a,a&&(o=gP(a))}return o}startAnimation(t){const{drag:n,dragMomentum:i,dragElastic:s,dragTransition:r,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=an(c=>{if(!pc(c,n,this.currentDirection))return;let d=l&&l[c]||{};o&&(d={min:0,max:0});const f=s?200:1e6,m=s?40:1e7,y={type:"inertia",velocity:i?t[c]:0,bounceStiffness:f,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...r,...d};return this.startAxisValueAnimation(c,y)});return Promise.all(u).then(a)}startAxisValueAnimation(t,n){const i=this.getAxisMotionValue(t);return gg(this.visualElement,t),i.start(J_(t,i,0,n,this.visualElement,!1))}stopAnimation(){an(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){an(t=>{var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,i=this.visualElement.getProps(),s=i[n];return s||this.visualElement.getValue(t,(i.initial?i.initial[t]:void 0)||0)}snapToCursor(t){an(n=>{const{drag:i}=this.getProps();if(!pc(n,i,this.currentDirection))return;const{projection:s}=this.visualElement,r=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[n];r.set(t[n]-Mt(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!Zr(n)||!i||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};an(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();s[o]=W6({min:l,max:l},this.constraints[o])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),an(o=>{if(!pc(o,t,null))return;const a=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];a.set(Mt(l,u,s[o]))})}addListeners(){if(!this.visualElement.current)return;K6.set(this.visualElement,this);const t=this.visualElement.current,n=dl(t,"pointerdown",l=>{const{drag:u,dragListener:c=!0}=this.getProps();u&&c&&this.start(l)}),i=()=>{const{dragConstraints:l}=this.getProps();Zr(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,r=s.addEventListener("measure",i);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Rt.read(i);const o=Ql(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(an(c=>{const d=this.getAxisMotionValue(c);d&&(this.originPoint[c]+=l[c].translate,d.set(d.get()+l[c].translate))}),this.visualElement.render())});return()=>{o(),n(),r(),a&&a()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:s=!1,dragConstraints:r=!1,dragElastic:o=_g,dragMomentum:a=!0}=t;return{...t,drag:n,dragDirectionLock:i,dragPropagation:s,dragConstraints:r,dragElastic:o,dragMomentum:a}}}function pc(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function Y6(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class Q6 extends Rs{constructor(t){super(t),this.removeGroupControls=mn,this.removeListeners=mn,this.controls=new G6(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||mn}unmount(){this.removeGroupControls(),this.removeListeners()}}const Lx=e=>(t,n)=>{e&&Rt.postRender(()=>e(t,n))};class X6 extends Rs{constructor(){super(...arguments),this.removePointerDownListener=mn}onPointerDown(t){this.session=new DP(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:RP(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:i,onPanEnd:s}=this.node.getProps();return{onSessionStart:Lx(t),onStart:Lx(n),onMove:i,onEnd:(r,o)=>{delete this.session,s&&Rt.postRender(()=>s(r,o))}}}mount(){this.removePointerDownListener=dl(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const nh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Fx(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Aa={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Q.test(e))e=parseFloat(e);else return e;const n=Fx(e,t.target.x),i=Fx(e,t.target.y);return`${n}% ${i}%`}},J6={correct:(e,{treeScale:t,projectionDelta:n})=>{const i=e,s=Ss.parse(e);if(s.length>5)return i;const r=Ss.createTransformer(e),o=typeof s[0]!="number"?1:0,a=n.x.scale*t.x,l=n.y.scale*t.y;s[0+o]/=a,s[1+o]/=l;const u=Mt(a,l,.5);return typeof s[2+o]=="number"&&(s[2+o]/=u),typeof s[3+o]=="number"&&(s[3+o]/=u),r(s)}};let yp=!1;class Z6 extends F.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:i,layoutId:s}=this.props,{projection:r}=t;T5(tB),r&&(n.group&&n.group.add(r),i&&i.register&&s&&i.register(r),yp&&r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions({...r.options,onExitComplete:()=>this.safeToRemove()})),nh.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:i,drag:s,isPresent:r}=this.props,{projection:o}=i;return o&&(o.isPresent=r,yp=!0,s||t.layoutDependency!==n||n===void 0||t.isPresent!==r?o.willUpdate():this.safeToRemove(),t.isPresent!==r&&(r?o.promote():o.relegate()||Rt.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),U_.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:s}=t;yp=!0,s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),i&&i.deregister&&i.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function NP(e){const[t,n]=nP(),i=F.useContext(v_);return M.jsx(Z6,{...e,layoutGroup:i,switchLayoutGroup:F.useContext(pP),isPresent:t,safeToRemove:n})}const tB={borderRadius:{...Aa,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Aa,borderTopRightRadius:Aa,borderBottomLeftRadius:Aa,borderBottomRightRadius:Aa,boxShadow:J6};function eB(e,t,n){const i=Se(e)?e:Vo(e);return i.start(J_("",i,t,n)),i.animation}const nB=(e,t)=>e.depth-t.depth;class iB{constructor(){this.children=[],this.isDirty=!1}add(t){x_(this.children,t),this.isDirty=!0}remove(t){E_(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(nB),this.isDirty=!1,this.children.forEach(t)}}function sB(e,t){const n=$e.now(),i=({timestamp:s})=>{const r=s-n;r>=t&&(Es(i),e(r-t))};return Rt.setup(i,!0),()=>Es(i)}const OP=["TopLeft","TopRight","BottomLeft","BottomRight"],rB=OP.length,jx=e=>typeof e=="string"?parseFloat(e):e,Bx=e=>typeof e=="number"||Q.test(e);function oB(e,t,n,i,s,r){s?(e.opacity=Mt(0,n.opacity??1,aB(i)),e.opacityExit=Mt(t.opacity??1,0,lB(i))):r&&(e.opacity=Mt(t.opacity??1,n.opacity??1,i));for(let o=0;o<rB;o++){const a=`border${OP[o]}Radius`;let l=Ux(t,a),u=Ux(n,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||Bx(l)===Bx(u)?(e[a]=Math.max(Mt(jx(l),jx(u),i),0),(Jn.test(u)||Jn.test(l))&&(e[a]+="%")):e[a]=u}(t.rotate||n.rotate)&&(e.rotate=Mt(t.rotate||0,n.rotate||0,i))}function Ux(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const aB=VP(0,.5,xk),lB=VP(.5,.95,mn);function VP(e,t,n){return i=>i<e?0:i>t?1:n(Hl(e,t,i))}function zx(e,t){e.min=t.min,e.max=t.max}function rn(e,t){zx(e.x,t.x),zx(e.y,t.y)}function $x(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function Wx(e,t,n,i,s){return e-=t,e=nd(e,1/n,i),s!==void 0&&(e=nd(e,1/s,i)),e}function uB(e,t=0,n=1,i=.5,s,r=e,o=e){if(Jn.test(t)&&(t=parseFloat(t),t=Mt(o.min,o.max,t/100)-o.min),typeof t!="number")return;let a=Mt(r.min,r.max,i);e===r&&(a-=t),e.min=Wx(e.min,t,n,a,s),e.max=Wx(e.max,t,n,a,s)}function Hx(e,t,[n,i,s],r,o){uB(e,t[n],t[i],t[s],t.scale,r,o)}const cB=["x","scaleX","originX"],hB=["y","scaleY","originY"];function qx(e,t,n,i){Hx(e.x,t,cB,n?n.x:void 0,i?i.x:void 0),Hx(e.y,t,hB,n?n.y:void 0,i?i.y:void 0)}function Kx(e){return e.translate===0&&e.scale===1}function LP(e){return Kx(e.x)&&Kx(e.y)}function Gx(e,t){return e.min===t.min&&e.max===t.max}function dB(e,t){return Gx(e.x,t.x)&&Gx(e.y,t.y)}function Yx(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function FP(e,t){return Yx(e.x,t.x)&&Yx(e.y,t.y)}function Qx(e){return Me(e.x)/Me(e.y)}function Xx(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class fB{constructor(){this.members=[]}add(t){x_(this.members,t),t.scheduleRender()}remove(t){if(E_(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(s=>t===s);if(n===0)return!1;let i;for(let s=n;s>=0;s--){const r=this.members[s];if(r.isPresent!==!1){i=r;break}}return i?(this.promote(i),!0):!1}promote(t,n){const i=this.lead;if(t!==i&&(this.prevLead=i,this.lead=t,t.show(),i)){i.instance&&i.scheduleRender(),t.scheduleRender(),t.resumeFrom=i,n&&(t.resumeFrom.preserveOpacity=!0),i.snapshot&&(t.snapshot=i.snapshot,t.snapshot.latestValues=i.animationValues||i.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:i}=t;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function pB(e,t,n){let i="";const s=e.x.translate/t.x,r=e.y.translate/t.y,o=(n==null?void 0:n.z)||0;if((s||r||o)&&(i=`translate3d(${s}px, ${r}px, ${o}px) `),(t.x!==1||t.y!==1)&&(i+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:u,rotate:c,rotateX:d,rotateY:f,skewX:m,skewY:y}=n;u&&(i=`perspective(${u}px) ${i}`),c&&(i+=`rotate(${c}deg) `),d&&(i+=`rotateX(${d}deg) `),f&&(i+=`rotateY(${f}deg) `),m&&(i+=`skewX(${m}deg) `),y&&(i+=`skewY(${y}deg) `)}const a=e.x.scale*t.x,l=e.y.scale*t.y;return(a!==1||l!==1)&&(i+=`scale(${a}, ${l})`),i||"none"}const _p=["","X","Y","Z"],mB=1e3;let gB=0;function vp(e,t,n,i){const{latestValues:s}=t;s[e]&&(n[e]=s[e],t.setStaticValue(e,0),i&&(i[e]=0))}function jP(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=SP(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:r}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",Rt,!(s||r))}const{parent:i}=e;i&&!i.hasCheckedOptimisedAppear&&jP(i)}function BP({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:i,resetTransform:s}){return class{constructor(o={},a=t==null?void 0:t()){this.id=gB++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(vB),this.nodes.forEach(EB),this.nodes.forEach(SB),this.nodes.forEach(wB)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new iB)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new I_),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=eP(o)&&!o5(o),this.instance=o;const{layoutId:a,layout:l,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||a)&&(this.isLayoutDirty=!0),e){let c,d=0;const f=()=>this.root.updateBlockedByResize=!1;Rt.read(()=>{d=window.innerWidth}),e(o,()=>{const m=window.innerWidth;m!==d&&(d=m,this.root.updateBlockedByResize=!0,c&&c(),c=sB(f,250),nh.hasAnimatedSinceResize&&(nh.hasAnimatedSinceResize=!1,this.nodes.forEach(tE)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&u&&(a||l)&&this.addEventListener("didUpdate",({delta:c,hasLayoutChanged:d,hasRelativeLayoutChanged:f,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||u.getDefaultTransition()||PB,{onLayoutAnimationStart:_,onLayoutAnimationComplete:E}=u.getProps(),v=!this.targetLayout||!FP(this.targetLayout,m),T=!d&&f;if(this.options.layoutRoot||this.resumeFrom||T||d&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const b={...j_(y,"layout"),onPlay:_,onComplete:E};(u.shouldReduceMotion||this.options.layoutRoot)&&(b.delay=0,b.type=!1),this.startAnimation(b),this.setAnimationOrigin(c,T)}else d||tE(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Es(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(bB),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&jP(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const d=this.path[c];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Jx);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Zx);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(xB),this.nodes.forEach(yB),this.nodes.forEach(_B)):this.nodes.forEach(Zx),this.clearAllSnapshots();const a=$e.now();ce.delta=xi(0,1e3/60,a-ce.timestamp),ce.timestamp=a,ce.isProcessing=!0,ap.update.process(ce),ap.preRender.process(ce),ap.render.process(ce),ce.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,U_.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(TB),this.sharedNodes.forEach(IB)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Rt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Rt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Me(this.snapshot.measuredBox.x)&&!Me(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Bt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const l=i(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!LP(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,c=u!==this.prevTransformTemplateValue;o&&this.instance&&(a||Hs(this.latestValues)||c)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),CB(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:o}=this.options;if(!o)return Bt();const a=o.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(RB))){const{scroll:c}=this.root;c&&(to(a.x,c.offset.x),to(a.y,c.offset.y))}return a}removeElementScroll(o){var l;const a=Bt();if(rn(a,o),(l=this.scroll)!=null&&l.wasRoot)return a;for(let u=0;u<this.path.length;u++){const c=this.path[u],{scroll:d,options:f}=c;c!==this.root&&d&&f.layoutScroll&&(d.wasRoot&&rn(a,o),to(a.x,d.offset.x),to(a.y,d.offset.y))}return a}applyTransform(o,a=!1){const l=Bt();rn(l,o);for(let u=0;u<this.path.length;u++){const c=this.path[u];!a&&c.options.layoutScroll&&c.scroll&&c!==c.root&&eo(l,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),Hs(c.latestValues)&&eo(l,c.latestValues)}return Hs(this.latestValues)&&eo(l,this.latestValues),l}removeTransform(o){const a=Bt();rn(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!Hs(u.latestValues))continue;dg(u.latestValues)&&u.updateSnapshot();const c=Bt(),d=u.measurePageBox();rn(c,d),qx(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,c)}return Hs(this.latestValues)&&qx(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ce.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var f;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(f=this.parent)!=null&&f.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:c,layoutId:d}=this.options;if(!(!this.layout||!(c||d))){if(this.resolvedRelativeTargetAt=ce.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Bt(),this.relativeTargetOrigin=Bt(),pl(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),rn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Bt(),this.targetWithTransforms=Bt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),L6(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):rn(this.target,this.layout.layoutBox),_P(this.target,this.targetDelta)):rn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Bt(),this.relativeTargetOrigin=Bt(),pl(this.relativeTargetOrigin,this.target,m.target),rn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||dg(this.parent.latestValues)||yP(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var y;const o=this.getLead(),a=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||(y=this.parent)!=null&&y.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===ce.timestamp&&(l=!1),l)return;const{layout:u,layoutId:c}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||c))return;rn(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,f=this.treeScale.y;Y5(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Bt());const{target:m}=o;if(!m){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():($x(this.prevProjectionDelta.x,this.projectionDelta.x),$x(this.prevProjectionDelta.y,this.projectionDelta.y)),fl(this.projectionDelta,this.layoutCorrected,m,this.latestValues),(this.treeScale.x!==d||this.treeScale.y!==f||!Xx(this.projectionDelta.x,this.prevProjectionDelta.x)||!Xx(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=no(),this.projectionDelta=no(),this.projectionDeltaWithTransform=no()}setAnimationOrigin(o,a=!1){const l=this.snapshot,u=l?l.latestValues:{},c={...this.latestValues},d=no();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=Bt(),m=l?l.source:void 0,y=this.layout?this.layout.source:void 0,_=m!==y,E=this.getStack(),v=!E||E.members.length<=1,T=!!(_&&!v&&this.options.crossfade===!0&&!this.path.some(kB));this.animationProgress=0;let b;this.mixTargetDelta=R=>{const D=R/1e3;eE(d.x,o.x,D),eE(d.y,o.y,D),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(pl(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),AB(this.relativeTarget,this.relativeTargetOrigin,f,D),b&&dB(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=Bt()),rn(b,this.relativeTarget)),_&&(this.animationValues=c,oB(c,u,this.latestValues,D,T,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=D},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var a,l,u;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(),(u=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||u.stop(),this.pendingAnimation&&(Es(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Rt.update(()=>{nh.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Vo(0)),this.currentAnimation=eB(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),o.onUpdate&&o.onUpdate(c)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(mB),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:c}=o;if(!(!a||!l||!u)){if(this!==o&&this.layout&&u&&UP(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||Bt();const d=Me(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+d;const f=Me(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+f}rn(a,l),eo(a,c),fl(this.projectionDeltaWithTransform,this.layoutCorrected,a,c)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new fB),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const u={};l.z&&vp("z",o,u,this.animationValues);for(let c=0;c<_p.length;c++)vp(`rotate${_p[c]}`,o,u,this.animationValues),vp(`skew${_p[c]}`,o,u,this.animationValues);o.render();for(const c in u)o.setStaticValue(c,u[c]),this.animationValues&&(this.animationValues[c]=u[c]);o.scheduleRender()}applyProjectionStyles(o,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=eh(a==null?void 0:a.pointerEvents)||"",o.transform=l?l(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=eh(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Hs(this.latestValues)&&(o.transform=l?l({},""):"none",this.hasProjected=!1);return}o.visibility="";const c=u.animationValues||u.latestValues;this.applyTransformsToTarget();let d=pB(this.projectionDeltaWithTransform,this.treeScale,c);l&&(d=l(c,d)),o.transform=d;const{x:f,y:m}=this.projectionDelta;o.transformOrigin=`${f.origin*100}% ${m.origin*100}% 0`,u.animationValues?o.opacity=u===this?c.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:c.opacityExit:o.opacity=u===this?c.opacity!==void 0?c.opacity:"":c.opacityExit!==void 0?c.opacityExit:0;for(const y in Yl){if(c[y]===void 0)continue;const{correct:_,applyTo:E,isCSSVariable:v}=Yl[y],T=d==="none"?c[y]:_(c[y],u);if(E){const b=E.length;for(let R=0;R<b;R++)o[E[R]]=T}else v?this.options.visualElement.renderState.vars[y]=T:o[y]=T}this.options.layoutId&&(o.pointerEvents=u===this?eh(a==null?void 0:a.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)==null?void 0:a.stop()}),this.root.nodes.forEach(Jx),this.root.sharedNodes.clear()}}}function yB(e){e.updateLayout()}function _B(e){var n;const t=((n=e.resumeFrom)==null?void 0:n.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:s}=e.layout,{animationType:r}=e.options,o=t.source!==e.layout.source;r==="size"?an(d=>{const f=o?t.measuredBox[d]:t.layoutBox[d],m=Me(f);f.min=i[d].min,f.max=f.min+m}):UP(r,t.layoutBox,i)&&an(d=>{const f=o?t.measuredBox[d]:t.layoutBox[d],m=Me(i[d]);f.max=f.min+m,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[d].max=e.relativeTarget[d].min+m)});const a=no();fl(a,i,t.layoutBox);const l=no();o?fl(l,e.applyTransform(s,!0),t.measuredBox):fl(l,i,t.layoutBox);const u=!LP(a);let c=!1;if(!e.resumeFrom){const d=e.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:m}=d;if(f&&m){const y=Bt();pl(y,t.layoutBox,f.layoutBox);const _=Bt();pl(_,i,m.layoutBox),FP(y,_)||(c=!0),d.options.layoutRoot&&(e.relativeTarget=_,e.relativeTargetOrigin=y,e.relativeParent=d)}}}e.notifyListeners("didUpdate",{layout:i,snapshot:t,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeLayoutChanged:c})}else if(e.isLead()){const{onExitComplete:i}=e.options;i&&i()}e.options.transition=void 0}function vB(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function wB(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function TB(e){e.clearSnapshot()}function Jx(e){e.clearMeasurements()}function Zx(e){e.isLayoutDirty=!1}function xB(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function tE(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function EB(e){e.resolveTargetDelta()}function SB(e){e.calcProjection()}function bB(e){e.resetSkewAndRotation()}function IB(e){e.removeLeadSnapshot()}function eE(e,t,n){e.translate=Mt(t.translate,0,n),e.scale=Mt(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function nE(e,t,n,i){e.min=Mt(t.min,n.min,i),e.max=Mt(t.max,n.max,i)}function AB(e,t,n,i){nE(e.x,t.x,n.x,i),nE(e.y,t.y,n.y,i)}function kB(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const PB={duration:.45,ease:[.4,0,.1,1]},iE=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),sE=iE("applewebkit/")&&!iE("chrome/")?Math.round:mn;function rE(e){e.min=sE(e.min),e.max=sE(e.max)}function CB(e){rE(e.x),rE(e.y)}function UP(e,t,n){return e==="position"||e==="preserve-aspect"&&!V6(Qx(t),Qx(n),.2)}function RB(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const DB=BP({attachResizeListener:(e,t)=>Ql(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),wp={current:void 0},zP=BP({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!wp.current){const e=new DB({});e.mount(window),e.setOptions({layoutScroll:!0}),wp.current=e}return wp.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),MB={pan:{Feature:X6},drag:{Feature:Q6,ProjectionNode:zP,MeasureLayout:NP}};function oE(e,t,n){const{props:i}=e;e.animationState&&i.whileHover&&e.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,r=i[s];r&&Rt.postRender(()=>r(t,bu(t)))}class NB extends Rs{mount(){const{current:t}=this.node;t&&(this.unmount=e5(t,(n,i)=>(oE(this.node,i,"Start"),s=>oE(this.node,s,"End"))))}unmount(){}}class OB extends Rs{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=xu(Ql(this.node.current,"focus",()=>this.onFocus()),Ql(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function aE(e,t,n){const{props:i}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&i.whileTap&&e.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),r=i[s];r&&Rt.postRender(()=>r(t,bu(t)))}class VB extends Rs{mount(){const{current:t}=this.node;t&&(this.unmount=r5(t,(n,i)=>(aE(this.node,i,"Start"),(s,{success:r})=>aE(this.node,s,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const vg=new WeakMap,Tp=new WeakMap,LB=e=>{const t=vg.get(e.target);t&&t(e)},FB=e=>{e.forEach(LB)};function jB({root:e,...t}){const n=e||document;Tp.has(n)||Tp.set(n,{});const i=Tp.get(n),s=JSON.stringify(t);return i[s]||(i[s]=new IntersectionObserver(FB,{root:e,...t})),i[s]}function BB(e,t,n){const i=jB(t);return vg.set(e,n),i.observe(e),()=>{vg.delete(e),i.unobserve(e)}}const UB={some:0,all:1};class zB extends Rs{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:i,amount:s="some",once:r}=t,o={root:n?n.current:void 0,rootMargin:i,threshold:typeof s=="number"?s:UB[s]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,r&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:c,onViewportLeave:d}=this.node.getProps(),f=u?c:d;f&&f(l)};return BB(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some($B(t,n))&&this.startObserver()}unmount(){}}function $B({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const WB={inView:{Feature:zB},tap:{Feature:VB},focus:{Feature:OB},hover:{Feature:NB}},HB={layout:{ProjectionNode:zP,MeasureLayout:NP}},qB={...C6,...WB,...MB,...HB},zn=q5(qB,r6);function $P({selectedDate:e,onDateSelect:t,activityDates:n,onViewDay:i,onAddActivityForDate:s,currentMonth:r,setCurrentMonth:o}){const[a,l]=F.useState(e||new Date),u=r||a,c=o||l,d=u.getMonth(),f=u.getFullYear(),m=new Date(f,d,1),_=new Date(f,d+1,0).getDate(),E=m.getDay(),v=["January","February","March","April","May","June","July","August","September","October","November","December"],T=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],b=()=>{c(new Date(f,d-1,1))},R=()=>{c(new Date(f,d+1,1))},D=()=>{const C=new Date;t(C),c(C)},N=C=>{const P=new Date;return C===P.getDate()&&d===P.getMonth()&&f===P.getFullYear()},S=C=>e?C===e.getDate()&&d===e.getMonth()&&f===e.getFullYear():!1,w=C=>{const P=new Date(f,d,C).toDateString();return n.has(P)},x=C=>{t(new Date(f,d,C))},k=e&&w(e.getDate()),A=[];for(let C=0;C<E;C++)A.push(M.jsx("div",{className:"aspect-square"},`empty-${C}`));for(let C=1;C<=_;C++){const P=N(C),nt=new Date(f,d,C),X=e?S(C):n.has(nt.toDateString()),lt=w(C);A.push(M.jsxs("button",{onClick:()=>x(C),className:`aspect-square rounded-lg font-medium transition-all relative ${X?"bg-pink-600 text-white shadow-md":P?"bg-pink-100 text-pink-600 hover:bg-pink-200":lt&&!e?"bg-green-50 text-gray-900 hover:bg-green-100":"text-gray-700 hover:bg-gray-100"}`,children:[C,lt&&!X&&M.jsx("div",{className:"absolute bottom-1 left-1/2 transform -translate-x-1/2 w-1 h-1 bg-green-500 rounded-full"})]},C))}return M.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[M.jsxs("div",{className:"flex items-center justify-between mb-6",children:[M.jsxs("h2",{className:"text-xl font-semibold text-gray-800",children:[v[d]," ",f]}),M.jsxs("div",{className:"flex gap-2",children:[M.jsx("button",{onClick:D,className:"px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 rounded-lg font-medium text-gray-700 transition-colors",children:"Today"}),M.jsx("button",{onClick:b,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Previous month",children:M.jsx(Z4,{size:20})}),M.jsx("button",{onClick:R,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Next month",children:M.jsx(t3,{size:20})})]})]}),M.jsx("div",{className:"grid grid-cols-7 gap-2 mb-2",children:T.map(C=>M.jsx("div",{className:"text-center text-sm font-medium text-gray-500",children:C},C))}),M.jsx("div",{className:"grid grid-cols-7 gap-2",children:A}),e&&M.jsx("div",{className:"mt-6 text-center",children:k?M.jsxs("button",{onClick:()=>i(e),className:"bg-pink-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-pink-700 transition-colors",children:["View Activities for ",e.toLocaleDateString("en-US",{month:"short",day:"numeric"})]}):M.jsxs("button",{onClick:()=>s(e),className:"bg-pink-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-pink-700 transition-colors",children:["Add Activity for ",e.toLocaleDateString("en-US",{month:"short",day:"numeric"})]})})]})}function KB({selectedDates:e,onDateChange:t}){const[n,i]=F.useState(new Date),s=r=>{const o=e.findIndex(a=>a.toDateString()===r.toDateString());o>-1?t(e.filter((a,l)=>l!==o)):t([...e,r])};return M.jsx("div",{className:"rounded-lg bg-white p-4 shadow-lg",children:M.jsx($P,{selectedDate:null,onDateSelect:s,activityDates:new Set(e.map(r=>r.toDateString())),onViewDay:()=>{},onAddActivityForDate:()=>{},currentMonth:n,setCurrentMonth:i})})}const GB=[{value:"meal",label:"Meal",emoji:""},{value:"walk",label:"Walk",emoji:""},{value:"play",label:"Play",emoji:""},{value:"training",label:"Training",emoji:""},{value:"sleep",label:"Sleep",emoji:""},{value:"chew",label:"Chew",emoji:""},{value:"other",label:"Other",emoji:""}],YB=[{value:"wee",label:"Wee",emoji:""},{value:"poo",label:"Poo",emoji:""}],ka=[{value:"med",label:"Med",emoji:""},{value:"vet",label:"Vet",emoji:""}],QB=Array.from({length:60},(e,t)=>{const n=(t+1)*10;return{value:n,label:`${n} min`}});function XB({onSubmit:e,onBack:t,date:n}){const[i,s]=F.useState([]),[r,o]=F.useState(()=>{const x=n?new Date(n):new Date;return x.setMinutes(x.getMinutes()-x.getTimezoneOffset()),n&&x.setHours(9,0,0,0),x.toISOString().slice(0,16)}),[a,l]=F.useState([]),[u,c]=F.useState(void 0),[d,f]=F.useState(""),[m,y]=F.useState(!1),[_,E]=F.useState(!1),[v,T]=F.useState(!1),[b,R]=F.useState(!1);F.useEffect(()=>{const x=n?new Date(n):new Date;x.setMinutes(x.getMinutes()-x.getTimezoneOffset()),n&&x.setHours(9,0,0,0),o(x.toISOString().slice(0,16))},[n]),F.useEffect(()=>{i.includes("walk")||i.includes("sleep")||c(void 0)},[i]);const D=x=>{s(k=>[...ka.map(A=>A.value),"sleep"].includes(x)?k.includes(x)?[]:[x]:k.some(A=>[...ka.map(C=>C.value),"sleep"].includes(A))?[x]:k.includes(x)?k.filter(A=>A!==x):[...k,x])},N=async x=>{if(x.preventDefault(),i.length===0){alert("Please select at least one activity type.");return}if(w&&a.length===0){alert("Please select at least one date for the activity.");return}if((i.includes("other")||w)&&d.trim()===""){R(!0);return}y(!0);try{let k;if(S&&u){const C=new Date(r);k=new Date(C.getTime()+u*6e4).toISOString()}const A=w?a.map(C=>{const P=new Date(C);return P.setHours(0,0,0,0),P.toISOString()}):r;await e(i,A,d,k)}finally{y(!1)}},S=i.includes("walk")||i.includes("sleep"),w=i.some(x=>ka.map(k=>k.value).includes(x));return M.jsxs("div",{children:[M.jsx(th,{children:(_||v)&&M.jsx(zn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:()=>{E(!1),T(!1)},children:M.jsx(zn.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:x=>x.stopPropagation(),className:"bg-white rounded-2xl shadow-xl p-6",children:M.jsx("div",{className:"flex justify-center gap-4",children:(_?YB:ka).map(x=>M.jsx("button",{type:"button",onClick:()=>{D(x.value),E(!1),T(!1)},className:`flex flex-col items-center justify-center p-4 rounded-lg border-2 transition-all text-center w-24 h-24 ${i.includes(x.value)?"border-pink-500 bg-pink-50":"border-gray-200 bg-white hover:border-gray-300"}`,children:M.jsx("span",{className:"text-4xl",children:x.emoji})},x.value))})})})}),M.jsxs("div",{className:"flex justify-between items-center mb-6",children:[M.jsx("button",{onClick:t,className:"p-2 -ml-2 text-gray-600 hover:text-gray-900",children:M.jsx(X4,{size:24})}),M.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"Add New Activity"}),M.jsx("button",{type:"submit",form:"activity-form",disabled:m,className:"px-4 py-2 bg-pink-600 text-white rounded-lg font-semibold text-sm hover:bg-pink-700 disabled:bg-pink-400",children:m?"Adding...":"Add"})]}),M.jsxs("form",{id:"activity-form",onSubmit:N,className:"space-y-4",noValidate:!0,children:[M.jsxs("div",{children:[M.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Activity Type (select one or more)"}),M.jsxs("div",{className:"grid grid-cols-3 sm:grid-cols-5 gap-2",children:[M.jsxs("button",{type:"button",onClick:()=>E(!0),className:`flex flex-col items-center justify-center p-2 rounded-lg border-2 transition-all text-center ${i.includes("wee")||i.includes("poo")?"border-pink-500 bg-pink-50":"border-gray-200 bg-white hover:border-gray-300"}`,children:[M.jsx("span",{className:"text-2xl",children:""}),M.jsx("span",{className:"text-xs font-medium text-gray-800 mt-1",children:"Toilet"})]}),M.jsxs("button",{type:"button",onClick:()=>T(!0),className:`flex flex-col items-center justify-center p-2 rounded-lg border-2 transition-all text-center ${i.some(x=>ka.map(k=>k.value).includes(x))?"border-pink-500 bg-pink-50":"border-gray-200 bg-white hover:border-gray-300"}`,children:[M.jsx("span",{className:"text-2xl",children:""}),M.jsx("span",{className:"text-xs font-medium text-gray-800 mt-1",children:"Health"})]}),GB.map(x=>M.jsxs("button",{type:"button",onClick:()=>D(x.value),className:`flex flex-col items-center justify-center p-2 rounded-lg border-2 transition-all text-center ${i.includes(x.value)?"border-pink-500 bg-pink-50":"border-gray-200 bg-white hover:border-gray-300"}`,children:[M.jsx("span",{className:"text-2xl",children:x.emoji}),M.jsx("span",{className:"text-xs font-medium text-gray-800 mt-1",children:x.label})]},x.value))]})]}),M.jsx(th,{children:w&&M.jsx(zn.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:M.jsx(KB,{selectedDates:a,onDateChange:l})})}),M.jsx(th,{children:!w&&M.jsxs(zn.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[M.jsxs("div",{children:[M.jsx("label",{htmlFor:"activityTime",className:"text-sm font-medium text-gray-700 mb-1 block",children:"Start Time"}),M.jsx("input",{type:"datetime-local",id:"activityTime",value:r,onChange:x=>o(x.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-1 focus:ring-pink-500 focus:border-transparent bg-white text-center",required:!w})]}),S&&M.jsxs("div",{children:[M.jsx("label",{htmlFor:"duration",className:"text-sm font-medium text-gray-700 mb-1 block",children:"Duration (optional)"}),M.jsxs("select",{id:"duration",value:u||"",onChange:x=>c(x.target.value?parseInt(x.target.value):void 0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-1 focus:ring-pink-500 focus:border-transparent bg-white text-center",children:[M.jsx("option",{value:"",children:"No duration"}),QB.map(x=>M.jsx("option",{value:x.value,children:x.label},x.value))]})]})]})}),M.jsxs("div",{children:[M.jsx("label",{htmlFor:"notes",className:"text-sm font-medium text-gray-700 mb-1 block",children:"Notes"}),M.jsx("textarea",{id:"notes",value:d,onChange:x=>{f(x.target.value),b&&R(!1)},placeholder:w||i.includes("other")?"A description is required...":"Optional notes...",rows:3,className:`w-full px-3 py-2 border rounded-lg focus:ring-1 focus:border-transparent resize-none bg-white ${b?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-pink-500"}`})]})]})]})}const WP=6048e5,JB=864e5,ZB=6e4,lE=Symbol.for("constructDateFrom");function Rn(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&lE in e?e[lE](t):e instanceof Date?new e.constructor(t):new Date(t)}function le(e,t){return Rn(t||e,e)}function tU(e,t,n){const i=le(e,n==null?void 0:n.in);return isNaN(t)?Rn(e,NaN):(t&&i.setDate(i.getDate()+t),i)}let eU={};function Iu(){return eU}function wr(e,t){var a,l,u,c;const n=Iu(),i=(t==null?void 0:t.weekStartsOn)??((l=(a=t==null?void 0:t.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((c=(u=n.locale)==null?void 0:u.options)==null?void 0:c.weekStartsOn)??0,s=le(e,t==null?void 0:t.in),r=s.getDay(),o=(r<i?7:0)+r-i;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function id(e,t){return wr(e,{...t,weekStartsOn:1})}function HP(e,t){const n=le(e,t==null?void 0:t.in),i=n.getFullYear(),s=Rn(n,0);s.setFullYear(i+1,0,4),s.setHours(0,0,0,0);const r=id(s),o=Rn(n,0);o.setFullYear(i,0,4),o.setHours(0,0,0,0);const a=id(o);return n.getTime()>=r.getTime()?i+1:n.getTime()>=a.getTime()?i:i-1}function uE(e){const t=le(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function qP(e,...t){const n=Rn.bind(null,t.find(i=>typeof i=="object"));return t.map(n)}function Fo(e,t){const n=le(e,t==null?void 0:t.in);return n.setHours(0,0,0,0),n}function nU(e,t,n){const[i,s]=qP(n==null?void 0:n.in,e,t),r=Fo(i),o=Fo(s),a=+r-uE(r),l=+o-uE(o);return Math.round((a-l)/JB)}function iU(e,t){const n=HP(e,t),i=Rn(e,0);return i.setFullYear(n,0,4),i.setHours(0,0,0,0),id(i)}function sU(e){return Rn(e,Date.now())}function rU(e,t,n){const[i,s]=qP(n==null?void 0:n.in,e,t);return+Fo(i)==+Fo(s)}function oU(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function aU(e){return!(!oU(e)&&typeof e!="number"||isNaN(+le(e)))}function lU(e){return t=>{const i=(e?Math[e]:Math.trunc)(t);return i===0?0:i}}function uU(e,t){return+le(e)-+le(t)}function wg(e,t,n){const i=uU(e,t)/ZB;return lU(n==null?void 0:n.roundingMethod)(i)}function cU(e,t){const n=le(e,t==null?void 0:t.in);return n.setHours(23,59,59,999),n}function KP(e,t){const n=le(e,t==null?void 0:t.in),i=n.getMonth();return n.setFullYear(n.getFullYear(),i+1,0),n.setHours(23,59,59,999),n}function GP(e,t){const n=le(e,t==null?void 0:t.in);return n.setDate(1),n.setHours(0,0,0,0),n}function hU(e,t){const n=le(e,t==null?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function dU(e,t){var a,l;const n=Iu(),i=n.weekStartsOn??((l=(a=n.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??0,s=le(e,t==null?void 0:t.in),r=s.getDay(),o=(r<i?-7:0)+6-(r-i);return s.setDate(s.getDate()+o),s.setHours(23,59,59,999),s}const fU={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},pU=(e,t,n)=>{let i;const s=fU[e];return typeof s=="string"?i=s:t===1?i=s.one:i=s.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+i:i+" ago":i};function xp(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const mU={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},gU={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},yU={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},_U={date:xp({formats:mU,defaultWidth:"full"}),time:xp({formats:gU,defaultWidth:"full"}),dateTime:xp({formats:yU,defaultWidth:"full"})},vU={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},wU=(e,t,n,i)=>vU[e];function Pa(e){return(t,n)=>{const i=n!=null&&n.context?String(n.context):"standalone";let s;if(i==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,a=n!=null&&n.width?String(n.width):o;s=e.formattingValues[a]||e.formattingValues[o]}else{const o=e.defaultWidth,a=n!=null&&n.width?String(n.width):e.defaultWidth;s=e.values[a]||e.values[o]}const r=e.argumentCallback?e.argumentCallback(t):t;return s[r]}}const TU={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},xU={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},EU={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},SU={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},bU={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},IU={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},AU=(e,t)=>{const n=Number(e),i=n%100;if(i>20||i<10)switch(i%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},kU={ordinalNumber:AU,era:Pa({values:TU,defaultWidth:"wide"}),quarter:Pa({values:xU,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Pa({values:EU,defaultWidth:"wide"}),day:Pa({values:SU,defaultWidth:"wide"}),dayPeriod:Pa({values:bU,defaultWidth:"wide",formattingValues:IU,defaultFormattingWidth:"wide"})};function Ca(e){return(t,n={})=>{const i=n.width,s=i&&e.matchPatterns[i]||e.matchPatterns[e.defaultMatchWidth],r=t.match(s);if(!r)return null;const o=r[0],a=i&&e.parsePatterns[i]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(a)?CU(a,d=>d.test(o)):PU(a,d=>d.test(o));let u;u=e.valueCallback?e.valueCallback(l):l,u=n.valueCallback?n.valueCallback(u):u;const c=t.slice(o.length);return{value:u,rest:c}}}function PU(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function CU(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function RU(e){return(t,n={})=>{const i=t.match(e.matchPattern);if(!i)return null;const s=i[0],r=t.match(e.parsePattern);if(!r)return null;let o=e.valueCallback?e.valueCallback(r[0]):r[0];o=n.valueCallback?n.valueCallback(o):o;const a=t.slice(s.length);return{value:o,rest:a}}}const DU=/^(\d+)(th|st|nd|rd)?/i,MU=/\d+/i,NU={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},OU={any:[/^b/i,/^(a|c)/i]},VU={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},LU={any:[/1/i,/2/i,/3/i,/4/i]},FU={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},jU={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},BU={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},UU={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},zU={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},$U={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},WU={ordinalNumber:RU({matchPattern:DU,parsePattern:MU,valueCallback:e=>parseInt(e,10)}),era:Ca({matchPatterns:NU,defaultMatchWidth:"wide",parsePatterns:OU,defaultParseWidth:"any"}),quarter:Ca({matchPatterns:VU,defaultMatchWidth:"wide",parsePatterns:LU,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Ca({matchPatterns:FU,defaultMatchWidth:"wide",parsePatterns:jU,defaultParseWidth:"any"}),day:Ca({matchPatterns:BU,defaultMatchWidth:"wide",parsePatterns:UU,defaultParseWidth:"any"}),dayPeriod:Ca({matchPatterns:zU,defaultMatchWidth:"any",parsePatterns:$U,defaultParseWidth:"any"})},HU={code:"en-US",formatDistance:pU,formatLong:_U,formatRelative:wU,localize:kU,match:WU,options:{weekStartsOn:0,firstWeekContainsDate:1}};function qU(e,t){const n=le(e,t==null?void 0:t.in);return nU(n,hU(n))+1}function KU(e,t){const n=le(e,t==null?void 0:t.in),i=+id(n)-+iU(n);return Math.round(i/WP)+1}function YP(e,t){var c,d,f,m;const n=le(e,t==null?void 0:t.in),i=n.getFullYear(),s=Iu(),r=(t==null?void 0:t.firstWeekContainsDate)??((d=(c=t==null?void 0:t.locale)==null?void 0:c.options)==null?void 0:d.firstWeekContainsDate)??s.firstWeekContainsDate??((m=(f=s.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,o=Rn((t==null?void 0:t.in)||e,0);o.setFullYear(i+1,0,r),o.setHours(0,0,0,0);const a=wr(o,t),l=Rn((t==null?void 0:t.in)||e,0);l.setFullYear(i,0,r),l.setHours(0,0,0,0);const u=wr(l,t);return+n>=+a?i+1:+n>=+u?i:i-1}function GU(e,t){var a,l,u,c;const n=Iu(),i=(t==null?void 0:t.firstWeekContainsDate)??((l=(a=t==null?void 0:t.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((c=(u=n.locale)==null?void 0:u.options)==null?void 0:c.firstWeekContainsDate)??1,s=YP(e,t),r=Rn((t==null?void 0:t.in)||e,0);return r.setFullYear(s,0,i),r.setHours(0,0,0,0),wr(r,t)}function YU(e,t){const n=le(e,t==null?void 0:t.in),i=+wr(n,t)-+GU(n,t);return Math.round(i/WP)+1}function vt(e,t){const n=e<0?"-":"",i=Math.abs(e).toString().padStart(t,"0");return n+i}const Vi={y(e,t){const n=e.getFullYear(),i=n>0?n:1-n;return vt(t==="yy"?i%100:i,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):vt(n+1,2)},d(e,t){return vt(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return vt(e.getHours()%12||12,t.length)},H(e,t){return vt(e.getHours(),t.length)},m(e,t){return vt(e.getMinutes(),t.length)},s(e,t){return vt(e.getSeconds(),t.length)},S(e,t){const n=t.length,i=e.getMilliseconds(),s=Math.trunc(i*Math.pow(10,n-3));return vt(s,t.length)}},Mr={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},cE={G:function(e,t,n){const i=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(i,{width:"abbreviated"});case"GGGGG":return n.era(i,{width:"narrow"});case"GGGG":default:return n.era(i,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const i=e.getFullYear(),s=i>0?i:1-i;return n.ordinalNumber(s,{unit:"year"})}return Vi.y(e,t)},Y:function(e,t,n,i){const s=YP(e,i),r=s>0?s:1-s;if(t==="YY"){const o=r%100;return vt(o,2)}return t==="Yo"?n.ordinalNumber(r,{unit:"year"}):vt(r,t.length)},R:function(e,t){const n=HP(e);return vt(n,t.length)},u:function(e,t){const n=e.getFullYear();return vt(n,t.length)},Q:function(e,t,n){const i=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(i);case"QQ":return vt(i,2);case"Qo":return n.ordinalNumber(i,{unit:"quarter"});case"QQQ":return n.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(i,{width:"wide",context:"formatting"})}},q:function(e,t,n){const i=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(i);case"qq":return vt(i,2);case"qo":return n.ordinalNumber(i,{unit:"quarter"});case"qqq":return n.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(i,{width:"wide",context:"standalone"})}},M:function(e,t,n){const i=e.getMonth();switch(t){case"M":case"MM":return Vi.M(e,t);case"Mo":return n.ordinalNumber(i+1,{unit:"month"});case"MMM":return n.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(i,{width:"wide",context:"formatting"})}},L:function(e,t,n){const i=e.getMonth();switch(t){case"L":return String(i+1);case"LL":return vt(i+1,2);case"Lo":return n.ordinalNumber(i+1,{unit:"month"});case"LLL":return n.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(i,{width:"wide",context:"standalone"})}},w:function(e,t,n,i){const s=YU(e,i);return t==="wo"?n.ordinalNumber(s,{unit:"week"}):vt(s,t.length)},I:function(e,t,n){const i=KU(e);return t==="Io"?n.ordinalNumber(i,{unit:"week"}):vt(i,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):Vi.d(e,t)},D:function(e,t,n){const i=qU(e);return t==="Do"?n.ordinalNumber(i,{unit:"dayOfYear"}):vt(i,t.length)},E:function(e,t,n){const i=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(i,{width:"short",context:"formatting"});case"EEEE":default:return n.day(i,{width:"wide",context:"formatting"})}},e:function(e,t,n,i){const s=e.getDay(),r=(s-i.weekStartsOn+8)%7||7;switch(t){case"e":return String(r);case"ee":return vt(r,2);case"eo":return n.ordinalNumber(r,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,n,i){const s=e.getDay(),r=(s-i.weekStartsOn+8)%7||7;switch(t){case"c":return String(r);case"cc":return vt(r,t.length);case"co":return n.ordinalNumber(r,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,n){const i=e.getDay(),s=i===0?7:i;switch(t){case"i":return String(s);case"ii":return vt(s,t.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(i,{width:"short",context:"formatting"});case"iiii":default:return n.day(i,{width:"wide",context:"formatting"})}},a:function(e,t,n){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,n){const i=e.getHours();let s;switch(i===12?s=Mr.noon:i===0?s=Mr.midnight:s=i/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,n){const i=e.getHours();let s;switch(i>=17?s=Mr.evening:i>=12?s=Mr.afternoon:i>=4?s=Mr.morning:s=Mr.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let i=e.getHours()%12;return i===0&&(i=12),n.ordinalNumber(i,{unit:"hour"})}return Vi.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):Vi.H(e,t)},K:function(e,t,n){const i=e.getHours()%12;return t==="Ko"?n.ordinalNumber(i,{unit:"hour"}):vt(i,t.length)},k:function(e,t,n){let i=e.getHours();return i===0&&(i=24),t==="ko"?n.ordinalNumber(i,{unit:"hour"}):vt(i,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Vi.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Vi.s(e,t)},S:function(e,t){return Vi.S(e,t)},X:function(e,t,n){const i=e.getTimezoneOffset();if(i===0)return"Z";switch(t){case"X":return dE(i);case"XXXX":case"XX":return qs(i);case"XXXXX":case"XXX":default:return qs(i,":")}},x:function(e,t,n){const i=e.getTimezoneOffset();switch(t){case"x":return dE(i);case"xxxx":case"xx":return qs(i);case"xxxxx":case"xxx":default:return qs(i,":")}},O:function(e,t,n){const i=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+hE(i,":");case"OOOO":default:return"GMT"+qs(i,":")}},z:function(e,t,n){const i=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+hE(i,":");case"zzzz":default:return"GMT"+qs(i,":")}},t:function(e,t,n){const i=Math.trunc(+e/1e3);return vt(i,t.length)},T:function(e,t,n){return vt(+e,t.length)}};function hE(e,t=""){const n=e>0?"-":"+",i=Math.abs(e),s=Math.trunc(i/60),r=i%60;return r===0?n+String(s):n+String(s)+t+vt(r,2)}function dE(e,t){return e%60===0?(e>0?"-":"+")+vt(Math.abs(e)/60,2):qs(e,t)}function qs(e,t=""){const n=e>0?"-":"+",i=Math.abs(e),s=vt(Math.trunc(i/60),2),r=vt(i%60,2);return n+s+t+r}const fE=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},QP=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},QU=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],i=n[1],s=n[2];if(!s)return fE(e,t);let r;switch(i){case"P":r=t.dateTime({width:"short"});break;case"PP":r=t.dateTime({width:"medium"});break;case"PPP":r=t.dateTime({width:"long"});break;case"PPPP":default:r=t.dateTime({width:"full"});break}return r.replace("{{date}}",fE(i,t)).replace("{{time}}",QP(s,t))},XU={p:QP,P:QU},JU=/^D+$/,ZU=/^Y+$/,t9=["D","DD","YY","YYYY"];function e9(e){return JU.test(e)}function n9(e){return ZU.test(e)}function i9(e,t,n){const i=s9(e,t,n);if(console.warn(i),t9.includes(e))throw new RangeError(i)}function s9(e,t,n){const i=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${i} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const r9=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,o9=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,a9=/^'([^]*?)'?$/,l9=/''/g,u9=/[a-zA-Z]/;function Xl(e,t,n){var c,d,f,m;const i=Iu(),s=i.locale??HU,r=i.firstWeekContainsDate??((d=(c=i.locale)==null?void 0:c.options)==null?void 0:d.firstWeekContainsDate)??1,o=i.weekStartsOn??((m=(f=i.locale)==null?void 0:f.options)==null?void 0:m.weekStartsOn)??0,a=le(e,n==null?void 0:n.in);if(!aU(a))throw new RangeError("Invalid time value");let l=t.match(o9).map(y=>{const _=y[0];if(_==="p"||_==="P"){const E=XU[_];return E(y,s.formatLong)}return y}).join("").match(r9).map(y=>{if(y==="''")return{isToken:!1,value:"'"};const _=y[0];if(_==="'")return{isToken:!1,value:c9(y)};if(cE[_])return{isToken:!0,value:y};if(_.match(u9))throw new RangeError("Format string contains an unescaped latin alphabet character `"+_+"`");return{isToken:!1,value:y}});s.localize.preprocessor&&(l=s.localize.preprocessor(a,l));const u={firstWeekContainsDate:r,weekStartsOn:o,locale:s};return l.map(y=>{if(!y.isToken)return y.value;const _=y.value;(n9(_)||e9(_))&&i9(_,t,String(e));const E=cE[_[0]];return E(a,_,s.localize,u)}).join("")}function c9(e){const t=e.match(a9);return t?t[1].replace(l9,"'"):e}function h9(e,t){return rU(Rn(e,e),sU(e))}function d9(e,t,n){return tU(e,-t,n)}const pE={meal:"",walk:"",wee:"",poo:"",sleep:"",play:"",training:"",chew:"",med:"",vet:"",wake:"",other:""},f9=e=>e.filter(n=>!n.parent_activity_id).reduce((n,i)=>{const s=Xl(new Date(i.activity_time),"yyyy-MM-dd");return n[s]||(n[s]=[]),n[s].push(i),n},{});function mE({activities:e,onDelete:t,timelineDate:n,onClearTimelineDate:i}){const s=F.useMemo(()=>f9(e),[e]),r=F.useMemo(()=>Object.keys(s).sort((l,u)=>new Date(u).getTime()-new Date(l).getTime()),[s]),o=l=>e.filter(u=>u.parent_activity_id===l).sort((u,c)=>new Date(u.activity_time).getTime()-new Date(c.activity_time).getTime()),a=l=>{const u=new Date(l);return u.setUTCHours(12,0,0,0),h9(u)?"Today":Xl(u,"eeee, d MMMM")};return e.length===0?M.jsx("div",{className:"text-center py-12",children:M.jsx("p",{className:"text-gray-500",children:"No activities logged yet."})}):M.jsxs("div",{className:"space-y-6 pb-24",children:[n&&M.jsx("div",{className:"flex justify-end",children:M.jsx("button",{onClick:i,className:"text-sm text-pink-600 hover:underline",children:"Back to full timeline"})}),r.map((l,u)=>M.jsxs(zn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:u*.05},children:[M.jsx("h2",{className:"font-bold text-lg text-gray-700 mb-2",children:a(l)}),M.jsx("div",{className:"space-y-3",children:s[l].map(c=>M.jsx(p9,{activity:c,onDelete:t,subActivities:o(c.id)},c.id))})]},l))]})}const p9=({activity:e,onDelete:t,subActivities:n})=>{const i=r=>Xl(new Date(r),"h:mm a"),s=(r,o)=>{if(!o)return M.jsx("span",{className:"text-xs text-yellow-600 animate-pulse",children:"Ongoing"});const a=wg(new Date(o),new Date(r));if(a<1)return null;const l=Math.floor(a/60),u=a%60;let c="";return l>0&&(c+=`${l}h `),u>0&&(c+=`${u}m`),M.jsxs("span",{className:"text-xs text-gray-500",children:["(",c.trim(),")"]})};return M.jsxs(zn.div,{layout:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"bg-white p-3 rounded-lg shadow-sm flex items-start gap-4 relative group",children:[M.jsx("div",{className:"flex-shrink-0 w-10 h-10 flex items-center justify-center bg-pink-100 rounded-full text-xl",children:pE[e.activity_type]}),M.jsxs("div",{className:"flex-grow",children:[M.jsxs("div",{className:"flex items-center justify-between",children:[M.jsx("p",{className:"font-semibold text-gray-800",children:e.activity_type.charAt(0).toUpperCase()+e.activity_type.slice(1)}),M.jsxs("p",{className:"text-sm text-gray-600",children:[i(e.activity_time),e.activity_type==="sleep"||e.activity_type==="walk"?M.jsx("span",{className:"ml-2",children:s(e.activity_time,e.end_time)}):null]})]}),e.notes&&M.jsx("p",{className:"text-sm text-gray-600 mt-1",children:e.notes}),n.length>0&&M.jsx("div",{className:"mt-2 space-x-2",children:n.map(r=>M.jsxs("span",{className:"inline-flex items-center gap-1 text-xs bg-gray-100 px-2 py-1 rounded-full",children:[pE[r.activity_type],M.jsx("span",{children:i(r.activity_time)})]},r.id))})]}),M.jsx("button",{onClick:()=>t(e.id),className:"absolute top-2 right-2 text-gray-400 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",children:M.jsx(d3,{size:16})})]})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Au(e){return e+.5|0}const Xi=(e,t,n)=>Math.max(Math.min(e,n),t);function Ha(e){return Xi(Au(e*2.55),0,255)}function ps(e){return Xi(Au(e*255),0,255)}function ai(e){return Xi(Au(e/2.55)/100,0,1)}function gE(e){return Xi(Au(e*100),0,100)}const on={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Tg=[..."0123456789ABCDEF"],m9=e=>Tg[e&15],g9=e=>Tg[(e&240)>>4]+Tg[e&15],mc=e=>(e&240)>>4===(e&15),y9=e=>mc(e.r)&&mc(e.g)&&mc(e.b)&&mc(e.a);function _9(e){var t=e.length,n;return e[0]==="#"&&(t===4||t===5?n={r:255&on[e[1]]*17,g:255&on[e[2]]*17,b:255&on[e[3]]*17,a:t===5?on[e[4]]*17:255}:(t===7||t===9)&&(n={r:on[e[1]]<<4|on[e[2]],g:on[e[3]]<<4|on[e[4]],b:on[e[5]]<<4|on[e[6]],a:t===9?on[e[7]]<<4|on[e[8]]:255})),n}const v9=(e,t)=>e<255?t(e):"";function w9(e){var t=y9(e)?m9:g9;return e?"#"+t(e.r)+t(e.g)+t(e.b)+v9(e.a,t):void 0}const T9=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function XP(e,t,n){const i=t*Math.min(n,1-n),s=(r,o=(r+e/30)%12)=>n-i*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function x9(e,t,n){const i=(s,r=(s+e/60)%6)=>n-n*t*Math.max(Math.min(r,4-r,1),0);return[i(5),i(3),i(1)]}function E9(e,t,n){const i=XP(e,1,.5);let s;for(t+n>1&&(s=1/(t+n),t*=s,n*=s),s=0;s<3;s++)i[s]*=1-t-n,i[s]+=t;return i}function S9(e,t,n,i,s){return e===s?(t-n)/i+(t<n?6:0):t===s?(n-e)/i+2:(e-t)/i+4}function Z_(e){const n=e.r/255,i=e.g/255,s=e.b/255,r=Math.max(n,i,s),o=Math.min(n,i,s),a=(r+o)/2;let l,u,c;return r!==o&&(c=r-o,u=a>.5?c/(2-r-o):c/(r+o),l=S9(n,i,s,c,r),l=l*60+.5),[l|0,u||0,a]}function tv(e,t,n,i){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,i)).map(ps)}function ev(e,t,n){return tv(XP,e,t,n)}function b9(e,t,n){return tv(E9,e,t,n)}function I9(e,t,n){return tv(x9,e,t,n)}function JP(e){return(e%360+360)%360}function A9(e){const t=T9.exec(e);let n=255,i;if(!t)return;t[5]!==i&&(n=t[6]?Ha(+t[5]):ps(+t[5]));const s=JP(+t[2]),r=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?i=b9(s,r,o):t[1]==="hsv"?i=I9(s,r,o):i=ev(s,r,o),{r:i[0],g:i[1],b:i[2],a:n}}function k9(e,t){var n=Z_(e);n[0]=JP(n[0]+t),n=ev(n),e.r=n[0],e.g=n[1],e.b=n[2]}function P9(e){if(!e)return;const t=Z_(e),n=t[0],i=gE(t[1]),s=gE(t[2]);return e.a<255?`hsla(${n}, ${i}%, ${s}%, ${ai(e.a)})`:`hsl(${n}, ${i}%, ${s}%)`}const yE={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},_E={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function C9(){const e={},t=Object.keys(_E),n=Object.keys(yE);let i,s,r,o,a;for(i=0;i<t.length;i++){for(o=a=t[i],s=0;s<n.length;s++)r=n[s],a=a.replace(r,yE[r]);r=parseInt(_E[o],16),e[a]=[r>>16&255,r>>8&255,r&255]}return e}let gc;function R9(e){gc||(gc=C9(),gc.transparent=[0,0,0,0]);const t=gc[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const D9=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function M9(e){const t=D9.exec(e);let n=255,i,s,r;if(t){if(t[7]!==i){const o=+t[7];n=t[8]?Ha(o):Xi(o*255,0,255)}return i=+t[1],s=+t[3],r=+t[5],i=255&(t[2]?Ha(i):Xi(i,0,255)),s=255&(t[4]?Ha(s):Xi(s,0,255)),r=255&(t[6]?Ha(r):Xi(r,0,255)),{r:i,g:s,b:r,a:n}}}function N9(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${ai(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const Ep=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,Nr=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function O9(e,t,n){const i=Nr(ai(e.r)),s=Nr(ai(e.g)),r=Nr(ai(e.b));return{r:ps(Ep(i+n*(Nr(ai(t.r))-i))),g:ps(Ep(s+n*(Nr(ai(t.g))-s))),b:ps(Ep(r+n*(Nr(ai(t.b))-r))),a:e.a+n*(t.a-e.a)}}function yc(e,t,n){if(e){let i=Z_(e);i[t]=Math.max(0,Math.min(i[t]+i[t]*n,t===0?360:1)),i=ev(i),e.r=i[0],e.g=i[1],e.b=i[2]}}function ZP(e,t){return e&&Object.assign(t||{},e)}function vE(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=ps(e[3]))):(t=ZP(e,{r:0,g:0,b:0,a:1}),t.a=ps(t.a)),t}function V9(e){return e.charAt(0)==="r"?M9(e):A9(e)}class Jl{constructor(t){if(t instanceof Jl)return t;const n=typeof t;let i;n==="object"?i=vE(t):n==="string"&&(i=_9(t)||R9(t)||V9(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=ZP(this._rgb);return t&&(t.a=ai(t.a)),t}set rgb(t){this._rgb=vE(t)}rgbString(){return this._valid?N9(this._rgb):void 0}hexString(){return this._valid?w9(this._rgb):void 0}hslString(){return this._valid?P9(this._rgb):void 0}mix(t,n){if(t){const i=this.rgb,s=t.rgb;let r;const o=n===r?.5:n,a=2*o-1,l=i.a-s.a,u=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;r=1-u,i.r=255&u*i.r+r*s.r+.5,i.g=255&u*i.g+r*s.g+.5,i.b=255&u*i.b+r*s.b+.5,i.a=o*i.a+(1-o)*s.a,this.rgb=i}return this}interpolate(t,n){return t&&(this._rgb=O9(this._rgb,t._rgb,n)),this}clone(){return new Jl(this.rgb)}alpha(t){return this._rgb.a=ps(t),this}clearer(t){const n=this._rgb;return n.a*=1-t,this}greyscale(){const t=this._rgb,n=Au(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=n,this}opaquer(t){const n=this._rgb;return n.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return yc(this._rgb,2,t),this}darken(t){return yc(this._rgb,2,-t),this}saturate(t){return yc(this._rgb,1,t),this}desaturate(t){return yc(this._rgb,1,-t),this}rotate(t){return k9(this._rgb,t),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function ni(){}const L9=(()=>{let e=0;return()=>e++})();function yt(e){return e==null}function Jt(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function gt(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function _n(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function On(e,t){return _n(e)?e:t}function ot(e,t){return typeof e>"u"?t:e}const F9=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function kt(e,t,n){if(e&&typeof e.call=="function")return e.apply(n,t)}function wt(e,t,n,i){let s,r,o;if(Jt(e))for(r=e.length,s=0;s<r;s++)t.call(n,e[s],s);else if(gt(e))for(o=Object.keys(e),r=o.length,s=0;s<r;s++)t.call(n,e[o[s]],o[s])}function sd(e,t){let n,i,s,r;if(!e||!t||e.length!==t.length)return!1;for(n=0,i=e.length;n<i;++n)if(s=e[n],r=t[n],s.datasetIndex!==r.datasetIndex||s.index!==r.index)return!1;return!0}function rd(e){if(Jt(e))return e.map(rd);if(gt(e)){const t=Object.create(null),n=Object.keys(e),i=n.length;let s=0;for(;s<i;++s)t[n[s]]=rd(e[n[s]]);return t}return e}function tC(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function j9(e,t,n,i){if(!tC(e))return;const s=t[e],r=n[e];gt(s)&&gt(r)?Zl(s,r,i):t[e]=rd(r)}function Zl(e,t,n){const i=Jt(t)?t:[t],s=i.length;if(!gt(e))return e;n=n||{};const r=n.merger||j9;let o;for(let a=0;a<s;++a){if(o=i[a],!gt(o))continue;const l=Object.keys(o);for(let u=0,c=l.length;u<c;++u)r(l[u],e,o,n)}return e}function ml(e,t){return Zl(e,t,{merger:B9})}function B9(e,t,n){if(!tC(e))return;const i=t[e],s=n[e];gt(i)&&gt(s)?ml(i,s):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=rd(s))}const wE={"":e=>e,x:e=>e.x,y:e=>e.y};function U9(e){const t=e.split("."),n=[];let i="";for(const s of t)i+=s,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function z9(e){const t=U9(e);return n=>{for(const i of t){if(i==="")break;n=n&&n[i]}return n}}function jo(e,t){return(wE[t]||(wE[t]=z9(t)))(e)}function nv(e){return e.charAt(0).toUpperCase()+e.slice(1)}const tu=e=>typeof e<"u",bs=e=>typeof e=="function",TE=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};function $9(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const ae=Math.PI,Zn=2*ae,W9=Zn+ae,od=Number.POSITIVE_INFINITY,H9=ae/180,In=ae/2,js=ae/4,xE=ae*2/3,eC=Math.log10,ti=Math.sign;function gl(e,t,n){return Math.abs(e-t)<n}function EE(e){const t=Math.round(e);e=gl(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(eC(e))),i=e/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function q9(e){const t=[],n=Math.sqrt(e);let i;for(i=1;i<n;i++)e%i===0&&(t.push(i),t.push(e/i));return n===(n|0)&&t.push(n),t.sort((s,r)=>s-r).pop(),t}function K9(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function eu(e){return!K9(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function G9(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}function Y9(e,t,n){let i,s,r;for(i=0,s=e.length;i<s;i++)r=e[i][n],isNaN(r)||(t.min=Math.min(t.min,r),t.max=Math.max(t.max,r))}function er(e){return e*(ae/180)}function Q9(e){return e*(180/ae)}function SE(e){if(!_n(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function X9(e,t){const n=t.x-e.x,i=t.y-e.y,s=Math.sqrt(n*n+i*i);let r=Math.atan2(i,n);return r<-.5*ae&&(r+=Zn),{angle:r,distance:s}}function xg(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function J9(e,t){return(e-t+W9)%Zn-ae}function ji(e){return(e%Zn+Zn)%Zn}function nC(e,t,n,i){const s=ji(e),r=ji(t),o=ji(n),a=ji(r-s),l=ji(o-s),u=ji(s-r),c=ji(s-o);return s===r||s===o||i&&r===o||a>l&&u<c}function Je(e,t,n){return Math.max(t,Math.min(n,e))}function Z9(e){return Je(e,-32768,32767)}function nr(e,t,n,i=1e-6){return e>=Math.min(t,n)-i&&e<=Math.max(t,n)+i}function iv(e,t,n){n=n||(o=>e[o]<t);let i=e.length-1,s=0,r;for(;i-s>1;)r=s+i>>1,n(r)?s=r:i=r;return{lo:s,hi:i}}const ir=(e,t,n,i)=>iv(e,n,i?s=>{const r=e[s][t];return r<n||r===n&&e[s+1][t]===n}:s=>e[s][t]<n),tz=(e,t,n)=>iv(e,n,i=>e[i][t]>=n);function ez(e,t,n){let i=0,s=e.length;for(;i<s&&e[i]<t;)i++;for(;s>i&&e[s-1]>n;)s--;return i>0||s<e.length?e.slice(i,s):e}const iC=["push","pop","shift","splice","unshift"];function nz(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),iC.forEach(n=>{const i="_onData"+nv(n),s=e[n];Object.defineProperty(e,n,{configurable:!0,enumerable:!1,value(...r){const o=s.apply(this,r);return e._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...r)}),o}})})}function bE(e,t){const n=e._chartjs;if(!n)return;const i=n.listeners,s=i.indexOf(t);s!==-1&&i.splice(s,1),!(i.length>0)&&(iC.forEach(r=>{delete e[r]}),delete e._chartjs)}function sC(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const rC=function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame}();function oC(e,t){let n=[],i=!1;return function(...s){n=s,i||(i=!0,rC.call(window,()=>{i=!1,e.apply(t,n)}))}}function iz(e,t){let n;return function(...i){return t?(clearTimeout(n),n=setTimeout(e,t,i)):e.apply(this,i),t}}const sv=e=>e==="start"?"left":e==="end"?"right":"center",we=(e,t,n)=>e==="start"?t:e==="end"?n:(t+n)/2,sz=(e,t,n,i)=>e===(i?"left":"right")?n:e==="center"?(t+n)/2:t;function rz(e,t,n){const i=t.length;let s=0,r=i;if(e._sorted){const{iScale:o,vScale:a,_parsed:l}=e,u=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,c=o.axis,{min:d,max:f,minDefined:m,maxDefined:y}=o.getUserBounds();if(m){if(s=Math.min(ir(l,c,d).lo,n?i:ir(t,c,o.getPixelForValue(d)).lo),u){const _=l.slice(0,s+1).reverse().findIndex(E=>!yt(E[a.axis]));s-=Math.max(0,_)}s=Je(s,0,i-1)}if(y){let _=Math.max(ir(l,o.axis,f,!0).hi+1,n?0:ir(t,c,o.getPixelForValue(f),!0).hi+1);if(u){const E=l.slice(_-1).findIndex(v=>!yt(v[a.axis]));_+=Math.max(0,E)}r=Je(_,s,i)-s}else r=i-s}return{start:s,count:r}}function oz(e){const{xScale:t,yScale:n,_scaleRanges:i}=e,s={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!i)return e._scaleRanges=s,!0;const r=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,s),r}const _c=e=>e===0||e===1,IE=(e,t,n)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*Zn/n)),AE=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*Zn/n)+1,yl={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*In)+1,easeOutSine:e=>Math.sin(e*In),easeInOutSine:e=>-.5*(Math.cos(ae*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>_c(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>_c(e)?e:IE(e,.075,.3),easeOutElastic:e=>_c(e)?e:AE(e,.075,.3),easeInOutElastic(e){return _c(e)?e:e<.5?.5*IE(e*2,.1125,.45):.5+.5*AE(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-yl.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?yl.easeInBounce(e*2)*.5:yl.easeOutBounce(e*2-1)*.5+.5};function rv(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function kE(e){return rv(e)?e:new Jl(e)}function Sp(e){return rv(e)?e:new Jl(e).saturate(.5).darken(.1).hexString()}const az=["x","y","borderWidth","radius","tension"],lz=["color","borderColor","backgroundColor"];function uz(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:lz},numbers:{type:"number",properties:az}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function cz(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const PE=new Map;function hz(e,t){t=t||{};const n=e+JSON.stringify(t);let i=PE.get(n);return i||(i=new Intl.NumberFormat(e,t),PE.set(n,i)),i}function aC(e,t,n){return hz(t,n).format(e)}const dz={values(e){return Jt(e)?e:""+e},numeric(e,t,n){if(e===0)return"0";const i=this.chart.options.locale;let s,r=e;if(n.length>1){const u=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(u<1e-4||u>1e15)&&(s="scientific"),r=fz(e,n)}const o=eC(Math.abs(r)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),aC(e,i,l)}};function fz(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e)),n}var lC={formatters:dz};function pz(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,n)=>n.lineWidth,tickColor:(t,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:lC.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Tr=Object.create(null),Eg=Object.create(null);function _l(e,t){if(!t)return e;const n=t.split(".");for(let i=0,s=n.length;i<s;++i){const r=n[i];e=e[r]||(e[r]=Object.create(null))}return e}function bp(e,t,n){return typeof t=="string"?Zl(_l(e,t),n):Zl(_l(e,""),t)}class mz{constructor(t,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,s)=>Sp(s.backgroundColor),this.hoverBorderColor=(i,s)=>Sp(s.borderColor),this.hoverColor=(i,s)=>Sp(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(n)}set(t,n){return bp(this,t,n)}get(t){return _l(this,t)}describe(t,n){return bp(Eg,t,n)}override(t,n){return bp(Tr,t,n)}route(t,n,i,s){const r=_l(this,t),o=_l(this,i),a="_"+n;Object.defineProperties(r,{[a]:{value:r[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],u=o[s];return gt(l)?Object.assign({},u,l):ot(l,u)},set(l){this[a]=l}}})}apply(t){t.forEach(n=>n(this))}}var $t=new mz({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[uz,cz,pz]);function gz(e){return!e||yt(e.size)||yt(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function CE(e,t,n,i,s){let r=t[s];return r||(r=t[s]=e.measureText(s).width,n.push(s)),r>i&&(i=r),i}function Bs(e,t,n){const i=e.currentDevicePixelRatio,s=n!==0?Math.max(n/2,.5):0;return Math.round((t-s)*i)/i+s}function RE(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function Sg(e,t,n,i){uC(e,t,n,i,null)}function uC(e,t,n,i,s){let r,o,a,l,u,c,d,f;const m=t.pointStyle,y=t.rotation,_=t.radius;let E=(y||0)*H9;if(m&&typeof m=="object"&&(r=m.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){e.save(),e.translate(n,i),e.rotate(E),e.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),e.restore();return}if(!(isNaN(_)||_<=0)){switch(e.beginPath(),m){default:s?e.ellipse(n,i,s/2,_,0,0,Zn):e.arc(n,i,_,0,Zn),e.closePath();break;case"triangle":c=s?s/2:_,e.moveTo(n+Math.sin(E)*c,i-Math.cos(E)*_),E+=xE,e.lineTo(n+Math.sin(E)*c,i-Math.cos(E)*_),E+=xE,e.lineTo(n+Math.sin(E)*c,i-Math.cos(E)*_),e.closePath();break;case"rectRounded":u=_*.516,l=_-u,o=Math.cos(E+js)*l,d=Math.cos(E+js)*(s?s/2-u:l),a=Math.sin(E+js)*l,f=Math.sin(E+js)*(s?s/2-u:l),e.arc(n-d,i-a,u,E-ae,E-In),e.arc(n+f,i-o,u,E-In,E),e.arc(n+d,i+a,u,E,E+In),e.arc(n-f,i+o,u,E+In,E+ae),e.closePath();break;case"rect":if(!y){l=Math.SQRT1_2*_,c=s?s/2:l,e.rect(n-c,i-l,2*c,2*l);break}E+=js;case"rectRot":d=Math.cos(E)*(s?s/2:_),o=Math.cos(E)*_,a=Math.sin(E)*_,f=Math.sin(E)*(s?s/2:_),e.moveTo(n-d,i-a),e.lineTo(n+f,i-o),e.lineTo(n+d,i+a),e.lineTo(n-f,i+o),e.closePath();break;case"crossRot":E+=js;case"cross":d=Math.cos(E)*(s?s/2:_),o=Math.cos(E)*_,a=Math.sin(E)*_,f=Math.sin(E)*(s?s/2:_),e.moveTo(n-d,i-a),e.lineTo(n+d,i+a),e.moveTo(n+f,i-o),e.lineTo(n-f,i+o);break;case"star":d=Math.cos(E)*(s?s/2:_),o=Math.cos(E)*_,a=Math.sin(E)*_,f=Math.sin(E)*(s?s/2:_),e.moveTo(n-d,i-a),e.lineTo(n+d,i+a),e.moveTo(n+f,i-o),e.lineTo(n-f,i+o),E+=js,d=Math.cos(E)*(s?s/2:_),o=Math.cos(E)*_,a=Math.sin(E)*_,f=Math.sin(E)*(s?s/2:_),e.moveTo(n-d,i-a),e.lineTo(n+d,i+a),e.moveTo(n+f,i-o),e.lineTo(n-f,i+o);break;case"line":o=s?s/2:Math.cos(E)*_,a=Math.sin(E)*_,e.moveTo(n-o,i-a),e.lineTo(n+o,i+a);break;case"dash":e.moveTo(n,i),e.lineTo(n+Math.cos(E)*(s?s/2:_),i+Math.sin(E)*_);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function nu(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function ov(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function av(e){e.restore()}function yz(e,t,n,i,s){if(!t)return e.lineTo(n.x,n.y);if(s==="middle"){const r=(t.x+n.x)/2;e.lineTo(r,t.y),e.lineTo(r,n.y)}else s==="after"!=!!i?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function _z(e,t,n,i){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function vz(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),yt(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function wz(e,t,n,i,s){if(s.strikethrough||s.underline){const r=e.measureText(i),o=t-r.actualBoundingBoxLeft,a=t+r.actualBoundingBoxRight,l=n-r.actualBoundingBoxAscent,u=n+r.actualBoundingBoxDescent,c=s.strikethrough?(l+u)/2:u;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=s.decorationWidth||2,e.moveTo(o,c),e.lineTo(a,c),e.stroke()}}function Tz(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function iu(e,t,n,i,s,r={}){const o=Jt(t)?t:[t],a=r.strokeWidth>0&&r.strokeColor!=="";let l,u;for(e.save(),e.font=s.string,vz(e,r),l=0;l<o.length;++l)u=o[l],r.backdrop&&Tz(e,r.backdrop),a&&(r.strokeColor&&(e.strokeStyle=r.strokeColor),yt(r.strokeWidth)||(e.lineWidth=r.strokeWidth),e.strokeText(u,n,i,r.maxWidth)),e.fillText(u,n,i,r.maxWidth),wz(e,n,i,u,r),i+=Number(s.lineHeight);e.restore()}function ad(e,t){const{x:n,y:i,w:s,h:r,radius:o}=t;e.arc(n+o.topLeft,i+o.topLeft,o.topLeft,1.5*ae,ae,!0),e.lineTo(n,i+r-o.bottomLeft),e.arc(n+o.bottomLeft,i+r-o.bottomLeft,o.bottomLeft,ae,In,!0),e.lineTo(n+s-o.bottomRight,i+r),e.arc(n+s-o.bottomRight,i+r-o.bottomRight,o.bottomRight,In,0,!0),e.lineTo(n+s,i+o.topRight),e.arc(n+s-o.topRight,i+o.topRight,o.topRight,0,-In,!0),e.lineTo(n+o.topLeft,i)}const xz=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Ez=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Sz(e,t){const n=(""+e).match(xz);if(!n||n[1]==="normal")return t*1.2;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100;break}return t*e}const bz=e=>+e||0;function cC(e,t){const n={},i=gt(t),s=i?Object.keys(t):t,r=gt(e)?i?o=>ot(e[o],e[t[o]]):o=>e[o]:()=>e;for(const o of s)n[o]=bz(r(o));return n}function hC(e){return cC(e,{top:"y",right:"x",bottom:"y",left:"x"})}function yo(e){return cC(e,["topLeft","topRight","bottomLeft","bottomRight"])}function vn(e){const t=hC(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function be(e,t){e=e||{},t=t||$t.font;let n=ot(e.size,t.size);typeof n=="string"&&(n=parseInt(n,10));let i=ot(e.style,t.style);i&&!(""+i).match(Ez)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const s={family:ot(e.family,t.family),lineHeight:Sz(ot(e.lineHeight,t.lineHeight),n),size:n,style:i,weight:ot(e.weight,t.weight),string:""};return s.string=gz(s),s}function vc(e,t,n,i){let s,r,o;for(s=0,r=e.length;s<r;++s)if(o=e[s],o!==void 0&&o!==void 0)return o}function Iz(e,t,n){const{min:i,max:s}=e,r=F9(t,(s-i)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(i,-Math.abs(r)),max:o(s,r)}}function Ar(e,t){return Object.assign(Object.create(e),t)}function lv(e,t=[""],n,i,s=()=>e[0]){const r=n||e;typeof i>"u"&&(i=mC("_fallback",e));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:r,_fallback:i,_getTarget:s,override:a=>lv([a,...e],t,r,i)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete e[0][l],!0},get(a,l){return fC(a,l,()=>Nz(l,t,e,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(a,l){return ME(a).includes(l)},ownKeys(a){return ME(a)},set(a,l,u){const c=a._storage||(a._storage=s());return a[l]=c[l]=u,delete a._keys,!0}})}function Bo(e,t,n,i){const s={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:dC(e,i),setContext:r=>Bo(e,r,n,i),override:r=>Bo(e.override(r),t,n,i)};return new Proxy(s,{deleteProperty(r,o){return delete r[o],delete e[o],!0},get(r,o,a){return fC(r,o,()=>kz(r,o,a))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(e,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,o)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(r,o){return Reflect.has(e,o)},ownKeys(){return Reflect.ownKeys(e)},set(r,o,a){return e[o]=a,delete r[o],!0}})}function dC(e,t={scriptable:!0,indexable:!0}){const{_scriptable:n=t.scriptable,_indexable:i=t.indexable,_allKeys:s=t.allKeys}=e;return{allKeys:s,scriptable:n,indexable:i,isScriptable:bs(n)?n:()=>n,isIndexable:bs(i)?i:()=>i}}const Az=(e,t)=>e?e+nv(t):t,uv=(e,t)=>gt(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function fC(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const i=n();return e[t]=i,i}function kz(e,t,n){const{_proxy:i,_context:s,_subProxy:r,_descriptors:o}=e;let a=i[t];return bs(a)&&o.isScriptable(t)&&(a=Pz(t,a,e,n)),Jt(a)&&a.length&&(a=Cz(t,a,e,o.isIndexable)),uv(t,a)&&(a=Bo(a,s,r&&r[t],o)),a}function Pz(e,t,n,i){const{_proxy:s,_context:r,_subProxy:o,_stack:a}=n;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);a.add(e);let l=t(r,o||i);return a.delete(e),uv(e,l)&&(l=cv(s._scopes,s,e,l)),l}function Cz(e,t,n,i){const{_proxy:s,_context:r,_subProxy:o,_descriptors:a}=n;if(typeof r.index<"u"&&i(e))return t[r.index%t.length];if(gt(t[0])){const l=t,u=s._scopes.filter(c=>c!==l);t=[];for(const c of l){const d=cv(u,s,e,c);t.push(Bo(d,r,o&&o[e],a))}}return t}function pC(e,t,n){return bs(e)?e(t,n):e}const Rz=(e,t)=>e===!0?t:typeof e=="string"?jo(t,e):void 0;function Dz(e,t,n,i,s){for(const r of t){const o=Rz(n,r);if(o){e.add(o);const a=pC(o._fallback,n,s);if(typeof a<"u"&&a!==n&&a!==i)return a}else if(o===!1&&typeof i<"u"&&n!==i)return null}return!1}function cv(e,t,n,i){const s=t._rootScopes,r=pC(t._fallback,n,i),o=[...e,...s],a=new Set;a.add(i);let l=DE(a,o,n,r||n,i);return l===null||typeof r<"u"&&r!==n&&(l=DE(a,o,r,l,i),l===null)?!1:lv(Array.from(a),[""],s,r,()=>Mz(t,n,i))}function DE(e,t,n,i,s){for(;n;)n=Dz(e,t,n,i,s);return n}function Mz(e,t,n){const i=e._getTarget();t in i||(i[t]={});const s=i[t];return Jt(s)&&gt(n)?n:s||{}}function Nz(e,t,n,i){let s;for(const r of t)if(s=mC(Az(r,e),n),typeof s<"u")return uv(e,s)?cv(n,i,e,s):s}function mC(e,t){for(const n of t){if(!n)continue;const i=n[e];if(typeof i<"u")return i}}function ME(e){let t=e._keys;return t||(t=e._keys=Oz(e._scopes)),t}function Oz(e){const t=new Set;for(const n of e)for(const i of Object.keys(n).filter(s=>!s.startsWith("_")))t.add(i);return Array.from(t)}const Vz=Number.EPSILON||1e-14,Uo=(e,t)=>t<e.length&&!e[t].skip&&e[t],gC=e=>e==="x"?"y":"x";function Lz(e,t,n,i){const s=e.skip?t:e,r=t,o=n.skip?t:n,a=xg(r,s),l=xg(o,r);let u=a/(a+l),c=l/(a+l);u=isNaN(u)?0:u,c=isNaN(c)?0:c;const d=i*u,f=i*c;return{previous:{x:r.x-d*(o.x-s.x),y:r.y-d*(o.y-s.y)},next:{x:r.x+f*(o.x-s.x),y:r.y+f*(o.y-s.y)}}}function Fz(e,t,n){const i=e.length;let s,r,o,a,l,u=Uo(e,0);for(let c=0;c<i-1;++c)if(l=u,u=Uo(e,c+1),!(!l||!u)){if(gl(t[c],0,Vz)){n[c]=n[c+1]=0;continue}s=n[c]/t[c],r=n[c+1]/t[c],a=Math.pow(s,2)+Math.pow(r,2),!(a<=9)&&(o=3/Math.sqrt(a),n[c]=s*o*t[c],n[c+1]=r*o*t[c])}}function jz(e,t,n="x"){const i=gC(n),s=e.length;let r,o,a,l=Uo(e,0);for(let u=0;u<s;++u){if(o=a,a=l,l=Uo(e,u+1),!a)continue;const c=a[n],d=a[i];o&&(r=(c-o[n])/3,a[`cp1${n}`]=c-r,a[`cp1${i}`]=d-r*t[u]),l&&(r=(l[n]-c)/3,a[`cp2${n}`]=c+r,a[`cp2${i}`]=d+r*t[u])}}function Bz(e,t="x"){const n=gC(t),i=e.length,s=Array(i).fill(0),r=Array(i);let o,a,l,u=Uo(e,0);for(o=0;o<i;++o)if(a=l,l=u,u=Uo(e,o+1),!!l){if(u){const c=u[t]-l[t];s[o]=c!==0?(u[n]-l[n])/c:0}r[o]=a?u?ti(s[o-1])!==ti(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}Fz(e,s,r),jz(e,r,t)}function wc(e,t,n){return Math.max(Math.min(e,n),t)}function Uz(e,t){let n,i,s,r,o,a=nu(e[0],t);for(n=0,i=e.length;n<i;++n)o=r,r=a,a=n<i-1&&nu(e[n+1],t),r&&(s=e[n],o&&(s.cp1x=wc(s.cp1x,t.left,t.right),s.cp1y=wc(s.cp1y,t.top,t.bottom)),a&&(s.cp2x=wc(s.cp2x,t.left,t.right),s.cp2y=wc(s.cp2y,t.top,t.bottom)))}function zz(e,t,n,i,s){let r,o,a,l;if(t.spanGaps&&(e=e.filter(u=>!u.skip)),t.cubicInterpolationMode==="monotone")Bz(e,s);else{let u=i?e[e.length-1]:e[0];for(r=0,o=e.length;r<o;++r)a=e[r],l=Lz(u,a,e[Math.min(r+1,o-(i?0:1))%o],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,u=a}t.capBezierPoints&&Uz(e,n)}function hv(){return typeof window<"u"&&typeof document<"u"}function dv(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function ld(e,t,n){let i;return typeof e=="string"?(i=parseInt(e,10),e.indexOf("%")!==-1&&(i=i/100*t.parentNode[n])):i=e,i}const Qd=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function $z(e,t){return Qd(e).getPropertyValue(t)}const Wz=["top","right","bottom","left"];function ur(e,t,n){const i={};n=n?"-"+n:"";for(let s=0;s<4;s++){const r=Wz[s];i[r]=parseFloat(e[t+"-"+r+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const Hz=(e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot);function qz(e,t){const n=e.touches,i=n&&n.length?n[0]:e,{offsetX:s,offsetY:r}=i;let o=!1,a,l;if(Hz(s,r,e.target))a=s,l=r;else{const u=t.getBoundingClientRect();a=i.clientX-u.left,l=i.clientY-u.top,o=!0}return{x:a,y:l,box:o}}function Ks(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:i}=t,s=Qd(n),r=s.boxSizing==="border-box",o=ur(s,"padding"),a=ur(s,"border","width"),{x:l,y:u,box:c}=qz(e,n),d=o.left+(c&&a.left),f=o.top+(c&&a.top);let{width:m,height:y}=t;return r&&(m-=o.width+a.width,y-=o.height+a.height),{x:Math.round((l-d)/m*n.width/i),y:Math.round((u-f)/y*n.height/i)}}function Kz(e,t,n){let i,s;if(t===void 0||n===void 0){const r=e&&dv(e);if(!r)t=e.clientWidth,n=e.clientHeight;else{const o=r.getBoundingClientRect(),a=Qd(r),l=ur(a,"border","width"),u=ur(a,"padding");t=o.width-u.width-l.width,n=o.height-u.height-l.height,i=ld(a.maxWidth,r,"clientWidth"),s=ld(a.maxHeight,r,"clientHeight")}}return{width:t,height:n,maxWidth:i||od,maxHeight:s||od}}const Ji=e=>Math.round(e*10)/10;function Gz(e,t,n,i){const s=Qd(e),r=ur(s,"margin"),o=ld(s.maxWidth,e,"clientWidth")||od,a=ld(s.maxHeight,e,"clientHeight")||od,l=Kz(e,t,n);let{width:u,height:c}=l;if(s.boxSizing==="content-box"){const f=ur(s,"border","width"),m=ur(s,"padding");u-=m.width+f.width,c-=m.height+f.height}return u=Math.max(0,u-r.width),c=Math.max(0,i?u/i:c-r.height),u=Ji(Math.min(u,o,l.maxWidth)),c=Ji(Math.min(c,a,l.maxHeight)),u&&!c&&(c=Ji(u/2)),(t!==void 0||n!==void 0)&&i&&l.height&&c>l.height&&(c=l.height,u=Ji(Math.floor(c*i))),{width:u,height:c}}function NE(e,t,n){const i=t||1,s=Ji(e.height*i),r=Ji(e.width*i);e.height=Ji(e.height),e.width=Ji(e.width);const o=e.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${e.height}px`,o.style.width=`${e.width}px`),e.currentDevicePixelRatio!==i||o.height!==s||o.width!==r?(e.currentDevicePixelRatio=i,o.height=s,o.width=r,e.ctx.setTransform(i,0,0,i,0,0),!0):!1}const Yz=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};hv()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e}();function OE(e,t){const n=$z(e,t),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Gs(e,t,n,i){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function Qz(e,t,n,i){return{x:e.x+n*(t.x-e.x),y:i==="middle"?n<.5?e.y:t.y:i==="after"?n<1?e.y:t.y:n>0?t.y:e.y}}function Xz(e,t,n,i){const s={x:e.cp2x,y:e.cp2y},r={x:t.cp1x,y:t.cp1y},o=Gs(e,s,n),a=Gs(s,r,n),l=Gs(r,t,n),u=Gs(o,a,n),c=Gs(a,l,n);return Gs(u,c,n)}const Jz=function(e,t){return{x(n){return e+e+t-n},setWidth(n){t=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,i){return n-i},leftForLtr(n,i){return n-i}}},Zz=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function _o(e,t,n){return e?Jz(t,n):Zz()}function yC(e,t){let n,i;(t==="ltr"||t==="rtl")&&(n=e.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=i)}function _C(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function vC(e){return e==="angle"?{between:nC,compare:J9,normalize:ji}:{between:nr,compare:(t,n)=>t-n,normalize:t=>t}}function VE({start:e,end:t,count:n,loop:i,style:s}){return{start:e%n,end:t%n,loop:i&&(t-e+1)%n===0,style:s}}function t8(e,t,n){const{property:i,start:s,end:r}=n,{between:o,normalize:a}=vC(i),l=t.length;let{start:u,end:c,loop:d}=e,f,m;if(d){for(u+=l,c+=l,f=0,m=l;f<m&&o(a(t[u%l][i]),s,r);++f)u--,c--;u%=l,c%=l}return c<u&&(c+=l),{start:u,end:c,loop:d,style:e.style}}function e8(e,t,n){if(!n)return[e];const{property:i,start:s,end:r}=n,o=t.length,{compare:a,between:l,normalize:u}=vC(i),{start:c,end:d,loop:f,style:m}=t8(e,t,n),y=[];let _=!1,E=null,v,T,b;const R=()=>l(s,b,v)&&a(s,b)!==0,D=()=>a(r,v)===0||l(r,b,v),N=()=>_||R(),S=()=>!_||D();for(let w=c,x=c;w<=d;++w)T=t[w%o],!T.skip&&(v=u(T[i]),v!==b&&(_=l(v,s,r),E===null&&N()&&(E=a(v,s)===0?w:x),E!==null&&S()&&(y.push(VE({start:E,end:w,loop:f,count:o,style:m})),E=null),x=w,b=v));return E!==null&&y.push(VE({start:E,end:d,loop:f,count:o,style:m})),y}function n8(e,t){const n=[],i=e.segments;for(let s=0;s<i.length;s++){const r=e8(i[s],e.points,t);r.length&&n.push(...r)}return n}function i8(e,t,n,i){let s=0,r=t-1;if(n&&!i)for(;s<t&&!e[s].skip;)s++;for(;s<t&&e[s].skip;)s++;for(s%=t,n&&(r+=s);r>s&&e[r%t].skip;)r--;return r%=t,{start:s,end:r}}function s8(e,t,n,i){const s=e.length,r=[];let o=t,a=e[t],l;for(l=t+1;l<=n;++l){const u=e[l%s];u.skip||u.stop?a.skip||(i=!1,r.push({start:t%s,end:(l-1)%s,loop:i}),t=o=u.stop?l:null):(o=l,a.skip&&(t=l)),a=u}return o!==null&&r.push({start:t%s,end:o%s,loop:i}),r}function r8(e,t){const n=e.points,i=e.options.spanGaps,s=n.length;if(!s)return[];const r=!!e._loop,{start:o,end:a}=i8(n,s,r,i);if(i===!0)return LE(e,[{start:o,end:a,loop:r}],n,t);const l=a<o?a+s:a,u=!!e._fullLoop&&o===0&&a===s-1;return LE(e,s8(n,o,l,u),n,t)}function LE(e,t,n,i){return!i||!i.setContext||!n?t:o8(e,t,n,i)}function o8(e,t,n,i){const s=e._chart.getContext(),r=FE(e.options),{_datasetIndex:o,options:{spanGaps:a}}=e,l=n.length,u=[];let c=r,d=t[0].start,f=d;function m(y,_,E,v){const T=a?-1:1;if(y!==_){for(y+=l;n[y%l].skip;)y-=T;for(;n[_%l].skip;)_+=T;y%l!==_%l&&(u.push({start:y%l,end:_%l,loop:E,style:v}),c=v,d=_%l)}}for(const y of t){d=a?d:y.start;let _=n[d%l],E;for(f=d+1;f<=y.end;f++){const v=n[f%l];E=FE(i.setContext(Ar(s,{type:"segment",p0:_,p1:v,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:o}))),a8(E,c)&&m(d,f-1,y.loop,c),_=v,c=E}d<f-1&&m(d,f-1,y.loop,c)}return u}function FE(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function a8(e,t){if(!t)return!1;const n=[],i=function(s,r){return rv(r)?(n.includes(r)||n.push(r),n.indexOf(r)):r};return JSON.stringify(e,i)!==JSON.stringify(t,i)}function Tc(e,t,n){return e.options.clip?e[n]:t[n]}function l8(e,t){const{xScale:n,yScale:i}=e;return n&&i?{left:Tc(n,t,"left"),right:Tc(n,t,"right"),top:Tc(i,t,"top"),bottom:Tc(i,t,"bottom")}:t}function u8(e,t){const n=t._clip;if(n.disabled)return!1;const i=l8(t,e.chartArea);return{left:n.left===!1?0:i.left-(n.left===!0?0:n.left),right:n.right===!1?e.width:i.right+(n.right===!0?0:n.right),top:n.top===!1?0:i.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?e.height:i.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class c8{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,n,i,s){const r=n.listeners[s],o=n.duration;r.forEach(a=>a({chart:t,initial:n.initial,numSteps:o,currentStep:Math.min(i-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=rC.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let n=0;this._charts.forEach((i,s)=>{if(!i.running||!i.items.length)return;const r=i.items;let o=r.length-1,a=!1,l;for(;o>=0;--o)l=r[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(t),a=!0):(r[o]=r[r.length-1],r.pop());a&&(s.draw(),this._notify(s,i,t,"progress")),r.length||(i.running=!1,this._notify(s,i,t,"complete"),i.initial=!1),n+=r.length}),this._lastDate=t,n===0&&(this._running=!1)}_getAnims(t){const n=this._charts;let i=n.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(t,i)),i}listen(t,n,i){this._getAnims(t).listeners[n].push(i)}add(t,n){!n||!n.length||this._getAnims(t).items.push(...n)}has(t){return this._getAnims(t).items.length>0}start(t){const n=this._charts.get(t);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((i,s)=>Math.max(i,s._duration),0),this._refresh())}running(t){if(!this._running)return!1;const n=this._charts.get(t);return!(!n||!n.running||!n.items.length)}stop(t){const n=this._charts.get(t);if(!n||!n.items.length)return;const i=n.items;let s=i.length-1;for(;s>=0;--s)i[s].cancel();n.items=[],this._notify(t,n,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var ii=new c8;const jE="transparent",h8={boolean(e,t,n){return n>.5?t:e},color(e,t,n){const i=kE(e||jE),s=i.valid&&kE(t||jE);return s&&s.valid?s.mix(i,n).hexString():t},number(e,t,n){return e+(t-e)*n}};class d8{constructor(t,n,i,s){const r=n[i];s=vc([t.to,s,r,t.from]);const o=vc([t.from,r,s]);this._active=!0,this._fn=t.fn||h8[t.type||typeof o],this._easing=yl[t.easing]||yl.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=n,this._prop=i,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(t,n,i){if(this._active){this._notify(!1);const s=this._target[this._prop],r=i-this._start,o=this._duration-r;this._start=i,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=vc([t.to,n,s,t.from]),this._from=vc([t.from,s,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const n=t-this._start,i=this._duration,s=this._prop,r=this._from,o=this._loop,a=this._to;let l;if(this._active=r!==a&&(o||n<i),!this._active){this._target[s]=a,this._notify(!0);return}if(n<0){this._target[s]=r;return}l=n/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(r,a,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((n,i)=>{t.push({res:n,rej:i})})}_notify(t){const n=t?"res":"rej",i=this._promises||[];for(let s=0;s<i.length;s++)i[s][n]()}}class wC{constructor(t,n){this._chart=t,this._properties=new Map,this.configure(n)}configure(t){if(!gt(t))return;const n=Object.keys($t.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(s=>{const r=t[s];if(!gt(r))return;const o={};for(const a of n)o[a]=r[a];(Jt(r.properties)&&r.properties||[s]).forEach(a=>{(a===s||!i.has(a))&&i.set(a,o)})})}_animateOptions(t,n){const i=n.options,s=p8(t,i);if(!s)return[];const r=this._createAnimations(s,i);return i.$shared&&f8(t.options.$animations,i).then(()=>{t.options=i},()=>{}),r}_createAnimations(t,n){const i=this._properties,s=[],r=t.$animations||(t.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const u=o[l];if(u.charAt(0)==="$")continue;if(u==="options"){s.push(...this._animateOptions(t,n));continue}const c=n[u];let d=r[u];const f=i.get(u);if(d)if(f&&d.active()){d.update(f,c,a);continue}else d.cancel();if(!f||!f.duration){t[u]=c;continue}r[u]=d=new d8(f,t,u,c),s.push(d)}return s}update(t,n){if(this._properties.size===0){Object.assign(t,n);return}const i=this._createAnimations(t,n);if(i.length)return ii.add(this._chart,i),!0}}function f8(e,t){const n=[],i=Object.keys(t);for(let s=0;s<i.length;s++){const r=e[i[s]];r&&r.active()&&n.push(r.wait())}return Promise.all(n)}function p8(e,t){if(!t)return;let n=e.options;if(!n){e.options=t;return}return n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function BE(e,t){const n=e&&e.options||{},i=n.reverse,s=n.min===void 0?t:0,r=n.max===void 0?t:0;return{start:i?r:s,end:i?s:r}}function m8(e,t,n){if(n===!1)return!1;const i=BE(e,n),s=BE(t,n);return{top:s.end,right:i.end,bottom:s.start,left:i.start}}function g8(e){let t,n,i,s;return gt(e)?(t=e.top,n=e.right,i=e.bottom,s=e.left):t=n=i=s=e,{top:t,right:n,bottom:i,left:s,disabled:e===!1}}function TC(e,t){const n=[],i=e._getSortedDatasetMetas(t);let s,r;for(s=0,r=i.length;s<r;++s)n.push(i[s].index);return n}function UE(e,t,n,i={}){const s=e.keys,r=i.mode==="single";let o,a,l,u;if(t===null)return;let c=!1;for(o=0,a=s.length;o<a;++o){if(l=+s[o],l===n){if(c=!0,i.all)continue;break}u=e.values[l],_n(u)&&(r||t===0||ti(t)===ti(u))&&(t+=u)}return!c&&!i.all?0:t}function y8(e,t){const{iScale:n,vScale:i}=t,s=n.axis==="x"?"x":"y",r=i.axis==="x"?"x":"y",o=Object.keys(e),a=new Array(o.length);let l,u,c;for(l=0,u=o.length;l<u;++l)c=o[l],a[l]={[s]:c,[r]:e[c]};return a}function Ip(e,t){const n=e&&e.options.stacked;return n||n===void 0&&t.stack!==void 0}function _8(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}function v8(e){const{min:t,max:n,minDefined:i,maxDefined:s}=e.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}function w8(e,t,n){const i=e[t]||(e[t]={});return i[n]||(i[n]={})}function zE(e,t,n,i){for(const s of t.getMatchingVisibleMetas(i).reverse()){const r=e[s.index];if(n&&r>0||!n&&r<0)return s.index}return null}function $E(e,t){const{chart:n,_cachedMeta:i}=e,s=n._stacks||(n._stacks={}),{iScale:r,vScale:o,index:a}=i,l=r.axis,u=o.axis,c=_8(r,o,i),d=t.length;let f;for(let m=0;m<d;++m){const y=t[m],{[l]:_,[u]:E}=y,v=y._stacks||(y._stacks={});f=v[u]=w8(s,c,_),f[a]=E,f._top=zE(f,o,!0,i.type),f._bottom=zE(f,o,!1,i.type);const T=f._visualValues||(f._visualValues={});T[a]=E}}function Ap(e,t){const n=e.scales;return Object.keys(n).filter(i=>n[i].axis===t).shift()}function T8(e,t){return Ar(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function x8(e,t,n){return Ar(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}function Ra(e,t){const n=e.controller.index,i=e.vScale&&e.vScale.axis;if(i){t=t||e._parsed;for(const s of t){const r=s._stacks;if(!r||r[i]===void 0||r[i][n]===void 0)return;delete r[i][n],r[i]._visualValues!==void 0&&r[i]._visualValues[n]!==void 0&&delete r[i]._visualValues[n]}}}const kp=e=>e==="reset"||e==="none",WE=(e,t)=>t?e:Object.assign({},e),E8=(e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:TC(n,!0),values:null};class vo{constructor(t,n){this.chart=t,this._ctx=t.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Ip(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Ra(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,n=this._cachedMeta,i=this.getDataset(),s=(d,f,m,y)=>d==="x"?f:d==="r"?y:m,r=n.xAxisID=ot(i.xAxisID,Ap(t,"x")),o=n.yAxisID=ot(i.yAxisID,Ap(t,"y")),a=n.rAxisID=ot(i.rAxisID,Ap(t,"r")),l=n.indexAxis,u=n.iAxisID=s(l,r,o,a),c=n.vAxisID=s(l,o,r,a);n.xScale=this.getScaleForId(r),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(u),n.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const n=this._cachedMeta;return t===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&bE(this._data,this),t._stacked&&Ra(t)}_dataCheck(){const t=this.getDataset(),n=t.data||(t.data=[]),i=this._data;if(gt(n)){const s=this._cachedMeta;this._data=y8(n,s)}else if(i!==n){if(i){bE(i,this);const s=this._cachedMeta;Ra(s),s._parsed=[]}n&&Object.isExtensible(n)&&nz(n,this),this._syncList=[],this._data=n}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const n=this._cachedMeta,i=this.getDataset();let s=!1;this._dataCheck();const r=n._stacked;n._stacked=Ip(n.vScale,n),n.stack!==i.stack&&(s=!0,Ra(n),n.stack=i.stack),this._resyncElements(t),(s||r!==n._stacked)&&($E(this,n._parsed),n._stacked=Ip(n.vScale,n))}configure(){const t=this.chart.config,n=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),n,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,n){const{_cachedMeta:i,_data:s}=this,{iScale:r,_stacked:o}=i,a=r.axis;let l=t===0&&n===s.length?!0:i._sorted,u=t>0&&i._parsed[t-1],c,d,f;if(this._parsing===!1)i._parsed=s,i._sorted=!0,f=s;else{Jt(s[t])?f=this.parseArrayData(i,s,t,n):gt(s[t])?f=this.parseObjectData(i,s,t,n):f=this.parsePrimitiveData(i,s,t,n);const m=()=>d[a]===null||u&&d[a]<u[a];for(c=0;c<n;++c)i._parsed[c+t]=d=f[c],l&&(m()&&(l=!1),u=d);i._sorted=l}o&&$E(this,f)}parsePrimitiveData(t,n,i,s){const{iScale:r,vScale:o}=t,a=r.axis,l=o.axis,u=r.getLabels(),c=r===o,d=new Array(s);let f,m,y;for(f=0,m=s;f<m;++f)y=f+i,d[f]={[a]:c||r.parse(u[y],y),[l]:o.parse(n[y],y)};return d}parseArrayData(t,n,i,s){const{xScale:r,yScale:o}=t,a=new Array(s);let l,u,c,d;for(l=0,u=s;l<u;++l)c=l+i,d=n[c],a[l]={x:r.parse(d[0],c),y:o.parse(d[1],c)};return a}parseObjectData(t,n,i,s){const{xScale:r,yScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,u=new Array(s);let c,d,f,m;for(c=0,d=s;c<d;++c)f=c+i,m=n[f],u[c]={x:r.parse(jo(m,a),f),y:o.parse(jo(m,l),f)};return u}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,n,i){const s=this.chart,r=this._cachedMeta,o=n[t.axis],a={keys:TC(s,!0),values:n._stacks[t.axis]._visualValues};return UE(a,o,r.index,{mode:i})}updateRangeFromParsed(t,n,i,s){const r=i[n.axis];let o=r===null?NaN:r;const a=s&&i._stacks[n.axis];s&&a&&(s.values=a,o=UE(s,r,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,n){const i=this._cachedMeta,s=i._parsed,r=i._sorted&&t===i.iScale,o=s.length,a=this._getOtherScale(t),l=E8(n,i,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:d}=v8(a);let f,m;function y(){m=s[f];const _=m[a.axis];return!_n(m[t.axis])||c>_||d<_}for(f=0;f<o&&!(!y()&&(this.updateRangeFromParsed(u,t,m,l),r));++f);if(r){for(f=o-1;f>=0;--f)if(!y()){this.updateRangeFromParsed(u,t,m,l);break}}return u}getAllParsedValues(t){const n=this._cachedMeta._parsed,i=[];let s,r,o;for(s=0,r=n.length;s<r;++s)o=n[s][t.axis],_n(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const n=this._cachedMeta,i=n.iScale,s=n.vScale,r=this.getParsed(t);return{label:i?""+i.getLabelForValue(r[i.axis]):"",value:s?""+s.getLabelForValue(r[s.axis]):""}}_update(t){const n=this._cachedMeta;this.update(t||"default"),n._clip=g8(ot(this.options.clip,m8(n.xScale,n.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,n=this.chart,i=this._cachedMeta,s=i.data||[],r=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||s.length-a,u=this.options.drawActiveElementsOnTop;let c;for(i.dataset&&i.dataset.draw(t,r,a,l),c=a;c<a+l;++c){const d=s[c];d.hidden||(d.active&&u?o.push(d):d.draw(t,r))}for(c=0;c<o.length;++c)o[c].draw(t,r)}getStyle(t,n){const i=n?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,n,i){const s=this.getDataset();let r;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];r=o.$context||(o.$context=x8(this.getContext(),t,o)),r.parsed=this.getParsed(t),r.raw=s.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=T8(this.chart.getContext(),this.index)),r.dataset=s,r.index=r.datasetIndex=this.index;return r.active=!!n,r.mode=i,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,n){return this._resolveElementOptions(this.dataElementType.id,n,t)}_resolveElementOptions(t,n="default",i){const s=n==="active",r=this._cachedDataOpts,o=t+"-"+n,a=r[o],l=this.enableOptionSharing&&tu(i);if(a)return WE(a,l);const u=this.chart.config,c=u.datasetElementScopeKeys(this._type,t),d=s?[`${t}Hover`,"hover",t,""]:[t,""],f=u.getOptionScopes(this.getDataset(),c),m=Object.keys($t.elements[t]),y=()=>this.getContext(i,s,n),_=u.resolveNamedOptions(f,m,y,d);return _.$shared&&(_.$shared=l,r[o]=Object.freeze(WE(_,l))),_}_resolveAnimations(t,n,i){const s=this.chart,r=this._cachedDataOpts,o=`animation-${n}`,a=r[o];if(a)return a;let l;if(s.options.animation!==!1){const c=this.chart.config,d=c.datasetAnimationScopeKeys(this._type,n),f=c.getOptionScopes(this.getDataset(),d);l=c.createResolver(f,this.getContext(t,i,n))}const u=new wC(s,l&&l.animations);return l&&l._cacheable&&(r[o]=Object.freeze(u)),u}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,n){return!n||kp(t)||this.chart._animationsDisabled}_getSharedOptions(t,n){const i=this.resolveDataElementOptions(t,n),s=this._sharedOptions,r=this.getSharedOptions(i),o=this.includeOptions(n,r)||r!==s;return this.updateSharedOptions(r,n,i),{sharedOptions:r,includeOptions:o}}updateElement(t,n,i,s){kp(s)?Object.assign(t,i):this._resolveAnimations(n,s).update(t,i)}updateSharedOptions(t,n,i){t&&!kp(n)&&this._resolveAnimations(void 0,n).update(t,i)}_setStyle(t,n,i,s){t.active=s;const r=this.getStyle(n,s);this._resolveAnimations(n,i,s).update(t,{options:!s&&this.getSharedOptions(r)||r})}removeHoverStyle(t,n,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,n,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const n=this._data,i=this._cachedMeta.data;for(const[a,l,u]of this._syncList)this[a](l,u);this._syncList=[];const s=i.length,r=n.length,o=Math.min(r,s);o&&this.parse(0,o),r>s?this._insertElements(s,r-s,t):r<s&&this._removeElements(r,s-r)}_insertElements(t,n,i=!0){const s=this._cachedMeta,r=s.data,o=t+n;let a;const l=u=>{for(u.length+=n,a=u.length-1;a>=o;a--)u[a]=u[a-n]};for(l(r),a=t;a<o;++a)r[a]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(t,n),i&&this.updateElements(r,t,n,"reset")}updateElements(t,n,i,s){}_removeElements(t,n){const i=this._cachedMeta;if(this._parsing){const s=i._parsed.splice(t,n);i._stacked&&Ra(i,s)}i.data.splice(t,n)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[n,i,s]=t;this[n](i,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,n){n&&this._sync(["_removeElements",t,n]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Z(vo,"defaults",{}),Z(vo,"datasetElementType",null),Z(vo,"dataElementType",null);function S8(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let i=[];for(let s=0,r=n.length;s<r;s++)i=i.concat(n[s].controller.getAllParsedValues(e));e._cache.$bar=sC(i.sort((s,r)=>s-r))}return e._cache.$bar}function b8(e){const t=e.iScale,n=S8(t,e.type);let i=t._length,s,r,o,a;const l=()=>{o===32767||o===-32768||(tu(a)&&(i=Math.min(i,Math.abs(o-a)||i)),a=o)};for(s=0,r=n.length;s<r;++s)o=t.getPixelForValue(n[s]),l();for(a=void 0,s=0,r=t.ticks.length;s<r;++s)o=t.getPixelForTick(s),l();return i}function I8(e,t,n,i){const s=n.barThickness;let r,o;return yt(s)?(r=t.min*n.categoryPercentage,o=n.barPercentage):(r=s*i,o=1),{chunk:r/i,ratio:o,start:t.pixels[e]-r/2}}function A8(e,t,n,i){const s=t.pixels,r=s[e];let o=e>0?s[e-1]:null,a=e<s.length-1?s[e+1]:null;const l=n.categoryPercentage;o===null&&(o=r-(a===null?t.end-t.start:a-r)),a===null&&(a=r+r-o);const u=r-(r-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/i,ratio:n.barPercentage,start:u}}function k8(e,t,n,i){const s=n.parse(e[0],i),r=n.parse(e[1],i),o=Math.min(s,r),a=Math.max(s,r);let l=o,u=a;Math.abs(o)>Math.abs(a)&&(l=a,u=o),t[n.axis]=u,t._custom={barStart:l,barEnd:u,start:s,end:r,min:o,max:a}}function xC(e,t,n,i){return Jt(e)?k8(e,t,n,i):t[n.axis]=n.parse(e,i),t}function HE(e,t,n,i){const s=e.iScale,r=e.vScale,o=s.getLabels(),a=s===r,l=[];let u,c,d,f;for(u=n,c=n+i;u<c;++u)f=t[u],d={},d[s.axis]=a||s.parse(o[u],u),l.push(xC(f,d,r,u));return l}function Pp(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function P8(e,t,n){return e!==0?ti(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}function C8(e){let t,n,i,s,r;return e.horizontal?(t=e.base>e.x,n="left",i="right"):(t=e.base<e.y,n="bottom",i="top"),t?(s="end",r="start"):(s="start",r="end"),{start:n,end:i,reverse:t,top:s,bottom:r}}function R8(e,t,n,i){let s=t.borderSkipped;const r={};if(!s){e.borderSkipped=r;return}if(s===!0){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:u,bottom:c}=C8(e);s==="middle"&&n&&(e.enableBorderRadius=!0,(n._top||0)===i?s=u:(n._bottom||0)===i?s=c:(r[qE(c,o,a,l)]=!0,s=u)),r[qE(s,o,a,l)]=!0,e.borderSkipped=r}function qE(e,t,n,i){return i?(e=D8(e,t,n),e=KE(e,n,t)):e=KE(e,t,n),e}function D8(e,t,n){return e===t?n:e===n?t:e}function KE(e,t,n){return e==="start"?t:e==="end"?n:e}function M8(e,{inflateAmount:t},n){e.inflateAmount=t==="auto"?n===1?.33:0:t}class ih extends vo{parsePrimitiveData(t,n,i,s){return HE(t,n,i,s)}parseArrayData(t,n,i,s){return HE(t,n,i,s)}parseObjectData(t,n,i,s){const{iScale:r,vScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,u=r.axis==="x"?a:l,c=o.axis==="x"?a:l,d=[];let f,m,y,_;for(f=i,m=i+s;f<m;++f)_=n[f],y={},y[r.axis]=r.parse(jo(_,u),f),d.push(xC(jo(_,c),y,o,f));return d}updateRangeFromParsed(t,n,i,s){super.updateRangeFromParsed(t,n,i,s);const r=i._custom;r&&n===this._cachedMeta.vScale&&(t.min=Math.min(t.min,r.min),t.max=Math.max(t.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const n=this._cachedMeta,{iScale:i,vScale:s}=n,r=this.getParsed(t),o=r._custom,a=Pp(o)?"["+o.start+", "+o.end+"]":""+s.getLabelForValue(r[s.axis]);return{label:""+i.getLabelForValue(r[i.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,t)}updateElements(t,n,i,s){const r=s==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),u=a.isHorizontal(),c=this._getRuler(),{sharedOptions:d,includeOptions:f}=this._getSharedOptions(n,s);for(let m=n;m<n+i;m++){const y=this.getParsed(m),_=r||yt(y[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(m),E=this._calculateBarIndexPixels(m,c),v=(y._stacks||{})[a.axis],T={horizontal:u,base:_.base,enableBorderRadius:!v||Pp(y._custom)||o===v._top||o===v._bottom,x:u?_.head:E.center,y:u?E.center:_.head,height:u?E.size:Math.abs(_.size),width:u?Math.abs(_.size):E.size};f&&(T.options=d||this.resolveDataElementOptions(m,t[m].active?"active":s));const b=T.options||t[m].options;R8(T,b,v,o),M8(T,b,c.ratio),this.updateElement(t[m],m,T,s)}}_getStacks(t,n){const{iScale:i}=this._cachedMeta,s=i.getMatchingVisibleMetas(this._type).filter(c=>c.controller.options.grouped),r=i.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(n),l=a&&a[i.axis],u=c=>{const d=c._parsed.find(m=>m[i.axis]===l),f=d&&d[c.vScale.axis];if(yt(f)||isNaN(f))return!0};for(const c of s)if(!(n!==void 0&&u(c))&&((r===!1||o.indexOf(c.stack)===-1||r===void 0&&c.stack===void 0)&&o.push(c.stack),c.index===t))break;return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,n=this.chart.options.indexAxis;return Object.keys(t).filter(i=>t[i].axis===n).shift()}_getAxis(){const t={},n=this.getFirstScaleIdForIndexAxis();for(const i of this.chart.data.datasets)t[ot(this.chart.options.indexAxis==="x"?i.xAxisID:i.yAxisID,n)]=!0;return Object.keys(t)}_getStackIndex(t,n,i){const s=this._getStacks(t,i),r=n!==void 0?s.indexOf(n):-1;return r===-1?s.length-1:r}_getRuler(){const t=this.options,n=this._cachedMeta,i=n.iScale,s=[];let r,o;for(r=0,o=n.data.length;r<o;++r)s.push(i.getPixelForValue(this.getParsed(r)[i.axis],r));const a=t.barThickness;return{min:a||b8(n),pixels:s,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:a?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:n,_stacked:i,index:s},options:{base:r,minBarLength:o}}=this,a=r||0,l=this.getParsed(t),u=l._custom,c=Pp(u);let d=l[n.axis],f=0,m=i?this.applyStack(n,l,i):d,y,_;m!==d&&(f=m-d,m=d),c&&(d=u.barStart,m=u.barEnd-u.barStart,d!==0&&ti(d)!==ti(u.barEnd)&&(f=0),f+=d);const E=!yt(r)&&!c?r:f;let v=n.getPixelForValue(E);if(this.chart.getDataVisibility(t)?y=n.getPixelForValue(f+m):y=v,_=y-v,Math.abs(_)<o){_=P8(_,n,a)*o,d===a&&(v-=_/2);const T=n.getPixelForDecimal(0),b=n.getPixelForDecimal(1),R=Math.min(T,b),D=Math.max(T,b);v=Math.max(Math.min(v,D),R),y=v+_,i&&!c&&(l._stacks[n.axis]._visualValues[s]=n.getValueForPixel(y)-n.getValueForPixel(v))}if(v===n.getPixelForValue(a)){const T=ti(_)*n.getLineWidthForValue(a)/2;v+=T,_-=T}return{size:_,base:v,head:y,center:y+_/2}}_calculateBarIndexPixels(t,n){const i=n.scale,s=this.options,r=s.skipNull,o=ot(s.maxBarThickness,1/0);let a,l;const u=this._getAxisCount();if(n.grouped){const c=r?this._getStackCount(t):n.stackCount,d=s.barThickness==="flex"?A8(t,n,s,c*u):I8(t,n,s,c*u),f=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,m=this._getAxis().indexOf(ot(f,this.getFirstScaleIdForIndexAxis())),y=this._getStackIndex(this.index,this._cachedMeta.stack,r?t:void 0)+m;a=d.start+d.chunk*y+d.chunk/2,l=Math.min(o,d.chunk*d.ratio)}else a=i.getPixelForValue(this.getParsed(t)[i.axis],t),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const t=this._cachedMeta,n=t.vScale,i=t.data,s=i.length;let r=0;for(;r<s;++r)this.getParsed(r)[n.axis]!==null&&!i[r].hidden&&i[r].draw(this._ctx)}}Z(ih,"id","bar"),Z(ih,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),Z(ih,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class sh extends vo{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const n=this._cachedMeta,{dataset:i,data:s=[],_dataset:r}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=rz(n,s,o);this._drawStart=a,this._drawCount=l,oz(n)&&(a=0,l=s.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!r._decimated,i.points=s;const u=this.resolveDatasetElementOptions(t);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:u},t),this.updateElements(s,a,l,t)}updateElements(t,n,i,s){const r=s==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:u}=this._cachedMeta,{sharedOptions:c,includeOptions:d}=this._getSharedOptions(n,s),f=o.axis,m=a.axis,{spanGaps:y,segment:_}=this.options,E=eu(y)?y:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||r||s==="none",T=n+i,b=t.length;let R=n>0&&this.getParsed(n-1);for(let D=0;D<b;++D){const N=t[D],S=v?N:{};if(D<n||D>=T){S.skip=!0;continue}const w=this.getParsed(D),x=yt(w[m]),k=S[f]=o.getPixelForValue(w[f],D),A=S[m]=r||x?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,w,l):w[m],D);S.skip=isNaN(k)||isNaN(A)||x,S.stop=D>0&&Math.abs(w[f]-R[f])>E,_&&(S.parsed=w,S.raw=u.data[D]),d&&(S.options=c||this.resolveDataElementOptions(D,N.active?"active":s)),v||this.updateElement(N,D,S,s),R=w}}getMaxOverflow(){const t=this._cachedMeta,n=t.dataset,i=n.options&&n.options.borderWidth||0,s=t.data||[];if(!s.length)return i;const r=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(i,r,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}Z(sh,"id","line"),Z(sh,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Z(sh,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function Us(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class fv{constructor(t){Z(this,"options");this.options=t||{}}static override(t){Object.assign(fv.prototype,t)}init(){}formats(){return Us()}parse(){return Us()}format(){return Us()}add(){return Us()}diff(){return Us()}startOf(){return Us()}endOf(){return Us()}}var N8={_date:fv};function O8(e,t,n,i){const{controller:s,data:r,_sorted:o}=e,a=s._cachedMeta.iScale,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(a&&t===a.axis&&t!=="r"&&o&&r.length){const u=a._reversePixels?tz:ir;if(i){if(s._sharedOptions){const c=r[0],d=typeof c.getRange=="function"&&c.getRange(t);if(d){const f=u(r,t,n-d),m=u(r,t,n+d);return{lo:f.lo,hi:m.hi}}}}else{const c=u(r,t,n);if(l){const{vScale:d}=s._cachedMeta,{_parsed:f}=e,m=f.slice(0,c.lo+1).reverse().findIndex(_=>!yt(_[d.axis]));c.lo-=Math.max(0,m);const y=f.slice(c.hi).findIndex(_=>!yt(_[d.axis]));c.hi+=Math.max(0,y)}return c}}return{lo:0,hi:r.length-1}}function Xd(e,t,n,i,s){const r=e.getSortedVisibleDatasetMetas(),o=n[t];for(let a=0,l=r.length;a<l;++a){const{index:u,data:c}=r[a],{lo:d,hi:f}=O8(r[a],t,o,s);for(let m=d;m<=f;++m){const y=c[m];y.skip||i(y,u,m)}}}function V8(e){const t=e.indexOf("x")!==-1,n=e.indexOf("y")!==-1;return function(i,s){const r=t?Math.abs(i.x-s.x):0,o=n?Math.abs(i.y-s.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function Cp(e,t,n,i,s){const r=[];return!s&&!e.isPointInArea(t)||Xd(e,n,t,function(a,l,u){!s&&!nu(a,e.chartArea,0)||a.inRange(t.x,t.y,i)&&r.push({element:a,datasetIndex:l,index:u})},!0),r}function L8(e,t,n,i){let s=[];function r(o,a,l){const{startAngle:u,endAngle:c}=o.getProps(["startAngle","endAngle"],i),{angle:d}=X9(o,{x:t.x,y:t.y});nC(d,u,c)&&s.push({element:o,datasetIndex:a,index:l})}return Xd(e,n,t,r),s}function F8(e,t,n,i,s,r){let o=[];const a=V8(n);let l=Number.POSITIVE_INFINITY;function u(c,d,f){const m=c.inRange(t.x,t.y,s);if(i&&!m)return;const y=c.getCenterPoint(s);if(!(!!r||e.isPointInArea(y))&&!m)return;const E=a(t,y);E<l?(o=[{element:c,datasetIndex:d,index:f}],l=E):E===l&&o.push({element:c,datasetIndex:d,index:f})}return Xd(e,n,t,u),o}function Rp(e,t,n,i,s,r){return!r&&!e.isPointInArea(t)?[]:n==="r"&&!i?L8(e,t,n,s):F8(e,t,n,i,s,r)}function GE(e,t,n,i,s){const r=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return Xd(e,n,t,(l,u,c)=>{l[o]&&l[o](t[n],s)&&(r.push({element:l,datasetIndex:u,index:c}),a=a||l.inRange(t.x,t.y,s))}),i&&!a?[]:r}var j8={modes:{index(e,t,n,i){const s=Ks(t,e),r=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?Cp(e,s,r,i,o):Rp(e,s,r,!1,i,o),l=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach(u=>{const c=a[0].index,d=u.data[c];d&&!d.skip&&l.push({element:d,datasetIndex:u.index,index:c})}),l):[]},dataset(e,t,n,i){const s=Ks(t,e),r=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?Cp(e,s,r,i,o):Rp(e,s,r,!1,i,o);if(a.length>0){const l=a[0].datasetIndex,u=e.getDatasetMeta(l).data;a=[];for(let c=0;c<u.length;++c)a.push({element:u[c],datasetIndex:l,index:c})}return a},point(e,t,n,i){const s=Ks(t,e),r=n.axis||"xy",o=n.includeInvisible||!1;return Cp(e,s,r,i,o)},nearest(e,t,n,i){const s=Ks(t,e),r=n.axis||"xy",o=n.includeInvisible||!1;return Rp(e,s,r,n.intersect,i,o)},x(e,t,n,i){const s=Ks(t,e);return GE(e,s,"x",n.intersect,i)},y(e,t,n,i){const s=Ks(t,e);return GE(e,s,"y",n.intersect,i)}}};const EC=["left","top","right","bottom"];function Da(e,t){return e.filter(n=>n.pos===t)}function YE(e,t){return e.filter(n=>EC.indexOf(n.pos)===-1&&n.box.axis===t)}function Ma(e,t){return e.sort((n,i)=>{const s=t?i:n,r=t?n:i;return s.weight===r.weight?s.index-r.index:s.weight-r.weight})}function B8(e){const t=[];let n,i,s,r,o,a;for(n=0,i=(e||[]).length;n<i;++n)s=e[n],{position:r,options:{stack:o,stackWeight:a=1}}=s,t.push({index:n,box:s,pos:r,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&r+o,stackWeight:a});return t}function U8(e){const t={};for(const n of e){const{stack:i,pos:s,stackWeight:r}=n;if(!i||!EC.includes(s))continue;const o=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return t}function z8(e,t){const n=U8(e),{vBoxMaxWidth:i,hBoxMaxHeight:s}=t;let r,o,a;for(r=0,o=e.length;r<o;++r){a=e[r];const{fullSize:l}=a.box,u=n[a.stack],c=u&&a.stackWeight/u.weight;a.horizontal?(a.width=c?c*i:l&&t.availableWidth,a.height=s):(a.width=i,a.height=c?c*s:l&&t.availableHeight)}return n}function $8(e){const t=B8(e),n=Ma(t.filter(u=>u.box.fullSize),!0),i=Ma(Da(t,"left"),!0),s=Ma(Da(t,"right")),r=Ma(Da(t,"top"),!0),o=Ma(Da(t,"bottom")),a=YE(t,"x"),l=YE(t,"y");return{fullSize:n,leftAndTop:i.concat(r),rightAndBottom:s.concat(l).concat(o).concat(a),chartArea:Da(t,"chartArea"),vertical:i.concat(s).concat(l),horizontal:r.concat(o).concat(a)}}function QE(e,t,n,i){return Math.max(e[n],t[n])+Math.max(e[i],t[i])}function SC(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function W8(e,t,n,i){const{pos:s,box:r}=n,o=e.maxPadding;if(!gt(s)){n.size&&(e[s]-=n.size);const d=i[n.stack]||{size:0,count:1};d.size=Math.max(d.size,n.horizontal?r.height:r.width),n.size=d.size/d.count,e[s]+=n.size}r.getPadding&&SC(o,r.getPadding());const a=Math.max(0,t.outerWidth-QE(o,e,"left","right")),l=Math.max(0,t.outerHeight-QE(o,e,"top","bottom")),u=a!==e.w,c=l!==e.h;return e.w=a,e.h=l,n.horizontal?{same:u,other:c}:{same:c,other:u}}function H8(e){const t=e.maxPadding;function n(i){const s=Math.max(t[i]-e[i],0);return e[i]+=s,s}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}function q8(e,t){const n=t.maxPadding;function i(s){const r={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{r[o]=Math.max(t[o],n[o])}),r}return i(e?["left","right"]:["top","bottom"])}function qa(e,t,n,i){const s=[];let r,o,a,l,u,c;for(r=0,o=e.length,u=0;r<o;++r){a=e[r],l=a.box,l.update(a.width||t.w,a.height||t.h,q8(a.horizontal,t));const{same:d,other:f}=W8(t,n,a,i);u|=d&&s.length,c=c||f,l.fullSize||s.push(a)}return u&&qa(s,t,n,i)||c}function xc(e,t,n,i,s){e.top=n,e.left=t,e.right=t+i,e.bottom=n+s,e.width=i,e.height=s}function XE(e,t,n,i){const s=n.padding;let{x:r,y:o}=t;for(const a of e){const l=a.box,u=i[a.stack]||{placed:0,weight:1},c=a.stackWeight/u.weight||1;if(a.horizontal){const d=t.w*c,f=u.size||l.height;tu(u.start)&&(o=u.start),l.fullSize?xc(l,s.left,o,n.outerWidth-s.right-s.left,f):xc(l,t.left+u.placed,o,d,f),u.start=o,u.placed+=d,o=l.bottom}else{const d=t.h*c,f=u.size||l.width;tu(u.start)&&(r=u.start),l.fullSize?xc(l,r,s.top,f,n.outerHeight-s.bottom-s.top):xc(l,r,t.top+u.placed,f,d),u.start=r,u.placed+=d,r=l.right}}t.x=r,t.y=o}var fn={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(n){t.draw(n)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;n!==-1&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,i){if(!e)return;const s=vn(e.options.layout.padding),r=Math.max(t-s.width,0),o=Math.max(n-s.height,0),a=$8(e.boxes),l=a.vertical,u=a.horizontal;wt(e.boxes,_=>{typeof _.beforeLayout=="function"&&_.beforeLayout()});const c=l.reduce((_,E)=>E.box.options&&E.box.options.display===!1?_:_+1,0)||1,d=Object.freeze({outerWidth:t,outerHeight:n,padding:s,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/c,hBoxMaxHeight:o/2}),f=Object.assign({},s);SC(f,vn(i));const m=Object.assign({maxPadding:f,w:r,h:o,x:s.left,y:s.top},s),y=z8(l.concat(u),d);qa(a.fullSize,m,d,y),qa(l,m,d,y),qa(u,m,d,y)&&qa(l,m,d,y),H8(m),XE(a.leftAndTop,m,d,y),m.x+=m.w,m.y+=m.h,XE(a.rightAndBottom,m,d,y),e.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},wt(a.chartArea,_=>{const E=_.box;Object.assign(E,e.chartArea),E.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class bC{acquireContext(t,n){}releaseContext(t){return!1}addEventListener(t,n,i){}removeEventListener(t,n,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,n,i,s){return n=Math.max(0,n||t.width),i=i||t.height,{width:n,height:Math.max(0,s?Math.floor(n/s):i)}}isAttached(t){return!0}updateConfig(t){}}class K8 extends bC{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const rh="$chartjs",G8={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},JE=e=>e===null||e==="";function Y8(e,t){const n=e.style,i=e.getAttribute("height"),s=e.getAttribute("width");if(e[rh]={initial:{height:i,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",JE(s)){const r=OE(e,"width");r!==void 0&&(e.width=r)}if(JE(i))if(e.style.height==="")e.height=e.width/(t||2);else{const r=OE(e,"height");r!==void 0&&(e.height=r)}return e}const IC=Yz?{passive:!0}:!1;function Q8(e,t,n){e&&e.addEventListener(t,n,IC)}function X8(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,IC)}function J8(e,t){const n=G8[e.type]||e.type,{x:i,y:s}=Ks(e,t);return{type:n,chart:t,native:e,x:i!==void 0?i:null,y:s!==void 0?s:null}}function ud(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function Z8(e,t,n){const i=e.canvas,s=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||ud(a.addedNodes,i),o=o&&!ud(a.removedNodes,i);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function t$(e,t,n){const i=e.canvas,s=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||ud(a.removedNodes,i),o=o&&!ud(a.addedNodes,i);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const su=new Map;let ZE=0;function AC(){const e=window.devicePixelRatio;e!==ZE&&(ZE=e,su.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function e$(e,t){su.size||window.addEventListener("resize",AC),su.set(e,t)}function n$(e){su.delete(e),su.size||window.removeEventListener("resize",AC)}function i$(e,t,n){const i=e.canvas,s=i&&dv(i);if(!s)return;const r=oC((a,l)=>{const u=s.clientWidth;n(a,l),u<s.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],u=l.contentRect.width,c=l.contentRect.height;u===0&&c===0||r(u,c)});return o.observe(s),e$(e,r),o}function Dp(e,t,n){n&&n.disconnect(),t==="resize"&&n$(e)}function s$(e,t,n){const i=e.canvas,s=oC(r=>{e.ctx!==null&&n(J8(r,e))},e);return Q8(i,t,s),s}class r$ extends bC{acquireContext(t,n){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(Y8(t,n),i):null}releaseContext(t){const n=t.canvas;if(!n[rh])return!1;const i=n[rh].initial;["height","width"].forEach(r=>{const o=i[r];yt(o)?n.removeAttribute(r):n.setAttribute(r,o)});const s=i.style||{};return Object.keys(s).forEach(r=>{n.style[r]=s[r]}),n.width=n.width,delete n[rh],!0}addEventListener(t,n,i){this.removeEventListener(t,n);const s=t.$proxies||(t.$proxies={}),o={attach:Z8,detach:t$,resize:i$}[n]||s$;s[n]=o(t,n,i)}removeEventListener(t,n){const i=t.$proxies||(t.$proxies={}),s=i[n];if(!s)return;({attach:Dp,detach:Dp,resize:Dp}[n]||X8)(t,n,s),i[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,n,i,s){return Gz(t,n,i,s)}isAttached(t){const n=t&&dv(t);return!!(n&&n.isConnected)}}function o$(e){return!hv()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?K8:r$}var Pc;let Ds=(Pc=class{constructor(){Z(this,"x");Z(this,"y");Z(this,"active",!1);Z(this,"options");Z(this,"$animations")}tooltipPosition(t){const{x:n,y:i}=this.getProps(["x","y"],t);return{x:n,y:i}}hasValue(){return eu(this.x)&&eu(this.y)}getProps(t,n){const i=this.$animations;if(!n||!i)return this;const s={};return t.forEach(r=>{s[r]=i[r]&&i[r].active()?i[r]._to:this[r]}),s}},Z(Pc,"defaults",{}),Z(Pc,"defaultRoutes"),Pc);function a$(e,t){const n=e.options.ticks,i=l$(e),s=Math.min(n.maxTicksLimit||i,i),r=n.major.enabled?c$(t):[],o=r.length,a=r[0],l=r[o-1],u=[];if(o>s)return h$(t,u,r,o/s),u;const c=u$(r,t,s);if(o>0){let d,f;const m=o>1?Math.round((l-a)/(o-1)):null;for(Ec(t,u,c,yt(m)?0:a-m,a),d=0,f=o-1;d<f;d++)Ec(t,u,c,r[d],r[d+1]);return Ec(t,u,c,l,yt(m)?t.length:l+m),u}return Ec(t,u,c),u}function l$(e){const t=e.options.offset,n=e._tickSize(),i=e._length/n+(t?0:1),s=e._maxLength/n;return Math.floor(Math.min(i,s))}function u$(e,t,n){const i=d$(e),s=t.length/n;if(!i)return Math.max(s,1);const r=q9(i);for(let o=0,a=r.length-1;o<a;o++){const l=r[o];if(l>s)return l}return Math.max(s,1)}function c$(e){const t=[];let n,i;for(n=0,i=e.length;n<i;n++)e[n].major&&t.push(n);return t}function h$(e,t,n,i){let s=0,r=n[0],o;for(i=Math.ceil(i),o=0;o<e.length;o++)o===r&&(t.push(e[o]),s++,r=n[s*i])}function Ec(e,t,n,i,s){const r=ot(i,0),o=Math.min(ot(s,e.length),e.length);let a=0,l,u,c;for(n=Math.ceil(n),s&&(l=s-i,n=l/Math.floor(l/n)),c=r;c<0;)a++,c=Math.round(r+a*n);for(u=Math.max(r,0);u<o;u++)u===c&&(t.push(e[u]),a++,c=Math.round(r+a*n))}function d$(e){const t=e.length;let n,i;if(t<2)return!1;for(i=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==i)return!1;return i}const f$=e=>e==="left"?"right":e==="right"?"left":e,t1=(e,t,n)=>t==="top"||t==="left"?e[t]+n:e[t]-n,e1=(e,t)=>Math.min(t||e,e);function n1(e,t){const n=[],i=e.length/t,s=e.length;let r=0;for(;r<s;r+=i)n.push(e[Math.floor(r)]);return n}function p$(e,t,n){const i=e.ticks.length,s=Math.min(t,i-1),r=e._startPixel,o=e._endPixel,a=1e-6;let l=e.getPixelForTick(s),u;if(!(n&&(i===1?u=Math.max(l-r,o-l):t===0?u=(e.getPixelForTick(1)-l)/2:u=(l-e.getPixelForTick(s-1))/2,l+=s<t?u:-u,l<r-a||l>o+a)))return l}function m$(e,t){wt(e,n=>{const i=n.gc,s=i.length/2;let r;if(s>t){for(r=0;r<s;++r)delete n.data[i[r]];i.splice(0,s)}})}function Na(e){return e.drawTicks?e.tickLength:0}function i1(e,t){if(!e.display)return 0;const n=be(e.font,t),i=vn(e.padding);return(Jt(e.text)?e.text.length:1)*n.lineHeight+i.height}function g$(e,t){return Ar(e,{scale:t,type:"scale"})}function y$(e,t,n){return Ar(e,{tick:n,index:t,type:"tick"})}function _$(e,t,n){let i=sv(e);return(n&&t!=="right"||!n&&t==="right")&&(i=f$(i)),i}function v$(e,t,n,i){const{top:s,left:r,bottom:o,right:a,chart:l}=e,{chartArea:u,scales:c}=l;let d=0,f,m,y;const _=o-s,E=a-r;if(e.isHorizontal()){if(m=we(i,r,a),gt(n)){const v=Object.keys(n)[0],T=n[v];y=c[v].getPixelForValue(T)+_-t}else n==="center"?y=(u.bottom+u.top)/2+_-t:y=t1(e,n,t);f=a-r}else{if(gt(n)){const v=Object.keys(n)[0],T=n[v];m=c[v].getPixelForValue(T)-E+t}else n==="center"?m=(u.left+u.right)/2-E+t:m=t1(e,n,t);y=we(i,o,s),d=n==="left"?-In:In}return{titleX:m,titleY:y,maxWidth:f,rotation:d}}class na extends Ds{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,n){return t}getUserBounds(){let{_userMin:t,_userMax:n,_suggestedMin:i,_suggestedMax:s}=this;return t=On(t,Number.POSITIVE_INFINITY),n=On(n,Number.NEGATIVE_INFINITY),i=On(i,Number.POSITIVE_INFINITY),s=On(s,Number.NEGATIVE_INFINITY),{min:On(t,i),max:On(n,s),minDefined:_n(t),maxDefined:_n(n)}}getMinMax(t){let{min:n,max:i,minDefined:s,maxDefined:r}=this.getUserBounds(),o;if(s&&r)return{min:n,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,u=a.length;l<u;++l)o=a[l].controller.getMinMax(this,t),s||(n=Math.min(n,o.min)),r||(i=Math.max(i,o.max));return n=r&&n>i?i:n,i=s&&n>i?n:i,{min:On(n,On(i,n)),max:On(i,On(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){kt(this.options.beforeUpdate,[this])}update(t,n,i){const{beginAtZero:s,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=n,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Iz(this,r,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?n1(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=a$(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,n,i;this.isHorizontal()?(n=this.left,i=this.right):(n=this.top,i=this.bottom,t=!t),this._startPixel=n,this._endPixel=i,this._reversePixels=t,this._length=i-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){kt(this.options.afterUpdate,[this])}beforeSetDimensions(){kt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){kt(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),kt(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){kt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const n=this.options.ticks;let i,s,r;for(i=0,s=t.length;i<s;i++)r=t[i],r.label=kt(n.callback,[r.value,i,t],this)}afterTickToLabelConversion(){kt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){kt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,n=t.ticks,i=e1(this.ticks.length,t.ticks.maxTicksLimit),s=n.minRotation||0,r=n.maxRotation;let o=s,a,l,u;if(!this._isVisible()||!n.display||s>=r||i<=1||!this.isHorizontal()){this.labelRotation=s;return}const c=this._getLabelSizes(),d=c.widest.width,f=c.highest.height,m=Je(this.chart.width-d,0,this.maxWidth);a=t.offset?this.maxWidth/i:m/(i-1),d+6>a&&(a=m/(i-(t.offset?.5:1)),l=this.maxHeight-Na(t.grid)-n.padding-i1(t.title,this.chart.options.font),u=Math.sqrt(d*d+f*f),o=Q9(Math.min(Math.asin(Je((c.highest.height+6)/a,-1,1)),Math.asin(Je(l/u,-1,1))-Math.asin(Je(f/u,-1,1)))),o=Math.max(s,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){kt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){kt(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:n,options:{ticks:i,title:s,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=i1(s,n.options.font);if(a?(t.width=this.maxWidth,t.height=Na(r)+l):(t.height=this.maxHeight,t.width=Na(r)+l),i.display&&this.ticks.length){const{first:u,last:c,widest:d,highest:f}=this._getLabelSizes(),m=i.padding*2,y=er(this.labelRotation),_=Math.cos(y),E=Math.sin(y);if(a){const v=i.mirror?0:E*d.width+_*f.height;t.height=Math.min(this.maxHeight,t.height+v+m)}else{const v=i.mirror?0:_*d.width+E*f.height;t.width=Math.min(this.maxWidth,t.width+v+m)}this._calculatePadding(u,c,E,_)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,n,i,s){const{ticks:{align:r,padding:o},position:a}=this.options,l=this.labelRotation!==0,u=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const c=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,m=0;l?u?(f=s*t.width,m=i*n.height):(f=i*t.height,m=s*n.width):r==="start"?m=n.width:r==="end"?f=t.width:r!=="inner"&&(f=t.width/2,m=n.width/2),this.paddingLeft=Math.max((f-c+o)*this.width/(this.width-c),0),this.paddingRight=Math.max((m-d+o)*this.width/(this.width-d),0)}else{let c=n.height/2,d=t.height/2;r==="start"?(c=0,d=t.height):r==="end"&&(c=n.height,d=0),this.paddingTop=c+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){kt(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:n}=this.options;return n==="top"||n==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let n,i;for(n=0,i=t.length;n<i;n++)yt(t[n].label)&&(t.splice(n,1),i--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const n=this.options.ticks.sampleSize;let i=this.ticks;n<i.length&&(i=n1(i,n)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,n,i){const{ctx:s,_longestTextCache:r}=this,o=[],a=[],l=Math.floor(n/e1(n,i));let u=0,c=0,d,f,m,y,_,E,v,T,b,R,D;for(d=0;d<n;d+=l){if(y=t[d].label,_=this._resolveTickFontOptions(d),s.font=E=_.string,v=r[E]=r[E]||{data:{},gc:[]},T=_.lineHeight,b=R=0,!yt(y)&&!Jt(y))b=CE(s,v.data,v.gc,b,y),R=T;else if(Jt(y))for(f=0,m=y.length;f<m;++f)D=y[f],!yt(D)&&!Jt(D)&&(b=CE(s,v.data,v.gc,b,D),R+=T);o.push(b),a.push(R),u=Math.max(b,u),c=Math.max(R,c)}m$(r,n);const N=o.indexOf(u),S=a.indexOf(c),w=x=>({width:o[x]||0,height:a[x]||0});return{first:w(0),last:w(n-1),widest:w(N),highest:w(S),widths:o,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,n){return NaN}getValueForPixel(t){}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const n=this._startPixel+t*this._length;return Z9(this._alignToPixels?Bs(this.chart,n,0):n)}getDecimalForPixel(t){const n=(t-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:n}=this;return t<0&&n<0?n:t>0&&n>0?t:0}getContext(t){const n=this.ticks||[];if(t>=0&&t<n.length){const i=n[t];return i.$context||(i.$context=y$(this.getContext(),t,i))}return this.$context||(this.$context=g$(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,n=er(this.labelRotation),i=Math.abs(Math.cos(n)),s=Math.abs(Math.sin(n)),r=this._getLabelSizes(),o=t.autoSkipPadding||0,a=r?r.widest.width+o:0,l=r?r.highest.height+o:0;return this.isHorizontal()?l*i>a*s?a/i:l/s:l*s<a*i?l/i:a/s}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const n=this.axis,i=this.chart,s=this.options,{grid:r,position:o,border:a}=s,l=r.offset,u=this.isHorizontal(),d=this.ticks.length+(l?1:0),f=Na(r),m=[],y=a.setContext(this.getContext()),_=y.display?y.width:0,E=_/2,v=function(lt){return Bs(i,lt,_)};let T,b,R,D,N,S,w,x,k,A,C,P;if(o==="top")T=v(this.bottom),S=this.bottom-f,x=T-E,A=v(t.top)+E,P=t.bottom;else if(o==="bottom")T=v(this.top),A=t.top,P=v(t.bottom)-E,S=T+E,x=this.top+f;else if(o==="left")T=v(this.right),N=this.right-f,w=T-E,k=v(t.left)+E,C=t.right;else if(o==="right")T=v(this.left),k=t.left,C=v(t.right)-E,N=T+E,w=this.left+f;else if(n==="x"){if(o==="center")T=v((t.top+t.bottom)/2+.5);else if(gt(o)){const lt=Object.keys(o)[0],it=o[lt];T=v(this.chart.scales[lt].getPixelForValue(it))}A=t.top,P=t.bottom,S=T+E,x=S+f}else if(n==="y"){if(o==="center")T=v((t.left+t.right)/2);else if(gt(o)){const lt=Object.keys(o)[0],it=o[lt];T=v(this.chart.scales[lt].getPixelForValue(it))}N=T-E,w=N-f,k=t.left,C=t.right}const nt=ot(s.ticks.maxTicksLimit,d),X=Math.max(1,Math.ceil(d/nt));for(b=0;b<d;b+=X){const lt=this.getContext(b),it=r.setContext(lt),B=a.setContext(lt),q=it.lineWidth,K=it.color,dt=B.dash||[],st=B.dashOffset,ee=it.tickWidth,bt=it.tickColor,Ke=it.tickBorderDash||[],Yt=it.tickBorderDashOffset;R=p$(this,b,l),R!==void 0&&(D=Bs(i,R,q),u?N=w=k=C=D:S=x=A=P=D,m.push({tx1:N,ty1:S,tx2:w,ty2:x,x1:k,y1:A,x2:C,y2:P,width:q,color:K,borderDash:dt,borderDashOffset:st,tickWidth:ee,tickColor:bt,tickBorderDash:Ke,tickBorderDashOffset:Yt}))}return this._ticksLength=d,this._borderValue=T,m}_computeLabelItems(t){const n=this.axis,i=this.options,{position:s,ticks:r}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:u,padding:c,mirror:d}=r,f=Na(i.grid),m=f+c,y=d?-c:m,_=-er(this.labelRotation),E=[];let v,T,b,R,D,N,S,w,x,k,A,C,P="middle";if(s==="top")N=this.bottom-y,S=this._getXAxisLabelAlignment();else if(s==="bottom")N=this.top+y,S=this._getXAxisLabelAlignment();else if(s==="left"){const X=this._getYAxisLabelAlignment(f);S=X.textAlign,D=X.x}else if(s==="right"){const X=this._getYAxisLabelAlignment(f);S=X.textAlign,D=X.x}else if(n==="x"){if(s==="center")N=(t.top+t.bottom)/2+m;else if(gt(s)){const X=Object.keys(s)[0],lt=s[X];N=this.chart.scales[X].getPixelForValue(lt)+m}S=this._getXAxisLabelAlignment()}else if(n==="y"){if(s==="center")D=(t.left+t.right)/2-m;else if(gt(s)){const X=Object.keys(s)[0],lt=s[X];D=this.chart.scales[X].getPixelForValue(lt)}S=this._getYAxisLabelAlignment(f).textAlign}n==="y"&&(l==="start"?P="top":l==="end"&&(P="bottom"));const nt=this._getLabelSizes();for(v=0,T=a.length;v<T;++v){b=a[v],R=b.label;const X=r.setContext(this.getContext(v));w=this.getPixelForTick(v)+r.labelOffset,x=this._resolveTickFontOptions(v),k=x.lineHeight,A=Jt(R)?R.length:1;const lt=A/2,it=X.color,B=X.textStrokeColor,q=X.textStrokeWidth;let K=S;o?(D=w,S==="inner"&&(v===T-1?K=this.options.reverse?"left":"right":v===0?K=this.options.reverse?"right":"left":K="center"),s==="top"?u==="near"||_!==0?C=-A*k+k/2:u==="center"?C=-nt.highest.height/2-lt*k+k:C=-nt.highest.height+k/2:u==="near"||_!==0?C=k/2:u==="center"?C=nt.highest.height/2-lt*k:C=nt.highest.height-A*k,d&&(C*=-1),_!==0&&!X.showLabelBackdrop&&(D+=k/2*Math.sin(_))):(N=w,C=(1-A)*k/2);let dt;if(X.showLabelBackdrop){const st=vn(X.backdropPadding),ee=nt.heights[v],bt=nt.widths[v];let Ke=C-st.top,Yt=0-st.left;switch(P){case"middle":Ke-=ee/2;break;case"bottom":Ke-=ee;break}switch(S){case"center":Yt-=bt/2;break;case"right":Yt-=bt;break;case"inner":v===T-1?Yt-=bt:v>0&&(Yt-=bt/2);break}dt={left:Yt,top:Ke,width:bt+st.width,height:ee+st.height,color:X.backdropColor}}E.push({label:R,font:x,textOffset:C,options:{rotation:_,color:it,strokeColor:B,strokeWidth:q,textAlign:K,textBaseline:P,translation:[D,N],backdrop:dt}})}return E}_getXAxisLabelAlignment(){const{position:t,ticks:n}=this.options;if(-er(this.labelRotation))return t==="top"?"left":"right";let s="center";return n.align==="start"?s="left":n.align==="end"?s="right":n.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(t){const{position:n,ticks:{crossAlign:i,mirror:s,padding:r}}=this.options,o=this._getLabelSizes(),a=t+r,l=o.widest.width;let u,c;return n==="left"?s?(c=this.right+r,i==="near"?u="left":i==="center"?(u="center",c+=l/2):(u="right",c+=l)):(c=this.right-a,i==="near"?u="right":i==="center"?(u="center",c-=l/2):(u="left",c=this.left)):n==="right"?s?(c=this.left+r,i==="near"?u="right":i==="center"?(u="center",c-=l/2):(u="left",c-=l)):(c=this.left+a,i==="near"?u="left":i==="center"?(u="center",c+=l/2):(u="right",c=this.right)):u="right",{textAlign:u,x:c}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:n},left:i,top:s,width:r,height:o}=this;n&&(t.save(),t.fillStyle=n,t.fillRect(i,s,r,o),t.restore())}getLineWidthForValue(t){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const s=this.ticks.findIndex(r=>r.value===t);return s>=0?n.setContext(this.getContext(s)).lineWidth:0}drawGrid(t){const n=this.options.grid,i=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let r,o;const a=(l,u,c)=>{!c.width||!c.color||(i.save(),i.lineWidth=c.width,i.strokeStyle=c.color,i.setLineDash(c.borderDash||[]),i.lineDashOffset=c.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(u.x,u.y),i.stroke(),i.restore())};if(n.display)for(r=0,o=s.length;r<o;++r){const l=s[r];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:n,options:{border:i,grid:s}}=this,r=i.setContext(this.getContext()),o=i.display?r.width:0;if(!o)return;const a=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let u,c,d,f;this.isHorizontal()?(u=Bs(t,this.left,o)-o/2,c=Bs(t,this.right,a)+a/2,d=f=l):(d=Bs(t,this.top,o)-o/2,f=Bs(t,this.bottom,a)+a/2,u=c=l),n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.beginPath(),n.moveTo(u,d),n.lineTo(c,f),n.stroke(),n.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,s=this._computeLabelArea();s&&ov(i,s);const r=this.getLabelItems(t);for(const o of r){const a=o.options,l=o.font,u=o.label,c=o.textOffset;iu(i,u,0,c,l,a)}s&&av(i)}drawTitle(){const{ctx:t,options:{position:n,title:i,reverse:s}}=this;if(!i.display)return;const r=be(i.font),o=vn(i.padding),a=i.align;let l=r.lineHeight/2;n==="bottom"||n==="center"||gt(n)?(l+=o.bottom,Jt(i.text)&&(l+=r.lineHeight*(i.text.length-1))):l+=o.top;const{titleX:u,titleY:c,maxWidth:d,rotation:f}=v$(this,l,n,a);iu(t,i.text,0,0,r,{color:i.color,maxWidth:d,rotation:f,textAlign:_$(a,n,s),textBaseline:"middle",translation:[u,c]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,n=t.ticks&&t.ticks.z||0,i=ot(t.grid&&t.grid.z,-1),s=ot(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==na.prototype.draw?[{z:n,draw:r=>{this.draw(r)}}]:[{z:i,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:n,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(t){const n=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",s=[];let r,o;for(r=0,o=n.length;r<o;++r){const a=n[r];a[i]===this.id&&(!t||a.type===t)&&s.push(a)}return s}_resolveTickFontOptions(t){const n=this.options.ticks.setContext(this.getContext(t));return be(n.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Sc{constructor(t,n,i){this.type=t,this.scope=n,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const n=Object.getPrototypeOf(t);let i;x$(n)&&(i=this.register(n));const s=this.items,r=t.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in s||(s[r]=t,w$(t,o,i),this.override&&$t.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const n=this.items,i=t.id,s=this.scope;i in n&&delete n[i],s&&i in $t[s]&&(delete $t[s][i],this.override&&delete Tr[i])}}function w$(e,t,n){const i=Zl(Object.create(null),[n?$t.get(n):{},$t.get(t),e.defaults]);$t.set(t,i),e.defaultRoutes&&T$(t,e.defaultRoutes),e.descriptors&&$t.describe(t,e.descriptors)}function T$(e,t){Object.keys(t).forEach(n=>{const i=n.split("."),s=i.pop(),r=[e].concat(i).join("."),o=t[n].split("."),a=o.pop(),l=o.join(".");$t.route(r,s,l,a)})}function x$(e){return"id"in e&&"defaults"in e}class E${constructor(){this.controllers=new Sc(vo,"datasets",!0),this.elements=new Sc(Ds,"elements"),this.plugins=new Sc(Object,"plugins"),this.scales=new Sc(na,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,n,i){[...n].forEach(s=>{const r=i||this._getRegistryForType(s);i||r.isForType(s)||r===this.plugins&&s.id?this._exec(t,r,s):wt(s,o=>{const a=i||this._getRegistryForType(o);this._exec(t,a,o)})})}_exec(t,n,i){const s=nv(t);kt(i["before"+s],[],i),n[t](i),kt(i["after"+s],[],i)}_getRegistryForType(t){for(let n=0;n<this._typedRegistries.length;n++){const i=this._typedRegistries[n];if(i.isForType(t))return i}return this.plugins}_get(t,n,i){const s=n.get(t);if(s===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return s}}var Fn=new E$;class S${constructor(){this._init=void 0}notify(t,n,i,s){if(n==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install")),this._init===void 0)return;const r=s?this._descriptors(t).filter(s):this._descriptors(t),o=this._notify(r,t,n,i);return n==="afterDestroy"&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall"),this._init=void 0),o}_notify(t,n,i,s){s=s||{};for(const r of t){const o=r.plugin,a=o[i],l=[n,s,r.options];if(kt(a,l,o)===!1&&s.cancelable)return!1}return!0}invalidate(){yt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),n}_createDescriptors(t,n){const i=t&&t.config,s=ot(i.options&&i.options.plugins,{}),r=b$(i);return s===!1&&!n?[]:A$(t,r,s,n)}_notifyStateChanges(t){const n=this._oldCache||[],i=this._cache,s=(r,o)=>r.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(s(n,i),t,"stop"),this._notify(s(i,n),t,"start")}}function b$(e){const t={},n=[],i=Object.keys(Fn.plugins.items);for(let r=0;r<i.length;r++)n.push(Fn.getPlugin(i[r]));const s=e.plugins||[];for(let r=0;r<s.length;r++){const o=s[r];n.indexOf(o)===-1&&(n.push(o),t[o.id]=!0)}return{plugins:n,localIds:t}}function I$(e,t){return!t&&e===!1?null:e===!0?{}:e}function A$(e,{plugins:t,localIds:n},i,s){const r=[],o=e.getContext();for(const a of t){const l=a.id,u=I$(i[l],s);u!==null&&r.push({plugin:a,options:k$(e.config,{plugin:a,local:n[l]},u,o)})}return r}function k$(e,{plugin:t,local:n},i,s){const r=e.pluginScopeKeys(t),o=e.getOptionScopes(i,r);return n&&t.defaults&&o.push(t.defaults),e.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function bg(e,t){const n=$t.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function P$(e,t){let n=e;return e==="_index_"?n=t:e==="_value_"&&(n=t==="x"?"y":"x"),n}function C$(e,t){return e===t?"_index_":"_value_"}function s1(e){if(e==="x"||e==="y"||e==="r")return e}function R$(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function Ig(e,...t){if(s1(e))return e;for(const n of t){const i=n.axis||R$(n.position)||e.length>1&&s1(e[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function r1(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function D$(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(i=>i.xAxisID===e||i.yAxisID===e);if(n.length)return r1(e,"x",n[0])||r1(e,"y",n[0])}return{}}function M$(e,t){const n=Tr[e.type]||{scales:{}},i=t.scales||{},s=bg(e.type,t),r=Object.create(null);return Object.keys(i).forEach(o=>{const a=i[o];if(!gt(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Ig(o,a,D$(o,e),$t.scales[a.type]),u=C$(l,s),c=n.scales||{};r[o]=ml(Object.create(null),[{axis:l},a,c[l],c[u]])}),e.data.datasets.forEach(o=>{const a=o.type||e.type,l=o.indexAxis||bg(a,t),c=(Tr[a]||{}).scales||{};Object.keys(c).forEach(d=>{const f=P$(d,l),m=o[f+"AxisID"]||f;r[m]=r[m]||Object.create(null),ml(r[m],[{axis:f},i[m],c[d]])})}),Object.keys(r).forEach(o=>{const a=r[o];ml(a,[$t.scales[a.type],$t.scale])}),r}function kC(e){const t=e.options||(e.options={});t.plugins=ot(t.plugins,{}),t.scales=M$(e,t)}function PC(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function N$(e){return e=e||{},e.data=PC(e.data),kC(e),e}const o1=new Map,CC=new Set;function bc(e,t){let n=o1.get(e);return n||(n=t(),o1.set(e,n),CC.add(n)),n}const Oa=(e,t,n)=>{const i=jo(t,n);i!==void 0&&e.add(i)};class O${constructor(t){this._config=N$(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=PC(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),kC(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return bc(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,n){return bc(`${t}.transition.${n}`,()=>[[`datasets.${t}.transitions.${n}`,`transitions.${n}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,n){return bc(`${t}-${n}`,()=>[[`datasets.${t}.elements.${n}`,`datasets.${t}`,`elements.${n}`,""]])}pluginScopeKeys(t){const n=t.id,i=this.type;return bc(`${i}-plugin-${n}`,()=>[[`plugins.${n}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,n){const i=this._scopeCache;let s=i.get(t);return(!s||n)&&(s=new Map,i.set(t,s)),s}getOptionScopes(t,n,i){const{options:s,type:r}=this,o=this._cachedScopes(t,i),a=o.get(n);if(a)return a;const l=new Set;n.forEach(c=>{t&&(l.add(t),c.forEach(d=>Oa(l,t,d))),c.forEach(d=>Oa(l,s,d)),c.forEach(d=>Oa(l,Tr[r]||{},d)),c.forEach(d=>Oa(l,$t,d)),c.forEach(d=>Oa(l,Eg,d))});const u=Array.from(l);return u.length===0&&u.push(Object.create(null)),CC.has(n)&&o.set(n,u),u}chartOptionScopes(){const{options:t,type:n}=this;return[t,Tr[n]||{},$t.datasets[n]||{},{type:n},$t,Eg]}resolveNamedOptions(t,n,i,s=[""]){const r={$shared:!0},{resolver:o,subPrefixes:a}=a1(this._resolverCache,t,s);let l=o;if(L$(o,n)){r.$shared=!1,i=bs(i)?i():i;const u=this.createResolver(t,i,a);l=Bo(o,i,u)}for(const u of n)r[u]=l[u];return r}createResolver(t,n,i=[""],s){const{resolver:r}=a1(this._resolverCache,t,i);return gt(n)?Bo(r,n,void 0,s):r}}function a1(e,t,n){let i=e.get(t);i||(i=new Map,e.set(t,i));const s=n.join();let r=i.get(s);return r||(r={resolver:lv(t,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},i.set(s,r)),r}const V$=e=>gt(e)&&Object.getOwnPropertyNames(e).some(t=>bs(e[t]));function L$(e,t){const{isScriptable:n,isIndexable:i}=dC(e);for(const s of t){const r=n(s),o=i(s),a=(o||r)&&e[s];if(r&&(bs(a)||V$(a))||o&&Jt(a))return!0}return!1}var F$="4.5.1";const j$=["top","bottom","left","right","chartArea"];function l1(e,t){return e==="top"||e==="bottom"||j$.indexOf(e)===-1&&t==="x"}function u1(e,t){return function(n,i){return n[e]===i[e]?n[t]-i[t]:n[e]-i[e]}}function c1(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),kt(n&&n.onComplete,[e],t)}function B$(e){const t=e.chart,n=t.options.animation;kt(n&&n.onProgress,[e],t)}function RC(e){return hv()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const oh={},h1=e=>{const t=RC(e);return Object.values(oh).filter(n=>n.canvas===t).pop()};function U$(e,t,n){const i=Object.keys(e);for(const s of i){const r=+s;if(r>=t){const o=e[s];delete e[s],(n>0||r>t)&&(e[r+n]=o)}}}function z$(e,t,n,i){return!n||e.type==="mouseout"?null:i?t:e}var Li;let Jd=(Li=class{static register(...t){Fn.add(...t),d1()}static unregister(...t){Fn.remove(...t),d1()}constructor(t,n){const i=this.config=new O$(n),s=RC(t),r=h1(s);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||o$(s)),this.platform.updateConfig(i);const a=this.platform.acquireContext(s,o.aspectRatio),l=a&&a.canvas,u=l&&l.height,c=l&&l.width;if(this.id=L9(),this.ctx=a,this.canvas=l,this.width=c,this.height=u,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new S$,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=iz(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],oh[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}ii.listen(this,"complete",c1),ii.listen(this,"progress",B$),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:n},width:i,height:s,_aspectRatio:r}=this;return yt(t)?n&&r?r:s?i/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Fn}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():NE(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return RE(this.canvas,this.ctx),this}stop(){return ii.stop(this),this}resize(t,n){ii.running(this)?this._resizeBeforeDraw={width:t,height:n}:this._resize(t,n)}_resize(t,n){const i=this.options,s=this.canvas,r=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,t,n,r),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,NE(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),kt(i.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};wt(n,(i,s)=>{i.id=s})}buildOrUpdateScales(){const t=this.options,n=t.scales,i=this.scales,s=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{});let r=[];n&&(r=r.concat(Object.keys(n).map(o=>{const a=n[o],l=Ig(o,a),u=l==="r",c=l==="x";return{options:a,dposition:u?"chartArea":c?"bottom":"left",dtype:u?"radialLinear":c?"category":"linear"}}))),wt(r,o=>{const a=o.options,l=a.id,u=Ig(l,a),c=ot(a.type,o.dtype);(a.position===void 0||l1(a.position,u)!==l1(o.dposition))&&(a.position=o.dposition),s[l]=!0;let d=null;if(l in i&&i[l].type===c)d=i[l];else{const f=Fn.getScale(c);d=new f({id:l,type:c,ctx:this.ctx,chart:this}),i[d.id]=d}d.init(a,t)}),wt(s,(o,a)=>{o||delete i[a]}),wt(i,o=>{fn.configure(this,o,o.options),fn.addBox(this,o)})}_updateMetasets(){const t=this._metasets,n=this.data.datasets.length,i=t.length;if(t.sort((s,r)=>s.index-r.index),i>n){for(let s=n;s<i;++s)this._destroyDatasetMeta(s);t.splice(n,i-n)}this._sortedMetasets=t.slice(0).sort(u1("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:n}}=this;t.length>n.length&&delete this._stacks,t.forEach((i,s)=>{n.filter(r=>r===i._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const t=[],n=this.data.datasets;let i,s;for(this._removeUnreferencedMetasets(),i=0,s=n.length;i<s;i++){const r=n[i];let o=this.getDatasetMeta(i);const a=r.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=r.indexAxis||bg(a,this.options),o.order=r.order||0,o.index=i,o.label=""+r.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const l=Fn.getController(a),{datasetElementType:u,dataElementType:c}=$t.datasets[a];Object.assign(l,{dataElementType:Fn.getElement(c),datasetElementType:u&&Fn.getElement(u)}),o.controller=new l(this,i),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){wt(this.data.datasets,(t,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const n=this.config;n.update();const i=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let u=0,c=this.data.datasets.length;u<c;u++){const{controller:d}=this.getDatasetMeta(u),f=!s&&r.indexOf(d)===-1;d.buildOrUpdateElements(f),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),s||wt(r,u=>{u.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(u1("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){wt(this.scales,t=>{fn.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,n=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!TE(n,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,n=this._getUniformDataChanges()||[];for(const{method:i,start:s,count:r}of n){const o=i==="_removeElements"?-r:r;U$(t,s,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const n=this.data.datasets.length,i=r=>new Set(t.filter(o=>o[0]===r).map((o,a)=>a+","+o.splice(1).join(","))),s=i(0);for(let r=1;r<n;r++)if(!TE(s,i(r)))return;return Array.from(s).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;fn.update(this,this.width,this.height,t);const n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],wt(this.boxes,s=>{i&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,r)=>{s._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let n=0,i=this.data.datasets.length;n<i;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,i=this.data.datasets.length;n<i;++n)this._updateDataset(n,bs(t)?t({datasetIndex:n}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,n){const i=this.getDatasetMeta(t),s={meta:i,index:t,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(i.controller._update(n),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ii.has(this)?this.attached&&!ii.running(this)&&ii.start(this):(this.draw(),c1({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:i,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(t=0;t<n.length&&n[t].z<=0;++t)n[t].draw(this.chartArea);for(this._drawDatasets();t<n.length;++t)n[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const n=this._sortedMetasets,i=[];let s,r;for(s=0,r=n.length;s<r;++s){const o=n[s];(!t||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let n=t.length-1;n>=0;--n)this._drawDataset(t[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const n=this.ctx,i={meta:t,index:t.index,cancelable:!0},s=u8(this,t);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(s&&ov(n,s),t.controller.draw(),s&&av(n),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(t){return nu(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,n,i,s){const r=j8.modes[n];return typeof r=="function"?r(this,t,i,s):[]}getDatasetMeta(t){const n=this.data.datasets[t],i=this._metasets;let s=i.filter(r=>r&&r._dataset===n).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:t,_dataset:n,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=Ar(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const n=this.data.datasets[t];if(!n)return!1;const i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!n.hidden}setDatasetVisibility(t,n){const i=this.getDatasetMeta(t);i.hidden=!n}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,n,i){const s=i?"show":"hide",r=this.getDatasetMeta(t),o=r.controller._resolveAnimations(void 0,s);tu(n)?(r.data[n].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),o.update(r,{visible:i}),this.update(a=>a.datasetIndex===t?s:void 0))}hide(t,n){this._updateVisibility(t,n,!1)}show(t,n){this._updateVisibility(t,n,!0)}_destroyDatasetMeta(t){const n=this._metasets[t];n&&n.controller&&n.controller._destroy(),delete this._metasets[t]}_stop(){let t,n;for(this.stop(),ii.remove(this),t=0,n=this.data.datasets.length;t<n;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:n}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),RE(t,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete oh[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,n=this.platform,i=(r,o)=>{n.addEventListener(this,r,o),t[r]=o},s=(r,o,a)=>{r.offsetX=o,r.offsetY=a,this._eventHandler(r)};wt(this.options.events,r=>i(r,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,n=this.platform,i=(l,u)=>{n.addEventListener(this,l,u),t[l]=u},s=(l,u)=>{t[l]&&(n.removeEventListener(this,l,u),delete t[l])},r=(l,u)=>{this.canvas&&this.resize(l,u)};let o;const a=()=>{s("attach",a),this.attached=!0,this.resize(),i("resize",r),i("detach",o)};o=()=>{this.attached=!1,s("resize",r),this._stop(),this._resize(0,0),i("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){wt(this._listeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._listeners={},wt(this._responsiveListeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,n,i){const s=i?"set":"remove";let r,o,a,l;for(n==="dataset"&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+s+"DatasetHoverStyle"]()),a=0,l=t.length;a<l;++a){o=t[a];const u=o&&this.getDatasetMeta(o.datasetIndex).controller;u&&u[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const n=this._active||[],i=t.map(({datasetIndex:r,index:o})=>{const a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[o],index:o}});!sd(i,n)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,n))}notifyPlugins(t,n,i){return this._plugins.notify(this,t,n,i)}isPluginEnabled(t){return this._plugins._cache.filter(n=>n.plugin.id===t).length===1}_updateHoverStyles(t,n,i){const s=this.options.hover,r=(l,u)=>l.filter(c=>!u.some(d=>c.datasetIndex===d.datasetIndex&&c.index===d.index)),o=r(n,t),a=i?t:r(t,n);o.length&&this.updateHoverStyle(o,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(t,n){const i={event:t,replay:n,cancelable:!0,inChartArea:this.isPointInArea(t)},s=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,s)===!1)return;const r=this._handleEvent(t,n,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(r||i.changed)&&this.render(),this}_handleEvent(t,n,i){const{_active:s=[],options:r}=this,o=n,a=this._getActiveElements(t,s,i,o),l=$9(t),u=z$(t,this._lastEvent,i,l);i&&(this._lastEvent=null,kt(r.onHover,[t,a,this],this),l&&kt(r.onClick,[t,a,this],this));const c=!sd(a,s);return(c||n)&&(this._active=a,this._updateHoverStyles(a,s,n)),this._lastEvent=u,c}_getActiveElements(t,n,i,s){if(t.type==="mouseout")return[];if(!i)return n;const r=this.options.hover;return this.getElementsAtEventForMode(t,r.mode,r,s)}},Z(Li,"defaults",$t),Z(Li,"instances",oh),Z(Li,"overrides",Tr),Z(Li,"registry",Fn),Z(Li,"version",F$),Z(Li,"getChart",h1),Li);function d1(){return wt(Jd.instances,e=>e._plugins.invalidate())}function DC(e,t,n=t){e.lineCap=ot(n.borderCapStyle,t.borderCapStyle),e.setLineDash(ot(n.borderDash,t.borderDash)),e.lineDashOffset=ot(n.borderDashOffset,t.borderDashOffset),e.lineJoin=ot(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=ot(n.borderWidth,t.borderWidth),e.strokeStyle=ot(n.borderColor,t.borderColor)}function $$(e,t,n){e.lineTo(n.x,n.y)}function W$(e){return e.stepped?yz:e.tension||e.cubicInterpolationMode==="monotone"?_z:$$}function MC(e,t,n={}){const i=e.length,{start:s=0,end:r=i-1}=n,{start:o,end:a}=t,l=Math.max(s,o),u=Math.min(r,a),c=s<o&&r<o||s>a&&r>a;return{count:i,start:l,loop:t.loop,ilen:u<l&&!c?i+u-l:u-l}}function H$(e,t,n,i){const{points:s,options:r}=t,{count:o,start:a,loop:l,ilen:u}=MC(s,n,i),c=W$(r);let{move:d=!0,reverse:f}=i||{},m,y,_;for(m=0;m<=u;++m)y=s[(a+(f?u-m:m))%o],!y.skip&&(d?(e.moveTo(y.x,y.y),d=!1):c(e,_,y,f,r.stepped),_=y);return l&&(y=s[(a+(f?u:0))%o],c(e,_,y,f,r.stepped)),!!l}function q$(e,t,n,i){const s=t.points,{count:r,start:o,ilen:a}=MC(s,n,i),{move:l=!0,reverse:u}=i||{};let c=0,d=0,f,m,y,_,E,v;const T=R=>(o+(u?a-R:R))%r,b=()=>{_!==E&&(e.lineTo(c,E),e.lineTo(c,_),e.lineTo(c,v))};for(l&&(m=s[T(0)],e.moveTo(m.x,m.y)),f=0;f<=a;++f){if(m=s[T(f)],m.skip)continue;const R=m.x,D=m.y,N=R|0;N===y?(D<_?_=D:D>E&&(E=D),c=(d*c+R)/++d):(b(),e.lineTo(R,D),y=N,d=0,_=E=D),v=D}b()}function Ag(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!n?q$:H$}function K$(e){return e.stepped?Qz:e.tension||e.cubicInterpolationMode==="monotone"?Xz:Gs}function G$(e,t,n,i){let s=t._path;s||(s=t._path=new Path2D,t.path(s,n,i)&&s.closePath()),DC(e,t.options),e.stroke(s)}function Y$(e,t,n,i){const{segments:s,options:r}=t,o=Ag(t);for(const a of s)DC(e,r,a.style),e.beginPath(),o(e,t,a,{start:n,end:n+i-1})&&e.closePath(),e.stroke()}const Q$=typeof Path2D=="function";function X$(e,t,n,i){Q$&&!t.options.segment?G$(e,t,n,i):Y$(e,t,n,i)}class Ka extends Ds{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,n){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const s=i.spanGaps?this._loop:this._fullLoop;zz(this._points,i,t,s,n),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=r8(this,this.options.segment))}first(){const t=this.segments,n=this.points;return t.length&&n[t[0].start]}last(){const t=this.segments,n=this.points,i=t.length;return i&&n[t[i-1].end]}interpolate(t,n){const i=this.options,s=t[n],r=this.points,o=n8(this,{property:n,start:s,end:s});if(!o.length)return;const a=[],l=K$(i);let u,c;for(u=0,c=o.length;u<c;++u){const{start:d,end:f}=o[u],m=r[d],y=r[f];if(m===y){a.push(m);continue}const _=Math.abs((s-m[n])/(y[n]-m[n])),E=l(m,y,_,i.stepped);E[n]=t[n],a.push(E)}return a.length===1?a[0]:a}pathSegment(t,n,i){return Ag(this)(t,this,n,i)}path(t,n,i){const s=this.segments,r=Ag(this);let o=this._loop;n=n||0,i=i||this.points.length-n;for(const a of s)o&=r(t,this,a,{start:n,end:n+i-1});return!!o}draw(t,n,i,s){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(t.save(),X$(t,this,i,s),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}Z(Ka,"id","line"),Z(Ka,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Z(Ka,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Z(Ka,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function f1(e,t,n,i){const s=e.options,{[n]:r}=e.getProps([n],i);return Math.abs(t-r)<s.radius+s.hitRadius}class ah extends Ds{constructor(n){super();Z(this,"parsed");Z(this,"skip");Z(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,i,s){const r=this.options,{x:o,y:a}=this.getProps(["x","y"],s);return Math.pow(n-o,2)+Math.pow(i-a,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(n,i){return f1(this,n,"x",i)}inYRange(n,i){return f1(this,n,"y",i)}getCenterPoint(n){const{x:i,y:s}=this.getProps(["x","y"],n);return{x:i,y:s}}size(n){n=n||this.options||{};let i=n.radius||0;i=Math.max(i,i&&n.hoverRadius||0);const s=i&&n.borderWidth||0;return(i+s)*2}draw(n,i){const s=this.options;this.skip||s.radius<.1||!nu(this,i,this.size(s)/2)||(n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.fillStyle=s.backgroundColor,Sg(n,s,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}Z(ah,"id","point"),Z(ah,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Z(ah,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function NC(e,t){const{x:n,y:i,base:s,width:r,height:o}=e.getProps(["x","y","base","width","height"],t);let a,l,u,c,d;return e.horizontal?(d=o/2,a=Math.min(n,s),l=Math.max(n,s),u=i-d,c=i+d):(d=r/2,a=n-d,l=n+d,u=Math.min(i,s),c=Math.max(i,s)),{left:a,top:u,right:l,bottom:c}}function Zi(e,t,n,i){return e?0:Je(t,n,i)}function J$(e,t,n){const i=e.options.borderWidth,s=e.borderSkipped,r=hC(i);return{t:Zi(s.top,r.top,0,n),r:Zi(s.right,r.right,0,t),b:Zi(s.bottom,r.bottom,0,n),l:Zi(s.left,r.left,0,t)}}function Z$(e,t,n){const{enableBorderRadius:i}=e.getProps(["enableBorderRadius"]),s=e.options.borderRadius,r=yo(s),o=Math.min(t,n),a=e.borderSkipped,l=i||gt(s);return{topLeft:Zi(!l||a.top||a.left,r.topLeft,0,o),topRight:Zi(!l||a.top||a.right,r.topRight,0,o),bottomLeft:Zi(!l||a.bottom||a.left,r.bottomLeft,0,o),bottomRight:Zi(!l||a.bottom||a.right,r.bottomRight,0,o)}}function tW(e){const t=NC(e),n=t.right-t.left,i=t.bottom-t.top,s=J$(e,n/2,i/2),r=Z$(e,n/2,i/2);return{outer:{x:t.left,y:t.top,w:n,h:i,radius:r},inner:{x:t.left+s.l,y:t.top+s.t,w:n-s.l-s.r,h:i-s.t-s.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,r.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(s.b,s.r))}}}}function Mp(e,t,n,i){const s=t===null,r=n===null,a=e&&!(s&&r)&&NC(e,i);return a&&(s||nr(t,a.left,a.right))&&(r||nr(n,a.top,a.bottom))}function eW(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function nW(e,t){e.rect(t.x,t.y,t.w,t.h)}function Np(e,t,n={}){const i=e.x!==n.x?-t:0,s=e.y!==n.y?-t:0,r=(e.x+e.w!==n.x+n.w?t:0)-i,o=(e.y+e.h!==n.y+n.h?t:0)-s;return{x:e.x+i,y:e.y+s,w:e.w+r,h:e.h+o,radius:e.radius}}class lh extends Ds{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:n,options:{borderColor:i,backgroundColor:s}}=this,{inner:r,outer:o}=tW(this),a=eW(o.radius)?ad:nW;t.save(),(o.w!==r.w||o.h!==r.h)&&(t.beginPath(),a(t,Np(o,n,r)),t.clip(),a(t,Np(r,-n,o)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),a(t,Np(r,n)),t.fillStyle=s,t.fill(),t.restore()}inRange(t,n,i){return Mp(this,t,n,i)}inXRange(t,n){return Mp(this,t,null,n)}inYRange(t,n){return Mp(this,null,t,n)}getCenterPoint(t){const{x:n,y:i,base:s,horizontal:r}=this.getProps(["x","y","base","horizontal"],t);return{x:r?(n+s)/2:n,y:r?i:(i+s)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}Z(lh,"id","bar"),Z(lh,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),Z(lh,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const p1=(e,t)=>{let{boxHeight:n=t,boxWidth:i=t}=e;return e.usePointStyle&&(n=Math.min(n,t),i=e.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(t,n)}},iW=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class m1 extends Ds{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n,i){this.maxWidth=t,this.maxHeight=n,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let n=kt(t.generateLabels,[this.chart],this)||[];t.filter&&(n=n.filter(i=>t.filter(i,this.chart.data))),t.sort&&(n=n.sort((i,s)=>t.sort(i,s,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:t,ctx:n}=this;if(!t.display){this.width=this.height=0;return}const i=t.labels,s=be(i.font),r=s.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=p1(i,r);let u,c;n.font=s.string,this.isHorizontal()?(u=this.maxWidth,c=this._fitRows(o,r,a,l)+10):(c=this.maxHeight,u=this._fitCols(o,s,a,l)+10),this.width=Math.min(u,t.maxWidth||this.maxWidth),this.height=Math.min(c,t.maxHeight||this.maxHeight)}_fitRows(t,n,i,s){const{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],u=this.lineWidths=[0],c=s+a;let d=t;r.textAlign="left",r.textBaseline="middle";let f=-1,m=-c;return this.legendItems.forEach((y,_)=>{const E=i+n/2+r.measureText(y.text).width;(_===0||u[u.length-1]+E+2*a>o)&&(d+=c,u[u.length-(_>0?0:1)]=0,m+=c,f++),l[_]={left:0,top:m,row:f,width:E,height:s},u[u.length-1]+=E+a}),d}_fitCols(t,n,i,s){const{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],u=this.columnSizes=[],c=o-t;let d=a,f=0,m=0,y=0,_=0;return this.legendItems.forEach((E,v)=>{const{itemWidth:T,itemHeight:b}=sW(i,n,r,E,s);v>0&&m+b+2*a>c&&(d+=f+a,u.push({width:f,height:m}),y+=f+a,_++,f=m=0),l[v]={left:y,top:m,col:_,width:T,height:b},f=Math.max(f,T),m+=b+a}),d+=f,u.push({width:f,height:m}),d}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:i,labels:{padding:s},rtl:r}}=this,o=_o(r,this.left,this.width);if(this.isHorizontal()){let a=0,l=we(i,this.left+s,this.right-this.lineWidths[a]);for(const u of n)a!==u.row&&(a=u.row,l=we(i,this.left+s,this.right-this.lineWidths[a])),u.top+=this.top+t+s,u.left=o.leftForLtr(o.x(l),u.width),l+=u.width+s}else{let a=0,l=we(i,this.top+t+s,this.bottom-this.columnSizes[a].height);for(const u of n)u.col!==a&&(a=u.col,l=we(i,this.top+t+s,this.bottom-this.columnSizes[a].height)),u.top=l,u.left+=this.left+s,u.left=o.leftForLtr(o.x(u.left),u.width),l+=u.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;ov(t,this),this._draw(),av(t)}}_draw(){const{options:t,columnSizes:n,lineWidths:i,ctx:s}=this,{align:r,labels:o}=t,a=$t.color,l=_o(t.rtl,this.left,this.width),u=be(o.font),{padding:c}=o,d=u.size,f=d/2;let m;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=u.string;const{boxWidth:y,boxHeight:_,itemHeight:E}=p1(o,d),v=function(N,S,w){if(isNaN(y)||y<=0||isNaN(_)||_<0)return;s.save();const x=ot(w.lineWidth,1);if(s.fillStyle=ot(w.fillStyle,a),s.lineCap=ot(w.lineCap,"butt"),s.lineDashOffset=ot(w.lineDashOffset,0),s.lineJoin=ot(w.lineJoin,"miter"),s.lineWidth=x,s.strokeStyle=ot(w.strokeStyle,a),s.setLineDash(ot(w.lineDash,[])),o.usePointStyle){const k={radius:_*Math.SQRT2/2,pointStyle:w.pointStyle,rotation:w.rotation,borderWidth:x},A=l.xPlus(N,y/2),C=S+f;uC(s,k,A,C,o.pointStyleWidth&&y)}else{const k=S+Math.max((d-_)/2,0),A=l.leftForLtr(N,y),C=yo(w.borderRadius);s.beginPath(),Object.values(C).some(P=>P!==0)?ad(s,{x:A,y:k,w:y,h:_,radius:C}):s.rect(A,k,y,_),s.fill(),x!==0&&s.stroke()}s.restore()},T=function(N,S,w){iu(s,w.text,N,S+E/2,u,{strikethrough:w.hidden,textAlign:l.textAlign(w.textAlign)})},b=this.isHorizontal(),R=this._computeTitleHeight();b?m={x:we(r,this.left+c,this.right-i[0]),y:this.top+c+R,line:0}:m={x:this.left+c,y:we(r,this.top+R+c,this.bottom-n[0].height),line:0},yC(this.ctx,t.textDirection);const D=E+c;this.legendItems.forEach((N,S)=>{s.strokeStyle=N.fontColor,s.fillStyle=N.fontColor;const w=s.measureText(N.text).width,x=l.textAlign(N.textAlign||(N.textAlign=o.textAlign)),k=y+f+w;let A=m.x,C=m.y;l.setWidth(this.width),b?S>0&&A+k+c>this.right&&(C=m.y+=D,m.line++,A=m.x=we(r,this.left+c,this.right-i[m.line])):S>0&&C+D>this.bottom&&(A=m.x=A+n[m.line].width+c,m.line++,C=m.y=we(r,this.top+R+c,this.bottom-n[m.line].height));const P=l.x(A);if(v(P,C,N),A=sz(x,A+y+f,b?A+k:this.right,t.rtl),T(l.x(A),C,N),b)m.x+=k+c;else if(typeof N.text!="string"){const nt=u.lineHeight;m.y+=OC(N,nt)+c}else m.y+=D}),_C(this.ctx,t.textDirection)}drawTitle(){const t=this.options,n=t.title,i=be(n.font),s=vn(n.padding);if(!n.display)return;const r=_o(t.rtl,this.left,this.width),o=this.ctx,a=n.position,l=i.size/2,u=s.top+l;let c,d=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),c=this.top+u,d=we(t.align,d,this.right-f);else{const y=this.columnSizes.reduce((_,E)=>Math.max(_,E.height),0);c=u+we(t.align,this.top,this.bottom-y-t.labels.padding-this._computeTitleHeight())}const m=we(a,d,d+f);o.textAlign=r.textAlign(sv(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=i.string,iu(o,n.text,m,c,i)}_computeTitleHeight(){const t=this.options.title,n=be(t.font),i=vn(t.padding);return t.display?n.lineHeight+i.height:0}_getLegendItemAt(t,n){let i,s,r;if(nr(t,this.left,this.right)&&nr(n,this.top,this.bottom)){for(r=this.legendHitBoxes,i=0;i<r.length;++i)if(s=r[i],nr(t,s.left,s.left+s.width)&&nr(n,s.top,s.top+s.height))return this.legendItems[i]}return null}handleEvent(t){const n=this.options;if(!aW(t.type,n))return;const i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const s=this._hoveredItem,r=iW(s,i);s&&!r&&kt(n.onLeave,[t,s,this],this),this._hoveredItem=i,i&&!r&&kt(n.onHover,[t,i,this],this)}else i&&kt(n.onClick,[t,i,this],this)}}function sW(e,t,n,i,s){const r=rW(i,e,t,n),o=oW(s,i,t.lineHeight);return{itemWidth:r,itemHeight:o}}function rW(e,t,n,i){let s=e.text;return s&&typeof s!="string"&&(s=s.reduce((r,o)=>r.length>o.length?r:o)),t+n.size/2+i.measureText(s).width}function oW(e,t,n){let i=e;return typeof t.text!="string"&&(i=OC(t,n)),i}function OC(e,t){const n=e.text?e.text.length:0;return t*n}function aW(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var lW={id:"legend",_element:m1,start(e,t,n){const i=e.legend=new m1({ctx:e.ctx,options:n,chart:e});fn.configure(e,i,n),fn.addBox(e,i)},stop(e){fn.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const i=e.legend;fn.configure(e,i,n),i.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const i=t.datasetIndex,s=n.chart;s.isDatasetVisible(i)?(s.hide(i),t.hidden=!0):(s.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:s,color:r,useBorderRadius:o,borderRadius:a}}=e.legend.options;return e._getSortedDatasetMetas().map(l=>{const u=l.controller.getStyle(n?0:void 0),c=vn(u.borderWidth);return{text:t[l.index].label,fillStyle:u.backgroundColor,fontColor:r,hidden:!l.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:u.borderColor,pointStyle:i||u.pointStyle,rotation:u.rotation,textAlign:s||u.textAlign,borderRadius:o&&(a||u.borderRadius),datasetIndex:l.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class VC extends Ds{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=n;const s=Jt(i.text)?i.text.length:1;this._padding=vn(i.padding);const r=s*be(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:n,left:i,bottom:s,right:r,options:o}=this,a=o.align;let l=0,u,c,d;return this.isHorizontal()?(c=we(a,i,r),d=n+t,u=r-i):(o.position==="left"?(c=i+t,d=we(a,s,n),l=ae*-.5):(c=r-t,d=we(a,n,s),l=ae*.5),u=s-n),{titleX:c,titleY:d,maxWidth:u,rotation:l}}draw(){const t=this.ctx,n=this.options;if(!n.display)return;const i=be(n.font),r=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:u}=this._drawArgs(r);iu(t,n.text,0,0,i,{color:n.color,maxWidth:l,rotation:u,textAlign:sv(n.align),textBaseline:"middle",translation:[o,a]})}}function uW(e,t){const n=new VC({ctx:e.ctx,options:t,chart:e});fn.configure(e,n,t),fn.addBox(e,n),e.titleBlock=n}var cW={id:"title",_element:VC,start(e,t,n){uW(e,n)},stop(e){const t=e.titleBlock;fn.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const i=e.titleBlock;fn.configure(e,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Ga={average(e){if(!e.length)return!1;let t,n,i=new Set,s=0,r=0;for(t=0,n=e.length;t<n;++t){const a=e[t].element;if(a&&a.hasValue()){const l=a.tooltipPosition();i.add(l.x),s+=l.y,++r}}return r===0||i.size===0?!1:{x:[...i].reduce((a,l)=>a+l)/i.size,y:s/r}},nearest(e,t){if(!e.length)return!1;let n=t.x,i=t.y,s=Number.POSITIVE_INFINITY,r,o,a;for(r=0,o=e.length;r<o;++r){const l=e[r].element;if(l&&l.hasValue()){const u=l.getCenterPoint(),c=xg(t,u);c<s&&(s=c,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,i=l.y}return{x:n,y:i}}};function Vn(e,t){return t&&(Jt(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function si(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function hW(e,t){const{element:n,datasetIndex:i,index:s}=t,r=e.getDatasetMeta(i).controller,{label:o,value:a}=r.getLabelAndValue(s);return{chart:e,label:o,parsed:r.getParsed(s),raw:e.data.datasets[i].data[s],formattedValue:a,dataset:r.getDataset(),dataIndex:s,datasetIndex:i,element:n}}function g1(e,t){const n=e.chart.ctx,{body:i,footer:s,title:r}=e,{boxWidth:o,boxHeight:a}=t,l=be(t.bodyFont),u=be(t.titleFont),c=be(t.footerFont),d=r.length,f=s.length,m=i.length,y=vn(t.padding);let _=y.height,E=0,v=i.reduce((R,D)=>R+D.before.length+D.lines.length+D.after.length,0);if(v+=e.beforeBody.length+e.afterBody.length,d&&(_+=d*u.lineHeight+(d-1)*t.titleSpacing+t.titleMarginBottom),v){const R=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;_+=m*R+(v-m)*l.lineHeight+(v-1)*t.bodySpacing}f&&(_+=t.footerMarginTop+f*c.lineHeight+(f-1)*t.footerSpacing);let T=0;const b=function(R){E=Math.max(E,n.measureText(R).width+T)};return n.save(),n.font=u.string,wt(e.title,b),n.font=l.string,wt(e.beforeBody.concat(e.afterBody),b),T=t.displayColors?o+2+t.boxPadding:0,wt(i,R=>{wt(R.before,b),wt(R.lines,b),wt(R.after,b)}),T=0,n.font=c.string,wt(e.footer,b),n.restore(),E+=y.width,{width:E,height:_}}function dW(e,t){const{y:n,height:i}=t;return n<i/2?"top":n>e.height-i/2?"bottom":"center"}function fW(e,t,n,i){const{x:s,width:r}=i,o=n.caretSize+n.caretPadding;if(e==="left"&&s+r+o>t.width||e==="right"&&s-r-o<0)return!0}function pW(e,t,n,i){const{x:s,width:r}=n,{width:o,chartArea:{left:a,right:l}}=e;let u="center";return i==="center"?u=s<=(a+l)/2?"left":"right":s<=r/2?u="left":s>=o-r/2&&(u="right"),fW(u,e,t,n)&&(u="center"),u}function y1(e,t,n){const i=n.yAlign||t.yAlign||dW(e,n);return{xAlign:n.xAlign||t.xAlign||pW(e,t,n,i),yAlign:i}}function mW(e,t){let{x:n,width:i}=e;return t==="right"?n-=i:t==="center"&&(n-=i/2),n}function gW(e,t,n){let{y:i,height:s}=e;return t==="top"?i+=n:t==="bottom"?i-=s+n:i-=s/2,i}function _1(e,t,n,i){const{caretSize:s,caretPadding:r,cornerRadius:o}=e,{xAlign:a,yAlign:l}=n,u=s+r,{topLeft:c,topRight:d,bottomLeft:f,bottomRight:m}=yo(o);let y=mW(t,a);const _=gW(t,l,u);return l==="center"?a==="left"?y+=u:a==="right"&&(y-=u):a==="left"?y-=Math.max(c,f)+s:a==="right"&&(y+=Math.max(d,m)+s),{x:Je(y,0,i.width-t.width),y:Je(_,0,i.height-t.height)}}function Ic(e,t,n){const i=vn(n.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-i.right:e.x+i.left}function v1(e){return Vn([],si(e))}function yW(e,t,n){return Ar(e,{tooltip:t,tooltipItems:n,type:"tooltip"})}function w1(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const LC={beforeTitle:ni,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,i=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return n[t.dataIndex]}return""},afterTitle:ni,beforeBody:ni,beforeLabel:ni,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return yt(n)||(t+=n),t},labelColor(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:ni,afterBody:ni,beforeFooter:ni,footer:ni,afterFooter:ni};function Le(e,t,n,i){const s=e[t].call(n,i);return typeof s>"u"?LC[t].call(n,i):s}class kg extends Ds{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const n=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&n.options.animation&&i.animations,r=new wC(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=yW(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,n){const{callbacks:i}=n,s=Le(i,"beforeTitle",this,t),r=Le(i,"title",this,t),o=Le(i,"afterTitle",this,t);let a=[];return a=Vn(a,si(s)),a=Vn(a,si(r)),a=Vn(a,si(o)),a}getBeforeBody(t,n){return v1(Le(n.callbacks,"beforeBody",this,t))}getBody(t,n){const{callbacks:i}=n,s=[];return wt(t,r=>{const o={before:[],lines:[],after:[]},a=w1(i,r);Vn(o.before,si(Le(a,"beforeLabel",this,r))),Vn(o.lines,Le(a,"label",this,r)),Vn(o.after,si(Le(a,"afterLabel",this,r))),s.push(o)}),s}getAfterBody(t,n){return v1(Le(n.callbacks,"afterBody",this,t))}getFooter(t,n){const{callbacks:i}=n,s=Le(i,"beforeFooter",this,t),r=Le(i,"footer",this,t),o=Le(i,"afterFooter",this,t);let a=[];return a=Vn(a,si(s)),a=Vn(a,si(r)),a=Vn(a,si(o)),a}_createItems(t){const n=this._active,i=this.chart.data,s=[],r=[],o=[];let a=[],l,u;for(l=0,u=n.length;l<u;++l)a.push(hW(this.chart,n[l]));return t.filter&&(a=a.filter((c,d,f)=>t.filter(c,d,f,i))),t.itemSort&&(a=a.sort((c,d)=>t.itemSort(c,d,i))),wt(a,c=>{const d=w1(t.callbacks,c);s.push(Le(d,"labelColor",this,c)),r.push(Le(d,"labelPointStyle",this,c)),o.push(Le(d,"labelTextColor",this,c))}),this.labelColors=s,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=a,a}update(t,n){const i=this.options.setContext(this.getContext()),s=this._active;let r,o=[];if(!s.length)this.opacity!==0&&(r={opacity:0});else{const a=Ga[i.position].call(this,s,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const l=this._size=g1(this,i),u=Object.assign({},a,l),c=y1(this.chart,i,u),d=_1(i,u,c,this.chart);this.xAlign=c.xAlign,this.yAlign=c.yAlign,r={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(t,n,i,s){const r=this.getCaretPosition(t,i,s);n.lineTo(r.x1,r.y1),n.lineTo(r.x2,r.y2),n.lineTo(r.x3,r.y3)}getCaretPosition(t,n,i){const{xAlign:s,yAlign:r}=this,{caretSize:o,cornerRadius:a}=i,{topLeft:l,topRight:u,bottomLeft:c,bottomRight:d}=yo(a),{x:f,y:m}=t,{width:y,height:_}=n;let E,v,T,b,R,D;return r==="center"?(R=m+_/2,s==="left"?(E=f,v=E-o,b=R+o,D=R-o):(E=f+y,v=E+o,b=R-o,D=R+o),T=E):(s==="left"?v=f+Math.max(l,c)+o:s==="right"?v=f+y-Math.max(u,d)-o:v=this.caretX,r==="top"?(b=m,R=b-o,E=v-o,T=v+o):(b=m+_,R=b+o,E=v+o,T=v-o),D=b),{x1:E,x2:v,x3:T,y1:b,y2:R,y3:D}}drawTitle(t,n,i){const s=this.title,r=s.length;let o,a,l;if(r){const u=_o(i.rtl,this.x,this.width);for(t.x=Ic(this,i.titleAlign,i),n.textAlign=u.textAlign(i.titleAlign),n.textBaseline="middle",o=be(i.titleFont),a=i.titleSpacing,n.fillStyle=i.titleColor,n.font=o.string,l=0;l<r;++l)n.fillText(s[l],u.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+a,l+1===r&&(t.y+=i.titleMarginBottom-a)}}_drawColorBox(t,n,i,s,r){const o=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:u}=r,c=be(r.bodyFont),d=Ic(this,"left",r),f=s.x(d),m=l<c.lineHeight?(c.lineHeight-l)/2:0,y=n.y+m;if(r.usePointStyle){const _={radius:Math.min(u,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},E=s.leftForLtr(f,u)+u/2,v=y+l/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,Sg(t,_,E,v),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,Sg(t,_,E,v)}else{t.lineWidth=gt(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const _=s.leftForLtr(f,u),E=s.leftForLtr(s.xPlus(f,1),u-2),v=yo(o.borderRadius);Object.values(v).some(T=>T!==0)?(t.beginPath(),t.fillStyle=r.multiKeyBackground,ad(t,{x:_,y,w:u,h:l,radius:v}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),ad(t,{x:E,y:y+1,w:u-2,h:l-2,radius:v}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(_,y,u,l),t.strokeRect(_,y,u,l),t.fillStyle=o.backgroundColor,t.fillRect(E,y+1,u-2,l-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,n,i){const{body:s}=this,{bodySpacing:r,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:u,boxPadding:c}=i,d=be(i.bodyFont);let f=d.lineHeight,m=0;const y=_o(i.rtl,this.x,this.width),_=function(w){n.fillText(w,y.x(t.x+m),t.y+f/2),t.y+=f+r},E=y.textAlign(o);let v,T,b,R,D,N,S;for(n.textAlign=o,n.textBaseline="middle",n.font=d.string,t.x=Ic(this,E,i),n.fillStyle=i.bodyColor,wt(this.beforeBody,_),m=a&&E!=="right"?o==="center"?u/2+c:u+2+c:0,R=0,N=s.length;R<N;++R){for(v=s[R],T=this.labelTextColors[R],n.fillStyle=T,wt(v.before,_),b=v.lines,a&&b.length&&(this._drawColorBox(n,t,R,y,i),f=Math.max(d.lineHeight,l)),D=0,S=b.length;D<S;++D)_(b[D]),f=d.lineHeight;wt(v.after,_)}m=0,f=d.lineHeight,wt(this.afterBody,_),t.y-=r}drawFooter(t,n,i){const s=this.footer,r=s.length;let o,a;if(r){const l=_o(i.rtl,this.x,this.width);for(t.x=Ic(this,i.footerAlign,i),t.y+=i.footerMarginTop,n.textAlign=l.textAlign(i.footerAlign),n.textBaseline="middle",o=be(i.footerFont),n.fillStyle=i.footerColor,n.font=o.string,a=0;a<r;++a)n.fillText(s[a],l.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+i.footerSpacing}}drawBackground(t,n,i,s){const{xAlign:r,yAlign:o}=this,{x:a,y:l}=t,{width:u,height:c}=i,{topLeft:d,topRight:f,bottomLeft:m,bottomRight:y}=yo(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(a+d,l),o==="top"&&this.drawCaret(t,n,i,s),n.lineTo(a+u-f,l),n.quadraticCurveTo(a+u,l,a+u,l+f),o==="center"&&r==="right"&&this.drawCaret(t,n,i,s),n.lineTo(a+u,l+c-y),n.quadraticCurveTo(a+u,l+c,a+u-y,l+c),o==="bottom"&&this.drawCaret(t,n,i,s),n.lineTo(a+m,l+c),n.quadraticCurveTo(a,l+c,a,l+c-m),o==="center"&&r==="left"&&this.drawCaret(t,n,i,s),n.lineTo(a,l+d),n.quadraticCurveTo(a,l,a+d,l),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(t){const n=this.chart,i=this.$animations,s=i&&i.x,r=i&&i.y;if(s||r){const o=Ga[t.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=g1(this,t),l=Object.assign({},o,this._size),u=y1(n,t,l),c=_1(t,l,u,n);(s._to!==c.x||r._to!==c.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,c))}}_willRender(){return!!this.opacity}draw(t){const n=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(n);const s={width:this.width,height:this.height},r={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=vn(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(t.save(),t.globalAlpha=i,this.drawBackground(r,t,s,n),yC(t,n.textDirection),r.y+=o.top,this.drawTitle(r,t,n),this.drawBody(r,t,n),this.drawFooter(r,t,n),_C(t,n.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,n){const i=this._active,s=t.map(({datasetIndex:a,index:l})=>{const u=this.chart.getDatasetMeta(a);if(!u)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:u.data[l],index:l}}),r=!sd(i,s),o=this._positionChanged(s,n);(r||o)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,n,i=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,r=this._active||[],o=this._getActiveElements(t,r,n,i),a=this._positionChanged(o,t),l=n||!sd(o,r)||a;return l&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,n))),l}_getActiveElements(t,n,i,s){const r=this.options;if(t.type==="mouseout")return[];if(!s)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(t,r.mode,r,i);return r.reverse&&o.reverse(),o}_positionChanged(t,n){const{caretX:i,caretY:s,options:r}=this,o=Ga[r.position].call(this,t,n);return o!==!1&&(i!==o.x||s!==o.y)}}Z(kg,"positioners",Ga);var _W={id:"tooltip",_element:kg,positioners:Ga,afterInit(e,t,n){n&&(e.tooltip=new kg({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:LC},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const vW=(e,t,n,i)=>(typeof t=="string"?(n=e.push(t)-1,i.unshift({index:n,label:t})):isNaN(t)&&(n=null),n);function wW(e,t,n,i){const s=e.indexOf(t);if(s===-1)return vW(e,t,n,i);const r=e.lastIndexOf(t);return s!==r?n:s}const TW=(e,t)=>e===null?null:Je(Math.round(e),0,t);function T1(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class Pg extends na{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const n=this._addedLabels;if(n.length){const i=this.getLabels();for(const{index:s,label:r}of n)i[s]===r&&i.splice(s,1);this._addedLabels=[]}super.init(t)}parse(t,n){if(yt(t))return null;const i=this.getLabels();return n=isFinite(n)&&i[n]===t?n:wW(i,t,ot(n,t),this._addedLabels),TW(n,i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:i,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),n||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){const t=this.min,n=this.max,i=this.options.offset,s=[];let r=this.getLabels();r=t===0&&n===r.length-1?r:r.slice(t,n+1),this._valueRange=Math.max(r.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=t;o<=n;o++)s.push({value:o});return s}getLabelForValue(t){return T1.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}Z(Pg,"id","category"),Z(Pg,"defaults",{ticks:{callback:T1}});function xW(e,t){const n=[],{bounds:s,step:r,min:o,max:a,precision:l,count:u,maxTicks:c,maxDigits:d,includeBounds:f}=e,m=r||1,y=c-1,{min:_,max:E}=t,v=!yt(o),T=!yt(a),b=!yt(u),R=(E-_)/(d+1);let D=EE((E-_)/y/m)*m,N,S,w,x;if(D<1e-14&&!v&&!T)return[{value:_},{value:E}];x=Math.ceil(E/D)-Math.floor(_/D),x>y&&(D=EE(x*D/y/m)*m),yt(l)||(N=Math.pow(10,l),D=Math.ceil(D*N)/N),s==="ticks"?(S=Math.floor(_/D)*D,w=Math.ceil(E/D)*D):(S=_,w=E),v&&T&&r&&G9((a-o)/r,D/1e3)?(x=Math.round(Math.min((a-o)/D,c)),D=(a-o)/x,S=o,w=a):b?(S=v?o:S,w=T?a:w,x=u-1,D=(w-S)/x):(x=(w-S)/D,gl(x,Math.round(x),D/1e3)?x=Math.round(x):x=Math.ceil(x));const k=Math.max(SE(D),SE(S));N=Math.pow(10,yt(l)?k:l),S=Math.round(S*N)/N,w=Math.round(w*N)/N;let A=0;for(v&&(f&&S!==o?(n.push({value:o}),S<o&&A++,gl(Math.round((S+A*D)*N)/N,o,x1(o,R,e))&&A++):S<o&&A++);A<x;++A){const C=Math.round((S+A*D)*N)/N;if(T&&C>a)break;n.push({value:C})}return T&&f&&w!==a?n.length&&gl(n[n.length-1].value,a,x1(a,R,e))?n[n.length-1].value=a:n.push({value:a}):(!T||w===a)&&n.push({value:w}),n}function x1(e,t,{horizontal:n,minRotation:i}){const s=er(i),r=(n?Math.sin(s):Math.cos(s))||.001,o=.75*t*(""+e).length;return Math.min(t/r,o)}class EW extends na{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,n){return yt(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:n,maxDefined:i}=this.getUserBounds();let{min:s,max:r}=this;const o=l=>s=n?s:l,a=l=>r=i?r:l;if(t){const l=ti(s),u=ti(r);l<0&&u<0?a(0):l>0&&u>0&&o(0)}if(s===r){let l=r===0?1:Math.abs(r*.05);a(r+l),t||o(s-l)}this.min=s,this.max=r}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:n,stepSize:i}=t,s;return i?(s=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),n=n||11),n&&(s=Math.min(n,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,n=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const s={maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},r=this._range||this,o=xW(s,r);return t.bounds==="ticks"&&Y9(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let n=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const s=(i-n)/Math.max(t.length-1,1)/2;n-=s,i+=s}this._startValue=n,this._endValue=i,this._valueRange=i-n}getLabelForValue(t){return aC(t,this.chart.options.locale,this.options.ticks.format)}}class Cg extends EW{determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=_n(t)?t:0,this.max=_n(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),n=t?this.width:this.height,i=er(this.options.ticks.minRotation),s=(t?Math.sin(i):Math.cos(i))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,r.lineHeight/s))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}Z(Cg,"id","linear"),Z(Cg,"defaults",{ticks:{callback:lC.formatters.numeric}});const Zd={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Ue=Object.keys(Zd);function E1(e,t){return e-t}function S1(e,t){if(yt(t))return null;const n=e._adapter,{parser:i,round:s,isoWeekday:r}=e._parseOpts;let o=t;return typeof i=="function"&&(o=i(o)),_n(o)||(o=typeof i=="string"?n.parse(o,i):n.parse(o)),o===null?null:(s&&(o=s==="week"&&(eu(r)||r===!0)?n.startOf(o,"isoWeek",r):n.startOf(o,s)),+o)}function b1(e,t,n,i){const s=Ue.length;for(let r=Ue.indexOf(e);r<s-1;++r){const o=Zd[Ue[r]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-t)/(a*o.size))<=i)return Ue[r]}return Ue[s-1]}function SW(e,t,n,i,s){for(let r=Ue.length-1;r>=Ue.indexOf(n);r--){const o=Ue[r];if(Zd[o].common&&e._adapter.diff(s,i,o)>=t-1)return o}return Ue[n?Ue.indexOf(n):0]}function bW(e){for(let t=Ue.indexOf(e)+1,n=Ue.length;t<n;++t)if(Zd[Ue[t]].common)return Ue[t]}function I1(e,t,n){if(!n)e[t]=!0;else if(n.length){const{lo:i,hi:s}=iv(n,t),r=n[i]>=t?n[i]:n[s];e[r]=!0}}function IW(e,t,n,i){const s=e._adapter,r=+s.startOf(t[0].value,i),o=t[t.length-1].value;let a,l;for(a=r;a<=o;a=+s.add(a,1,i))l=n[a],l>=0&&(t[l].major=!0);return t}function A1(e,t,n){const i=[],s={},r=t.length;let o,a;for(o=0;o<r;++o)a=t[o],s[a]=o,i.push({value:a,major:!1});return r===0||!n?i:IW(e,i,s,n)}class cd extends na{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,n={}){const i=t.time||(t.time={}),s=this._adapter=new N8._date(t.adapters.date);s.init(n),ml(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=n.normalized}parse(t,n){return t===void 0?null:S1(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,n=this._adapter,i=t.time.unit||"day";let{min:s,max:r,minDefined:o,maxDefined:a}=this.getUserBounds();function l(u){!o&&!isNaN(u.min)&&(s=Math.min(s,u.min)),!a&&!isNaN(u.max)&&(r=Math.max(r,u.max))}(!o||!a)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=_n(s)&&!isNaN(s)?s:+n.startOf(Date.now(),i),r=_n(r)&&!isNaN(r)?r:+n.endOf(Date.now(),i)+1,this.min=Math.min(s,r-1),this.max=Math.max(s+1,r)}_getLabelBounds(){const t=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(n=t[0],i=t[t.length-1]),{min:n,max:i}}buildTicks(){const t=this.options,n=t.time,i=t.ticks,s=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const r=this.min,o=this.max,a=ez(s,r,o);return this._unit=n.unit||(i.autoSkip?b1(n.minUnit,this.min,this.max,this._getLabelCapacity(r)):SW(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:bW(this._unit),this.initOffsets(s),t.reverse&&a.reverse(),A1(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let n=0,i=0,s,r;this.options.offset&&t.length&&(s=this.getDecimalForValue(t[0]),t.length===1?n=1-s:n=(this.getDecimalForValue(t[1])-s)/2,r=this.getDecimalForValue(t[t.length-1]),t.length===1?i=r:i=(r-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;n=Je(n,0,o),i=Je(i,0,o),this._offsets={start:n,end:i,factor:1/(n+1+i)}}_generate(){const t=this._adapter,n=this.min,i=this.max,s=this.options,r=s.time,o=r.unit||b1(r.minUnit,n,i,this._getLabelCapacity(n)),a=ot(s.ticks.stepSize,1),l=o==="week"?r.isoWeekday:!1,u=eu(l)||l===!0,c={};let d=n,f,m;if(u&&(d=+t.startOf(d,"isoWeek",l)),d=+t.startOf(d,u?"day":o),t.diff(i,n,o)>1e5*a)throw new Error(n+" and "+i+" are too far apart with stepSize of "+a+" "+o);const y=s.ticks.source==="data"&&this.getDataTimestamps();for(f=d,m=0;f<i;f=+t.add(f,a,o),m++)I1(c,f,y);return(f===i||s.bounds==="ticks"||m===1)&&I1(c,f,y),Object.keys(c).sort(E1).map(_=>+_)}getLabelForValue(t){const n=this._adapter,i=this.options.time;return i.tooltipFormat?n.format(t,i.tooltipFormat):n.format(t,i.displayFormats.datetime)}format(t,n){const s=this.options.time.displayFormats,r=this._unit,o=n||s[r];return this._adapter.format(t,o)}_tickFormatFunction(t,n,i,s){const r=this.options,o=r.ticks.callback;if(o)return kt(o,[t,n,i],this);const a=r.time.displayFormats,l=this._unit,u=this._majorUnit,c=l&&a[l],d=u&&a[u],f=i[n],m=u&&d&&f&&f.major;return this._adapter.format(t,s||(m?d:c))}generateTickLabels(t){let n,i,s;for(n=0,i=t.length;n<i;++n)s=t[n],s.label=this._tickFormatFunction(s.value,n,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const n=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((n.start+i)*n.factor)}getValueForPixel(t){const n=this._offsets,i=this.getDecimalForPixel(t)/n.factor-n.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const n=this.options.ticks,i=this.ctx.measureText(t).width,s=er(this.isHorizontal()?n.maxRotation:n.minRotation),r=Math.cos(s),o=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:i*r+a*o,h:i*o+a*r}}_getLabelCapacity(t){const n=this.options.time,i=n.displayFormats,s=i[n.unit]||i.millisecond,r=this._tickFormatFunction(t,0,A1(this,[t],this._majorUnit),s),o=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],n,i;if(t.length)return t;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,i=s.length;n<i;++n)t=t.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let n,i;if(t.length)return t;const s=this.getLabels();for(n=0,i=s.length;n<i;++n)t.push(S1(this,s[n]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return sC(t.sort(E1))}}Z(cd,"id","time"),Z(cd,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Ac(e,t,n){let i=0,s=e.length-1,r,o,a,l;n?(t>=e[i].pos&&t<=e[s].pos&&({lo:i,hi:s}=ir(e,"pos",t)),{pos:r,time:a}=e[i],{pos:o,time:l}=e[s]):(t>=e[i].time&&t<=e[s].time&&({lo:i,hi:s}=ir(e,"time",t)),{time:r,pos:a}=e[i],{time:o,pos:l}=e[s]);const u=o-r;return u?a+(l-a)*(t-r)/u:a}class k1 extends cd{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(t);this._minPos=Ac(n,this.min),this._tableRange=Ac(n,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:n,max:i}=this,s=[],r=[];let o,a,l,u,c;for(o=0,a=t.length;o<a;++o)u=t[o],u>=n&&u<=i&&s.push(u);if(s.length<2)return[{time:n,pos:0},{time:i,pos:1}];for(o=0,a=s.length;o<a;++o)c=s[o+1],l=s[o-1],u=s[o],Math.round((c+l)/2)!==u&&r.push({time:u,pos:o/(a-1)});return r}_generate(){const t=this.min,n=this.max;let i=super.getDataTimestamps();return(!i.includes(t)||!i.length)&&i.splice(0,0,t),(!i.includes(n)||i.length===1)&&i.push(n),i.sort((s,r)=>s-r)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const n=this.getDataTimestamps(),i=this.getLabelTimestamps();return n.length&&i.length?t=this.normalize(n.concat(i)):t=n.length?n:i,t=this._cache.all=t,t}getDecimalForValue(t){return(Ac(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const n=this._offsets,i=this.getDecimalForPixel(t)/n.factor-n.end;return Ac(this._table,i*this._tableRange+this._minPos,!0)}}Z(k1,"id","timeseries"),Z(k1,"defaults",cd.defaults);const FC="label";function P1(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function AW(e,t){const n=e.options;n&&t&&Object.assign(n,t)}function jC(e,t){e.labels=t}function BC(e,t,n=FC){const i=[];e.datasets=t.map(s=>{const r=e.datasets.find(o=>o[n]===s[n]);return!r||!s.data||i.includes(r)?{...s}:(i.push(r),Object.assign(r,s),r)})}function kW(e,t=FC){const n={labels:[],datasets:[]};return jC(n,e.labels),BC(n,e.datasets,t),n}function PW(e,t){const{height:n=150,width:i=300,redraw:s=!1,datasetIdKey:r,type:o,data:a,options:l,plugins:u=[],fallbackContent:c,updateMode:d,...f}=e,m=F.useRef(null),y=F.useRef(null),_=()=>{m.current&&(y.current=new Jd(m.current,{type:o,data:kW(a,r),options:l&&{...l},plugins:u}),P1(t,y.current))},E=()=>{P1(t,null),y.current&&(y.current.destroy(),y.current=null)};return F.useEffect(()=>{!s&&y.current&&l&&AW(y.current,l)},[s,l]),F.useEffect(()=>{!s&&y.current&&jC(y.current.config.data,a.labels)},[s,a.labels]),F.useEffect(()=>{!s&&y.current&&a.datasets&&BC(y.current.config.data,a.datasets,r)},[s,a.datasets]),F.useEffect(()=>{y.current&&(s?(E(),setTimeout(_)):y.current.update(d))},[s,l,a.labels,a.datasets,d]),F.useEffect(()=>{y.current&&(E(),setTimeout(_))},[o]),F.useEffect(()=>(_(),()=>E()),[]),M.jsx("canvas",{ref:m,role:"img",height:n,width:i,...f,children:c})}const CW=F.forwardRef(PW);function UC(e,t){return Jd.register(t),F.forwardRef((n,i)=>M.jsx(CW,{...n,ref:i,type:e}))}const RW=UC("line",sh),DW=UC("bar",ih);Jd.register(Pg,Cg,lh,ah,Ka,cW,_W,lW);const MW=({data:e})=>{const t={responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:"Activity Frequency"}}};return M.jsx(DW,{options:t,data:e})},NW=({data:e})=>{const t={responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:"Activity Trends (Last 7 Days)"}}};return M.jsx(RW,{options:t,data:e})},C1=({label:e,value:t})=>M.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[M.jsx("p",{className:"text-sm text-gray-500",children:e}),M.jsx("p",{className:"text-2xl font-bold",children:t})]}),OW=e=>{const t=e.reduce((s,r)=>(s[r.activity_type]=(s[r.activity_type]||0)+1,s),{}),n=Object.keys(t),i=Object.values(t);return{labels:n,datasets:[{label:"Activity Count",data:i,backgroundColor:"rgba(244, 114, 182, 0.6)"}]}},VW=(e,t)=>{let n;const i=new Date;if(t==="day")n=Array.from({length:24},(r,o)=>`${o}:00`),Fo(i);else if(t==="week")n=Array.from({length:7},(r,o)=>{const a=d9(i,6-o);return Xl(a,"EEE")}),wr(i);else{const r=KP(i).getDate();n=Array.from({length:r},(o,a)=>`${a+1}`),GP(i)}const s=n.map((r,o)=>e.filter(a=>{const l=new Date(a.activity_time);if(t==="day")return l.getHours()===o;if(t==="week")return Xl(l,"EEE")===r;if(t==="month")return l.getDate()===o+1}).length);return{labels:n,datasets:[{label:"Activities",data:s,borderColor:"rgb(244, 114, 182)",backgroundColor:"rgba(244, 114, 182, 0.5)"}]}};function LW({activities:e}){const[t,n]=F.useState("day"),i=F.useMemo(()=>{const l=new Date;let u,c;switch(t){case"day":u=Fo(l),c=cU(l);break;case"week":u=wr(l),c=dU(l);break;case"month":u=GP(l),c=KP(l);break}return e.filter(d=>{const f=new Date(d.activity_time);return f>=u&&f<=c})},[e,t]),{totalNaps:s,totalWalks:r}=F.useMemo(()=>{let l=0,u=0;i.forEach(d=>{if(d.activity_type==="sleep"&&d.end_time){const f=new Date(d.activity_time),m=new Date(d.end_time);f.getHours()>=7&&f.getHours()<=21&&(l+=wg(m,f))}d.activity_type==="walk"&&d.end_time&&(u+=wg(new Date(d.end_time),new Date(d.activity_time)))});const c=d=>{const f=Math.floor(d/60),m=d%60;return`${f>0?`${f}h `:""}${m}m`};return{totalNaps:c(l),totalWalks:c(u)}},[i]),o=F.useMemo(()=>OW(i),[i]),a=F.useMemo(()=>VW(i,t),[i,t]);return M.jsxs("div",{children:[M.jsx("div",{className:"flex justify-center mb-6",children:M.jsxs("div",{className:"flex items-center bg-gray-200 rounded-lg p-1",children:[M.jsx("button",{onClick:()=>n("day"),className:`px-4 py-1.5 text-sm font-medium rounded-md transition-all ${t==="day"?"bg-white text-pink-600 shadow-sm":"text-gray-600"}`,children:"Day"}),M.jsx("button",{onClick:()=>n("week"),className:`px-4 py-1.5 text-sm font-medium rounded-md transition-all ${t==="week"?"bg-white text-pink-600 shadow-sm":"text-gray-600"}`,children:"Week"}),M.jsx("button",{onClick:()=>n("month"),className:`px-4 py-1.5 text-sm font-medium rounded-md transition-all ${t==="month"?"bg-white text-pink-600 shadow-sm":"text-gray-600"}`,children:"Month"})]})}),M.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[M.jsx(C1,{label:"Total Naps",value:s}),M.jsx(C1,{label:"Total Walks",value:r})]}),M.jsxs("div",{className:"space-y-8",children:[M.jsxs("div",{className:"p-4 rounded-lg bg-white shadow-sm",children:[M.jsx("h2",{className:"text-xl font-bold mb-4",children:"Activity Frequency"}),M.jsx(MW,{data:o})]}),M.jsxs("div",{className:"p-4 rounded-lg bg-white shadow-sm",children:[M.jsx("h2",{className:"text-xl font-bold mb-4",children:"Activity Trend"}),M.jsx(NW,{data:a})]})]})]})}function FW({onAuthenticated:e}){const[t,n]=F.useState(""),[i,s]=F.useState(!1),[r,o]=F.useState(!1),a=l=>{if(l.preventDefault(),t==="junebugwibble"){const u=new Date;u.setTime(u.getTime()+365*24*60*60*1e3);const c=`expires=${u.toUTCString()}`;document.cookie=`junebug_authenticated=true;${c};path=/`,e()}else s(!0),n("")};return M.jsxs("div",{className:"min-h-screen bg-pink-50 flex flex-col items-center justify-center p-4",children:[M.jsxs("div",{className:"text-center mb-8",children:[M.jsx("img",{src:"/june.png",alt:"June",className:"w-24 h-24 rounded-full mx-auto mb-4"}),M.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"The June-bug Diaries "}),M.jsx("p",{className:"text-gray-600",children:"Please enter the passcode to continue."})]}),M.jsxs("form",{onSubmit:a,className:"w-full max-w-xs",children:[M.jsxs("div",{className:"relative",children:[M.jsx("input",{type:r?"text":"password",value:t,onChange:l=>n(l.target.value),className:`w-full px-4 py-2 text-center border rounded-lg focus:ring-1 focus:border-transparent ${i?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-pink-500"}`,placeholder:"Enter passcode"}),M.jsx("button",{type:"button",onClick:()=>o(!r),className:"absolute inset-y-0 right-0 px-3 flex items-center text-gray-500 hover:text-gray-700",children:r?M.jsx(i3,{size:20}):M.jsx(s3,{size:20})})]}),i&&M.jsx("p",{className:"text-red-500 text-sm text-center mt-2",children:"Incorrect passcode. Please try again."}),M.jsx("button",{type:"submit",className:"w-full mt-4 bg-pink-600 text-white rounded-lg py-2 font-semibold hover:bg-pink-700",children:"Unlock"})]})]})}const jW=[{type:"wee",label:"Wee",icon:M.jsx(n3,{size:24})},{type:"poo",label:"Poo",icon:M.jsx(e3,{size:24})},{type:"meal",label:"Meal",icon:M.jsx(c3,{size:24})}],BW=({onQuickLog:e})=>M.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-md mb-4",children:[M.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2 text-center",children:"Quick Log"}),M.jsx("div",{className:"flex justify-around",children:jW.map(({type:t,label:n,icon:i})=>M.jsxs("button",{onClick:()=>e(t),className:"flex flex-col items-center gap-1 text-gray-600 hover:text-pink-600 transition-colors",children:[M.jsx("div",{className:"p-3 bg-gray-100 rounded-full",children:i}),M.jsx("span",{className:"text-xs",children:n})]},t))})]});function UW({message:e,onConfirm:t,onCancel:n}){return M.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:M.jsxs(zn.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-2xl shadow-xl p-6 w-full max-w-sm mx-auto",children:[M.jsx("p",{className:"text-center text-gray-800 mb-6",children:e}),M.jsxs("div",{className:"flex justify-center gap-4",children:[M.jsx("button",{onClick:t,className:"px-6 py-2 bg-pink-600 text-white rounded-lg font-semibold hover:bg-pink-700 transition-colors",children:"Yes"}),M.jsx("button",{onClick:n,className:"px-6 py-2 bg-gray-200 text-gray-800 rounded-lg font-semibold hover:bg-gray-300 transition-colors",children:"No"})]})]})})}const zW=()=>{const[e,t]=F.useState("Junie"),[n,i]=F.useState("Golden Retriever"),[s,r]=F.useState("2023-06-01"),[o,a]=F.useState(!1),l=()=>{a(!0)},u=()=>{a(!1)};return M.jsxs("div",{className:"p-4 rounded-lg bg-white shadow-sm",children:[M.jsxs("div",{className:"flex justify-between items-center mb-4",children:[M.jsx("h2",{className:"text-2xl font-bold",children:"Puppy Profile"}),o?M.jsxs("button",{onClick:u,className:"flex items-center gap-2 px-3 py-1.5 text-sm font-medium text-white bg-pink-600 rounded-lg",children:[M.jsx(l3,{size:14}),M.jsx("span",{children:"Save"})]}):M.jsxs("button",{onClick:l,className:"flex items-center gap-2 px-3 py-1.5 text-sm font-medium text-pink-600 bg-pink-100 rounded-lg",children:[M.jsx(h3,{size:14}),M.jsx("span",{children:"Edit"})]})]}),M.jsxs("div",{className:"space-y-4",children:[M.jsxs("div",{children:[M.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Name"}),M.jsx("input",{type:"text",value:e,onChange:c=>t(c.target.value),readOnly:!o,className:`mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-pink-500 focus:ring-pink-500 sm:text-sm ${o?"":"bg-gray-100"}`})]}),M.jsxs("div",{children:[M.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Breed"}),M.jsx("input",{type:"text",value:n,onChange:c=>i(c.target.value),readOnly:!o,className:`mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-pink-500 focus:ring-pink-500 sm:text-sm ${o?"":"bg-gray-100"}`})]}),M.jsxs("div",{children:[M.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Birthday"}),M.jsx("input",{type:"date",value:s,onChange:c=>r(c.target.value),readOnly:!o,className:`mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-pink-500 focus:ring-pink-500 sm:text-sm ${o?"":"bg-gray-100"}`})]})]})]})},$W=({theme:e,setTheme:t})=>M.jsxs("div",{className:"space-y-8",children:[M.jsx(zW,{}),M.jsxs("div",{className:"p-4 rounded-lg bg-white shadow-sm",children:[M.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Theme"}),M.jsxs("div",{className:"flex justify-around p-2 bg-gray-100 rounded-lg",children:[M.jsx("button",{onClick:()=>t("light"),className:`px-6 py-2 rounded-lg text-sm font-medium transition-all ${e==="light"?"bg-pink-600 text-white shadow-md":"bg-transparent text-gray-700"}`,children:"Light"}),M.jsx("button",{onClick:()=>t("dark"),className:`px-6 py-2 rounded-lg text-sm font-medium transition-all ${e==="dark"?"bg-pink-600 text-white shadow-md":"bg-transparent text-gray-700"}`,children:"Dark"})]})]})]}),WW=e=>{var i;const n=`; ${document.cookie}`.split(`; ${e}=`);if(n.length===2)return(i=n.pop())==null?void 0:i.split(";").shift()};function HW(){const[e,t]=F.useState([]),[n,i]=F.useState(!0),[s,r]=F.useState("timeline"),[o,a]=F.useState(new Date),[l,u]=F.useState(null),[c,d]=F.useState(null),[f,m]=F.useState(WW("junebug_authenticated")==="true"),[y,_]=F.useState(null),[E,v]=F.useState("light");F.useEffect(()=>{f&&T()},[f]),F.useEffect(()=>{document.body.className=`${E}-theme`},[E]);const T=async()=>{i(!0);try{const A=lc(Oi,"puppy_activities"),C=UL(A,zL("activity_time","desc")),nt=(await qL(C)).docs.map(X=>{const lt=X.data();return{id:X.id,...lt,activity_time:lt.activity_time.toDate().toISOString(),end_time:lt.end_time?lt.end_time.toDate().toISOString():void 0,parent_activity_id:lt.parent_activity_id||null}});t(nt)}catch(A){console.error("Error fetching activities:",A)}finally{i(!1)}},b=async(A,C,P,nt)=>{if((A.includes("med")||A.includes("vet"))&&Array.isArray(C)){const B=RT(Oi),q=A.find(K=>K==="med"||K==="vet");C.forEach(K=>{const dt=$a(lc(Oi,"puppy_activities")),st={activity_type:q,activity_time:pt.fromDate(new Date(K)),notes:P,created_at:pt.now()};B.set(dt,st)}),await B.commit(),await T(),r("timeline");return}const X=e.find(B=>B.activity_type==="walk"&&!B.end_time),lt=new Date(C),it=async(B=!1)=>{const q=RT(Oi);let K;if(X&&!B){const st=$a(Oi,"puppy_activities",X.id);q.update(st,{end_time:pt.fromDate(lt)})}const dt=[...A].sort((st,ee)=>st==="walk"?-1:ee==="walk"?1:0);for(const st of dt){const ee=$a(lc(Oi,"puppy_activities")),bt={activity_type:st,activity_time:pt.fromDate(lt),notes:P,created_at:pt.now()};(st==="walk"||st==="sleep")&&nt&&(bt.end_time=pt.fromDate(new Date(nt))),st==="walk"&&(K=ee.id),B&&X?bt.parent_activity_id=X.id:st!=="walk"&&K&&(bt.parent_activity_id=K),q.set(ee,bt)}await q.commit(),await T(),r("timeline")};X&&A.every(B=>B!=="sleep")?_({message:"An activity is already in progress. Do you want to end the current walk?",onConfirm:()=>{it(!1),_(null)},onCancel:()=>{it(!0),_(null)}}):X&&A.includes("sleep")?await it(!1):await it()},R=async A=>{const C=e.find(nt=>nt.activity_type==="walk"&&!nt.end_time),P={activity_type:A,activity_time:pt.now(),created_at:pt.now(),notes:"Quick Log"};C&&(A==="wee"||A==="poo")&&(P.parent_activity_id=C.id);try{await GL(lc(Oi,"puppy_activities"),P),await T()}catch(nt){console.error("Error quick logging activity:",nt)}},D=async A=>{try{const C=$a(Oi,"puppy_activities",A);await KL(C),await T()}catch(C){console.error("Error deleting activity:",C)}},N=A=>{u(A),r("timeline")},S=A=>{d(A),r("add")},w=()=>{m(!0)};if(!f)return M.jsx(FW,{onAuthenticated:w});const x=l?e.filter(A=>new Date(A.activity_time).toDateString()===l.toDateString()):e,k=()=>M.jsx(th,{mode:"wait",children:M.jsx(zn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2},children:(()=>{switch(s){case"timeline":return M.jsxs(M.Fragment,{children:[M.jsx(BW,{onQuickLog:R}),M.jsx(mE,{activities:x,onDelete:D,timelineDate:l,onClearTimelineDate:()=>u(null)})]});case"add":return M.jsx(XB,{onSubmit:b,onBack:()=>{r(c?"calendar":"timeline"),d(null)},date:c});case"stats":return M.jsx(LW,{activities:e});case"calendar":return M.jsx("div",{className:"pb-24",children:M.jsx($P,{selectedDate:o,onDateSelect:a,activityDates:new Set(e.map(A=>new Date(A.activity_time).toDateString())),onViewDay:N,onAddActivityForDate:S})});case"settings":return M.jsx($W,{theme:E,setTheme:v});default:return M.jsx(mE,{activities:e,onDelete:D,timelineDate:null,onClearTimelineDate:()=>u(null)})}})()},s)});return n&&f?M.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:M.jsx("div",{className:"text-center",children:M.jsx("p",{className:"text-gray-600",children:"Loading June's diary..."})})}):M.jsxs("div",{className:"min-h-screen font-sans bg-pink-50",children:[M.jsx("header",{className:"bg-white shadow-sm sticky top-0 z-10",children:M.jsx("div",{className:"max-w-md mx-auto px-4 py-4 flex justify-center",children:M.jsxs("div",{className:"flex items-center gap-2",children:[M.jsx("img",{src:"/june.png",alt:"June",className:"w-10 h-10 rounded-full"}),M.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"The June-bug Diaries "})]})})}),M.jsx("main",{className:"max-w-md mx-auto px-4 py-6",children:k()}),s==="timeline"&&M.jsx(zn.button,{initial:{scale:0,y:100},animate:{scale:1,y:0},exit:{scale:0,y:100},onClick:()=>{d(null),r("add")},className:"fixed bottom-24 right-8 bg-pink-600 text-white rounded-full p-4 shadow-lg z-20",children:M.jsx(a3,{size:28})}),M.jsx("nav",{className:"fixed bottom-0 inset-x-0 bg-white border-t z-10 pb-4 pt-2",children:M.jsxs("div",{className:"max-w-md mx-auto flex justify-around relative",children:[M.jsx(kc,{label:"Calendar",icon:M.jsx(J4,{size:24}),activeView:s,view:"calendar",setView:r}),M.jsx(kc,{label:"Timeline",icon:M.jsx(o3,{size:24}),activeView:s,view:"timeline",setView:r}),M.jsx(kc,{label:"Stats",icon:M.jsx(r3,{size:24}),activeView:s,view:"stats",setView:r}),M.jsx(kc,{label:"Settings",icon:M.jsx(u3,{size:24}),activeView:s,view:"settings",setView:r})]})}),y&&M.jsx(UW,{message:y.message,onConfirm:y.onConfirm,onCancel:y.onCancel})]})}const kc=F.memo(({label:e,icon:t,activeView:n,view:i,setView:s})=>{const r=n===i;return M.jsxs("button",{onClick:()=>s(i),className:`flex flex-col items-center justify-center h-16 w-20 relative transition-colors duration-300 ${r?"text-pink-600":"text-gray-500 hover:text-pink-500"}`,children:[r&&M.jsx(zn.div,{layoutId:"active-nav-highlight",className:"absolute inset-0 bg-pink-100 rounded-lg",style:{borderRadius:16},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}}),M.jsx("div",{className:"relative z-10",children:t}),M.jsx("span",{className:"text-xs relative z-10",children:e})]})});$b(document.getElementById("root")).render(M.jsx(F.StrictMode,{children:M.jsx(HW,{})}));
